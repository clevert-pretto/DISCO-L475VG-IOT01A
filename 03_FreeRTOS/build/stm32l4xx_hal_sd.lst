ARM GAS  /tmp/ccsLb3N5.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"stm32l4xx_hal_sd.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c"
  20              		.section	.rodata.CHANNEL_OFFSET_TAB,"a"
  21              		.align	2
  24              	CHANNEL_OFFSET_TAB:
  25 0000 081C3044 		.ascii	"\010\0340DXl\200"
  25      586C80
  26              		.section	.text.HAL_SD_Init,"ax",%progbits
  27              		.align	1
  28              		.global	HAL_SD_Init
  29              		.syntax unified
  30              		.thumb
  31              		.thumb_func
  33              	HAL_SD_Init:
  34              	.LFB445:
   1:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
   2:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ******************************************************************************
   3:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @file    stm32l4xx_hal_sd.c
   4:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @author  MCD Application Team
   5:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief   SD card HAL module driver.
   6:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          This file provides firmware functions to manage the following
   7:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          functionalities of the Secure Digital (SD) peripheral:
   8:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *           + Initialization and de-initialization functions
   9:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *           + IO operation functions
  10:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *           + Peripheral Control functions
  11:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *           + Peripheral State functions
  12:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *
  13:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ******************************************************************************
  14:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @attention
  15:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *
  16:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * Copyright (c) 2017 STMicroelectronics.
  17:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * All rights reserved.
  18:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *
  19:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * This software is licensed under terms that can be found in the LICENSE file
  20:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * in the root directory of this software component.
  21:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  22:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *
  23:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ******************************************************************************
  24:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   @verbatim
  25:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==============================================================================
ARM GAS  /tmp/ccsLb3N5.s 			page 2


  26:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                         ##### How to use this driver #####
  27:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==============================================================================
  28:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
  29:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     This driver implements a high level communication layer for read and write from/to
  30:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     this memory. The needed STM32 hardware resources (SDMMC and GPIO) are performed by
  31:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     the user in HAL_SD_MspInit() function (MSP layer).
  32:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     Basically, the MSP layer configuration should be the same as we provide in the
  33:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     examples.
  34:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     You can easily tailor this configuration according to hardware resources.
  35:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
  36:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
  37:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     This driver is a generic layered driver for SDMMC memories which uses the HAL
  38:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     SDMMC driver functions to interface with SD and uSD cards devices.
  39:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     It is used as follows:
  40:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
  41:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (#)Initialize the SDMMC low level resources by implementing the HAL_SD_MspInit() API:
  42:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         (##) Call the function HAL_RCCEx_PeriphCLKConfig with RCC_PERIPHCLK_SDMMC1 for
  43:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         PeriphClockSelection and select SDMMC1 clock source (MSI, main PLL or PLLSAI1)
  44:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         (##) Enable the SDMMC interface clock using __HAL_RCC_SDMMC1_CLK_ENABLE();
  45:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         (##) SDMMC pins configuration for SD card
  46:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) Enable the clock for the SDMMC GPIOs using the functions __HAL_RCC_GPIOx_CLK_ENAB
  47:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) Configure these SDMMC pins as alternate function pull-up using HAL_GPIO_Init()
  48:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                   and according to your pin assignment;
  49:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         (##) On STM32L4Rx/STM32L4Sxx devices, no DMA configuration is needed,
  50:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         (##) An internal DMA for SDMMC Peripheral is used.
  51:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         (##) On other devices, perform DMA configuration if you need to use DMA process (HAL_SD_Rea
  52:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****              and HAL_SD_WriteBlocks_DMA() APIs).
  53:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) Enable the DMAx interface clock using __HAL_RCC_DMAx_CLK_ENABLE();
  54:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) Configure the DMA using the function HAL_DMA_Init() with predeclared and filled.
  55:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         (##) NVIC configuration if you need to use interrupt process when using DMA transfer.
  56:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) Configure the SDMMC and DMA interrupt priorities using functions
  57:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                   HAL_NVIC_SetPriority(); DMA priority is superior to SDMMC's priority
  58:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) Enable the NVIC DMA and SDMMC IRQs using function HAL_NVIC_EnableIRQ()
  59:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) SDMMC interrupts are managed using the macros __HAL_SD_ENABLE_IT()
  60:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                   and __HAL_SD_DISABLE_IT() inside the communication process.
  61:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) SDMMC interrupts pending bits are managed using the macros __HAL_SD_GET_IT()
  62:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                   and __HAL_SD_CLEAR_IT()
  63:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         (##) NVIC configuration if you need to use interrupt process (HAL_SD_ReadBlocks_IT()
  64:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****              and HAL_SD_WriteBlocks_IT() APIs).
  65:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) Configure the SDMMC interrupt priorities using function HAL_NVIC_SetPriority();
  66:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) Enable the NVIC SDMMC IRQs using function HAL_NVIC_EnableIRQ()
  67:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) SDMMC interrupts are managed using the macros __HAL_SD_ENABLE_IT()
  68:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                   and __HAL_SD_DISABLE_IT() inside the communication process.
  69:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (+++) SDMMC interrupts pending bits are managed using the macros __HAL_SD_GET_IT()
  70:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                   and __HAL_SD_CLEAR_IT()
  71:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (#) At this stage, you can perform SD read/write/erase operations after SD card initialization
  72:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
  73:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
  74:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *** SD Card Initialization and configuration ***
  75:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ================================================
  76:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
  77:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     To initialize the SD Card, use the HAL_SD_Init() function. It Initializes
  78:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     SDMMC Peripheral(STM32 side) and the SD Card, and put it into StandBy State (Ready for data tra
  79:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     This function provide the following operations:
  80:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
  81:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (#) Apply the SD Card initialization process at 400KHz and check the SD Card
  82:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         type (Standard Capacity or High Capacity). You can change or adapt this
ARM GAS  /tmp/ccsLb3N5.s 			page 3


  83:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         frequency by adjusting the "ClockDiv" field.
  84:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         The SD Card frequency (SDMMC_CK) is computed as follows:
  85:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
  86:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****            SDMMC_CK = SDMMCCLK / (2 * ClockDiv) on STM32L4Rx/STM32L4Sxx devices
  87:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****            SDMMC_CK = SDMMCCLK / (ClockDiv + 2) on other devices
  88:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
  89:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         In initialization mode and according to the SD Card standard,
  90:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         make sure that the SDMMC_CK frequency doesn't exceed 400KHz.
  91:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
  92:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         This phase of initialization is done through SDMMC_Init() and
  93:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         SDMMC_PowerState_ON() SDMMC low level APIs.
  94:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
  95:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (#) Initialize the SD card. The API used is HAL_SD_InitCard().
  96:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         This phase allows the card initialization and identification
  97:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         and check the SD Card type (Standard Capacity or High Capacity)
  98:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         The initialization flow is compatible with SD standard.
  99:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         This API (HAL_SD_InitCard()) could be used also to reinitialize the card in case
 101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         of plug-off plug-in.
 102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (#) Configure the SD Card Data transfer frequency. You can change or adapt this
 104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         frequency by adjusting the "ClockDiv" field.
 105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         In transfer mode and according to the SD Card standard, make sure that the
 106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     SDMMC_CK frequency doesn't exceed 25MHz and 100MHz in High-speed mode switch.
 107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (#) Select the corresponding SD Card according to the address read with the step 2.
 109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (#) Configure the SD Card in wide bus mode: 4-bits data.
 111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *** SD Card Read operation ***
 113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==============================
 114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
 115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) You can read from SD card in polling mode by using function HAL_SD_ReadBlocks().
 116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be
 117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         chosen as 512 bytes).
 118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation
 119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
 120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         After this, you have to ensure that the transfer is done correctly. The check is done
 121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         through HAL_SD_GetCardState() function for SD card state.
 122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) You can read from SD card in DMA mode by using function HAL_SD_ReadBlocks_DMA().
 124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be
 125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         chosen as 512 bytes).
 126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation
 127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
 128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         After this, you have to ensure that the transfer is done correctly. The check is done
 129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         through HAL_SD_GetCardState() function for SD card state.
 130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You could also check the DMA transfer process through the SD Rx interrupt event.
 131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) You can read from SD card in Interrupt mode by using function HAL_SD_ReadBlocks_IT().
 133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be
 134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         chosen as 512 bytes).
 135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation
 136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
 137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         After this, you have to ensure that the transfer is done correctly. The check is done
 138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         through HAL_SD_GetCardState() function for SD card state.
 139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You could also check the IT transfer process through the SD Rx interrupt event.
ARM GAS  /tmp/ccsLb3N5.s 			page 4


 140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *** SD Card Write operation ***
 142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ===============================
 143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
 144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) You can write to SD card in polling mode by using function HAL_SD_WriteBlocks().
 145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be
 146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         chosen as 512 bytes).
 147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation
 148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
 149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         After this, you have to ensure that the transfer is done correctly. The check is done
 150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         through HAL_SD_GetCardState() function for SD card state.
 151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) You can write to SD card in DMA mode by using function HAL_SD_WriteBlocks_DMA().
 153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be
 154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         chosen as 512 bytes).
 155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation
 156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
 157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         After this, you have to ensure that the transfer is done correctly. The check is done
 158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         through HAL_SD_GetCardState() function for SD card state.
 159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You could also check the DMA transfer process through the SD Tx interrupt event.
 160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) You can write to SD card in Interrupt mode by using function HAL_SD_WriteBlocks_IT().
 162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be
 163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         chosen as 512 bytes).
 164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation
 165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
 166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         After this, you have to ensure that the transfer is done correctly. The check is done
 167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         through HAL_SD_GetCardState() function for SD card state.
 168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         You could also check the IT transfer process through the SD Tx interrupt event.
 169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *** SD card status ***
 171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ======================
 172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
 173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) The SD Status contains status bits that are related to the SD Memory
 174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         Card proprietary features. To get SD card status use the HAL_SD_GetCardStatus().
 175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *** SD card information ***
 177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ===========================
 178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
 179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) To get SD card information, you can use the function HAL_SD_GetCardInfo().
 180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         It returns useful information about the SD card such as block size, card type,
 181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         block number ...
 182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *** SD card CSD register ***
 184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ============================
 185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) The HAL_SD_GetCardCSD() API allows to get the parameters of the CSD register.
 186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         Some of the CSD parameters are useful for card initialization and identification.
 187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *** SD card CID register ***
 189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ============================
 190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) The HAL_SD_GetCardCID() API allows to get the parameters of the CID register.
 191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         Some of the CSD parameters are useful for card initialization and identification.
 192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *** SD HAL driver macros list ***
 194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==================================
 195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
 196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     Below the list of most used macros in SD HAL driver.
ARM GAS  /tmp/ccsLb3N5.s 			page 5


 197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) __HAL_SD_ENABLE : Enable the SD device
 199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) __HAL_SD_DISABLE : Disable the SD device
 200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) __HAL_SD_DMA_ENABLE: Enable the SDMMC DMA transfer
 201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) __HAL_SD_DMA_DISABLE: Disable the SDMMC DMA transfer
 202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) __HAL_SD_ENABLE_IT: Enable the SD device interrupt
 203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) __HAL_SD_DISABLE_IT: Disable the SD device interrupt
 204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) __HAL_SD_GET_FLAG:Check whether the specified SD flag is set or not
 205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (+) __HAL_SD_CLEAR_FLAG: Clear the SD's pending flags
 206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (@) You can refer to the SD HAL driver header file for more useful macros
 208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *** Callback registration ***
 210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   =============================================
 211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
 212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     The compilation define USE_HAL_SD_REGISTER_CALLBACKS when set to 1
 213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     allows the user to configure dynamically the driver callbacks.
 214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     Use Functions HAL_SD_RegisterCallback() to register a user callback,
 216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     it allows to register following callbacks:
 217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) TxCpltCallback : callback when a transmission transfer is completed.
 218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) RxCpltCallback : callback when a reception transfer is completed.
 219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) ErrorCallback : callback when error occurs.
 220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) AbortCpltCallback : callback when abort is completed.
 221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) Read_DMADblBuf0CpltCallback : callback when the DMA reception of first buffer is complete
 222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) Read_DMADblBuf1CpltCallback : callback when the DMA reception of second buffer is complet
 223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) Write_DMADblBuf0CpltCallback : callback when the DMA transmission of first buffer is comp
 224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) Write_DMADblBuf1CpltCallback : callback when the DMA transmission of second buffer is com
 225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) MspInitCallback    : SD MspInit.
 226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) MspDeInitCallback  : SD MspDeInit.
 227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     This function takes as parameters the HAL peripheral handle, the Callback ID
 228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     and a pointer to the user callback function.
 229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     For specific callbacks TransceiverCallback use dedicated register callbacks:
 230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     respectively HAL_SD_RegisterTransceiverCallback().
 231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     Use function HAL_SD_UnRegisterCallback() to reset a callback to the default
 233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     weak (surcharged) function. It allows to reset following callbacks:
 234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) TxCpltCallback : callback when a transmission transfer is completed.
 235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) RxCpltCallback : callback when a reception transfer is completed.
 236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) ErrorCallback : callback when error occurs.
 237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) AbortCpltCallback : callback when abort is completed.
 238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) Read_DMADblBuf0CpltCallback : callback when the DMA reception of first buffer is complete
 239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) Read_DMADblBuf1CpltCallback : callback when the DMA reception of second buffer is complet
 240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) Write_DMADblBuf0CpltCallback : callback when the DMA transmission of first buffer is comp
 241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) Write_DMADblBuf1CpltCallback : callback when the DMA transmission of second buffer is com
 242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) MspInitCallback    : SD MspInit.
 243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (+) MspDeInitCallback  : SD MspDeInit.
 244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     This function) takes as parameters the HAL peripheral handle and the Callback ID.
 245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     For specific callbacks TransceiverCallback use dedicated unregister callbacks:
 246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     respectively HAL_SD_UnRegisterTransceiverCallback().
 247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     By default, after the HAL_SD_Init and if the state is HAL_SD_STATE_RESET
 249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     all callbacks are reset to the corresponding legacy weak (surcharged) functions.
 250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     Exception done for MspInit and MspDeInit callbacks that are respectively
 251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     reset to the legacy weak (surcharged) functions in the HAL_SD_Init
 252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     and  HAL_SD_DeInit only when these callbacks are null (not registered beforehand).
 253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     If not, MspInit or MspDeInit are not null, the HAL_SD_Init and HAL_SD_DeInit
ARM GAS  /tmp/ccsLb3N5.s 			page 6


 254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     keep and use the user MspInit/MspDeInit callbacks (registered beforehand)
 255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     Callbacks can be registered/unregistered in READY state only.
 257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     Exception done for MspInit/MspDeInit callbacks that can be registered/unregistered
 258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     in READY or RESET state, thus registered (user) MspInit/DeInit callbacks can be used
 259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     during the Init/DeInit.
 260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     In that case first register the MspInit/MspDeInit user callbacks
 261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     using HAL_SD_RegisterCallback before calling HAL_SD_DeInit
 262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     or HAL_SD_Init function.
 263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     When The compilation define USE_HAL_SD_REGISTER_CALLBACKS is set to 0 or
 265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     not defined, the callback registering feature is not available
 266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     and weak (surcharged) callbacks are used.
 267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   @endverbatim
 269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ******************************************************************************
 270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Includes ------------------------------------------------------------------*/
 273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #include "stm32l4xx_hal.h"
 274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(SDMMC1)
 276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /** @addtogroup STM32L4xx_HAL_Driver
 278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @{
 279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /** @addtogroup SD
 282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @{
 283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #ifdef HAL_SD_MODULE_ENABLED
 286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Private typedef -----------------------------------------------------------*/
 288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Private define ------------------------------------------------------------*/
 289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /** @addtogroup SD_Private_Defines
 290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @{
 291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Frequencies used in the driver for clock divider calculation */
 294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #define SD_INIT_FREQ                   400000U   /* Initialization phase : 400 kHz max */
 295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #define SD_NORMAL_SPEED_FREQ           25000000U /* Normal speed phase : 25 MHz max */
 296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #define SD_HIGH_SPEED_FREQ             50000000U /* High speed phase : 50 MHz max */
 297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @}
 299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Private macro -------------------------------------------------------------*/
 302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Private variables ---------------------------------------------------------*/
 303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Private function prototypes -----------------------------------------------*/
 304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Private functions ---------------------------------------------------------*/
 305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /** @defgroup SD_Private_Functions SD Private Functions
 306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @{
 307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_InitCard(SD_HandleTypeDef *hsd);
 309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_PowerON(SD_HandleTypeDef *hsd);
 310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_SendSDStatus(SD_HandleTypeDef *hsd, uint32_t *pSDstatus);
ARM GAS  /tmp/ccsLb3N5.s 			page 7


 311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_SendStatus(SD_HandleTypeDef *hsd, uint32_t *pCardStatus);
 312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_WideBus_Enable(SD_HandleTypeDef *hsd);
 313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_WideBus_Disable(SD_HandleTypeDef *hsd);
 314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_FindSCR(SD_HandleTypeDef *hsd, uint32_t *pSCR);
 315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_PowerOFF(SD_HandleTypeDef *hsd);
 316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_Write_IT(SD_HandleTypeDef *hsd);
 317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_Read_IT(SD_HandleTypeDef *hsd);
 318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
 319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void     SD_DMATransmitCplt(DMA_HandleTypeDef *hdma);
 320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void     SD_DMAReceiveCplt(DMA_HandleTypeDef *hdma);
 321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void     SD_DMAError(DMA_HandleTypeDef *hdma);
 322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void     SD_DMATxAbort(DMA_HandleTypeDef *hdma);
 323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void     SD_DMARxAbort(DMA_HandleTypeDef *hdma);
 324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
 325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_UltraHighSpeed(SD_HandleTypeDef *hsd);
 326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_DDR_Mode(SD_HandleTypeDef *hsd);
 327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
 328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
 329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @}
 331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Exported functions --------------------------------------------------------*/
 334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /** @addtogroup SD_Exported_Functions
 335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @{
 336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /** @addtogroup SD_Exported_Functions_Group1
 339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *  @brief   Initialization and de-initialization functions
 340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *
 341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** @verbatim
 342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==============================================================================
 343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           ##### Initialization and de-initialization functions #####
 344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==============================================================================
 345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
 346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     This section provides functions allowing to initialize/de-initialize the SD
 347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     card device to be ready for use.
 348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** @endverbatim
 350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @{
 351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Initializes the SD according to the specified parameters in the
 355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             SD_HandleTypeDef and create the associated handle.
 356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to the SD handle
 357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
 358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_Init(SD_HandleTypeDef *hsd)
 360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
  35              		.loc 1 360 1
  36              		.cfi_startproc
  37              		@ args = 0, pretend = 0, frame = 8
  38              		@ frame_needed = 1, uses_anonymous_args = 0
  39 0000 80B5     		push	{r7, lr}
  40              		.cfi_def_cfa_offset 8
  41              		.cfi_offset 7, -8
ARM GAS  /tmp/ccsLb3N5.s 			page 8


  42              		.cfi_offset 14, -4
  43 0002 82B0     		sub	sp, sp, #8
  44              		.cfi_def_cfa_offset 16
  45 0004 00AF     		add	r7, sp, #0
  46              		.cfi_def_cfa_register 7
  47 0006 7860     		str	r0, [r7, #4]
 361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
 362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_CardStatusTypeDef CardStatus;
 363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t speedgrade;
 364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t unitsize;
 365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t tickstart;
 366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
 367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
 368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Check the SD handle allocation */
 370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd == NULL)
  48              		.loc 1 370 6
  49 0008 7B68     		ldr	r3, [r7, #4]
  50 000a 002B     		cmp	r3, #0
  51 000c 01D1     		bne	.L2
 371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
  52              		.loc 1 372 12
  53 000e 0123     		movs	r3, #1
  54 0010 38E0     		b	.L3
  55              	.L2:
 373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Check the parameters */
 376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_ALL_INSTANCE(hsd->Instance));
 377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_CLOCK_EDGE(hsd->Init.ClockEdge));
 378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
 379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_CLOCK_BYPASS(hsd->Init.ClockBypass));
 380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
 381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
 382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_CLOCK_POWER_SAVE(hsd->Init.ClockPowerSave));
 383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_BUS_WIDE(hsd->Init.BusWide));
 384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_HARDWARE_FLOW_CONTROL(hsd->Init.HardwareFlowControl));
 385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_CLKDIV(hsd->Init.ClockDiv));
 386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_RESET)
  56              		.loc 1 387 10
  57 0012 7B68     		ldr	r3, [r7, #4]
  58 0014 93F83430 		ldrb	r3, [r3, #52]
  59 0018 DBB2     		uxtb	r3, r3
  60              		.loc 1 387 6
  61 001a 002B     		cmp	r3, #0
  62 001c 05D1     		bne	.L4
 388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Allocate lock resource and initialize it */
 390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Lock = HAL_UNLOCKED;
  63              		.loc 1 390 15
  64 001e 7B68     		ldr	r3, [r7, #4]
  65 0020 0022     		movs	r2, #0
  66 0022 1A77     		strb	r2, [r3, #28]
 391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
 392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Reset Callback pointers in HAL_SD_STATE_RESET only */
ARM GAS  /tmp/ccsLb3N5.s 			page 9


 393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->TxCpltCallback    = HAL_SD_TxCpltCallback;
 394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->RxCpltCallback    = HAL_SD_RxCpltCallback;
 395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCallback     = HAL_SD_ErrorCallback;
 396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->AbortCpltCallback = HAL_SD_AbortCallback;
 397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
 398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Read_DMADblBuf0CpltCallback = HAL_SDEx_Read_DMADoubleBuffer0CpltCallback;
 399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Read_DMADblBuf1CpltCallback = HAL_SDEx_Read_DMADoubleBuffer1CpltCallback;
 400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Write_DMADblBuf0CpltCallback = HAL_SDEx_Write_DMADoubleBuffer0CpltCallback;
 401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Write_DMADblBuf1CpltCallback = HAL_SDEx_Write_DMADoubleBuffer1CpltCallback;
 402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->DriveTransceiver_1_8V_Callback = HAL_SDEx_DriveTransceiver_1_8V_Callback;
 403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
 404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
 405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->MspInitCallback == NULL)
 407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->MspInitCallback = HAL_SD_MspInit;
 409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Init the low level hardware */
 412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->MspInitCallback(hsd);
 413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
 414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Init the low level hardware : GPIO, CLOCK, CORTEX...etc */
 415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     HAL_SD_MspInit(hsd);
  67              		.loc 1 415 5
  68 0024 7868     		ldr	r0, [r7, #4]
  69 0026 FFF7FEFF 		bl	HAL_SD_MspInit
  70              	.L4:
 416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
 417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_BUSY;
  71              		.loc 1 419 14
  72 002a 7B68     		ldr	r3, [r7, #4]
  73 002c 0322     		movs	r2, #3
  74 002e 83F83420 		strb	r2, [r3, #52]
 420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Initialize the Card parameters */
 422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (HAL_SD_InitCard(hsd) != HAL_OK)
  75              		.loc 1 422 7
  76 0032 7868     		ldr	r0, [r7, #4]
  77 0034 FFF7FEFF 		bl	HAL_SD_InitCard
  78 0038 0346     		mov	r3, r0
  79              		.loc 1 422 6 discriminator 1
  80 003a 002B     		cmp	r3, #0
  81 003c 01D0     		beq	.L5
 423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
  82              		.loc 1 424 12
  83 003e 0123     		movs	r3, #1
  84 0040 20E0     		b	.L3
  85              	.L5:
 425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Configure the bus wide with the specified value in the SD_HandleTypeDef */
 428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (HAL_SD_ConfigWideBusOperation(hsd, hsd->Init.BusWide) != HAL_OK)
  86              		.loc 1 428 7
  87 0042 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsLb3N5.s 			page 10


  88 0044 1B69     		ldr	r3, [r3, #16]
  89 0046 1946     		mov	r1, r3
  90 0048 7868     		ldr	r0, [r7, #4]
  91 004a FFF7FEFF 		bl	HAL_SD_ConfigWideBusOperation
  92 004e 0346     		mov	r3, r0
  93              		.loc 1 428 6 discriminator 1
  94 0050 002B     		cmp	r3, #0
  95 0052 01D0     		beq	.L6
 429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
  96              		.loc 1 430 12
  97 0054 0123     		movs	r3, #1
  98 0056 15E0     		b	.L3
  99              	.L6:
 431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
 434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (HAL_SD_GetCardStatus(hsd, &CardStatus) != HAL_OK)
 435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Get Initial Card Speed from Card Status*/
 439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   speedgrade = CardStatus.UhsSpeedGrade;
 440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   unitsize = CardStatus.UhsAllocationUnitSize;
 441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((hsd->SdCard.CardType == CARD_SDHC_SDXC) && ((speedgrade != 0U) || (unitsize != 0U)))
 442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.CardSpeed = CARD_ULTRA_HIGH_SPEED;
 444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
 446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->SdCard.CardType == CARD_SDHC_SDXC)
 448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->SdCard.CardSpeed  = CARD_HIGH_SPEED;
 450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
 452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->SdCard.CardSpeed  = CARD_NORMAL_SPEED;
 454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Configure the bus wide */
 458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (HAL_SD_ConfigWideBusOperation(hsd, hsd->Init.BusWide) != HAL_OK)
 459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Verify that SD card is ready to use after Initialization */
 464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   tickstart = HAL_GetTick();
 465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   while ((HAL_SD_GetCardState(hsd) != HAL_SD_CARD_TRANSFER))
 466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((HAL_GetTick() - tickstart) >=  SDMMC_DATATIMEOUT)
 468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode = HAL_SD_ERROR_TIMEOUT;
 470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_TIMEOUT;
 473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
ARM GAS  /tmp/ccsLb3N5.s 			page 11


 474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
 476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
 477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Configure the bus wide with the specified value in the SD_HandleTypeDef */
 479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (HAL_SD_ConfigWideBusOperation(hsd, hsd->Init.BusWide) != HAL_OK)
 100              		.loc 1 479 7
 101 0058 7B68     		ldr	r3, [r7, #4]
 102 005a 1B69     		ldr	r3, [r3, #16]
 103 005c 1946     		mov	r1, r3
 104 005e 7868     		ldr	r0, [r7, #4]
 105 0060 FFF7FEFF 		bl	HAL_SD_ConfigWideBusOperation
 106 0064 0346     		mov	r3, r0
 107              		.loc 1 479 6 discriminator 1
 108 0066 002B     		cmp	r3, #0
 109 0068 01D0     		beq	.L7
 480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 110              		.loc 1 481 12
 111 006a 0123     		movs	r3, #1
 112 006c 0AE0     		b	.L3
 113              	.L7:
 482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Initialize the error code */
 486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->ErrorCode = HAL_SD_ERROR_NONE;
 114              		.loc 1 486 18
 115 006e 7B68     		ldr	r3, [r7, #4]
 116 0070 0022     		movs	r2, #0
 117 0072 9A63     		str	r2, [r3, #56]
 487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Initialize the SD operation */
 489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->Context = SD_CONTEXT_NONE;
 118              		.loc 1 489 16
 119 0074 7B68     		ldr	r3, [r7, #4]
 120 0076 0022     		movs	r2, #0
 121 0078 1A63     		str	r2, [r3, #48]
 490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Initialize the SD state */
 492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_READY;
 122              		.loc 1 492 14
 123 007a 7B68     		ldr	r3, [r7, #4]
 124 007c 0122     		movs	r2, #1
 125 007e 83F83420 		strb	r2, [r3, #52]
 493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_OK;
 126              		.loc 1 494 10
 127 0082 0023     		movs	r3, #0
 128              	.L3:
 495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 129              		.loc 1 495 1
 130 0084 1846     		mov	r0, r3
 131 0086 0837     		adds	r7, r7, #8
 132              		.cfi_def_cfa_offset 8
 133 0088 BD46     		mov	sp, r7
 134              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccsLb3N5.s 			page 12


 135              		@ sp needed
 136 008a 80BD     		pop	{r7, pc}
 137              		.cfi_endproc
 138              	.LFE445:
 140              		.section	.text.HAL_SD_InitCard,"ax",%progbits
 141              		.align	1
 142              		.global	HAL_SD_InitCard
 143              		.syntax unified
 144              		.thumb
 145              		.thumb_func
 147              	HAL_SD_InitCard:
 148              	.LFB446:
 496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Initializes the SD Card.
 499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
 500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   This function initializes the SD card. It could be used when a card
 501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             re-initialization is needed.
 502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
 503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_InitCard(SD_HandleTypeDef *hsd)
 505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 149              		.loc 1 505 1
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 48
 152              		@ frame_needed = 1, uses_anonymous_args = 0
 153 0000 B0B5     		push	{r4, r5, r7, lr}
 154              		.cfi_def_cfa_offset 16
 155              		.cfi_offset 4, -16
 156              		.cfi_offset 5, -12
 157              		.cfi_offset 7, -8
 158              		.cfi_offset 14, -4
 159 0002 90B0     		sub	sp, sp, #64
 160              		.cfi_def_cfa_offset 80
 161 0004 04AF     		add	r7, sp, #16
 162              		.cfi_def_cfa 7, 64
 163 0006 7860     		str	r0, [r7, #4]
 506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
 507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SD_InitTypeDef Init;
 508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_StatusTypeDef status;
 509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t sdmmc_clk;
 511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Default SDMMC peripheral configuration for SD card initialization */
 512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   Init.ClockEdge           = SDMMC_CLOCK_EDGE_RISING;
 164              		.loc 1 512 28
 165 0008 0023     		movs	r3, #0
 166 000a FB60     		str	r3, [r7, #12]
 513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
 514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   Init.ClockBypass         = SDMMC_CLOCK_BYPASS_DISABLE;
 167              		.loc 1 514 28
 168 000c 0023     		movs	r3, #0
 169 000e 3B61     		str	r3, [r7, #16]
 515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
 516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
 517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   Init.ClockPowerSave      = SDMMC_CLOCK_POWER_SAVE_DISABLE;
 170              		.loc 1 517 28
 171 0010 0023     		movs	r3, #0
ARM GAS  /tmp/ccsLb3N5.s 			page 13


 172 0012 7B61     		str	r3, [r7, #20]
 518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   Init.BusWide             = SDMMC_BUS_WIDE_1B;
 173              		.loc 1 518 28
 174 0014 0023     		movs	r3, #0
 175 0016 BB61     		str	r3, [r7, #24]
 519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   Init.HardwareFlowControl = SDMMC_HARDWARE_FLOW_CONTROL_DISABLE;
 176              		.loc 1 519 28
 177 0018 0023     		movs	r3, #0
 178 001a FB61     		str	r3, [r7, #28]
 520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Init Clock should be less or equal to 400Khz*/
 521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   sdmmc_clk = HAL_RCCEx_GetPeriphCLKFreq(RCC_PERIPHCLK_SDMMC1);
 179              		.loc 1 521 15
 180 001c 4FF40020 		mov	r0, #524288
 181 0020 FFF7FEFF 		bl	HAL_RCCEx_GetPeriphCLKFreq
 182 0024 F862     		str	r0, [r7, #44]
 522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (sdmmc_clk == 0U)
 183              		.loc 1 522 6
 184 0026 FB6A     		ldr	r3, [r7, #44]
 185 0028 002B     		cmp	r3, #0
 186 002a 09D1     		bne	.L9
 523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 187              		.loc 1 524 16
 188 002c 7B68     		ldr	r3, [r7, #4]
 189 002e 0122     		movs	r2, #1
 190 0030 83F83420 		strb	r2, [r3, #52]
 525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = SDMMC_ERROR_INVALID_PARAMETER;
 191              		.loc 1 525 20
 192 0034 7B68     		ldr	r3, [r7, #4]
 193 0036 4FF00062 		mov	r2, #134217728
 194 003a 9A63     		str	r2, [r3, #56]
 526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 195              		.loc 1 526 12
 196 003c 0123     		movs	r3, #1
 197 003e 84E0     		b	.L15
 198              	.L9:
 527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
 529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   Init.ClockDiv = ((sdmmc_clk / SD_INIT_FREQ) - 2U);
 199              		.loc 1 529 31
 200 0040 FB6A     		ldr	r3, [r7, #44]
 201 0042 DB09     		lsrs	r3, r3, #7
 202 0044 434A     		ldr	r2, .L16
 203 0046 A2FB0323 		umull	r2, r3, r2, r3
 204 004a 1B09     		lsrs	r3, r3, #4
 205              		.loc 1 529 47
 206 004c 023B     		subs	r3, r3, #2
 207              		.loc 1 529 17
 208 004e 3B62     		str	r3, [r7, #32]
 530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
 531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   Init.ClockDiv = sdmmc_clk / (2U * SD_INIT_FREQ);
 532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
 533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
 534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
 536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   Init.Transceiver = hsd->Init.Transceiver;
 537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->Init.Transceiver == SDMMC_TRANSCEIVER_ENABLE)
ARM GAS  /tmp/ccsLb3N5.s 			page 14


 538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Set Transceiver polarity */
 540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->POWER |= SDMMC_POWER_DIRPOL;
 541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
 543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
 544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Initialize SDMMC peripheral interface with default configuration */
 546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   status = SDMMC_Init(hsd->Instance, Init);
 209              		.loc 1 546 12
 210 0050 7B68     		ldr	r3, [r7, #4]
 211 0052 1D68     		ldr	r5, [r3]
 212 0054 6C46     		mov	r4, sp
 213 0056 07F11803 		add	r3, r7, #24
 214 005a 93E80700 		ldm	r3, {r0, r1, r2}
 215 005e 84E80700 		stm	r4, {r0, r1, r2}
 216 0062 07F10C03 		add	r3, r7, #12
 217 0066 0ECB     		ldm	r3, {r1, r2, r3}
 218 0068 2846     		mov	r0, r5
 219 006a FFF7FEFF 		bl	SDMMC_Init
 220 006e 0346     		mov	r3, r0
 221 0070 87F82B30 		strb	r3, [r7, #43]
 547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (status == HAL_ERROR)
 222              		.loc 1 547 6
 223 0074 97F82B30 		ldrb	r3, [r7, #43]	@ zero_extendqisi2
 224 0078 012B     		cmp	r3, #1
 225 007a 01D1     		bne	.L11
 548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 226              		.loc 1 549 12
 227 007c 0123     		movs	r3, #1
 228 007e 64E0     		b	.L15
 229              	.L11:
 550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
 553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Disable SDMMC Clock */
 554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_DISABLE(hsd);
 230              		.loc 1 554 3
 231 0080 7B68     		ldr	r3, [r7, #4]
 232 0082 1B68     		ldr	r3, [r3]
 233 0084 5A68     		ldr	r2, [r3, #4]
 234 0086 7B68     		ldr	r3, [r7, #4]
 235 0088 1B68     		ldr	r3, [r3]
 236 008a 22F48072 		bic	r2, r2, #256
 237 008e 5A60     		str	r2, [r3, #4]
 555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
 556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
 557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Set Power State to ON */
 559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   (void)SDMMC_PowerState_ON(hsd->Instance);
 238              		.loc 1 559 9
 239 0090 7B68     		ldr	r3, [r7, #4]
 240 0092 1B68     		ldr	r3, [r3]
 241 0094 1846     		mov	r0, r3
 242 0096 FFF7FEFF 		bl	SDMMC_PowerState_ON
 560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 15


 561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
 562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Enable SDMMC Clock */
 563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_ENABLE(hsd);
 243              		.loc 1 563 3
 244 009a 7B68     		ldr	r3, [r7, #4]
 245 009c 1B68     		ldr	r3, [r3]
 246 009e 5A68     		ldr	r2, [r3, #4]
 247 00a0 7B68     		ldr	r3, [r7, #4]
 248 00a2 1B68     		ldr	r3, [r3]
 249 00a4 42F48072 		orr	r2, r2, #256
 250 00a8 5A60     		str	r2, [r3, #4]
 564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
 565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
 566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* wait 74 Cycles: required power up waiting time before starting
 568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****      the SD initialization sequence */
 569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
 570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   sdmmc_clk = sdmmc_clk / (Init.ClockDiv + 2U);
 251              		.loc 1 570 32
 252 00aa 3B6A     		ldr	r3, [r7, #32]
 253              		.loc 1 570 42
 254 00ac 0233     		adds	r3, r3, #2
 255              		.loc 1 570 13
 256 00ae FA6A     		ldr	r2, [r7, #44]
 257 00b0 B2FBF3F3 		udiv	r3, r2, r3
 258 00b4 FB62     		str	r3, [r7, #44]
 571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
 572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   sdmmc_clk = sdmmc_clk / (2U * Init.ClockDiv);
 573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
 574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
 575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_Delay(1U + (74U * 1000U / (sdmmc_clk)));
 259              		.loc 1 575 31
 260 00b6 284A     		ldr	r2, .L16+4
 261 00b8 FB6A     		ldr	r3, [r7, #44]
 262 00ba B2FBF3F3 		udiv	r3, r2, r3
 263              		.loc 1 575 3
 264 00be 0133     		adds	r3, r3, #1
 265 00c0 1846     		mov	r0, r3
 266 00c2 FFF7FEFF 		bl	HAL_Delay
 576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Identify card operating voltage */
 578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SD_PowerON(hsd);
 267              		.loc 1 578 16
 268 00c6 7868     		ldr	r0, [r7, #4]
 269 00c8 FFF7FEFF 		bl	SD_PowerON
 270 00cc 7862     		str	r0, [r7, #36]
 579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 271              		.loc 1 579 6
 272 00ce 7B6A     		ldr	r3, [r7, #36]
 273 00d0 002B     		cmp	r3, #0
 274 00d2 0BD0     		beq	.L12
 580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 275              		.loc 1 581 16
 276 00d4 7B68     		ldr	r3, [r7, #4]
 277 00d6 0122     		movs	r2, #1
 278 00d8 83F83420 		strb	r2, [r3, #52]
ARM GAS  /tmp/ccsLb3N5.s 			page 16


 582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= errorstate;
 279              		.loc 1 582 8
 280 00dc 7B68     		ldr	r3, [r7, #4]
 281 00de 9A6B     		ldr	r2, [r3, #56]
 282              		.loc 1 582 20
 283 00e0 7B6A     		ldr	r3, [r7, #36]
 284 00e2 1A43     		orrs	r2, r2, r3
 285 00e4 7B68     		ldr	r3, [r7, #4]
 286 00e6 9A63     		str	r2, [r3, #56]
 583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 287              		.loc 1 583 12
 288 00e8 0123     		movs	r3, #1
 289 00ea 2EE0     		b	.L15
 290              	.L12:
 584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Card initialization */
 587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SD_InitCard(hsd);
 291              		.loc 1 587 16
 292 00ec 7868     		ldr	r0, [r7, #4]
 293 00ee FFF7FEFF 		bl	SD_InitCard
 294 00f2 7862     		str	r0, [r7, #36]
 588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 295              		.loc 1 588 6
 296 00f4 7B6A     		ldr	r3, [r7, #36]
 297 00f6 002B     		cmp	r3, #0
 298 00f8 0BD0     		beq	.L13
 589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 299              		.loc 1 590 16
 300 00fa 7B68     		ldr	r3, [r7, #4]
 301 00fc 0122     		movs	r2, #1
 302 00fe 83F83420 		strb	r2, [r3, #52]
 591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= errorstate;
 303              		.loc 1 591 8
 304 0102 7B68     		ldr	r3, [r7, #4]
 305 0104 9A6B     		ldr	r2, [r3, #56]
 306              		.loc 1 591 20
 307 0106 7B6A     		ldr	r3, [r7, #36]
 308 0108 1A43     		orrs	r2, r2, r3
 309 010a 7B68     		ldr	r3, [r7, #4]
 310 010c 9A63     		str	r2, [r3, #56]
 592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 311              		.loc 1 592 12
 312 010e 0123     		movs	r3, #1
 313 0110 1BE0     		b	.L15
 314              	.L13:
 593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Set Block Size for Card */
 596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdBlockLength(hsd->Instance, BLOCKSIZE);
 315              		.loc 1 596 16
 316 0112 7B68     		ldr	r3, [r7, #4]
 317 0114 1B68     		ldr	r3, [r3]
 318 0116 4FF40071 		mov	r1, #512
 319 011a 1846     		mov	r0, r3
 320 011c FFF7FEFF 		bl	SDMMC_CmdBlockLength
ARM GAS  /tmp/ccsLb3N5.s 			page 17


 321 0120 7862     		str	r0, [r7, #36]
 597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 322              		.loc 1 597 6
 323 0122 7B6A     		ldr	r3, [r7, #36]
 324 0124 002B     		cmp	r3, #0
 325 0126 0FD0     		beq	.L14
 598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
 600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 326              		.loc 1 600 5
 327 0128 7B68     		ldr	r3, [r7, #4]
 328 012a 1B68     		ldr	r3, [r3]
 329 012c 0B4A     		ldr	r2, .L16+8
 330 012e 9A63     		str	r2, [r3, #56]
 601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= errorstate;
 331              		.loc 1 601 8
 332 0130 7B68     		ldr	r3, [r7, #4]
 333 0132 9A6B     		ldr	r2, [r3, #56]
 334              		.loc 1 601 20
 335 0134 7B6A     		ldr	r3, [r7, #36]
 336 0136 1A43     		orrs	r2, r2, r3
 337 0138 7B68     		ldr	r3, [r7, #4]
 338 013a 9A63     		str	r2, [r3, #56]
 602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 339              		.loc 1 602 16
 340 013c 7B68     		ldr	r3, [r7, #4]
 341 013e 0122     		movs	r2, #1
 342 0140 83F83420 		strb	r2, [r3, #52]
 603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 343              		.loc 1 603 12
 344 0144 0123     		movs	r3, #1
 345 0146 00E0     		b	.L15
 346              	.L14:
 604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_OK;
 347              		.loc 1 606 10
 348 0148 0023     		movs	r3, #0
 349              	.L15:
 607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 350              		.loc 1 607 1
 351 014a 1846     		mov	r0, r3
 352 014c 3037     		adds	r7, r7, #48
 353              		.cfi_def_cfa_offset 16
 354 014e BD46     		mov	sp, r7
 355              		.cfi_def_cfa_register 13
 356              		@ sp needed
 357 0150 B0BD     		pop	{r4, r5, r7, pc}
 358              	.L17:
 359 0152 00BF     		.align	2
 360              	.L16:
 361 0154 598B4F01 		.word	21990233
 362 0158 10210100 		.word	74000
 363 015c FF054000 		.word	4195839
 364              		.cfi_endproc
 365              	.LFE446:
 367              		.section	.text.HAL_SD_DeInit,"ax",%progbits
ARM GAS  /tmp/ccsLb3N5.s 			page 18


 368              		.align	1
 369              		.global	HAL_SD_DeInit
 370              		.syntax unified
 371              		.thumb
 372              		.thumb_func
 374              	HAL_SD_DeInit:
 375              	.LFB447:
 608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  De-Initializes the SD card.
 611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
 612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
 613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_DeInit(SD_HandleTypeDef *hsd)
 615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 376              		.loc 1 615 1
 377              		.cfi_startproc
 378              		@ args = 0, pretend = 0, frame = 8
 379              		@ frame_needed = 1, uses_anonymous_args = 0
 380 0000 80B5     		push	{r7, lr}
 381              		.cfi_def_cfa_offset 8
 382              		.cfi_offset 7, -8
 383              		.cfi_offset 14, -4
 384 0002 82B0     		sub	sp, sp, #8
 385              		.cfi_def_cfa_offset 16
 386 0004 00AF     		add	r7, sp, #0
 387              		.cfi_def_cfa_register 7
 388 0006 7860     		str	r0, [r7, #4]
 616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Check the SD handle allocation */
 617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd == NULL)
 389              		.loc 1 617 6
 390 0008 7B68     		ldr	r3, [r7, #4]
 391 000a 002B     		cmp	r3, #0
 392 000c 01D1     		bne	.L19
 618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 393              		.loc 1 619 12
 394 000e 0123     		movs	r3, #1
 395 0010 11E0     		b	.L20
 396              	.L19:
 620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Check the parameters */
 623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_ALL_INSTANCE(hsd->Instance));
 624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_BUSY;
 397              		.loc 1 625 14
 398 0012 7B68     		ldr	r3, [r7, #4]
 399 0014 0322     		movs	r2, #3
 400 0016 83F83420 		strb	r2, [r3, #52]
 626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
 627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Deactivate the 1.8V Mode */
 628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->Init.Transceiver == SDMMC_TRANSCEIVER_ENABLE)
 629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
 631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->DriveTransceiver_1_8V_Callback == NULL)
 632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
ARM GAS  /tmp/ccsLb3N5.s 			page 19


 633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->DriveTransceiver_1_8V_Callback = HAL_SDEx_DriveTransceiver_1_8V_Callback;
 634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->DriveTransceiver_1_8V_Callback(RESET);
 636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
 637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     HAL_SDEx_DriveTransceiver_1_8V_Callback(RESET);
 638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
 639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
 641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
 642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Set SD power state to off */
 644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SD_PowerOFF(hsd);
 401              		.loc 1 644 3
 402 001a 7868     		ldr	r0, [r7, #4]
 403 001c FFF7FEFF 		bl	SD_PowerOFF
 645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
 647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->MspDeInitCallback == NULL)
 648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->MspDeInitCallback = HAL_SD_MspDeInit;
 650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* DeInit the low level hardware */
 653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->MspDeInitCallback(hsd);
 654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
 655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* De-Initialize the MSP layer */
 656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_MspDeInit(hsd);
 404              		.loc 1 656 3
 405 0020 7868     		ldr	r0, [r7, #4]
 406 0022 FFF7FEFF 		bl	HAL_SD_MspDeInit
 657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
 658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->ErrorCode = HAL_SD_ERROR_NONE;
 407              		.loc 1 659 18
 408 0026 7B68     		ldr	r3, [r7, #4]
 409 0028 0022     		movs	r2, #0
 410 002a 9A63     		str	r2, [r3, #56]
 660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_RESET;
 411              		.loc 1 660 14
 412 002c 7B68     		ldr	r3, [r7, #4]
 413 002e 0022     		movs	r2, #0
 414 0030 83F83420 		strb	r2, [r3, #52]
 661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_OK;
 415              		.loc 1 662 10
 416 0034 0023     		movs	r3, #0
 417              	.L20:
 663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 418              		.loc 1 663 1
 419 0036 1846     		mov	r0, r3
 420 0038 0837     		adds	r7, r7, #8
 421              		.cfi_def_cfa_offset 8
 422 003a BD46     		mov	sp, r7
 423              		.cfi_def_cfa_register 13
 424              		@ sp needed
 425 003c 80BD     		pop	{r7, pc}
 426              		.cfi_endproc
ARM GAS  /tmp/ccsLb3N5.s 			page 20


 427              	.LFE447:
 429              		.section	.text.HAL_SD_MspInit,"ax",%progbits
 430              		.align	1
 431              		.weak	HAL_SD_MspInit
 432              		.syntax unified
 433              		.thumb
 434              		.thumb_func
 436              	HAL_SD_MspInit:
 437              	.LFB448:
 664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Initializes the SD MSP.
 668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
 669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
 670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** __weak void HAL_SD_MspInit(SD_HandleTypeDef *hsd)
 672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 438              		.loc 1 672 1
 439              		.cfi_startproc
 440              		@ args = 0, pretend = 0, frame = 8
 441              		@ frame_needed = 1, uses_anonymous_args = 0
 442              		@ link register save eliminated.
 443 0000 80B4     		push	{r7}
 444              		.cfi_def_cfa_offset 4
 445              		.cfi_offset 7, -4
 446 0002 83B0     		sub	sp, sp, #12
 447              		.cfi_def_cfa_offset 16
 448 0004 00AF     		add	r7, sp, #0
 449              		.cfi_def_cfa_register 7
 450 0006 7860     		str	r0, [r7, #4]
 673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   UNUSED(hsd);
 675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* NOTE : This function should not be modified, when the callback is needed,
 677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             the HAL_SD_MspInit could be implemented in the user file
 678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****    */
 679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 451              		.loc 1 679 1
 452 0008 00BF     		nop
 453 000a 0C37     		adds	r7, r7, #12
 454              		.cfi_def_cfa_offset 4
 455 000c BD46     		mov	sp, r7
 456              		.cfi_def_cfa_register 13
 457              		@ sp needed
 458 000e 5DF8047B 		ldr	r7, [sp], #4
 459              		.cfi_restore 7
 460              		.cfi_def_cfa_offset 0
 461 0012 7047     		bx	lr
 462              		.cfi_endproc
 463              	.LFE448:
 465              		.section	.text.HAL_SD_MspDeInit,"ax",%progbits
 466              		.align	1
 467              		.weak	HAL_SD_MspDeInit
 468              		.syntax unified
 469              		.thumb
 470              		.thumb_func
ARM GAS  /tmp/ccsLb3N5.s 			page 21


 472              	HAL_SD_MspDeInit:
 473              	.LFB449:
 680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  De-Initialize SD MSP.
 683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
 684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
 685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** __weak void HAL_SD_MspDeInit(SD_HandleTypeDef *hsd)
 687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 474              		.loc 1 687 1
 475              		.cfi_startproc
 476              		@ args = 0, pretend = 0, frame = 8
 477              		@ frame_needed = 1, uses_anonymous_args = 0
 478              		@ link register save eliminated.
 479 0000 80B4     		push	{r7}
 480              		.cfi_def_cfa_offset 4
 481              		.cfi_offset 7, -4
 482 0002 83B0     		sub	sp, sp, #12
 483              		.cfi_def_cfa_offset 16
 484 0004 00AF     		add	r7, sp, #0
 485              		.cfi_def_cfa_register 7
 486 0006 7860     		str	r0, [r7, #4]
 688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   UNUSED(hsd);
 690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* NOTE : This function should not be modified, when the callback is needed,
 692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             the HAL_SD_MspDeInit could be implemented in the user file
 693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****    */
 694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 487              		.loc 1 694 1
 488 0008 00BF     		nop
 489 000a 0C37     		adds	r7, r7, #12
 490              		.cfi_def_cfa_offset 4
 491 000c BD46     		mov	sp, r7
 492              		.cfi_def_cfa_register 13
 493              		@ sp needed
 494 000e 5DF8047B 		ldr	r7, [sp], #4
 495              		.cfi_restore 7
 496              		.cfi_def_cfa_offset 0
 497 0012 7047     		bx	lr
 498              		.cfi_endproc
 499              	.LFE449:
 501              		.section	.text.HAL_SD_ReadBlocks,"ax",%progbits
 502              		.align	1
 503              		.global	HAL_SD_ReadBlocks
 504              		.syntax unified
 505              		.thumb
 506              		.thumb_func
 508              	HAL_SD_ReadBlocks:
 509              	.LFB450:
 695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @}
 698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /** @addtogroup SD_Exported_Functions_Group2
ARM GAS  /tmp/ccsLb3N5.s 			page 22


 701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *  @brief   Data transfer functions
 702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *
 703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** @verbatim
 704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==============================================================================
 705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                         ##### IO operation functions #####
 706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==============================================================================
 707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
 708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     This subsection provides a set of functions allowing to manage the data
 709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     transfer from/to SD card.
 710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** @endverbatim
 712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @{
 713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Reads block(s) from a specified address in a card. The Data transfer
 717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         is managed by polling mode.
 718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   This API should be followed by a check on the card state through
 719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         HAL_SD_GetCardState().
 720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
 721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pData: pointer to the buffer that will contain the received data
 722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  BlockAdd: Block Address from where data is to be read
 723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of SD blocks to read
 724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  Timeout: Specify timeout value
 725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
 726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_ReadBlocks(SD_HandleTypeDef *hsd, uint8_t *pData, uint32_t BlockAdd, uint3
 728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                     uint32_t Timeout)
 729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 510              		.loc 1 729 1
 511              		.cfi_startproc
 512              		@ args = 4, pretend = 0, frame = 72
 513              		@ frame_needed = 1, uses_anonymous_args = 0
 514 0000 80B5     		push	{r7, lr}
 515              		.cfi_def_cfa_offset 8
 516              		.cfi_offset 7, -8
 517              		.cfi_offset 14, -4
 518 0002 92B0     		sub	sp, sp, #72
 519              		.cfi_def_cfa_offset 80
 520 0004 00AF     		add	r7, sp, #0
 521              		.cfi_def_cfa_register 7
 522 0006 F860     		str	r0, [r7, #12]
 523 0008 B960     		str	r1, [r7, #8]
 524 000a 7A60     		str	r2, [r7, #4]
 525 000c 3B60     		str	r3, [r7]
 730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SDMMC_DataInitTypeDef config;
 731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
 732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t tickstart = HAL_GetTick();
 526              		.loc 1 732 24
 527 000e FFF7FEFF 		bl	HAL_GetTick
 528 0012 3863     		str	r0, [r7, #48]
 733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t count;
 734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t data;
 735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t dataremaining;
 736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t add = BlockAdd;
 529              		.loc 1 736 12
 530 0014 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsLb3N5.s 			page 23


 531 0016 BB63     		str	r3, [r7, #56]
 737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint8_t *tempbuff = pData;
 532              		.loc 1 737 12
 533 0018 BB68     		ldr	r3, [r7, #8]
 534 001a 7B63     		str	r3, [r7, #52]
 738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (NULL == pData)
 535              		.loc 1 739 6
 536 001c BB68     		ldr	r3, [r7, #8]
 537 001e 002B     		cmp	r3, #0
 538 0020 07D1     		bne	.L24
 740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
 539              		.loc 1 741 8
 540 0022 FB68     		ldr	r3, [r7, #12]
 541 0024 9B6B     		ldr	r3, [r3, #56]
 542              		.loc 1 741 20
 543 0026 43F00062 		orr	r2, r3, #134217728
 544 002a FB68     		ldr	r3, [r7, #12]
 545 002c 9A63     		str	r2, [r3, #56]
 742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 546              		.loc 1 742 12
 547 002e 0123     		movs	r3, #1
 548 0030 BDE1     		b	.L46
 549              	.L24:
 743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
 550              		.loc 1 745 10
 551 0032 FB68     		ldr	r3, [r7, #12]
 552 0034 93F83430 		ldrb	r3, [r3, #52]
 553 0038 DBB2     		uxtb	r3, r3
 554              		.loc 1 745 6
 555 003a 012B     		cmp	r3, #1
 556 003c 40F0B081 		bne	.L26
 746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = HAL_SD_ERROR_NONE;
 557              		.loc 1 747 20
 558 0040 FB68     		ldr	r3, [r7, #12]
 559 0042 0022     		movs	r2, #0
 560 0044 9A63     		str	r2, [r3, #56]
 748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((add + NumberOfBlocks) > (hsd->SdCard.LogBlockNbr))
 561              		.loc 1 749 14
 562 0046 BA6B     		ldr	r2, [r7, #56]
 563 0048 3B68     		ldr	r3, [r7]
 564 004a 1A44     		add	r2, r2, r3
 565              		.loc 1 749 46
 566 004c FB68     		ldr	r3, [r7, #12]
 567 004e DB6D     		ldr	r3, [r3, #92]
 568              		.loc 1 749 8
 569 0050 9A42     		cmp	r2, r3
 570 0052 07D9     		bls	.L27
 750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_ADDR_OUT_OF_RANGE;
 571              		.loc 1 751 10
 572 0054 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsLb3N5.s 			page 24


 573 0056 9B6B     		ldr	r3, [r3, #56]
 574              		.loc 1 751 22
 575 0058 43F00072 		orr	r2, r3, #33554432
 576 005c FB68     		ldr	r3, [r7, #12]
 577 005e 9A63     		str	r2, [r3, #56]
 752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 578              		.loc 1 752 14
 579 0060 0123     		movs	r3, #1
 580 0062 A4E1     		b	.L46
 581              	.L27:
 753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_BUSY;
 582              		.loc 1 755 16
 583 0064 FB68     		ldr	r3, [r7, #12]
 584 0066 0322     		movs	r2, #3
 585 0068 83F83420 		strb	r2, [r3, #52]
 756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Initialize data control register */
 758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL = 0U;
 586              		.loc 1 758 8
 587 006c FB68     		ldr	r3, [r7, #12]
 588 006e 1B68     		ldr	r3, [r3]
 589              		.loc 1 758 26
 590 0070 0022     		movs	r2, #0
 591 0072 DA62     		str	r2, [r3, #44]
 759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->SdCard.CardType != CARD_SDHC_SDXC)
 592              		.loc 1 760 20
 593 0074 FB68     		ldr	r3, [r7, #12]
 594 0076 5B6C     		ldr	r3, [r3, #68]
 595              		.loc 1 760 8
 596 0078 012B     		cmp	r3, #1
 597 007a 02D0     		beq	.L28
 761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       add *= BLOCKSIZE;
 598              		.loc 1 762 11
 599 007c BB6B     		ldr	r3, [r7, #56]
 600 007e 5B02     		lsls	r3, r3, #9
 601 0080 BB63     		str	r3, [r7, #56]
 602              	.L28:
 763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Configure the SD DPSM (Data Path State Machine) */
 766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataTimeOut   = SDMMC_DATATIMEOUT;
 603              		.loc 1 766 26
 604 0082 4FF0FF33 		mov	r3, #-1
 605 0086 7B61     		str	r3, [r7, #20]
 767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataLength    = NumberOfBlocks * BLOCKSIZE;
 606              		.loc 1 767 43
 607 0088 3B68     		ldr	r3, [r7]
 608 008a 5B02     		lsls	r3, r3, #9
 609              		.loc 1 767 26
 610 008c BB61     		str	r3, [r7, #24]
 768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataBlockSize = SDMMC_DATABLOCK_SIZE_512B;
 611              		.loc 1 768 26
 612 008e 9023     		movs	r3, #144
ARM GAS  /tmp/ccsLb3N5.s 			page 25


 613 0090 FB61     		str	r3, [r7, #28]
 769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferDir   = SDMMC_TRANSFER_DIR_TO_SDMMC;
 614              		.loc 1 769 26
 615 0092 0223     		movs	r3, #2
 616 0094 3B62     		str	r3, [r7, #32]
 770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
 617              		.loc 1 770 26
 618 0096 0023     		movs	r3, #0
 619 0098 7B62     		str	r3, [r7, #36]
 771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
 772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DPSM          = SDMMC_DPSM_DISABLE;
 773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
 774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DPSM          = SDMMC_DPSM_ENABLE;
 620              		.loc 1 774 26
 621 009a 0123     		movs	r3, #1
 622 009c BB62     		str	r3, [r7, #40]
 775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
 776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
 777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (void)SDMMC_ConfigData(hsd->Instance, &config);
 623              		.loc 1 777 11
 624 009e FB68     		ldr	r3, [r7, #12]
 625 00a0 1B68     		ldr	r3, [r3]
 626 00a2 07F11402 		add	r2, r7, #20
 627 00a6 1146     		mov	r1, r2
 628 00a8 1846     		mov	r0, r3
 629 00aa FFF7FEFF 		bl	SDMMC_ConfigData
 778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
 779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __SDMMC_CMDTRANS_ENABLE(hsd->Instance);
 780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
 781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
 782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Read block(s) in polling mode */
 784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (NumberOfBlocks > 1U)
 630              		.loc 1 784 8
 631 00ae 3B68     		ldr	r3, [r7]
 632 00b0 012B     		cmp	r3, #1
 633 00b2 0AD9     		bls	.L29
 785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_READ_MULTIPLE_BLOCK;
 634              		.loc 1 786 20
 635 00b4 FB68     		ldr	r3, [r7, #12]
 636 00b6 0222     		movs	r2, #2
 637 00b8 1A63     		str	r2, [r3, #48]
 787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Read Multi Block command */
 789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdReadMultiBlock(hsd->Instance, add);
 638              		.loc 1 789 20
 639 00ba FB68     		ldr	r3, [r7, #12]
 640 00bc 1B68     		ldr	r3, [r3]
 641 00be B96B     		ldr	r1, [r7, #56]
 642 00c0 1846     		mov	r0, r3
 643 00c2 FFF7FEFF 		bl	SDMMC_CmdReadMultiBlock
 644 00c6 7864     		str	r0, [r7, #68]
 645 00c8 09E0     		b	.L30
 646              	.L29:
 790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
ARM GAS  /tmp/ccsLb3N5.s 			page 26


 792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_READ_SINGLE_BLOCK;
 647              		.loc 1 793 20
 648 00ca FB68     		ldr	r3, [r7, #12]
 649 00cc 0122     		movs	r2, #1
 650 00ce 1A63     		str	r2, [r3, #48]
 794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Read Single Block command */
 796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdReadSingleBlock(hsd->Instance, add);
 651              		.loc 1 796 20
 652 00d0 FB68     		ldr	r3, [r7, #12]
 653 00d2 1B68     		ldr	r3, [r3]
 654 00d4 B96B     		ldr	r1, [r7, #56]
 655 00d6 1846     		mov	r0, r3
 656 00d8 FFF7FEFF 		bl	SDMMC_CmdReadSingleBlock
 657 00dc 7864     		str	r0, [r7, #68]
 658              	.L30:
 797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 659              		.loc 1 798 8
 660 00de 7B6C     		ldr	r3, [r7, #68]
 661 00e0 002B     		cmp	r3, #0
 662 00e2 12D0     		beq	.L31
 799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
 801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 663              		.loc 1 801 7
 664 00e4 FB68     		ldr	r3, [r7, #12]
 665 00e6 1B68     		ldr	r3, [r3]
 666 00e8 7A4A     		ldr	r2, .L47
 667 00ea 9A63     		str	r2, [r3, #56]
 802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= errorstate;
 668              		.loc 1 802 10
 669 00ec FB68     		ldr	r3, [r7, #12]
 670 00ee 9A6B     		ldr	r2, [r3, #56]
 671              		.loc 1 802 22
 672 00f0 7B6C     		ldr	r3, [r7, #68]
 673 00f2 1A43     		orrs	r2, r2, r3
 674 00f4 FB68     		ldr	r3, [r7, #12]
 675 00f6 9A63     		str	r2, [r3, #56]
 803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 676              		.loc 1 803 18
 677 00f8 FB68     		ldr	r3, [r7, #12]
 678 00fa 0122     		movs	r2, #1
 679 00fc 83F83420 		strb	r2, [r3, #52]
 804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 680              		.loc 1 804 20
 681 0100 FB68     		ldr	r3, [r7, #12]
 682 0102 0022     		movs	r2, #0
 683 0104 1A63     		str	r2, [r3, #48]
 805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 684              		.loc 1 805 14
 685 0106 0123     		movs	r3, #1
 686 0108 51E1     		b	.L46
 687              	.L31:
 806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 27


 808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Poll on SDMMC flags */
 809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     dataremaining = config.DataLength;
 688              		.loc 1 809 19
 689 010a BB69     		ldr	r3, [r7, #24]
 690 010c FB63     		str	r3, [r7, #60]
 810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     while (!__HAL_SD_GET_FLAG(hsd,
 691              		.loc 1 810 11
 692 010e 61E0     		b	.L32
 693              	.L37:
 811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                               SDMMC_FLAG_RXOVERR | SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT | SDMM
 812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXFIFOHF) && (dataremaining > 0U))
 694              		.loc 1 813 11
 695 0110 FB68     		ldr	r3, [r7, #12]
 696 0112 1B68     		ldr	r3, [r3]
 697 0114 5B6B     		ldr	r3, [r3, #52]
 698 0116 03F40043 		and	r3, r3, #32768
 699              		.loc 1 813 10
 700 011a 002B     		cmp	r3, #0
 701 011c 3CD0     		beq	.L33
 702              		.loc 1 813 55 discriminator 1
 703 011e FB6B     		ldr	r3, [r7, #60]
 704 0120 002B     		cmp	r3, #0
 705 0122 39D0     		beq	.L33
 814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Read data from SDMMC Rx FIFO */
 816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         for (count = 0U; count < 8U; count++)
 706              		.loc 1 816 20
 707 0124 0023     		movs	r3, #0
 708 0126 3B64     		str	r3, [r7, #64]
 709              		.loc 1 816 9
 710 0128 33E0     		b	.L34
 711              	.L35:
 817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           data = SDMMC_ReadFIFO(hsd->Instance);
 712              		.loc 1 818 36
 713 012a FB68     		ldr	r3, [r7, #12]
 714 012c 1B68     		ldr	r3, [r3]
 715              		.loc 1 818 18
 716 012e 1846     		mov	r0, r3
 717 0130 FFF7FEFF 		bl	SDMMC_ReadFIFO
 718 0134 F862     		str	r0, [r7, #44]
 819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           *tempbuff = (uint8_t)(data & 0xFFU);
 719              		.loc 1 819 23
 720 0136 FB6A     		ldr	r3, [r7, #44]
 721 0138 DAB2     		uxtb	r2, r3
 722              		.loc 1 819 21
 723 013a 7B6B     		ldr	r3, [r7, #52]
 724 013c 1A70     		strb	r2, [r3]
 820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           tempbuff++;
 725              		.loc 1 820 19
 726 013e 7B6B     		ldr	r3, [r7, #52]
 727 0140 0133     		adds	r3, r3, #1
 728 0142 7B63     		str	r3, [r7, #52]
 821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           dataremaining--;
 729              		.loc 1 821 24
 730 0144 FB6B     		ldr	r3, [r7, #60]
ARM GAS  /tmp/ccsLb3N5.s 			page 28


 731 0146 013B     		subs	r3, r3, #1
 732 0148 FB63     		str	r3, [r7, #60]
 822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           *tempbuff = (uint8_t)((data >> 8U) & 0xFFU);
 733              		.loc 1 822 39
 734 014a FB6A     		ldr	r3, [r7, #44]
 735 014c 1B0A     		lsrs	r3, r3, #8
 736              		.loc 1 822 23
 737 014e DAB2     		uxtb	r2, r3
 738              		.loc 1 822 21
 739 0150 7B6B     		ldr	r3, [r7, #52]
 740 0152 1A70     		strb	r2, [r3]
 823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           tempbuff++;
 741              		.loc 1 823 19
 742 0154 7B6B     		ldr	r3, [r7, #52]
 743 0156 0133     		adds	r3, r3, #1
 744 0158 7B63     		str	r3, [r7, #52]
 824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           dataremaining--;
 745              		.loc 1 824 24
 746 015a FB6B     		ldr	r3, [r7, #60]
 747 015c 013B     		subs	r3, r3, #1
 748 015e FB63     		str	r3, [r7, #60]
 825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           *tempbuff = (uint8_t)((data >> 16U) & 0xFFU);
 749              		.loc 1 825 39
 750 0160 FB6A     		ldr	r3, [r7, #44]
 751 0162 1B0C     		lsrs	r3, r3, #16
 752              		.loc 1 825 23
 753 0164 DAB2     		uxtb	r2, r3
 754              		.loc 1 825 21
 755 0166 7B6B     		ldr	r3, [r7, #52]
 756 0168 1A70     		strb	r2, [r3]
 826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           tempbuff++;
 757              		.loc 1 826 19
 758 016a 7B6B     		ldr	r3, [r7, #52]
 759 016c 0133     		adds	r3, r3, #1
 760 016e 7B63     		str	r3, [r7, #52]
 827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           dataremaining--;
 761              		.loc 1 827 24
 762 0170 FB6B     		ldr	r3, [r7, #60]
 763 0172 013B     		subs	r3, r3, #1
 764 0174 FB63     		str	r3, [r7, #60]
 828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           *tempbuff = (uint8_t)((data >> 24U) & 0xFFU);
 765              		.loc 1 828 39
 766 0176 FB6A     		ldr	r3, [r7, #44]
 767 0178 1B0E     		lsrs	r3, r3, #24
 768              		.loc 1 828 23
 769 017a DAB2     		uxtb	r2, r3
 770              		.loc 1 828 21
 771 017c 7B6B     		ldr	r3, [r7, #52]
 772 017e 1A70     		strb	r2, [r3]
 829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           tempbuff++;
 773              		.loc 1 829 19
 774 0180 7B6B     		ldr	r3, [r7, #52]
 775 0182 0133     		adds	r3, r3, #1
 776 0184 7B63     		str	r3, [r7, #52]
 830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           dataremaining--;
 777              		.loc 1 830 24
 778 0186 FB6B     		ldr	r3, [r7, #60]
ARM GAS  /tmp/ccsLb3N5.s 			page 29


 779 0188 013B     		subs	r3, r3, #1
 780 018a FB63     		str	r3, [r7, #60]
 816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 781              		.loc 1 816 43 discriminator 3
 782 018c 3B6C     		ldr	r3, [r7, #64]
 783 018e 0133     		adds	r3, r3, #1
 784 0190 3B64     		str	r3, [r7, #64]
 785              	.L34:
 816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 786              		.loc 1 816 32 discriminator 1
 787 0192 3B6C     		ldr	r3, [r7, #64]
 788 0194 072B     		cmp	r3, #7
 789 0196 C8D9     		bls	.L35
 790              	.L33:
 831:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
 832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
 833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((HAL_GetTick() - tickstart) >=  Timeout) || (Timeout == 0U))
 791              		.loc 1 834 13
 792 0198 FFF7FEFF 		bl	HAL_GetTick
 793 019c 0246     		mov	r2, r0
 794              		.loc 1 834 27 discriminator 1
 795 019e 3B6B     		ldr	r3, [r7, #48]
 796 01a0 D31A     		subs	r3, r2, r3
 797              		.loc 1 834 10 discriminator 1
 798 01a2 3A6D     		ldr	r2, [r7, #80]
 799 01a4 9A42     		cmp	r2, r3
 800 01a6 02D9     		bls	.L36
 801              		.loc 1 834 53 discriminator 1
 802 01a8 3B6D     		ldr	r3, [r7, #80]
 803 01aa 002B     		cmp	r3, #0
 804 01ac 12D1     		bne	.L32
 805              	.L36:
 835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 836:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Clear all the static flags */
 837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 806              		.loc 1 837 9
 807 01ae FB68     		ldr	r3, [r7, #12]
 808 01b0 1B68     		ldr	r3, [r3]
 809 01b2 484A     		ldr	r2, .L47
 810 01b4 9A63     		str	r2, [r3, #56]
 838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_TIMEOUT;
 811              		.loc 1 838 12
 812 01b6 FB68     		ldr	r3, [r7, #12]
 813 01b8 9B6B     		ldr	r3, [r3, #56]
 814              		.loc 1 838 24
 815 01ba 43F00042 		orr	r2, r3, #-2147483648
 816 01be FB68     		ldr	r3, [r7, #12]
 817 01c0 9A63     		str	r2, [r3, #56]
 839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
 818              		.loc 1 839 20
 819 01c2 FB68     		ldr	r3, [r7, #12]
 820 01c4 0122     		movs	r2, #1
 821 01c6 83F83420 		strb	r2, [r3, #52]
 840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Context = SD_CONTEXT_NONE;
 822              		.loc 1 840 22
 823 01ca FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsLb3N5.s 			page 30


 824 01cc 0022     		movs	r2, #0
 825 01ce 1A63     		str	r2, [r3, #48]
 841:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         return HAL_TIMEOUT;
 826              		.loc 1 841 16
 827 01d0 0323     		movs	r3, #3
 828 01d2 ECE0     		b	.L46
 829              	.L32:
 810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                               SDMMC_FLAG_RXOVERR | SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT | SDMM
 830              		.loc 1 810 13
 831 01d4 FB68     		ldr	r3, [r7, #12]
 832 01d6 1B68     		ldr	r3, [r3]
 833 01d8 5B6B     		ldr	r3, [r3, #52]
 834 01da 03F49573 		and	r3, r3, #298
 810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                               SDMMC_FLAG_RXOVERR | SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT | SDMM
 835              		.loc 1 810 12
 836 01de 002B     		cmp	r3, #0
 837 01e0 96D0     		beq	.L37
 842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
 843:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
 846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __SDMMC_CMDTRANS_DISABLE(hsd->Instance);
 847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
 848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
 849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send stop transmission command in case of multiblock read */
 851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DATAEND) && (NumberOfBlocks > 1U))
 838              		.loc 1 851 9
 839 01e2 FB68     		ldr	r3, [r7, #12]
 840 01e4 1B68     		ldr	r3, [r3]
 841 01e6 5B6B     		ldr	r3, [r3, #52]
 842 01e8 03F48073 		and	r3, r3, #256
 843              		.loc 1 851 8
 844 01ec 002B     		cmp	r3, #0
 845 01ee 22D0     		beq	.L38
 846              		.loc 1 851 52 discriminator 1
 847 01f0 3B68     		ldr	r3, [r7]
 848 01f2 012B     		cmp	r3, #1
 849 01f4 1FD9     		bls	.L38
 852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 853:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (hsd->SdCard.CardType != CARD_SECURED)
 850              		.loc 1 853 22
 851 01f6 FB68     		ldr	r3, [r7, #12]
 852 01f8 5B6C     		ldr	r3, [r3, #68]
 853              		.loc 1 853 10
 854 01fa 032B     		cmp	r3, #3
 855 01fc 1BD0     		beq	.L38
 854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Send stop transmission command */
 856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         errorstate = SDMMC_CmdStopTransfer(hsd->Instance);
 856              		.loc 1 856 22
 857 01fe FB68     		ldr	r3, [r7, #12]
 858 0200 1B68     		ldr	r3, [r3]
 859 0202 1846     		mov	r0, r3
 860 0204 FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 861 0208 7864     		str	r0, [r7, #68]
 857:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (errorstate != HAL_SD_ERROR_NONE)
ARM GAS  /tmp/ccsLb3N5.s 			page 31


 862              		.loc 1 857 12
 863 020a 7B6C     		ldr	r3, [r7, #68]
 864 020c 002B     		cmp	r3, #0
 865 020e 12D0     		beq	.L38
 858:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 859:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Clear all the static flags */
 860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 866              		.loc 1 860 11
 867 0210 FB68     		ldr	r3, [r7, #12]
 868 0212 1B68     		ldr	r3, [r3]
 869 0214 2F4A     		ldr	r2, .L47
 870 0216 9A63     		str	r2, [r3, #56]
 861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCode |= errorstate;
 871              		.loc 1 861 14
 872 0218 FB68     		ldr	r3, [r7, #12]
 873 021a 9A6B     		ldr	r2, [r3, #56]
 874              		.loc 1 861 26
 875 021c 7B6C     		ldr	r3, [r7, #68]
 876 021e 1A43     		orrs	r2, r2, r3
 877 0220 FB68     		ldr	r3, [r7, #12]
 878 0222 9A63     		str	r2, [r3, #56]
 862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->State = HAL_SD_STATE_READY;
 879              		.loc 1 862 22
 880 0224 FB68     		ldr	r3, [r7, #12]
 881 0226 0122     		movs	r2, #1
 882 0228 83F83420 		strb	r2, [r3, #52]
 863:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->Context = SD_CONTEXT_NONE;
 883              		.loc 1 863 24
 884 022c FB68     		ldr	r3, [r7, #12]
 885 022e 0022     		movs	r2, #0
 886 0230 1A63     		str	r2, [r3, #48]
 864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           return HAL_ERROR;
 887              		.loc 1 864 18
 888 0232 0123     		movs	r3, #1
 889 0234 BBE0     		b	.L46
 890              	.L38:
 865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
 866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
 867:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Get error state */
 870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DTIMEOUT))
 891              		.loc 1 870 9
 892 0236 FB68     		ldr	r3, [r7, #12]
 893 0238 1B68     		ldr	r3, [r3]
 894 023a 5B6B     		ldr	r3, [r3, #52]
 895 023c 03F00803 		and	r3, r3, #8
 896              		.loc 1 870 8
 897 0240 002B     		cmp	r3, #0
 898 0242 12D0     		beq	.L39
 871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
 873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 899              		.loc 1 873 7
 900 0244 FB68     		ldr	r3, [r7, #12]
 901 0246 1B68     		ldr	r3, [r3]
 902 0248 224A     		ldr	r2, .L47
ARM GAS  /tmp/ccsLb3N5.s 			page 32


 903 024a 9A63     		str	r2, [r3, #56]
 874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_DATA_TIMEOUT;
 904              		.loc 1 874 10
 905 024c FB68     		ldr	r3, [r7, #12]
 906 024e 9B6B     		ldr	r3, [r3, #56]
 907              		.loc 1 874 22
 908 0250 43F00802 		orr	r2, r3, #8
 909 0254 FB68     		ldr	r3, [r7, #12]
 910 0256 9A63     		str	r2, [r3, #56]
 875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 911              		.loc 1 875 18
 912 0258 FB68     		ldr	r3, [r7, #12]
 913 025a 0122     		movs	r2, #1
 914 025c 83F83420 		strb	r2, [r3, #52]
 876:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 915              		.loc 1 876 20
 916 0260 FB68     		ldr	r3, [r7, #12]
 917 0262 0022     		movs	r2, #0
 918 0264 1A63     		str	r2, [r3, #48]
 877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 919              		.loc 1 877 14
 920 0266 0123     		movs	r3, #1
 921 0268 A1E0     		b	.L46
 922              	.L39:
 878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 879:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DCRCFAIL))
 923              		.loc 1 879 14
 924 026a FB68     		ldr	r3, [r7, #12]
 925 026c 1B68     		ldr	r3, [r3]
 926 026e 5B6B     		ldr	r3, [r3, #52]
 927 0270 03F00203 		and	r3, r3, #2
 928              		.loc 1 879 13
 929 0274 002B     		cmp	r3, #0
 930 0276 12D0     		beq	.L40
 880:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
 882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 931              		.loc 1 882 7
 932 0278 FB68     		ldr	r3, [r7, #12]
 933 027a 1B68     		ldr	r3, [r3]
 934 027c 154A     		ldr	r2, .L47
 935 027e 9A63     		str	r2, [r3, #56]
 883:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_DATA_CRC_FAIL;
 936              		.loc 1 883 10
 937 0280 FB68     		ldr	r3, [r7, #12]
 938 0282 9B6B     		ldr	r3, [r3, #56]
 939              		.loc 1 883 22
 940 0284 43F00202 		orr	r2, r3, #2
 941 0288 FB68     		ldr	r3, [r7, #12]
 942 028a 9A63     		str	r2, [r3, #56]
 884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 943              		.loc 1 884 18
 944 028c FB68     		ldr	r3, [r7, #12]
 945 028e 0122     		movs	r2, #1
 946 0290 83F83420 		strb	r2, [r3, #52]
 885:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 947              		.loc 1 885 20
ARM GAS  /tmp/ccsLb3N5.s 			page 33


 948 0294 FB68     		ldr	r3, [r7, #12]
 949 0296 0022     		movs	r2, #0
 950 0298 1A63     		str	r2, [r3, #48]
 886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 951              		.loc 1 886 14
 952 029a 0123     		movs	r3, #1
 953 029c 87E0     		b	.L46
 954              	.L40:
 887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXOVERR))
 955              		.loc 1 888 14
 956 029e FB68     		ldr	r3, [r7, #12]
 957 02a0 1B68     		ldr	r3, [r3]
 958 02a2 5B6B     		ldr	r3, [r3, #52]
 959 02a4 03F02003 		and	r3, r3, #32
 960              		.loc 1 888 13
 961 02a8 002B     		cmp	r3, #0
 962 02aa 64D0     		beq	.L42
 889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
 891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 963              		.loc 1 891 7
 964 02ac FB68     		ldr	r3, [r7, #12]
 965 02ae 1B68     		ldr	r3, [r3]
 966 02b0 084A     		ldr	r2, .L47
 967 02b2 9A63     		str	r2, [r3, #56]
 892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_RX_OVERRUN;
 968              		.loc 1 892 10
 969 02b4 FB68     		ldr	r3, [r7, #12]
 970 02b6 9B6B     		ldr	r3, [r3, #56]
 971              		.loc 1 892 22
 972 02b8 43F02002 		orr	r2, r3, #32
 973 02bc FB68     		ldr	r3, [r7, #12]
 974 02be 9A63     		str	r2, [r3, #56]
 893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 975              		.loc 1 893 18
 976 02c0 FB68     		ldr	r3, [r7, #12]
 977 02c2 0122     		movs	r2, #1
 978 02c4 83F83420 		strb	r2, [r3, #52]
 894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 979              		.loc 1 894 20
 980 02c8 FB68     		ldr	r3, [r7, #12]
 981 02ca 0022     		movs	r2, #0
 982 02cc 1A63     		str	r2, [r3, #48]
 895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 983              		.loc 1 895 14
 984 02ce 0123     		movs	r3, #1
 985 02d0 6DE0     		b	.L46
 986              	.L48:
 987 02d2 00BF     		.align	2
 988              	.L47:
 989 02d4 FF054000 		.word	4195839
 990              	.L45:
 896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
 898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 899:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Nothing to do */
ARM GAS  /tmp/ccsLb3N5.s 			page 34


 900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 901:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
 902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Empty FIFO if there is still any data */
 903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     while ((__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXDAVL)) && (dataremaining > 0U))
 904:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       data = SDMMC_ReadFIFO(hsd->Instance);
 991              		.loc 1 905 32
 992 02d8 FB68     		ldr	r3, [r7, #12]
 993 02da 1B68     		ldr	r3, [r3]
 994              		.loc 1 905 14
 995 02dc 1846     		mov	r0, r3
 996 02de FFF7FEFF 		bl	SDMMC_ReadFIFO
 997 02e2 F862     		str	r0, [r7, #44]
 906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       *tempbuff = (uint8_t)(data & 0xFFU);
 998              		.loc 1 906 19
 999 02e4 FB6A     		ldr	r3, [r7, #44]
 1000 02e6 DAB2     		uxtb	r2, r3
 1001              		.loc 1 906 17
 1002 02e8 7B6B     		ldr	r3, [r7, #52]
 1003 02ea 1A70     		strb	r2, [r3]
 907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tempbuff++;
 1004              		.loc 1 907 15
 1005 02ec 7B6B     		ldr	r3, [r7, #52]
 1006 02ee 0133     		adds	r3, r3, #1
 1007 02f0 7B63     		str	r3, [r7, #52]
 908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 1008              		.loc 1 908 20
 1009 02f2 FB6B     		ldr	r3, [r7, #60]
 1010 02f4 013B     		subs	r3, r3, #1
 1011 02f6 FB63     		str	r3, [r7, #60]
 909:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       *tempbuff = (uint8_t)((data >> 8U) & 0xFFU);
 1012              		.loc 1 909 35
 1013 02f8 FB6A     		ldr	r3, [r7, #44]
 1014 02fa 1B0A     		lsrs	r3, r3, #8
 1015              		.loc 1 909 19
 1016 02fc DAB2     		uxtb	r2, r3
 1017              		.loc 1 909 17
 1018 02fe 7B6B     		ldr	r3, [r7, #52]
 1019 0300 1A70     		strb	r2, [r3]
 910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tempbuff++;
 1020              		.loc 1 910 15
 1021 0302 7B6B     		ldr	r3, [r7, #52]
 1022 0304 0133     		adds	r3, r3, #1
 1023 0306 7B63     		str	r3, [r7, #52]
 911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 1024              		.loc 1 911 20
 1025 0308 FB6B     		ldr	r3, [r7, #60]
 1026 030a 013B     		subs	r3, r3, #1
 1027 030c FB63     		str	r3, [r7, #60]
 912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       *tempbuff = (uint8_t)((data >> 16U) & 0xFFU);
 1028              		.loc 1 912 35
 1029 030e FB6A     		ldr	r3, [r7, #44]
 1030 0310 1B0C     		lsrs	r3, r3, #16
 1031              		.loc 1 912 19
 1032 0312 DAB2     		uxtb	r2, r3
 1033              		.loc 1 912 17
 1034 0314 7B6B     		ldr	r3, [r7, #52]
ARM GAS  /tmp/ccsLb3N5.s 			page 35


 1035 0316 1A70     		strb	r2, [r3]
 913:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tempbuff++;
 1036              		.loc 1 913 15
 1037 0318 7B6B     		ldr	r3, [r7, #52]
 1038 031a 0133     		adds	r3, r3, #1
 1039 031c 7B63     		str	r3, [r7, #52]
 914:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 1040              		.loc 1 914 20
 1041 031e FB6B     		ldr	r3, [r7, #60]
 1042 0320 013B     		subs	r3, r3, #1
 1043 0322 FB63     		str	r3, [r7, #60]
 915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       *tempbuff = (uint8_t)((data >> 24U) & 0xFFU);
 1044              		.loc 1 915 35
 1045 0324 FB6A     		ldr	r3, [r7, #44]
 1046 0326 1B0E     		lsrs	r3, r3, #24
 1047              		.loc 1 915 19
 1048 0328 DAB2     		uxtb	r2, r3
 1049              		.loc 1 915 17
 1050 032a 7B6B     		ldr	r3, [r7, #52]
 1051 032c 1A70     		strb	r2, [r3]
 916:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tempbuff++;
 1052              		.loc 1 916 15
 1053 032e 7B6B     		ldr	r3, [r7, #52]
 1054 0330 0133     		adds	r3, r3, #1
 1055 0332 7B63     		str	r3, [r7, #52]
 917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 1056              		.loc 1 917 20
 1057 0334 FB6B     		ldr	r3, [r7, #60]
 1058 0336 013B     		subs	r3, r3, #1
 1059 0338 FB63     		str	r3, [r7, #60]
 918:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((HAL_GetTick() - tickstart) >=  Timeout) || (Timeout == 0U))
 1060              		.loc 1 919 13
 1061 033a FFF7FEFF 		bl	HAL_GetTick
 1062 033e 0246     		mov	r2, r0
 1063              		.loc 1 919 27 discriminator 1
 1064 0340 3B6B     		ldr	r3, [r7, #48]
 1065 0342 D31A     		subs	r3, r2, r3
 1066              		.loc 1 919 10 discriminator 1
 1067 0344 3A6D     		ldr	r2, [r7, #80]
 1068 0346 9A42     		cmp	r2, r3
 1069 0348 02D9     		bls	.L43
 1070              		.loc 1 919 53 discriminator 1
 1071 034a 3B6D     		ldr	r3, [r7, #80]
 1072 034c 002B     		cmp	r3, #0
 1073 034e 12D1     		bne	.L42
 1074              	.L43:
 920:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Clear all the static flags */
 922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 1075              		.loc 1 922 9
 1076 0350 FB68     		ldr	r3, [r7, #12]
 1077 0352 1B68     		ldr	r3, [r3]
 1078 0354 184A     		ldr	r2, .L49
 1079 0356 9A63     		str	r2, [r3, #56]
 923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_TIMEOUT;
 1080              		.loc 1 923 12
ARM GAS  /tmp/ccsLb3N5.s 			page 36


 1081 0358 FB68     		ldr	r3, [r7, #12]
 1082 035a 9B6B     		ldr	r3, [r3, #56]
 1083              		.loc 1 923 24
 1084 035c 43F00042 		orr	r2, r3, #-2147483648
 1085 0360 FB68     		ldr	r3, [r7, #12]
 1086 0362 9A63     		str	r2, [r3, #56]
 924:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
 1087              		.loc 1 924 20
 1088 0364 FB68     		ldr	r3, [r7, #12]
 1089 0366 0122     		movs	r2, #1
 1090 0368 83F83420 		strb	r2, [r3, #52]
 925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Context = SD_CONTEXT_NONE;
 1091              		.loc 1 925 22
 1092 036c FB68     		ldr	r3, [r7, #12]
 1093 036e 0022     		movs	r2, #0
 1094 0370 1A63     		str	r2, [r3, #48]
 926:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         return HAL_ERROR;
 1095              		.loc 1 926 16
 1096 0372 0123     		movs	r3, #1
 1097 0374 1BE0     		b	.L46
 1098              	.L42:
 903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 1099              		.loc 1 903 13
 1100 0376 FB68     		ldr	r3, [r7, #12]
 1101 0378 1B68     		ldr	r3, [r3]
 1102 037a 5B6B     		ldr	r3, [r3, #52]
 1103 037c 03F40013 		and	r3, r3, #2097152
 903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 1104              		.loc 1 903 56
 1105 0380 002B     		cmp	r3, #0
 1106 0382 02D0     		beq	.L44
 903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 1107              		.loc 1 903 56 is_stmt 0 discriminator 1
 1108 0384 FB6B     		ldr	r3, [r7, #60]
 1109 0386 002B     		cmp	r3, #0
 1110 0388 A6D1     		bne	.L45
 1111              	.L44:
 927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
 928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
 930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
 931:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
 933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
 1112              		.loc 1 933 5 is_stmt 1
 1113 038a FB68     		ldr	r3, [r7, #12]
 1114 038c 1B68     		ldr	r3, [r3]
 1115 038e 40F23A52 		movw	r2, #1338
 1116 0392 9A63     		str	r2, [r3, #56]
 934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 1117              		.loc 1 935 16
 1118 0394 FB68     		ldr	r3, [r7, #12]
 1119 0396 0122     		movs	r2, #1
 1120 0398 83F83420 		strb	r2, [r3, #52]
 936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_OK;
ARM GAS  /tmp/ccsLb3N5.s 			page 37


 1121              		.loc 1 937 12
 1122 039c 0023     		movs	r3, #0
 1123 039e 06E0     		b	.L46
 1124              	.L26:
 938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
 940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_BUSY;
 1125              		.loc 1 941 8
 1126 03a0 FB68     		ldr	r3, [r7, #12]
 1127 03a2 9B6B     		ldr	r3, [r3, #56]
 1128              		.loc 1 941 20
 1129 03a4 43F00052 		orr	r2, r3, #536870912
 1130 03a8 FB68     		ldr	r3, [r7, #12]
 1131 03aa 9A63     		str	r2, [r3, #56]
 942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 1132              		.loc 1 942 12
 1133 03ac 0123     		movs	r3, #1
 1134              	.L46:
 943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 1135              		.loc 1 944 1
 1136 03ae 1846     		mov	r0, r3
 1137 03b0 4837     		adds	r7, r7, #72
 1138              		.cfi_def_cfa_offset 8
 1139 03b2 BD46     		mov	sp, r7
 1140              		.cfi_def_cfa_register 13
 1141              		@ sp needed
 1142 03b4 80BD     		pop	{r7, pc}
 1143              	.L50:
 1144 03b6 00BF     		.align	2
 1145              	.L49:
 1146 03b8 FF054000 		.word	4195839
 1147              		.cfi_endproc
 1148              	.LFE450:
 1150              		.section	.text.HAL_SD_WriteBlocks,"ax",%progbits
 1151              		.align	1
 1152              		.global	HAL_SD_WriteBlocks
 1153              		.syntax unified
 1154              		.thumb
 1155              		.thumb_func
 1157              	HAL_SD_WriteBlocks:
 1158              	.LFB451:
 945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
 947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Allows to write block(s) to a specified address in a card. The Data
 948:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         transfer is managed by polling mode.
 949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   This API should be followed by a check on the card state through
 950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         HAL_SD_GetCardState().
 951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
 952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pData: pointer to the buffer that will contain the data to transmit
 953:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  BlockAdd: Block Address where data will be written
 954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of SD blocks to write
 955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  Timeout: Specify timeout value
 956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
 957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
 958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_WriteBlocks(SD_HandleTypeDef *hsd, const uint8_t *pData, uint32_t BlockAdd
ARM GAS  /tmp/ccsLb3N5.s 			page 38


 959:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                      uint32_t NumberOfBlocks, uint32_t Timeout)
 960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 1159              		.loc 1 960 1
 1160              		.cfi_startproc
 1161              		@ args = 4, pretend = 0, frame = 72
 1162              		@ frame_needed = 1, uses_anonymous_args = 0
 1163 0000 80B5     		push	{r7, lr}
 1164              		.cfi_def_cfa_offset 8
 1165              		.cfi_offset 7, -8
 1166              		.cfi_offset 14, -4
 1167 0002 92B0     		sub	sp, sp, #72
 1168              		.cfi_def_cfa_offset 80
 1169 0004 00AF     		add	r7, sp, #0
 1170              		.cfi_def_cfa_register 7
 1171 0006 F860     		str	r0, [r7, #12]
 1172 0008 B960     		str	r1, [r7, #8]
 1173 000a 7A60     		str	r2, [r7, #4]
 1174 000c 3B60     		str	r3, [r7]
 961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SDMMC_DataInitTypeDef config;
 962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
 963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t tickstart = HAL_GetTick();
 1175              		.loc 1 963 24
 1176 000e FFF7FEFF 		bl	HAL_GetTick
 1177 0012 3863     		str	r0, [r7, #48]
 964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t count;
 965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t data;
 966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t dataremaining;
 967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t add = BlockAdd;
 1178              		.loc 1 967 12
 1179 0014 7B68     		ldr	r3, [r7, #4]
 1180 0016 BB63     		str	r3, [r7, #56]
 968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   const uint8_t *tempbuff = pData;
 1181              		.loc 1 968 18
 1182 0018 BB68     		ldr	r3, [r7, #8]
 1183 001a 7B63     		str	r3, [r7, #52]
 969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 970:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (NULL == pData)
 1184              		.loc 1 970 6
 1185 001c BB68     		ldr	r3, [r7, #8]
 1186 001e 002B     		cmp	r3, #0
 1187 0020 07D1     		bne	.L52
 971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
 1188              		.loc 1 972 8
 1189 0022 FB68     		ldr	r3, [r7, #12]
 1190 0024 9B6B     		ldr	r3, [r3, #56]
 1191              		.loc 1 972 20
 1192 0026 43F00062 		orr	r2, r3, #134217728
 1193 002a FB68     		ldr	r3, [r7, #12]
 1194 002c 9A63     		str	r2, [r3, #56]
 973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 1195              		.loc 1 973 12
 1196 002e 0123     		movs	r3, #1
 1197 0030 65E1     		b	.L70
 1198              	.L52:
 974:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 975:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 39


 976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
 1199              		.loc 1 976 10
 1200 0032 FB68     		ldr	r3, [r7, #12]
 1201 0034 93F83430 		ldrb	r3, [r3, #52]
 1202 0038 DBB2     		uxtb	r3, r3
 1203              		.loc 1 976 6
 1204 003a 012B     		cmp	r3, #1
 1205 003c 40F05881 		bne	.L54
 977:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = HAL_SD_ERROR_NONE;
 1206              		.loc 1 978 20
 1207 0040 FB68     		ldr	r3, [r7, #12]
 1208 0042 0022     		movs	r2, #0
 1209 0044 9A63     		str	r2, [r3, #56]
 979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 980:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((add + NumberOfBlocks) > (hsd->SdCard.LogBlockNbr))
 1210              		.loc 1 980 14
 1211 0046 BA6B     		ldr	r2, [r7, #56]
 1212 0048 3B68     		ldr	r3, [r7]
 1213 004a 1A44     		add	r2, r2, r3
 1214              		.loc 1 980 46
 1215 004c FB68     		ldr	r3, [r7, #12]
 1216 004e DB6D     		ldr	r3, [r3, #92]
 1217              		.loc 1 980 8
 1218 0050 9A42     		cmp	r2, r3
 1219 0052 07D9     		bls	.L55
 981:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_ADDR_OUT_OF_RANGE;
 1220              		.loc 1 982 10
 1221 0054 FB68     		ldr	r3, [r7, #12]
 1222 0056 9B6B     		ldr	r3, [r3, #56]
 1223              		.loc 1 982 22
 1224 0058 43F00072 		orr	r2, r3, #33554432
 1225 005c FB68     		ldr	r3, [r7, #12]
 1226 005e 9A63     		str	r2, [r3, #56]
 983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 1227              		.loc 1 983 14
 1228 0060 0123     		movs	r3, #1
 1229 0062 4CE1     		b	.L70
 1230              	.L55:
 984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_BUSY;
 1231              		.loc 1 986 16
 1232 0064 FB68     		ldr	r3, [r7, #12]
 1233 0066 0322     		movs	r2, #3
 1234 0068 83F83420 		strb	r2, [r3, #52]
 987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Initialize data control register */
 989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL = 0U;
 1235              		.loc 1 989 8
 1236 006c FB68     		ldr	r3, [r7, #12]
 1237 006e 1B68     		ldr	r3, [r3]
 1238              		.loc 1 989 26
 1239 0070 0022     		movs	r2, #0
 1240 0072 DA62     		str	r2, [r3, #44]
 990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 40


 991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->SdCard.CardType != CARD_SDHC_SDXC)
 1241              		.loc 1 991 20
 1242 0074 FB68     		ldr	r3, [r7, #12]
 1243 0076 5B6C     		ldr	r3, [r3, #68]
 1244              		.loc 1 991 8
 1245 0078 012B     		cmp	r3, #1
 1246 007a 02D0     		beq	.L56
 992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       add *= BLOCKSIZE;
 1247              		.loc 1 993 11
 1248 007c BB6B     		ldr	r3, [r7, #56]
 1249 007e 5B02     		lsls	r3, r3, #9
 1250 0080 BB63     		str	r3, [r7, #56]
 1251              	.L56:
 994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Configure the SD DPSM (Data Path State Machine) */
 997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataTimeOut   = SDMMC_DATATIMEOUT;
 1252              		.loc 1 997 26
 1253 0082 4FF0FF33 		mov	r3, #-1
 1254 0086 BB61     		str	r3, [r7, #24]
 998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataLength    = NumberOfBlocks * BLOCKSIZE;
 1255              		.loc 1 998 43
 1256 0088 3B68     		ldr	r3, [r7]
 1257 008a 5B02     		lsls	r3, r3, #9
 1258              		.loc 1 998 26
 1259 008c FB61     		str	r3, [r7, #28]
 999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataBlockSize = SDMMC_DATABLOCK_SIZE_512B;
 1260              		.loc 1 999 26
 1261 008e 9023     		movs	r3, #144
 1262 0090 3B62     		str	r3, [r7, #32]
1000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferDir   = SDMMC_TRANSFER_DIR_TO_CARD;
 1263              		.loc 1 1000 26
 1264 0092 0023     		movs	r3, #0
 1265 0094 7B62     		str	r3, [r7, #36]
1001:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
 1266              		.loc 1 1001 26
 1267 0096 0023     		movs	r3, #0
 1268 0098 BB62     		str	r3, [r7, #40]
1002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DPSM          = SDMMC_DPSM_DISABLE;
1004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DPSM          = SDMMC_DPSM_ENABLE;
 1269              		.loc 1 1005 26
 1270 009a 0123     		movs	r3, #1
 1271 009c FB62     		str	r3, [r7, #44]
1006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1007:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (void)SDMMC_ConfigData(hsd->Instance, &config);
 1272              		.loc 1 1008 11
 1273 009e FB68     		ldr	r3, [r7, #12]
 1274 00a0 1B68     		ldr	r3, [r3]
 1275 00a2 07F11802 		add	r2, r7, #24
 1276 00a6 1146     		mov	r1, r2
 1277 00a8 1846     		mov	r0, r3
 1278 00aa FFF7FEFF 		bl	SDMMC_ConfigData
1009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
ARM GAS  /tmp/ccsLb3N5.s 			page 41


1010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __SDMMC_CMDTRANS_ENABLE(hsd->Instance);
1011:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1012:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1014:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Write Blocks in Polling mode */
1015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (NumberOfBlocks > 1U)
 1279              		.loc 1 1015 8
 1280 00ae 3B68     		ldr	r3, [r7]
 1281 00b0 012B     		cmp	r3, #1
 1282 00b2 0AD9     		bls	.L57
1016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_WRITE_MULTIPLE_BLOCK;
 1283              		.loc 1 1017 20
 1284 00b4 FB68     		ldr	r3, [r7, #12]
 1285 00b6 2022     		movs	r2, #32
 1286 00b8 1A63     		str	r2, [r3, #48]
1018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Write Multi Block command */
1020:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdWriteMultiBlock(hsd->Instance, add);
 1287              		.loc 1 1020 20
 1288 00ba FB68     		ldr	r3, [r7, #12]
 1289 00bc 1B68     		ldr	r3, [r3]
 1290 00be B96B     		ldr	r1, [r7, #56]
 1291 00c0 1846     		mov	r0, r3
 1292 00c2 FFF7FEFF 		bl	SDMMC_CmdWriteMultiBlock
 1293 00c6 7864     		str	r0, [r7, #68]
 1294 00c8 09E0     		b	.L58
 1295              	.L57:
1021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
1023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_WRITE_SINGLE_BLOCK;
 1296              		.loc 1 1024 20
 1297 00ca FB68     		ldr	r3, [r7, #12]
 1298 00cc 1022     		movs	r2, #16
 1299 00ce 1A63     		str	r2, [r3, #48]
1025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Write Single Block command */
1027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdWriteSingleBlock(hsd->Instance, add);
 1300              		.loc 1 1027 20
 1301 00d0 FB68     		ldr	r3, [r7, #12]
 1302 00d2 1B68     		ldr	r3, [r3]
 1303 00d4 B96B     		ldr	r1, [r7, #56]
 1304 00d6 1846     		mov	r0, r3
 1305 00d8 FFF7FEFF 		bl	SDMMC_CmdWriteSingleBlock
 1306 00dc 7864     		str	r0, [r7, #68]
 1307              	.L58:
1028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 1308              		.loc 1 1029 8
 1309 00de 7B6C     		ldr	r3, [r7, #68]
 1310 00e0 002B     		cmp	r3, #0
 1311 00e2 12D0     		beq	.L59
1030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 1312              		.loc 1 1032 7
ARM GAS  /tmp/ccsLb3N5.s 			page 42


 1313 00e4 FB68     		ldr	r3, [r7, #12]
 1314 00e6 1B68     		ldr	r3, [r3]
 1315 00e8 874A     		ldr	r2, .L71
 1316 00ea 9A63     		str	r2, [r3, #56]
1033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= errorstate;
 1317              		.loc 1 1033 10
 1318 00ec FB68     		ldr	r3, [r7, #12]
 1319 00ee 9A6B     		ldr	r2, [r3, #56]
 1320              		.loc 1 1033 22
 1321 00f0 7B6C     		ldr	r3, [r7, #68]
 1322 00f2 1A43     		orrs	r2, r2, r3
 1323 00f4 FB68     		ldr	r3, [r7, #12]
 1324 00f6 9A63     		str	r2, [r3, #56]
1034:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 1325              		.loc 1 1034 18
 1326 00f8 FB68     		ldr	r3, [r7, #12]
 1327 00fa 0122     		movs	r2, #1
 1328 00fc 83F83420 		strb	r2, [r3, #52]
1035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 1329              		.loc 1 1035 20
 1330 0100 FB68     		ldr	r3, [r7, #12]
 1331 0102 0022     		movs	r2, #0
 1332 0104 1A63     		str	r2, [r3, #48]
1036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 1333              		.loc 1 1036 14
 1334 0106 0123     		movs	r3, #1
 1335 0108 F9E0     		b	.L70
 1336              	.L59:
1037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1039:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Write block(s) in polling mode */
1040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     dataremaining = config.DataLength;
 1337              		.loc 1 1040 19
 1338 010a FB69     		ldr	r3, [r7, #28]
 1339 010c FB63     		str	r3, [r7, #60]
1041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     while (!__HAL_SD_GET_FLAG(hsd,
 1340              		.loc 1 1041 11
 1341 010e 65E0     		b	.L60
 1342              	.L65:
1042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                               SDMMC_FLAG_TXUNDERR | SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT | SDM
1043:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_TXFIFOHE) && (dataremaining > 0U))
 1343              		.loc 1 1044 11
 1344 0110 FB68     		ldr	r3, [r7, #12]
 1345 0112 1B68     		ldr	r3, [r3]
 1346 0114 5B6B     		ldr	r3, [r3, #52]
 1347 0116 03F48043 		and	r3, r3, #16384
 1348              		.loc 1 1044 10
 1349 011a 002B     		cmp	r3, #0
 1350 011c 40D0     		beq	.L61
 1351              		.loc 1 1044 55 discriminator 1
 1352 011e FB6B     		ldr	r3, [r7, #60]
 1353 0120 002B     		cmp	r3, #0
 1354 0122 3DD0     		beq	.L61
1045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Write data to SDMMC Tx FIFO */
1047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         for (count = 0U; count < 8U; count++)
ARM GAS  /tmp/ccsLb3N5.s 			page 43


 1355              		.loc 1 1047 20
 1356 0124 0023     		movs	r3, #0
 1357 0126 3B64     		str	r3, [r7, #64]
 1358              		.loc 1 1047 9
 1359 0128 37E0     		b	.L62
 1360              	.L63:
1048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
1049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           data = (uint32_t)(*tempbuff);
 1361              		.loc 1 1049 29
 1362 012a 7B6B     		ldr	r3, [r7, #52]
 1363 012c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1364              		.loc 1 1049 16
 1365 012e 7B61     		str	r3, [r7, #20]
1050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           tempbuff++;
 1366              		.loc 1 1050 19
 1367 0130 7B6B     		ldr	r3, [r7, #52]
 1368 0132 0133     		adds	r3, r3, #1
 1369 0134 7B63     		str	r3, [r7, #52]
1051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           dataremaining--;
 1370              		.loc 1 1051 24
 1371 0136 FB6B     		ldr	r3, [r7, #60]
 1372 0138 013B     		subs	r3, r3, #1
 1373 013a FB63     		str	r3, [r7, #60]
1052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           data |= ((uint32_t)(*tempbuff) << 8U);
 1374              		.loc 1 1052 31
 1375 013c 7B6B     		ldr	r3, [r7, #52]
 1376 013e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1377              		.loc 1 1052 42
 1378 0140 1A02     		lsls	r2, r3, #8
 1379              		.loc 1 1052 16
 1380 0142 7B69     		ldr	r3, [r7, #20]
 1381 0144 1343     		orrs	r3, r3, r2
 1382 0146 7B61     		str	r3, [r7, #20]
1053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           tempbuff++;
 1383              		.loc 1 1053 19
 1384 0148 7B6B     		ldr	r3, [r7, #52]
 1385 014a 0133     		adds	r3, r3, #1
 1386 014c 7B63     		str	r3, [r7, #52]
1054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           dataremaining--;
 1387              		.loc 1 1054 24
 1388 014e FB6B     		ldr	r3, [r7, #60]
 1389 0150 013B     		subs	r3, r3, #1
 1390 0152 FB63     		str	r3, [r7, #60]
1055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           data |= ((uint32_t)(*tempbuff) << 16U);
 1391              		.loc 1 1055 31
 1392 0154 7B6B     		ldr	r3, [r7, #52]
 1393 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1394              		.loc 1 1055 42
 1395 0158 1A04     		lsls	r2, r3, #16
 1396              		.loc 1 1055 16
 1397 015a 7B69     		ldr	r3, [r7, #20]
 1398 015c 1343     		orrs	r3, r3, r2
 1399 015e 7B61     		str	r3, [r7, #20]
1056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           tempbuff++;
 1400              		.loc 1 1056 19
 1401 0160 7B6B     		ldr	r3, [r7, #52]
 1402 0162 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccsLb3N5.s 			page 44


 1403 0164 7B63     		str	r3, [r7, #52]
1057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           dataremaining--;
 1404              		.loc 1 1057 24
 1405 0166 FB6B     		ldr	r3, [r7, #60]
 1406 0168 013B     		subs	r3, r3, #1
 1407 016a FB63     		str	r3, [r7, #60]
1058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           data |= ((uint32_t)(*tempbuff) << 24U);
 1408              		.loc 1 1058 31
 1409 016c 7B6B     		ldr	r3, [r7, #52]
 1410 016e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1411              		.loc 1 1058 42
 1412 0170 1A06     		lsls	r2, r3, #24
 1413              		.loc 1 1058 16
 1414 0172 7B69     		ldr	r3, [r7, #20]
 1415 0174 1343     		orrs	r3, r3, r2
 1416 0176 7B61     		str	r3, [r7, #20]
1059:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           tempbuff++;
 1417              		.loc 1 1059 19
 1418 0178 7B6B     		ldr	r3, [r7, #52]
 1419 017a 0133     		adds	r3, r3, #1
 1420 017c 7B63     		str	r3, [r7, #52]
1060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           dataremaining--;
 1421              		.loc 1 1060 24
 1422 017e FB6B     		ldr	r3, [r7, #60]
 1423 0180 013B     		subs	r3, r3, #1
 1424 0182 FB63     		str	r3, [r7, #60]
1061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           (void)SDMMC_WriteFIFO(hsd->Instance, &data);
 1425              		.loc 1 1061 17
 1426 0184 FB68     		ldr	r3, [r7, #12]
 1427 0186 1B68     		ldr	r3, [r3]
 1428 0188 07F11402 		add	r2, r7, #20
 1429 018c 1146     		mov	r1, r2
 1430 018e 1846     		mov	r0, r3
 1431 0190 FFF7FEFF 		bl	SDMMC_WriteFIFO
1047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 1432              		.loc 1 1047 43 discriminator 3
 1433 0194 3B6C     		ldr	r3, [r7, #64]
 1434 0196 0133     		adds	r3, r3, #1
 1435 0198 3B64     		str	r3, [r7, #64]
 1436              	.L62:
1047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 1437              		.loc 1 1047 32 discriminator 1
 1438 019a 3B6C     		ldr	r3, [r7, #64]
 1439 019c 072B     		cmp	r3, #7
 1440 019e C4D9     		bls	.L63
 1441              	.L61:
1062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
1063:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((HAL_GetTick() - tickstart) >=  Timeout) || (Timeout == 0U))
 1442              		.loc 1 1065 13
 1443 01a0 FFF7FEFF 		bl	HAL_GetTick
 1444 01a4 0246     		mov	r2, r0
 1445              		.loc 1 1065 27 discriminator 1
 1446 01a6 3B6B     		ldr	r3, [r7, #48]
 1447 01a8 D31A     		subs	r3, r2, r3
 1448              		.loc 1 1065 10 discriminator 1
ARM GAS  /tmp/ccsLb3N5.s 			page 45


 1449 01aa 3A6D     		ldr	r2, [r7, #80]
 1450 01ac 9A42     		cmp	r2, r3
 1451 01ae 02D9     		bls	.L64
 1452              		.loc 1 1065 53 discriminator 1
 1453 01b0 3B6D     		ldr	r3, [r7, #80]
 1454 01b2 002B     		cmp	r3, #0
 1455 01b4 12D1     		bne	.L60
 1456              	.L64:
1066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1067:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Clear all the static flags */
1068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 1457              		.loc 1 1068 9
 1458 01b6 FB68     		ldr	r3, [r7, #12]
 1459 01b8 1B68     		ldr	r3, [r3]
 1460 01ba 534A     		ldr	r2, .L71
 1461 01bc 9A63     		str	r2, [r3, #56]
1069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= errorstate;
 1462              		.loc 1 1069 12
 1463 01be FB68     		ldr	r3, [r7, #12]
 1464 01c0 9A6B     		ldr	r2, [r3, #56]
 1465              		.loc 1 1069 24
 1466 01c2 7B6C     		ldr	r3, [r7, #68]
 1467 01c4 1A43     		orrs	r2, r2, r3
 1468 01c6 FB68     		ldr	r3, [r7, #12]
 1469 01c8 9A63     		str	r2, [r3, #56]
1070:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
 1470              		.loc 1 1070 20
 1471 01ca FB68     		ldr	r3, [r7, #12]
 1472 01cc 0122     		movs	r2, #1
 1473 01ce 83F83420 		strb	r2, [r3, #52]
1071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Context = SD_CONTEXT_NONE;
 1474              		.loc 1 1071 22
 1475 01d2 FB68     		ldr	r3, [r7, #12]
 1476 01d4 0022     		movs	r2, #0
 1477 01d6 1A63     		str	r2, [r3, #48]
1072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         return HAL_TIMEOUT;
 1478              		.loc 1 1072 16
 1479 01d8 0323     		movs	r3, #3
 1480 01da 90E0     		b	.L70
 1481              	.L60:
1041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                               SDMMC_FLAG_TXUNDERR | SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT | SDM
 1482              		.loc 1 1041 13
 1483 01dc FB68     		ldr	r3, [r7, #12]
 1484 01de 1B68     		ldr	r3, [r3]
 1485 01e0 5B6B     		ldr	r3, [r3, #52]
 1486 01e2 03F48D73 		and	r3, r3, #282
1041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                               SDMMC_FLAG_TXUNDERR | SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT | SDM
 1487              		.loc 1 1041 12
 1488 01e6 002B     		cmp	r3, #0
 1489 01e8 92D0     		beq	.L65
1073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1074:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1076:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __SDMMC_CMDTRANS_DISABLE(hsd->Instance);
1078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1079:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
ARM GAS  /tmp/ccsLb3N5.s 			page 46


1080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send stop transmission command in case of multiblock write */
1082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DATAEND) && (NumberOfBlocks > 1U))
 1490              		.loc 1 1082 9
 1491 01ea FB68     		ldr	r3, [r7, #12]
 1492 01ec 1B68     		ldr	r3, [r3]
 1493 01ee 5B6B     		ldr	r3, [r3, #52]
 1494 01f0 03F48073 		and	r3, r3, #256
 1495              		.loc 1 1082 8
 1496 01f4 002B     		cmp	r3, #0
 1497 01f6 22D0     		beq	.L66
 1498              		.loc 1 1082 52 discriminator 1
 1499 01f8 3B68     		ldr	r3, [r7]
 1500 01fa 012B     		cmp	r3, #1
 1501 01fc 1FD9     		bls	.L66
1083:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1084:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (hsd->SdCard.CardType != CARD_SECURED)
 1502              		.loc 1 1084 22
 1503 01fe FB68     		ldr	r3, [r7, #12]
 1504 0200 5B6C     		ldr	r3, [r3, #68]
 1505              		.loc 1 1084 10
 1506 0202 032B     		cmp	r3, #3
 1507 0204 1BD0     		beq	.L66
1085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Send stop transmission command */
1087:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         errorstate = SDMMC_CmdStopTransfer(hsd->Instance);
 1508              		.loc 1 1087 22
 1509 0206 FB68     		ldr	r3, [r7, #12]
 1510 0208 1B68     		ldr	r3, [r3]
 1511 020a 1846     		mov	r0, r3
 1512 020c FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 1513 0210 7864     		str	r0, [r7, #68]
1088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (errorstate != HAL_SD_ERROR_NONE)
 1514              		.loc 1 1088 12
 1515 0212 7B6C     		ldr	r3, [r7, #68]
 1516 0214 002B     		cmp	r3, #0
 1517 0216 12D0     		beq	.L66
1089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
1090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Clear all the static flags */
1091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 1518              		.loc 1 1091 11
 1519 0218 FB68     		ldr	r3, [r7, #12]
 1520 021a 1B68     		ldr	r3, [r3]
 1521 021c 3A4A     		ldr	r2, .L71
 1522 021e 9A63     		str	r2, [r3, #56]
1092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCode |= errorstate;
 1523              		.loc 1 1092 14
 1524 0220 FB68     		ldr	r3, [r7, #12]
 1525 0222 9A6B     		ldr	r2, [r3, #56]
 1526              		.loc 1 1092 26
 1527 0224 7B6C     		ldr	r3, [r7, #68]
 1528 0226 1A43     		orrs	r2, r2, r3
 1529 0228 FB68     		ldr	r3, [r7, #12]
 1530 022a 9A63     		str	r2, [r3, #56]
1093:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->State = HAL_SD_STATE_READY;
 1531              		.loc 1 1093 22
 1532 022c FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsLb3N5.s 			page 47


 1533 022e 0122     		movs	r2, #1
 1534 0230 83F83420 		strb	r2, [r3, #52]
1094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->Context = SD_CONTEXT_NONE;
 1535              		.loc 1 1094 24
 1536 0234 FB68     		ldr	r3, [r7, #12]
 1537 0236 0022     		movs	r2, #0
 1538 0238 1A63     		str	r2, [r3, #48]
1095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           return HAL_ERROR;
 1539              		.loc 1 1095 18
 1540 023a 0123     		movs	r3, #1
 1541 023c 5FE0     		b	.L70
 1542              	.L66:
1096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
1097:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1098:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Get error state */
1101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DTIMEOUT))
 1543              		.loc 1 1101 9
 1544 023e FB68     		ldr	r3, [r7, #12]
 1545 0240 1B68     		ldr	r3, [r3]
 1546 0242 5B6B     		ldr	r3, [r3, #52]
 1547 0244 03F00803 		and	r3, r3, #8
 1548              		.loc 1 1101 8
 1549 0248 002B     		cmp	r3, #0
 1550 024a 12D0     		beq	.L67
1102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 1551              		.loc 1 1104 7
 1552 024c FB68     		ldr	r3, [r7, #12]
 1553 024e 1B68     		ldr	r3, [r3]
 1554 0250 2D4A     		ldr	r2, .L71
 1555 0252 9A63     		str	r2, [r3, #56]
1105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_DATA_TIMEOUT;
 1556              		.loc 1 1105 10
 1557 0254 FB68     		ldr	r3, [r7, #12]
 1558 0256 9B6B     		ldr	r3, [r3, #56]
 1559              		.loc 1 1105 22
 1560 0258 43F00802 		orr	r2, r3, #8
 1561 025c FB68     		ldr	r3, [r7, #12]
 1562 025e 9A63     		str	r2, [r3, #56]
1106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 1563              		.loc 1 1106 18
 1564 0260 FB68     		ldr	r3, [r7, #12]
 1565 0262 0122     		movs	r2, #1
 1566 0264 83F83420 		strb	r2, [r3, #52]
1107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 1567              		.loc 1 1107 20
 1568 0268 FB68     		ldr	r3, [r7, #12]
 1569 026a 0022     		movs	r2, #0
 1570 026c 1A63     		str	r2, [r3, #48]
1108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 1571              		.loc 1 1108 14
 1572 026e 0123     		movs	r3, #1
 1573 0270 45E0     		b	.L70
 1574              	.L67:
ARM GAS  /tmp/ccsLb3N5.s 			page 48


1109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DCRCFAIL))
 1575              		.loc 1 1110 14
 1576 0272 FB68     		ldr	r3, [r7, #12]
 1577 0274 1B68     		ldr	r3, [r3]
 1578 0276 5B6B     		ldr	r3, [r3, #52]
 1579 0278 03F00203 		and	r3, r3, #2
 1580              		.loc 1 1110 13
 1581 027c 002B     		cmp	r3, #0
 1582 027e 12D0     		beq	.L68
1111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 1583              		.loc 1 1113 7
 1584 0280 FB68     		ldr	r3, [r7, #12]
 1585 0282 1B68     		ldr	r3, [r3]
 1586 0284 204A     		ldr	r2, .L71
 1587 0286 9A63     		str	r2, [r3, #56]
1114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_DATA_CRC_FAIL;
 1588              		.loc 1 1114 10
 1589 0288 FB68     		ldr	r3, [r7, #12]
 1590 028a 9B6B     		ldr	r3, [r3, #56]
 1591              		.loc 1 1114 22
 1592 028c 43F00202 		orr	r2, r3, #2
 1593 0290 FB68     		ldr	r3, [r7, #12]
 1594 0292 9A63     		str	r2, [r3, #56]
1115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 1595              		.loc 1 1115 18
 1596 0294 FB68     		ldr	r3, [r7, #12]
 1597 0296 0122     		movs	r2, #1
 1598 0298 83F83420 		strb	r2, [r3, #52]
1116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 1599              		.loc 1 1116 20
 1600 029c FB68     		ldr	r3, [r7, #12]
 1601 029e 0022     		movs	r2, #0
 1602 02a0 1A63     		str	r2, [r3, #48]
1117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 1603              		.loc 1 1117 14
 1604 02a2 0123     		movs	r3, #1
 1605 02a4 2BE0     		b	.L70
 1606              	.L68:
1118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_TXUNDERR))
 1607              		.loc 1 1119 14
 1608 02a6 FB68     		ldr	r3, [r7, #12]
 1609 02a8 1B68     		ldr	r3, [r3]
 1610 02aa 5B6B     		ldr	r3, [r3, #52]
 1611 02ac 03F01003 		and	r3, r3, #16
 1612              		.loc 1 1119 13
 1613 02b0 002B     		cmp	r3, #0
 1614 02b2 12D0     		beq	.L69
1120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 1615              		.loc 1 1122 7
 1616 02b4 FB68     		ldr	r3, [r7, #12]
 1617 02b6 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccsLb3N5.s 			page 49


 1618 02b8 134A     		ldr	r2, .L71
 1619 02ba 9A63     		str	r2, [r3, #56]
1123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_TX_UNDERRUN;
 1620              		.loc 1 1123 10
 1621 02bc FB68     		ldr	r3, [r7, #12]
 1622 02be 9B6B     		ldr	r3, [r3, #56]
 1623              		.loc 1 1123 22
 1624 02c0 43F01002 		orr	r2, r3, #16
 1625 02c4 FB68     		ldr	r3, [r7, #12]
 1626 02c6 9A63     		str	r2, [r3, #56]
1124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 1627              		.loc 1 1124 18
 1628 02c8 FB68     		ldr	r3, [r7, #12]
 1629 02ca 0122     		movs	r2, #1
 1630 02cc 83F83420 		strb	r2, [r3, #52]
1125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 1631              		.loc 1 1125 20
 1632 02d0 FB68     		ldr	r3, [r7, #12]
 1633 02d2 0022     		movs	r2, #0
 1634 02d4 1A63     		str	r2, [r3, #48]
1126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 1635              		.loc 1 1126 14
 1636 02d6 0123     		movs	r3, #1
 1637 02d8 11E0     		b	.L70
 1638              	.L69:
1127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
1129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Nothing to do */
1131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
1134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
 1639              		.loc 1 1134 5
 1640 02da FB68     		ldr	r3, [r7, #12]
 1641 02dc 1B68     		ldr	r3, [r3]
 1642 02de 40F23A52 		movw	r2, #1338
 1643 02e2 9A63     		str	r2, [r3, #56]
1135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 1644              		.loc 1 1136 16
 1645 02e4 FB68     		ldr	r3, [r7, #12]
 1646 02e6 0122     		movs	r2, #1
 1647 02e8 83F83420 		strb	r2, [r3, #52]
1137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_OK;
 1648              		.loc 1 1138 12
 1649 02ec 0023     		movs	r3, #0
 1650 02ee 06E0     		b	.L70
 1651              	.L54:
1139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
1141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_BUSY;
 1652              		.loc 1 1142 8
 1653 02f0 FB68     		ldr	r3, [r7, #12]
 1654 02f2 9B6B     		ldr	r3, [r3, #56]
ARM GAS  /tmp/ccsLb3N5.s 			page 50


 1655              		.loc 1 1142 20
 1656 02f4 43F00052 		orr	r2, r3, #536870912
 1657 02f8 FB68     		ldr	r3, [r7, #12]
 1658 02fa 9A63     		str	r2, [r3, #56]
1143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 1659              		.loc 1 1143 12
 1660 02fc 0123     		movs	r3, #1
 1661              	.L70:
1144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 1662              		.loc 1 1145 1
 1663 02fe 1846     		mov	r0, r3
 1664 0300 4837     		adds	r7, r7, #72
 1665              		.cfi_def_cfa_offset 8
 1666 0302 BD46     		mov	sp, r7
 1667              		.cfi_def_cfa_register 13
 1668              		@ sp needed
 1669 0304 80BD     		pop	{r7, pc}
 1670              	.L72:
 1671 0306 00BF     		.align	2
 1672              	.L71:
 1673 0308 FF054000 		.word	4195839
 1674              		.cfi_endproc
 1675              	.LFE451:
 1677              		.section	.text.HAL_SD_ReadBlocks_IT,"ax",%progbits
 1678              		.align	1
 1679              		.global	HAL_SD_ReadBlocks_IT
 1680              		.syntax unified
 1681              		.thumb
 1682              		.thumb_func
 1684              	HAL_SD_ReadBlocks_IT:
 1685              	.LFB452:
1146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
1148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Reads block(s) from a specified address in a card. The Data transfer
1149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         is managed in interrupt mode.
1150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   This API should be followed by a check on the card state through
1151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         HAL_SD_GetCardState().
1152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   You could also check the IT transfer process through the SD Rx
1153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         interrupt event.
1154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
1155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pData: Pointer to the buffer that will contain the received data
1156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  BlockAdd: Block Address from where data is to be read
1157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of blocks to read.
1158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
1159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
1160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_ReadBlocks_IT(SD_HandleTypeDef *hsd, uint8_t *pData, uint32_t BlockAdd,
1161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                        uint32_t NumberOfBlocks)
1162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 1686              		.loc 1 1162 1
 1687              		.cfi_startproc
 1688              		@ args = 0, pretend = 0, frame = 48
 1689              		@ frame_needed = 1, uses_anonymous_args = 0
 1690 0000 80B5     		push	{r7, lr}
 1691              		.cfi_def_cfa_offset 8
 1692              		.cfi_offset 7, -8
 1693              		.cfi_offset 14, -4
ARM GAS  /tmp/ccsLb3N5.s 			page 51


 1694 0002 8CB0     		sub	sp, sp, #48
 1695              		.cfi_def_cfa_offset 56
 1696 0004 00AF     		add	r7, sp, #0
 1697              		.cfi_def_cfa_register 7
 1698 0006 F860     		str	r0, [r7, #12]
 1699 0008 B960     		str	r1, [r7, #8]
 1700 000a 7A60     		str	r2, [r7, #4]
 1701 000c 3B60     		str	r3, [r7]
1163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SDMMC_DataInitTypeDef config;
1164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
1165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t add = BlockAdd;
 1702              		.loc 1 1165 12
 1703 000e 7B68     		ldr	r3, [r7, #4]
 1704 0010 BB62     		str	r3, [r7, #40]
1166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (NULL == pData)
 1705              		.loc 1 1167 6
 1706 0012 BB68     		ldr	r3, [r7, #8]
 1707 0014 002B     		cmp	r3, #0
 1708 0016 07D1     		bne	.L74
1168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
 1709              		.loc 1 1169 8
 1710 0018 FB68     		ldr	r3, [r7, #12]
 1711 001a 9B6B     		ldr	r3, [r3, #56]
 1712              		.loc 1 1169 20
 1713 001c 43F00062 		orr	r2, r3, #134217728
 1714 0020 FB68     		ldr	r3, [r7, #12]
 1715 0022 9A63     		str	r2, [r3, #56]
1170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 1716              		.loc 1 1170 12
 1717 0024 0123     		movs	r3, #1
 1718 0026 7EE0     		b	.L82
 1719              	.L74:
1171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
 1720              		.loc 1 1173 10
 1721 0028 FB68     		ldr	r3, [r7, #12]
 1722 002a 93F83430 		ldrb	r3, [r3, #52]
 1723 002e DBB2     		uxtb	r3, r3
 1724              		.loc 1 1173 6
 1725 0030 012B     		cmp	r3, #1
 1726 0032 77D1     		bne	.L76
1174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = HAL_SD_ERROR_NONE;
 1727              		.loc 1 1175 20
 1728 0034 FB68     		ldr	r3, [r7, #12]
 1729 0036 0022     		movs	r2, #0
 1730 0038 9A63     		str	r2, [r3, #56]
1176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((add + NumberOfBlocks) > (hsd->SdCard.LogBlockNbr))
 1731              		.loc 1 1177 14
 1732 003a BA6A     		ldr	r2, [r7, #40]
 1733 003c 3B68     		ldr	r3, [r7]
 1734 003e 1A44     		add	r2, r2, r3
 1735              		.loc 1 1177 46
ARM GAS  /tmp/ccsLb3N5.s 			page 52


 1736 0040 FB68     		ldr	r3, [r7, #12]
 1737 0042 DB6D     		ldr	r3, [r3, #92]
 1738              		.loc 1 1177 8
 1739 0044 9A42     		cmp	r2, r3
 1740 0046 07D9     		bls	.L77
1178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_ADDR_OUT_OF_RANGE;
 1741              		.loc 1 1179 10
 1742 0048 FB68     		ldr	r3, [r7, #12]
 1743 004a 9B6B     		ldr	r3, [r3, #56]
 1744              		.loc 1 1179 22
 1745 004c 43F00072 		orr	r2, r3, #33554432
 1746 0050 FB68     		ldr	r3, [r7, #12]
 1747 0052 9A63     		str	r2, [r3, #56]
1180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 1748              		.loc 1 1180 14
 1749 0054 0123     		movs	r3, #1
 1750 0056 66E0     		b	.L82
 1751              	.L77:
1181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_BUSY;
 1752              		.loc 1 1183 16
 1753 0058 FB68     		ldr	r3, [r7, #12]
 1754 005a 0322     		movs	r2, #3
 1755 005c 83F83420 		strb	r2, [r3, #52]
1184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Initialize data control register */
1186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL = 0U;
 1756              		.loc 1 1186 8
 1757 0060 FB68     		ldr	r3, [r7, #12]
 1758 0062 1B68     		ldr	r3, [r3]
 1759              		.loc 1 1186 26
 1760 0064 0022     		movs	r2, #0
 1761 0066 DA62     		str	r2, [r3, #44]
1187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->pRxBuffPtr = pData;
 1762              		.loc 1 1188 21
 1763 0068 FB68     		ldr	r3, [r7, #12]
 1764 006a BA68     		ldr	r2, [r7, #8]
 1765 006c 9A62     		str	r2, [r3, #40]
1189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->RxXferSize = BLOCKSIZE * NumberOfBlocks;
 1766              		.loc 1 1189 33
 1767 006e 3B68     		ldr	r3, [r7]
 1768 0070 5A02     		lsls	r2, r3, #9
 1769              		.loc 1 1189 21
 1770 0072 FB68     		ldr	r3, [r7, #12]
 1771 0074 DA62     		str	r2, [r3, #44]
1190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->SdCard.CardType != CARD_SDHC_SDXC)
 1772              		.loc 1 1191 20
 1773 0076 FB68     		ldr	r3, [r7, #12]
 1774 0078 5B6C     		ldr	r3, [r3, #68]
 1775              		.loc 1 1191 8
 1776 007a 012B     		cmp	r3, #1
 1777 007c 02D0     		beq	.L78
1192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
ARM GAS  /tmp/ccsLb3N5.s 			page 53


1193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       add *= BLOCKSIZE;
 1778              		.loc 1 1193 11
 1779 007e BB6A     		ldr	r3, [r7, #40]
 1780 0080 5B02     		lsls	r3, r3, #9
 1781 0082 BB62     		str	r3, [r7, #40]
 1782              	.L78:
1194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Configure the SD DPSM (Data Path State Machine) */
1197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataTimeOut   = SDMMC_DATATIMEOUT;
 1783              		.loc 1 1197 26
 1784 0084 4FF0FF33 		mov	r3, #-1
 1785 0088 3B61     		str	r3, [r7, #16]
1198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataLength    = BLOCKSIZE * NumberOfBlocks;
 1786              		.loc 1 1198 38
 1787 008a 3B68     		ldr	r3, [r7]
 1788 008c 5B02     		lsls	r3, r3, #9
 1789              		.loc 1 1198 26
 1790 008e 7B61     		str	r3, [r7, #20]
1199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataBlockSize = SDMMC_DATABLOCK_SIZE_512B;
 1791              		.loc 1 1199 26
 1792 0090 9023     		movs	r3, #144
 1793 0092 BB61     		str	r3, [r7, #24]
1200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferDir   = SDMMC_TRANSFER_DIR_TO_SDMMC;
 1794              		.loc 1 1200 26
 1795 0094 0223     		movs	r3, #2
 1796 0096 FB61     		str	r3, [r7, #28]
1201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
 1797              		.loc 1 1201 26
 1798 0098 0023     		movs	r3, #0
 1799 009a 3B62     		str	r3, [r7, #32]
1202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DPSM          = SDMMC_DPSM_DISABLE;
1204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DPSM          = SDMMC_DPSM_ENABLE;
 1800              		.loc 1 1205 26
 1801 009c 0123     		movs	r3, #1
 1802 009e 7B62     		str	r3, [r7, #36]
1206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (void)SDMMC_ConfigData(hsd->Instance, &config);
 1803              		.loc 1 1208 11
 1804 00a0 FB68     		ldr	r3, [r7, #12]
 1805 00a2 1B68     		ldr	r3, [r3]
 1806 00a4 07F11002 		add	r2, r7, #16
 1807 00a8 1146     		mov	r1, r2
 1808 00aa 1846     		mov	r0, r3
 1809 00ac FFF7FEFF 		bl	SDMMC_ConfigData
1209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __SDMMC_CMDTRANS_ENABLE(hsd->Instance);
1211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Read Blocks in IT mode */
1215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (NumberOfBlocks > 1U)
 1810              		.loc 1 1215 8
 1811 00b0 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccsLb3N5.s 			page 54


 1812 00b2 012B     		cmp	r3, #1
 1813 00b4 0AD9     		bls	.L79
1216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = (SD_CONTEXT_READ_MULTIPLE_BLOCK | SD_CONTEXT_IT);
 1814              		.loc 1 1217 20
 1815 00b6 FB68     		ldr	r3, [r7, #12]
 1816 00b8 0A22     		movs	r2, #10
 1817 00ba 1A63     		str	r2, [r3, #48]
1218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Read Multi Block command */
1220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdReadMultiBlock(hsd->Instance, add);
 1818              		.loc 1 1220 20
 1819 00bc FB68     		ldr	r3, [r7, #12]
 1820 00be 1B68     		ldr	r3, [r3]
 1821 00c0 B96A     		ldr	r1, [r7, #40]
 1822 00c2 1846     		mov	r0, r3
 1823 00c4 FFF7FEFF 		bl	SDMMC_CmdReadMultiBlock
 1824 00c8 F862     		str	r0, [r7, #44]
 1825 00ca 09E0     		b	.L80
 1826              	.L79:
1221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
1223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = (SD_CONTEXT_READ_SINGLE_BLOCK | SD_CONTEXT_IT);
 1827              		.loc 1 1224 20
 1828 00cc FB68     		ldr	r3, [r7, #12]
 1829 00ce 0922     		movs	r2, #9
 1830 00d0 1A63     		str	r2, [r3, #48]
1225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Read Single Block command */
1227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdReadSingleBlock(hsd->Instance, add);
 1831              		.loc 1 1227 20
 1832 00d2 FB68     		ldr	r3, [r7, #12]
 1833 00d4 1B68     		ldr	r3, [r3]
 1834 00d6 B96A     		ldr	r1, [r7, #40]
 1835 00d8 1846     		mov	r0, r3
 1836 00da FFF7FEFF 		bl	SDMMC_CmdReadSingleBlock
 1837 00de F862     		str	r0, [r7, #44]
 1838              	.L80:
1228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 1839              		.loc 1 1229 8
 1840 00e0 FB6A     		ldr	r3, [r7, #44]
 1841 00e2 002B     		cmp	r3, #0
 1842 00e4 12D0     		beq	.L81
1230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 1843              		.loc 1 1232 7
 1844 00e6 FB68     		ldr	r3, [r7, #12]
 1845 00e8 1B68     		ldr	r3, [r3]
 1846 00ea 114A     		ldr	r2, .L83
 1847 00ec 9A63     		str	r2, [r3, #56]
1233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= errorstate;
 1848              		.loc 1 1233 10
 1849 00ee FB68     		ldr	r3, [r7, #12]
 1850 00f0 9A6B     		ldr	r2, [r3, #56]
ARM GAS  /tmp/ccsLb3N5.s 			page 55


 1851              		.loc 1 1233 22
 1852 00f2 FB6A     		ldr	r3, [r7, #44]
 1853 00f4 1A43     		orrs	r2, r2, r3
 1854 00f6 FB68     		ldr	r3, [r7, #12]
 1855 00f8 9A63     		str	r2, [r3, #56]
1234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 1856              		.loc 1 1234 18
 1857 00fa FB68     		ldr	r3, [r7, #12]
 1858 00fc 0122     		movs	r2, #1
 1859 00fe 83F83420 		strb	r2, [r3, #52]
1235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 1860              		.loc 1 1235 20
 1861 0102 FB68     		ldr	r3, [r7, #12]
 1862 0104 0022     		movs	r2, #0
 1863 0106 1A63     		str	r2, [r3, #48]
1236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 1864              		.loc 1 1236 14
 1865 0108 0123     		movs	r3, #1
 1866 010a 0CE0     		b	.L82
 1867              	.L81:
1237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Enable transfer interrupts */
1240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_ENABLE_IT(hsd, (SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | SDMMC_IT_RXOVERR |
 1868              		.loc 1 1240 5
 1869 010c FB68     		ldr	r3, [r7, #12]
 1870 010e 1B68     		ldr	r3, [r3]
 1871 0110 DB6B     		ldr	r3, [r3, #60]
 1872 0112 FA68     		ldr	r2, [r7, #12]
 1873 0114 1268     		ldr	r2, [r2]
 1874 0116 43F40143 		orr	r3, r3, #33024
 1875 011a 43F02A03 		orr	r3, r3, #42
 1876 011e D363     		str	r3, [r2, #60]
1241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                              SDMMC_IT_DATAEND | SDMMC_FLAG_RXFIFOHF));
1242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_OK;
 1877              		.loc 1 1243 12
 1878 0120 0023     		movs	r3, #0
 1879 0122 00E0     		b	.L82
 1880              	.L76:
1244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
1246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_BUSY;
 1881              		.loc 1 1247 12
 1882 0124 0223     		movs	r3, #2
 1883              	.L82:
1248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 1884              		.loc 1 1249 1
 1885 0126 1846     		mov	r0, r3
 1886 0128 3037     		adds	r7, r7, #48
 1887              		.cfi_def_cfa_offset 8
 1888 012a BD46     		mov	sp, r7
 1889              		.cfi_def_cfa_register 13
 1890              		@ sp needed
 1891 012c 80BD     		pop	{r7, pc}
ARM GAS  /tmp/ccsLb3N5.s 			page 56


 1892              	.L84:
 1893 012e 00BF     		.align	2
 1894              	.L83:
 1895 0130 FF054000 		.word	4195839
 1896              		.cfi_endproc
 1897              	.LFE452:
 1899              		.section	.text.HAL_SD_WriteBlocks_IT,"ax",%progbits
 1900              		.align	1
 1901              		.global	HAL_SD_WriteBlocks_IT
 1902              		.syntax unified
 1903              		.thumb
 1904              		.thumb_func
 1906              	HAL_SD_WriteBlocks_IT:
 1907              	.LFB453:
1250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
1252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Writes block(s) to a specified address in a card. The Data transfer
1253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         is managed in interrupt mode.
1254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   This API should be followed by a check on the card state through
1255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         HAL_SD_GetCardState().
1256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   You could also check the IT transfer process through the SD Tx
1257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         interrupt event.
1258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
1259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pData: Pointer to the buffer that will contain the data to transmit
1260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  BlockAdd: Block Address where data will be written
1261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of blocks to write
1262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
1263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
1264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_WriteBlocks_IT(SD_HandleTypeDef *hsd, uint8_t *pData, uint32_t BlockAdd,
1265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                         uint32_t NumberOfBlocks)
1266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 1908              		.loc 1 1266 1
 1909              		.cfi_startproc
 1910              		@ args = 0, pretend = 0, frame = 48
 1911              		@ frame_needed = 1, uses_anonymous_args = 0
 1912 0000 80B5     		push	{r7, lr}
 1913              		.cfi_def_cfa_offset 8
 1914              		.cfi_offset 7, -8
 1915              		.cfi_offset 14, -4
 1916 0002 8CB0     		sub	sp, sp, #48
 1917              		.cfi_def_cfa_offset 56
 1918 0004 00AF     		add	r7, sp, #0
 1919              		.cfi_def_cfa_register 7
 1920 0006 F860     		str	r0, [r7, #12]
 1921 0008 B960     		str	r1, [r7, #8]
 1922 000a 7A60     		str	r2, [r7, #4]
 1923 000c 3B60     		str	r3, [r7]
1267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SDMMC_DataInitTypeDef config;
1268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
1269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t add = BlockAdd;
 1924              		.loc 1 1269 12
 1925 000e 7B68     		ldr	r3, [r7, #4]
 1926 0010 BB62     		str	r3, [r7, #40]
1270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (NULL == pData)
 1927              		.loc 1 1271 6
 1928 0012 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccsLb3N5.s 			page 57


 1929 0014 002B     		cmp	r3, #0
 1930 0016 07D1     		bne	.L86
1272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
 1931              		.loc 1 1273 8
 1932 0018 FB68     		ldr	r3, [r7, #12]
 1933 001a 9B6B     		ldr	r3, [r3, #56]
 1934              		.loc 1 1273 20
 1935 001c 43F00062 		orr	r2, r3, #134217728
 1936 0020 FB68     		ldr	r3, [r7, #12]
 1937 0022 9A63     		str	r2, [r3, #56]
1274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 1938              		.loc 1 1274 12
 1939 0024 0123     		movs	r3, #1
 1940 0026 7EE0     		b	.L94
 1941              	.L86:
1275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
 1942              		.loc 1 1277 10
 1943 0028 FB68     		ldr	r3, [r7, #12]
 1944 002a 93F83430 		ldrb	r3, [r3, #52]
 1945 002e DBB2     		uxtb	r3, r3
 1946              		.loc 1 1277 6
 1947 0030 012B     		cmp	r3, #1
 1948 0032 77D1     		bne	.L88
1278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = HAL_SD_ERROR_NONE;
 1949              		.loc 1 1279 20
 1950 0034 FB68     		ldr	r3, [r7, #12]
 1951 0036 0022     		movs	r2, #0
 1952 0038 9A63     		str	r2, [r3, #56]
1280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((add + NumberOfBlocks) > (hsd->SdCard.LogBlockNbr))
 1953              		.loc 1 1281 14
 1954 003a BA6A     		ldr	r2, [r7, #40]
 1955 003c 3B68     		ldr	r3, [r7]
 1956 003e 1A44     		add	r2, r2, r3
 1957              		.loc 1 1281 46
 1958 0040 FB68     		ldr	r3, [r7, #12]
 1959 0042 DB6D     		ldr	r3, [r3, #92]
 1960              		.loc 1 1281 8
 1961 0044 9A42     		cmp	r2, r3
 1962 0046 07D9     		bls	.L89
1282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_ADDR_OUT_OF_RANGE;
 1963              		.loc 1 1283 10
 1964 0048 FB68     		ldr	r3, [r7, #12]
 1965 004a 9B6B     		ldr	r3, [r3, #56]
 1966              		.loc 1 1283 22
 1967 004c 43F00072 		orr	r2, r3, #33554432
 1968 0050 FB68     		ldr	r3, [r7, #12]
 1969 0052 9A63     		str	r2, [r3, #56]
1284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 1970              		.loc 1 1284 14
 1971 0054 0123     		movs	r3, #1
 1972 0056 66E0     		b	.L94
ARM GAS  /tmp/ccsLb3N5.s 			page 58


 1973              	.L89:
1285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_BUSY;
 1974              		.loc 1 1287 16
 1975 0058 FB68     		ldr	r3, [r7, #12]
 1976 005a 0322     		movs	r2, #3
 1977 005c 83F83420 		strb	r2, [r3, #52]
1288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Initialize data control register */
1290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL = 0U;
 1978              		.loc 1 1290 8
 1979 0060 FB68     		ldr	r3, [r7, #12]
 1980 0062 1B68     		ldr	r3, [r3]
 1981              		.loc 1 1290 26
 1982 0064 0022     		movs	r2, #0
 1983 0066 DA62     		str	r2, [r3, #44]
1291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->pTxBuffPtr = pData;
 1984              		.loc 1 1292 21
 1985 0068 FB68     		ldr	r3, [r7, #12]
 1986 006a BA68     		ldr	r2, [r7, #8]
 1987 006c 1A62     		str	r2, [r3, #32]
1293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->TxXferSize = BLOCKSIZE * NumberOfBlocks;
 1988              		.loc 1 1293 33
 1989 006e 3B68     		ldr	r3, [r7]
 1990 0070 5A02     		lsls	r2, r3, #9
 1991              		.loc 1 1293 21
 1992 0072 FB68     		ldr	r3, [r7, #12]
 1993 0074 5A62     		str	r2, [r3, #36]
1294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->SdCard.CardType != CARD_SDHC_SDXC)
 1994              		.loc 1 1295 20
 1995 0076 FB68     		ldr	r3, [r7, #12]
 1996 0078 5B6C     		ldr	r3, [r3, #68]
 1997              		.loc 1 1295 8
 1998 007a 012B     		cmp	r3, #1
 1999 007c 02D0     		beq	.L90
1296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       add *= BLOCKSIZE;
 2000              		.loc 1 1297 11
 2001 007e BB6A     		ldr	r3, [r7, #40]
 2002 0080 5B02     		lsls	r3, r3, #9
 2003 0082 BB62     		str	r3, [r7, #40]
 2004              	.L90:
1298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Configure the SD DPSM (Data Path State Machine) */
1302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataTimeOut   = SDMMC_DATATIMEOUT;
1303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataLength    = BLOCKSIZE * NumberOfBlocks;
1304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataBlockSize = SDMMC_DATABLOCK_SIZE_512B;
1305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferDir   = SDMMC_TRANSFER_DIR_TO_CARD;
1306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
1307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DPSM          = SDMMC_DPSM_DISABLE;
1308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (void)SDMMC_ConfigData(hsd->Instance, &config);
1309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 59


1310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __SDMMC_CMDTRANS_ENABLE(hsd->Instance);
1311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Write Blocks in Polling mode */
1315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (NumberOfBlocks > 1U)
 2005              		.loc 1 1315 8
 2006 0084 3B68     		ldr	r3, [r7]
 2007 0086 012B     		cmp	r3, #1
 2008 0088 0AD9     		bls	.L91
1316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = (SD_CONTEXT_WRITE_MULTIPLE_BLOCK | SD_CONTEXT_IT);
 2009              		.loc 1 1317 20
 2010 008a FB68     		ldr	r3, [r7, #12]
 2011 008c 2822     		movs	r2, #40
 2012 008e 1A63     		str	r2, [r3, #48]
1318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Write Multi Block command */
1320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdWriteMultiBlock(hsd->Instance, add);
 2013              		.loc 1 1320 20
 2014 0090 FB68     		ldr	r3, [r7, #12]
 2015 0092 1B68     		ldr	r3, [r3]
 2016 0094 B96A     		ldr	r1, [r7, #40]
 2017 0096 1846     		mov	r0, r3
 2018 0098 FFF7FEFF 		bl	SDMMC_CmdWriteMultiBlock
 2019 009c F862     		str	r0, [r7, #44]
 2020 009e 09E0     		b	.L92
 2021              	.L91:
1321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
1323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = (SD_CONTEXT_WRITE_SINGLE_BLOCK | SD_CONTEXT_IT);
 2022              		.loc 1 1324 20
 2023 00a0 FB68     		ldr	r3, [r7, #12]
 2024 00a2 1822     		movs	r2, #24
 2025 00a4 1A63     		str	r2, [r3, #48]
1325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Write Single Block command */
1327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdWriteSingleBlock(hsd->Instance, add);
 2026              		.loc 1 1327 20
 2027 00a6 FB68     		ldr	r3, [r7, #12]
 2028 00a8 1B68     		ldr	r3, [r3]
 2029 00aa B96A     		ldr	r1, [r7, #40]
 2030 00ac 1846     		mov	r0, r3
 2031 00ae FFF7FEFF 		bl	SDMMC_CmdWriteSingleBlock
 2032 00b2 F862     		str	r0, [r7, #44]
 2033              	.L92:
1328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 2034              		.loc 1 1329 8
 2035 00b4 FB6A     		ldr	r3, [r7, #44]
 2036 00b6 002B     		cmp	r3, #0
 2037 00b8 12D0     		beq	.L93
1330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2038              		.loc 1 1332 7
ARM GAS  /tmp/ccsLb3N5.s 			page 60


 2039 00ba FB68     		ldr	r3, [r7, #12]
 2040 00bc 1B68     		ldr	r3, [r3]
 2041 00be 1C4A     		ldr	r2, .L95
 2042 00c0 9A63     		str	r2, [r3, #56]
1333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= errorstate;
 2043              		.loc 1 1333 10
 2044 00c2 FB68     		ldr	r3, [r7, #12]
 2045 00c4 9A6B     		ldr	r2, [r3, #56]
 2046              		.loc 1 1333 22
 2047 00c6 FB6A     		ldr	r3, [r7, #44]
 2048 00c8 1A43     		orrs	r2, r2, r3
 2049 00ca FB68     		ldr	r3, [r7, #12]
 2050 00cc 9A63     		str	r2, [r3, #56]
1334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 2051              		.loc 1 1334 18
 2052 00ce FB68     		ldr	r3, [r7, #12]
 2053 00d0 0122     		movs	r2, #1
 2054 00d2 83F83420 		strb	r2, [r3, #52]
1335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 2055              		.loc 1 1335 20
 2056 00d6 FB68     		ldr	r3, [r7, #12]
 2057 00d8 0022     		movs	r2, #0
 2058 00da 1A63     		str	r2, [r3, #48]
1336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2059              		.loc 1 1336 14
 2060 00dc 0123     		movs	r3, #1
 2061 00de 22E0     		b	.L94
 2062              	.L93:
1337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
1340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Configure the SD DPSM (Data Path State Machine) */
1341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataTimeOut   = SDMMC_DATATIMEOUT;
 2063              		.loc 1 1341 26
 2064 00e0 4FF0FF33 		mov	r3, #-1
 2065 00e4 3B61     		str	r3, [r7, #16]
1342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataLength    = BLOCKSIZE * NumberOfBlocks;
 2066              		.loc 1 1342 38
 2067 00e6 3B68     		ldr	r3, [r7]
 2068 00e8 5B02     		lsls	r3, r3, #9
 2069              		.loc 1 1342 26
 2070 00ea 7B61     		str	r3, [r7, #20]
1343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataBlockSize = SDMMC_DATABLOCK_SIZE_512B;
 2071              		.loc 1 1343 26
 2072 00ec 9023     		movs	r3, #144
 2073 00ee BB61     		str	r3, [r7, #24]
1344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferDir   = SDMMC_TRANSFER_DIR_TO_CARD;
 2074              		.loc 1 1344 26
 2075 00f0 0023     		movs	r3, #0
 2076 00f2 FB61     		str	r3, [r7, #28]
1345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
 2077              		.loc 1 1345 26
 2078 00f4 0023     		movs	r3, #0
 2079 00f6 3B62     		str	r3, [r7, #32]
1346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DPSM          = SDMMC_DPSM_ENABLE;
 2080              		.loc 1 1346 26
 2081 00f8 0123     		movs	r3, #1
ARM GAS  /tmp/ccsLb3N5.s 			page 61


 2082 00fa 7B62     		str	r3, [r7, #36]
1347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (void)SDMMC_ConfigData(hsd->Instance, &config);
 2083              		.loc 1 1347 11
 2084 00fc FB68     		ldr	r3, [r7, #12]
 2085 00fe 1B68     		ldr	r3, [r3]
 2086 0100 07F11002 		add	r2, r7, #16
 2087 0104 1146     		mov	r1, r2
 2088 0106 1846     		mov	r0, r3
 2089 0108 FFF7FEFF 		bl	SDMMC_ConfigData
1348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
1349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
1350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Enable transfer interrupts */
1352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_ENABLE_IT(hsd, (SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | SDMMC_IT_TXUNDERR |
 2090              		.loc 1 1352 5
 2091 010c FB68     		ldr	r3, [r7, #12]
 2092 010e 1B68     		ldr	r3, [r3]
 2093 0110 DB6B     		ldr	r3, [r3, #60]
 2094 0112 FA68     		ldr	r2, [r7, #12]
 2095 0114 1268     		ldr	r2, [r2]
 2096 0116 43F48243 		orr	r3, r3, #16640
 2097 011a 43F01A03 		orr	r3, r3, #26
 2098 011e D363     		str	r3, [r2, #60]
1353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                              SDMMC_IT_DATAEND | SDMMC_FLAG_TXFIFOHE));
1354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_OK;
 2099              		.loc 1 1355 12
 2100 0120 0023     		movs	r3, #0
 2101 0122 00E0     		b	.L94
 2102              	.L88:
1356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
1358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_BUSY;
 2103              		.loc 1 1359 12
 2104 0124 0223     		movs	r3, #2
 2105              	.L94:
1360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 2106              		.loc 1 1361 1
 2107 0126 1846     		mov	r0, r3
 2108 0128 3037     		adds	r7, r7, #48
 2109              		.cfi_def_cfa_offset 8
 2110 012a BD46     		mov	sp, r7
 2111              		.cfi_def_cfa_register 13
 2112              		@ sp needed
 2113 012c 80BD     		pop	{r7, pc}
 2114              	.L96:
 2115 012e 00BF     		.align	2
 2116              	.L95:
 2117 0130 FF054000 		.word	4195839
 2118              		.cfi_endproc
 2119              	.LFE453:
 2121              		.section	.text.HAL_SD_ReadBlocks_DMA,"ax",%progbits
 2122              		.align	1
 2123              		.global	HAL_SD_ReadBlocks_DMA
 2124              		.syntax unified
ARM GAS  /tmp/ccsLb3N5.s 			page 62


 2125              		.thumb
 2126              		.thumb_func
 2128              	HAL_SD_ReadBlocks_DMA:
 2129              	.LFB454:
1362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
1364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Reads block(s) from a specified address in a card. The Data transfer
1365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         is managed by DMA mode.
1366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   This API should be followed by a check on the card state through
1367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         HAL_SD_GetCardState().
1368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   You could also check the DMA transfer process through the SD Rx
1369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         interrupt event.
1370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer SD handle
1371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pData: Pointer to the buffer that will contain the received data
1372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  BlockAdd: Block Address from where data is to be read
1373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of blocks to read.
1374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
1375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
1376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_ReadBlocks_DMA(SD_HandleTypeDef *hsd, uint8_t *pData, uint32_t BlockAdd,
1377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                         uint32_t NumberOfBlocks)
1378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 2130              		.loc 1 1378 1
 2131              		.cfi_startproc
 2132              		@ args = 0, pretend = 0, frame = 48
 2133              		@ frame_needed = 1, uses_anonymous_args = 0
 2134 0000 80B5     		push	{r7, lr}
 2135              		.cfi_def_cfa_offset 8
 2136              		.cfi_offset 7, -8
 2137              		.cfi_offset 14, -4
 2138 0002 8CB0     		sub	sp, sp, #48
 2139              		.cfi_def_cfa_offset 56
 2140 0004 00AF     		add	r7, sp, #0
 2141              		.cfi_def_cfa_register 7
 2142 0006 F860     		str	r0, [r7, #12]
 2143 0008 B960     		str	r1, [r7, #8]
 2144 000a 7A60     		str	r2, [r7, #4]
 2145 000c 3B60     		str	r3, [r7]
1379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SDMMC_DataInitTypeDef config;
1380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
1381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t add = BlockAdd;
 2146              		.loc 1 1381 12
 2147 000e 7B68     		ldr	r3, [r7, #4]
 2148 0010 BB62     		str	r3, [r7, #40]
1382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (NULL == pData)
 2149              		.loc 1 1383 6
 2150 0012 BB68     		ldr	r3, [r7, #8]
 2151 0014 002B     		cmp	r3, #0
 2152 0016 07D1     		bne	.L98
1384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
 2153              		.loc 1 1385 8
 2154 0018 FB68     		ldr	r3, [r7, #12]
 2155 001a 9B6B     		ldr	r3, [r3, #56]
 2156              		.loc 1 1385 20
 2157 001c 43F00062 		orr	r2, r3, #134217728
 2158 0020 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsLb3N5.s 			page 63


 2159 0022 9A63     		str	r2, [r3, #56]
1386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 2160              		.loc 1 1386 12
 2161 0024 0123     		movs	r3, #1
 2162 0026 BBE0     		b	.L107
 2163              	.L98:
1387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
 2164              		.loc 1 1389 10
 2165 0028 FB68     		ldr	r3, [r7, #12]
 2166 002a 93F83430 		ldrb	r3, [r3, #52]
 2167 002e DBB2     		uxtb	r3, r3
 2168              		.loc 1 1389 6
 2169 0030 012B     		cmp	r3, #1
 2170 0032 40F0B480 		bne	.L100
1390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = HAL_SD_ERROR_NONE;
 2171              		.loc 1 1391 20
 2172 0036 FB68     		ldr	r3, [r7, #12]
 2173 0038 0022     		movs	r2, #0
 2174 003a 9A63     		str	r2, [r3, #56]
1392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((add + NumberOfBlocks) > (hsd->SdCard.LogBlockNbr))
 2175              		.loc 1 1393 14
 2176 003c BA6A     		ldr	r2, [r7, #40]
 2177 003e 3B68     		ldr	r3, [r7]
 2178 0040 1A44     		add	r2, r2, r3
 2179              		.loc 1 1393 46
 2180 0042 FB68     		ldr	r3, [r7, #12]
 2181 0044 DB6D     		ldr	r3, [r3, #92]
 2182              		.loc 1 1393 8
 2183 0046 9A42     		cmp	r2, r3
 2184 0048 07D9     		bls	.L101
1394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_ADDR_OUT_OF_RANGE;
 2185              		.loc 1 1395 10
 2186 004a FB68     		ldr	r3, [r7, #12]
 2187 004c 9B6B     		ldr	r3, [r3, #56]
 2188              		.loc 1 1395 22
 2189 004e 43F00072 		orr	r2, r3, #33554432
 2190 0052 FB68     		ldr	r3, [r7, #12]
 2191 0054 9A63     		str	r2, [r3, #56]
1396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2192              		.loc 1 1396 14
 2193 0056 0123     		movs	r3, #1
 2194 0058 A2E0     		b	.L107
 2195              	.L101:
1397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_BUSY;
 2196              		.loc 1 1399 16
 2197 005a FB68     		ldr	r3, [r7, #12]
 2198 005c 0322     		movs	r2, #3
 2199 005e 83F83420 		strb	r2, [r3, #52]
1400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Initialize data control register */
ARM GAS  /tmp/ccsLb3N5.s 			page 64


1402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL = 0U;
 2200              		.loc 1 1402 8
 2201 0062 FB68     		ldr	r3, [r7, #12]
 2202 0064 1B68     		ldr	r3, [r3]
 2203              		.loc 1 1402 26
 2204 0066 0022     		movs	r2, #0
 2205 0068 DA62     		str	r2, [r3, #44]
1403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
1405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Set the DMA transfer complete callback */
1406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->hdmarx->XferCpltCallback = SD_DMAReceiveCplt;
 2206              		.loc 1 1406 8
 2207 006a FB68     		ldr	r3, [r7, #12]
 2208 006c 1B6C     		ldr	r3, [r3, #64]
 2209              		.loc 1 1406 35
 2210 006e 4E4A     		ldr	r2, .L108
 2211 0070 DA62     		str	r2, [r3, #44]
1407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Set the DMA error callback */
1409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->hdmarx->XferErrorCallback = SD_DMAError;
 2212              		.loc 1 1409 8
 2213 0072 FB68     		ldr	r3, [r7, #12]
 2214 0074 1B6C     		ldr	r3, [r3, #64]
 2215              		.loc 1 1409 36
 2216 0076 4D4A     		ldr	r2, .L108+4
 2217 0078 5A63     		str	r2, [r3, #52]
1410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Set the DMA Abort callback */
1412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->hdmarx->XferAbortCallback = NULL;
 2218              		.loc 1 1412 8
 2219 007a FB68     		ldr	r3, [r7, #12]
 2220 007c 1B6C     		ldr	r3, [r3, #64]
 2221              		.loc 1 1412 36
 2222 007e 0022     		movs	r2, #0
 2223 0080 9A63     		str	r2, [r3, #56]
1413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Force DMA Direction */
1415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->hdmarx->Init.Direction = DMA_PERIPH_TO_MEMORY;
 2224              		.loc 1 1415 8
 2225 0082 FB68     		ldr	r3, [r7, #12]
 2226 0084 1B6C     		ldr	r3, [r3, #64]
 2227              		.loc 1 1415 33
 2228 0086 0022     		movs	r2, #0
 2229 0088 9A60     		str	r2, [r3, #8]
1416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     MODIFY_REG(hsd->hdmarx->Instance->CCR, DMA_CCR_DIR, hsd->hdmarx->Init.Direction);
 2230              		.loc 1 1416 5
 2231 008a FB68     		ldr	r3, [r7, #12]
 2232 008c 1B6C     		ldr	r3, [r3, #64]
 2233 008e 1B68     		ldr	r3, [r3]
 2234 0090 1B68     		ldr	r3, [r3]
 2235 0092 23F01001 		bic	r1, r3, #16
 2236 0096 FB68     		ldr	r3, [r7, #12]
 2237 0098 1B6C     		ldr	r3, [r3, #64]
 2238 009a 9A68     		ldr	r2, [r3, #8]
 2239 009c FB68     		ldr	r3, [r7, #12]
 2240 009e 1B6C     		ldr	r3, [r3, #64]
 2241 00a0 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccsLb3N5.s 			page 65


 2242 00a2 0A43     		orrs	r2, r2, r1
 2243 00a4 1A60     		str	r2, [r3]
1417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Enable the DMA Channel */
1419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (HAL_DMA_Start_IT(hsd->hdmarx, (uint32_t)&hsd->Instance->FIFO, (uint32_t)pData,
 2244              		.loc 1 1419 9
 2245 00a6 FB68     		ldr	r3, [r7, #12]
 2246 00a8 186C     		ldr	r0, [r3, #64]
 2247              		.loc 1 1419 53
 2248 00aa FB68     		ldr	r3, [r7, #12]
 2249 00ac 1B68     		ldr	r3, [r3]
 2250              		.loc 1 1419 49
 2251 00ae 8033     		adds	r3, r3, #128
 2252              		.loc 1 1419 9
 2253 00b0 1946     		mov	r1, r3
 2254 00b2 BA68     		ldr	r2, [r7, #8]
1420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                          (uint32_t)(BLOCKSIZE * NumberOfBlocks) / 4U) != HAL_OK)
 2255              		.loc 1 1420 26
 2256 00b4 3B68     		ldr	r3, [r7]
 2257 00b6 5B02     		lsls	r3, r3, #9
1419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                          (uint32_t)(BLOCKSIZE * NumberOfBlocks) / 4U) != HAL_OK)
 2258              		.loc 1 1419 9
 2259 00b8 9B08     		lsrs	r3, r3, #2
 2260 00ba FFF7FEFF 		bl	HAL_DMA_Start_IT
 2261 00be 0346     		mov	r3, r0
1419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                          (uint32_t)(BLOCKSIZE * NumberOfBlocks) / 4U) != HAL_OK)
 2262              		.loc 1 1419 8 discriminator 1
 2263 00c0 002B     		cmp	r3, #0
 2264 00c2 0FD0     		beq	.L102
1421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2265              		.loc 1 1422 7
 2266 00c4 FB68     		ldr	r3, [r7, #12]
 2267 00c6 1B68     		ldr	r3, [r3]
 2268 00c8 394A     		ldr	r2, .L108+8
 2269 00ca 9A63     		str	r2, [r3, #56]
1423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_DMA;
 2270              		.loc 1 1423 10
 2271 00cc FB68     		ldr	r3, [r7, #12]
 2272 00ce 9B6B     		ldr	r3, [r3, #56]
 2273              		.loc 1 1423 22
 2274 00d0 43F08042 		orr	r2, r3, #1073741824
 2275 00d4 FB68     		ldr	r3, [r7, #12]
 2276 00d6 9A63     		str	r2, [r3, #56]
1424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 2277              		.loc 1 1424 18
 2278 00d8 FB68     		ldr	r3, [r7, #12]
 2279 00da 0122     		movs	r2, #1
 2280 00dc 83F83420 		strb	r2, [r3, #52]
1425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2281              		.loc 1 1425 14
 2282 00e0 0123     		movs	r3, #1
 2283 00e2 5DE0     		b	.L107
 2284              	.L102:
1426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
1428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
ARM GAS  /tmp/ccsLb3N5.s 			page 66


1429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Enable SD DMA transfer */
1430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_DMA_ENABLE(hsd);
 2285              		.loc 1 1430 7
 2286 00e4 FB68     		ldr	r3, [r7, #12]
 2287 00e6 1B68     		ldr	r3, [r3]
 2288 00e8 DA6A     		ldr	r2, [r3, #44]
 2289 00ea FB68     		ldr	r3, [r7, #12]
 2290 00ec 1B68     		ldr	r3, [r3]
 2291 00ee 42F00802 		orr	r2, r2, #8
 2292 00f2 DA62     		str	r2, [r3, #44]
1431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->pRxBuffPtr = pData;
1433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->RxXferSize = BLOCKSIZE * NumberOfBlocks;
1434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
1435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
1436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (hsd->SdCard.CardType != CARD_SDHC_SDXC)
 2293              		.loc 1 1437 22
 2294 00f4 FB68     		ldr	r3, [r7, #12]
 2295 00f6 5B6C     		ldr	r3, [r3, #68]
 2296              		.loc 1 1437 10
 2297 00f8 012B     		cmp	r3, #1
 2298 00fa 02D0     		beq	.L103
1438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         add *= BLOCKSIZE;
 2299              		.loc 1 1439 13
 2300 00fc BB6A     		ldr	r3, [r7, #40]
 2301 00fe 5B02     		lsls	r3, r3, #9
 2302 0100 BB62     		str	r3, [r7, #40]
 2303              	.L103:
1440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Configure the SD DPSM (Data Path State Machine) */
1443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.DataTimeOut   = SDMMC_DATATIMEOUT;
 2304              		.loc 1 1443 28
 2305 0102 4FF0FF33 		mov	r3, #-1
 2306 0106 3B61     		str	r3, [r7, #16]
1444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.DataLength    = BLOCKSIZE * NumberOfBlocks;
 2307              		.loc 1 1444 40
 2308 0108 3B68     		ldr	r3, [r7]
 2309 010a 5B02     		lsls	r3, r3, #9
 2310              		.loc 1 1444 28
 2311 010c 7B61     		str	r3, [r7, #20]
1445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.DataBlockSize = SDMMC_DATABLOCK_SIZE_512B;
 2312              		.loc 1 1445 28
 2313 010e 9023     		movs	r3, #144
 2314 0110 BB61     		str	r3, [r7, #24]
1446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.TransferDir   = SDMMC_TRANSFER_DIR_TO_SDMMC;
 2315              		.loc 1 1446 28
 2316 0112 0223     		movs	r3, #2
 2317 0114 FB61     		str	r3, [r7, #28]
1447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
 2318              		.loc 1 1447 28
 2319 0116 0023     		movs	r3, #0
 2320 0118 3B62     		str	r3, [r7, #32]
1448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.DPSM          = SDMMC_DPSM_DISABLE;
ARM GAS  /tmp/ccsLb3N5.s 			page 67


1450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.DPSM          = SDMMC_DPSM_ENABLE;
 2321              		.loc 1 1451 28
 2322 011a 0123     		movs	r3, #1
 2323 011c 7B62     		str	r3, [r7, #36]
1452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (void)SDMMC_ConfigData(hsd->Instance, &config);
 2324              		.loc 1 1454 13
 2325 011e FB68     		ldr	r3, [r7, #12]
 2326 0120 1B68     		ldr	r3, [r3]
 2327 0122 07F11002 		add	r2, r7, #16
 2328 0126 1146     		mov	r1, r2
 2329 0128 1846     		mov	r0, r3
 2330 012a FFF7FEFF 		bl	SDMMC_ConfigData
1455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __SDMMC_CMDTRANS_ENABLE(hsd->Instance);
1459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Instance->IDMABASE0 = (uint32_t) pData ;
1460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Instance->IDMACTRL  = SDMMC_ENABLE_IDMA_SINGLE_BUFF;
1461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Read Blocks in DMA mode */
1465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (NumberOfBlocks > 1U)
 2331              		.loc 1 1465 10
 2332 012e 3B68     		ldr	r3, [r7]
 2333 0130 012B     		cmp	r3, #1
 2334 0132 0AD9     		bls	.L104
1466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Context = (SD_CONTEXT_READ_MULTIPLE_BLOCK | SD_CONTEXT_DMA);
 2335              		.loc 1 1467 22
 2336 0134 FB68     		ldr	r3, [r7, #12]
 2337 0136 8222     		movs	r2, #130
 2338 0138 1A63     		str	r2, [r3, #48]
1468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Read Multi Block command */
1470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         errorstate = SDMMC_CmdReadMultiBlock(hsd->Instance, add);
 2339              		.loc 1 1470 22
 2340 013a FB68     		ldr	r3, [r7, #12]
 2341 013c 1B68     		ldr	r3, [r3]
 2342 013e B96A     		ldr	r1, [r7, #40]
 2343 0140 1846     		mov	r0, r3
 2344 0142 FFF7FEFF 		bl	SDMMC_CmdReadMultiBlock
 2345 0146 F862     		str	r0, [r7, #44]
 2346 0148 09E0     		b	.L105
 2347              	.L104:
1471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else
1473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Context = (SD_CONTEXT_READ_SINGLE_BLOCK | SD_CONTEXT_DMA);
 2348              		.loc 1 1474 22
 2349 014a FB68     		ldr	r3, [r7, #12]
 2350 014c 8122     		movs	r2, #129
 2351 014e 1A63     		str	r2, [r3, #48]
1475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 68


1476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Read Single Block command */
1477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         errorstate = SDMMC_CmdReadSingleBlock(hsd->Instance, add);
 2352              		.loc 1 1477 22
 2353 0150 FB68     		ldr	r3, [r7, #12]
 2354 0152 1B68     		ldr	r3, [r3]
 2355 0154 B96A     		ldr	r1, [r7, #40]
 2356 0156 1846     		mov	r0, r3
 2357 0158 FFF7FEFF 		bl	SDMMC_CmdReadSingleBlock
 2358 015c F862     		str	r0, [r7, #44]
 2359              	.L105:
1478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (errorstate != HAL_SD_ERROR_NONE)
 2360              		.loc 1 1479 10
 2361 015e FB6A     		ldr	r3, [r7, #44]
 2362 0160 002B     		cmp	r3, #0
 2363 0162 12D0     		beq	.L106
1480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Clear all the static flags */
1482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2364              		.loc 1 1482 9
 2365 0164 FB68     		ldr	r3, [r7, #12]
 2366 0166 1B68     		ldr	r3, [r3]
 2367 0168 114A     		ldr	r2, .L108+8
 2368 016a 9A63     		str	r2, [r3, #56]
1483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= errorstate;
 2369              		.loc 1 1483 12
 2370 016c FB68     		ldr	r3, [r7, #12]
 2371 016e 9A6B     		ldr	r2, [r3, #56]
 2372              		.loc 1 1483 24
 2373 0170 FB6A     		ldr	r3, [r7, #44]
 2374 0172 1A43     		orrs	r2, r2, r3
 2375 0174 FB68     		ldr	r3, [r7, #12]
 2376 0176 9A63     		str	r2, [r3, #56]
1484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
 2377              		.loc 1 1484 20
 2378 0178 FB68     		ldr	r3, [r7, #12]
 2379 017a 0122     		movs	r2, #1
 2380 017c 83F83420 		strb	r2, [r3, #52]
1485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Context = SD_CONTEXT_NONE;
 2381              		.loc 1 1485 22
 2382 0180 FB68     		ldr	r3, [r7, #12]
 2383 0182 0022     		movs	r2, #0
 2384 0184 1A63     		str	r2, [r3, #48]
1486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         return HAL_ERROR;
 2385              		.loc 1 1486 16
 2386 0186 0123     		movs	r3, #1
 2387 0188 0AE0     		b	.L107
 2388              	.L106:
1487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Enable transfer interrupts */
1490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_ENABLE_IT(hsd, (SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | SDMMC_IT_RXOVERR |
 2389              		.loc 1 1490 7
 2390 018a FB68     		ldr	r3, [r7, #12]
 2391 018c 1B68     		ldr	r3, [r3]
 2392 018e DA6B     		ldr	r2, [r3, #60]
 2393 0190 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsLb3N5.s 			page 69


 2394 0192 1B68     		ldr	r3, [r3]
 2395 0194 42F49572 		orr	r2, r2, #298
 2396 0198 DA63     		str	r2, [r3, #60]
1491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                SDMMC_IT_DATAEND));
1492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_OK;
 2397              		.loc 1 1493 14
 2398 019a 0023     		movs	r3, #0
 2399 019c 00E0     		b	.L107
 2400              	.L100:
1494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
1495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
1497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
1498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
1500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_BUSY;
 2401              		.loc 1 1501 12
 2402 019e 0223     		movs	r3, #2
 2403              	.L107:
1502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 2404              		.loc 1 1503 1
 2405 01a0 1846     		mov	r0, r3
 2406 01a2 3037     		adds	r7, r7, #48
 2407              		.cfi_def_cfa_offset 8
 2408 01a4 BD46     		mov	sp, r7
 2409              		.cfi_def_cfa_register 13
 2410              		@ sp needed
 2411 01a6 80BD     		pop	{r7, pc}
 2412              	.L109:
 2413              		.align	2
 2414              	.L108:
 2415 01a8 00000000 		.word	SD_DMAReceiveCplt
 2416 01ac 00000000 		.word	SD_DMAError
 2417 01b0 FF054000 		.word	4195839
 2418              		.cfi_endproc
 2419              	.LFE454:
 2421              		.section	.text.HAL_SD_WriteBlocks_DMA,"ax",%progbits
 2422              		.align	1
 2423              		.global	HAL_SD_WriteBlocks_DMA
 2424              		.syntax unified
 2425              		.thumb
 2426              		.thumb_func
 2428              	HAL_SD_WriteBlocks_DMA:
 2429              	.LFB455:
1504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
1506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Writes block(s) to a specified address in a card. The Data transfer
1507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         is managed by DMA mode.
1508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   This API should be followed by a check on the card state through
1509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         HAL_SD_GetCardState().
1510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   You could also check the DMA transfer process through the SD Tx
1511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         interrupt event.
1512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
1513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pData: Pointer to the buffer that will contain the data to transmit
ARM GAS  /tmp/ccsLb3N5.s 			page 70


1514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  BlockAdd: Block Address where data will be written
1515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of blocks to write
1516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
1517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
1518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_WriteBlocks_DMA(SD_HandleTypeDef *hsd, uint8_t *pData, uint32_t BlockAdd,
1519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                          uint32_t NumberOfBlocks)
1520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 2430              		.loc 1 1520 1
 2431              		.cfi_startproc
 2432              		@ args = 0, pretend = 0, frame = 48
 2433              		@ frame_needed = 1, uses_anonymous_args = 0
 2434 0000 80B5     		push	{r7, lr}
 2435              		.cfi_def_cfa_offset 8
 2436              		.cfi_offset 7, -8
 2437              		.cfi_offset 14, -4
 2438 0002 8CB0     		sub	sp, sp, #48
 2439              		.cfi_def_cfa_offset 56
 2440 0004 00AF     		add	r7, sp, #0
 2441              		.cfi_def_cfa_register 7
 2442 0006 F860     		str	r0, [r7, #12]
 2443 0008 B960     		str	r1, [r7, #8]
 2444 000a 7A60     		str	r2, [r7, #4]
 2445 000c 3B60     		str	r3, [r7]
1521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SDMMC_DataInitTypeDef config;
1522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
1523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t add = BlockAdd;
 2446              		.loc 1 1523 12
 2447 000e 7B68     		ldr	r3, [r7, #4]
 2448 0010 BB62     		str	r3, [r7, #40]
1524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (NULL == pData)
 2449              		.loc 1 1525 6
 2450 0012 BB68     		ldr	r3, [r7, #8]
 2451 0014 002B     		cmp	r3, #0
 2452 0016 07D1     		bne	.L111
1526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
 2453              		.loc 1 1527 8
 2454 0018 FB68     		ldr	r3, [r7, #12]
 2455 001a 9B6B     		ldr	r3, [r3, #56]
 2456              		.loc 1 1527 20
 2457 001c 43F00062 		orr	r2, r3, #134217728
 2458 0020 FB68     		ldr	r3, [r7, #12]
 2459 0022 9A63     		str	r2, [r3, #56]
1528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 2460              		.loc 1 1528 12
 2461 0024 0123     		movs	r3, #1
 2462 0026 ACE0     		b	.L120
 2463              	.L111:
1529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
 2464              		.loc 1 1531 10
 2465 0028 FB68     		ldr	r3, [r7, #12]
 2466 002a 93F83430 		ldrb	r3, [r3, #52]
 2467 002e DBB2     		uxtb	r3, r3
 2468              		.loc 1 1531 6
ARM GAS  /tmp/ccsLb3N5.s 			page 71


 2469 0030 012B     		cmp	r3, #1
 2470 0032 40F0A580 		bne	.L113
1532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = HAL_SD_ERROR_NONE;
 2471              		.loc 1 1533 20
 2472 0036 FB68     		ldr	r3, [r7, #12]
 2473 0038 0022     		movs	r2, #0
 2474 003a 9A63     		str	r2, [r3, #56]
1534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((add + NumberOfBlocks) > (hsd->SdCard.LogBlockNbr))
 2475              		.loc 1 1535 14
 2476 003c BA6A     		ldr	r2, [r7, #40]
 2477 003e 3B68     		ldr	r3, [r7]
 2478 0040 1A44     		add	r2, r2, r3
 2479              		.loc 1 1535 46
 2480 0042 FB68     		ldr	r3, [r7, #12]
 2481 0044 DB6D     		ldr	r3, [r3, #92]
 2482              		.loc 1 1535 8
 2483 0046 9A42     		cmp	r2, r3
 2484 0048 07D9     		bls	.L114
1536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_ADDR_OUT_OF_RANGE;
 2485              		.loc 1 1537 10
 2486 004a FB68     		ldr	r3, [r7, #12]
 2487 004c 9B6B     		ldr	r3, [r3, #56]
 2488              		.loc 1 1537 22
 2489 004e 43F00072 		orr	r2, r3, #33554432
 2490 0052 FB68     		ldr	r3, [r7, #12]
 2491 0054 9A63     		str	r2, [r3, #56]
1538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2492              		.loc 1 1538 14
 2493 0056 0123     		movs	r3, #1
 2494 0058 93E0     		b	.L120
 2495              	.L114:
1539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_BUSY;
 2496              		.loc 1 1541 16
 2497 005a FB68     		ldr	r3, [r7, #12]
 2498 005c 0322     		movs	r2, #3
 2499 005e 83F83420 		strb	r2, [r3, #52]
1542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Initialize data control register */
1544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL = 0U;
 2500              		.loc 1 1544 8
 2501 0062 FB68     		ldr	r3, [r7, #12]
 2502 0064 1B68     		ldr	r3, [r3]
 2503              		.loc 1 1544 26
 2504 0066 0022     		movs	r2, #0
 2505 0068 DA62     		str	r2, [r3, #44]
1545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->pTxBuffPtr = pData;
1548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->TxXferSize = BLOCKSIZE * NumberOfBlocks;
1549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Set the DMA transfer complete callback */
1551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->hdmatx->XferCpltCallback = SD_DMATransmitCplt;
ARM GAS  /tmp/ccsLb3N5.s 			page 72


 2506              		.loc 1 1551 8
 2507 006a FB68     		ldr	r3, [r7, #12]
 2508 006c DB6B     		ldr	r3, [r3, #60]
 2509              		.loc 1 1551 35
 2510 006e 474A     		ldr	r2, .L121
 2511 0070 DA62     		str	r2, [r3, #44]
1552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Set the DMA error callback */
1554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->hdmatx->XferErrorCallback = SD_DMAError;
 2512              		.loc 1 1554 8
 2513 0072 FB68     		ldr	r3, [r7, #12]
 2514 0074 DB6B     		ldr	r3, [r3, #60]
 2515              		.loc 1 1554 36
 2516 0076 464A     		ldr	r2, .L121+4
 2517 0078 5A63     		str	r2, [r3, #52]
1555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Set the DMA Abort callback */
1557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->hdmatx->XferAbortCallback = NULL;
 2518              		.loc 1 1557 8
 2519 007a FB68     		ldr	r3, [r7, #12]
 2520 007c DB6B     		ldr	r3, [r3, #60]
 2521              		.loc 1 1557 36
 2522 007e 0022     		movs	r2, #0
 2523 0080 9A63     		str	r2, [r3, #56]
1558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->SdCard.CardType != CARD_SDHC_SDXC)
 2524              		.loc 1 1561 20
 2525 0082 FB68     		ldr	r3, [r7, #12]
 2526 0084 5B6C     		ldr	r3, [r3, #68]
 2527              		.loc 1 1561 8
 2528 0086 012B     		cmp	r3, #1
 2529 0088 02D0     		beq	.L115
1562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       add *= BLOCKSIZE;
 2530              		.loc 1 1563 11
 2531 008a BB6A     		ldr	r3, [r7, #40]
 2532 008c 5B02     		lsls	r3, r3, #9
 2533 008e BB62     		str	r3, [r7, #40]
 2534              	.L115:
1564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Configure the SD DPSM (Data Path State Machine) */
1568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataTimeOut   = SDMMC_DATATIMEOUT;
1569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataLength    = BLOCKSIZE * NumberOfBlocks;
1570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DataBlockSize = SDMMC_DATABLOCK_SIZE_512B;
1571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferDir   = SDMMC_TRANSFER_DIR_TO_CARD;
1572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
1573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     config.DPSM          = SDMMC_DPSM_DISABLE;
1574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     (void)SDMMC_ConfigData(hsd->Instance, &config);
1575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __SDMMC_CMDTRANS_ENABLE(hsd->Instance);
1577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->IDMABASE0 = (uint32_t) pData ;
1579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->IDMACTRL  = SDMMC_ENABLE_IDMA_SINGLE_BUFF;
ARM GAS  /tmp/ccsLb3N5.s 			page 73


1580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Write Blocks in Polling mode */
1584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (NumberOfBlocks > 1U)
 2535              		.loc 1 1584 8
 2536 0090 3B68     		ldr	r3, [r7]
 2537 0092 012B     		cmp	r3, #1
 2538 0094 0AD9     		bls	.L116
1585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = (SD_CONTEXT_WRITE_MULTIPLE_BLOCK | SD_CONTEXT_DMA);
 2539              		.loc 1 1586 20
 2540 0096 FB68     		ldr	r3, [r7, #12]
 2541 0098 A022     		movs	r2, #160
 2542 009a 1A63     		str	r2, [r3, #48]
1587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Write Multi Block command */
1589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdWriteMultiBlock(hsd->Instance, add);
 2543              		.loc 1 1589 20
 2544 009c FB68     		ldr	r3, [r7, #12]
 2545 009e 1B68     		ldr	r3, [r3]
 2546 00a0 B96A     		ldr	r1, [r7, #40]
 2547 00a2 1846     		mov	r0, r3
 2548 00a4 FFF7FEFF 		bl	SDMMC_CmdWriteMultiBlock
 2549 00a8 F862     		str	r0, [r7, #44]
 2550 00aa 09E0     		b	.L117
 2551              	.L116:
1590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
1592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = (SD_CONTEXT_WRITE_SINGLE_BLOCK | SD_CONTEXT_DMA);
 2552              		.loc 1 1593 20
 2553 00ac FB68     		ldr	r3, [r7, #12]
 2554 00ae 9022     		movs	r2, #144
 2555 00b0 1A63     		str	r2, [r3, #48]
1594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Write Single Block command */
1596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdWriteSingleBlock(hsd->Instance, add);
 2556              		.loc 1 1596 20
 2557 00b2 FB68     		ldr	r3, [r7, #12]
 2558 00b4 1B68     		ldr	r3, [r3]
 2559 00b6 B96A     		ldr	r1, [r7, #40]
 2560 00b8 1846     		mov	r0, r3
 2561 00ba FFF7FEFF 		bl	SDMMC_CmdWriteSingleBlock
 2562 00be F862     		str	r0, [r7, #44]
 2563              	.L117:
1597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 2564              		.loc 1 1598 8
 2565 00c0 FB6A     		ldr	r3, [r7, #44]
 2566 00c2 002B     		cmp	r3, #0
 2567 00c4 12D0     		beq	.L118
1599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2568              		.loc 1 1601 7
 2569 00c6 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsLb3N5.s 			page 74


 2570 00c8 1B68     		ldr	r3, [r3]
 2571 00ca 324A     		ldr	r2, .L121+8
 2572 00cc 9A63     		str	r2, [r3, #56]
1602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= errorstate;
 2573              		.loc 1 1602 10
 2574 00ce FB68     		ldr	r3, [r7, #12]
 2575 00d0 9A6B     		ldr	r2, [r3, #56]
 2576              		.loc 1 1602 22
 2577 00d2 FB6A     		ldr	r3, [r7, #44]
 2578 00d4 1A43     		orrs	r2, r2, r3
 2579 00d6 FB68     		ldr	r3, [r7, #12]
 2580 00d8 9A63     		str	r2, [r3, #56]
1603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 2581              		.loc 1 1603 18
 2582 00da FB68     		ldr	r3, [r7, #12]
 2583 00dc 0122     		movs	r2, #1
 2584 00de 83F83420 		strb	r2, [r3, #52]
1604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 2585              		.loc 1 1604 20
 2586 00e2 FB68     		ldr	r3, [r7, #12]
 2587 00e4 0022     		movs	r2, #0
 2588 00e6 1A63     		str	r2, [r3, #48]
1605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2589              		.loc 1 1605 14
 2590 00e8 0123     		movs	r3, #1
 2591 00ea 4AE0     		b	.L120
 2592              	.L118:
1606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
1608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Enable SDMMC DMA transfer */
1609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_DMA_ENABLE(hsd);
 2593              		.loc 1 1609 5
 2594 00ec FB68     		ldr	r3, [r7, #12]
 2595 00ee 1B68     		ldr	r3, [r3]
 2596 00f0 DA6A     		ldr	r2, [r3, #44]
 2597 00f2 FB68     		ldr	r3, [r7, #12]
 2598 00f4 1B68     		ldr	r3, [r3]
 2599 00f6 42F00802 		orr	r2, r2, #8
 2600 00fa DA62     		str	r2, [r3, #44]
1610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Enable the DMA Channel */
1612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (HAL_DMA_Start_IT(hsd->hdmatx, (uint32_t)pData, (uint32_t)&hsd->Instance->FIFO,
 2601              		.loc 1 1612 9
 2602 00fc FB68     		ldr	r3, [r7, #12]
 2603 00fe D86B     		ldr	r0, [r3, #60]
 2604 0100 B968     		ldr	r1, [r7, #8]
 2605              		.loc 1 1612 70
 2606 0102 FB68     		ldr	r3, [r7, #12]
 2607 0104 1B68     		ldr	r3, [r3]
 2608              		.loc 1 1612 66
 2609 0106 8033     		adds	r3, r3, #128
 2610              		.loc 1 1612 9
 2611 0108 1A46     		mov	r2, r3
1613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                          (uint32_t)(BLOCKSIZE * NumberOfBlocks) / 4U) != HAL_OK)
 2612              		.loc 1 1613 26
 2613 010a 3B68     		ldr	r3, [r7]
 2614 010c 5B02     		lsls	r3, r3, #9
ARM GAS  /tmp/ccsLb3N5.s 			page 75


1612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                          (uint32_t)(BLOCKSIZE * NumberOfBlocks) / 4U) != HAL_OK)
 2615              		.loc 1 1612 9
 2616 010e 9B08     		lsrs	r3, r3, #2
 2617 0110 FFF7FEFF 		bl	HAL_DMA_Start_IT
 2618 0114 0346     		mov	r3, r0
1612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                          (uint32_t)(BLOCKSIZE * NumberOfBlocks) / 4U) != HAL_OK)
 2619              		.loc 1 1612 8 discriminator 1
 2620 0116 002B     		cmp	r3, #0
 2621 0118 12D0     		beq	.L119
1614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2622              		.loc 1 1615 7
 2623 011a FB68     		ldr	r3, [r7, #12]
 2624 011c 1B68     		ldr	r3, [r3]
 2625 011e 1D4A     		ldr	r2, .L121+8
 2626 0120 9A63     		str	r2, [r3, #56]
1616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_DMA;
 2627              		.loc 1 1616 10
 2628 0122 FB68     		ldr	r3, [r7, #12]
 2629 0124 9B6B     		ldr	r3, [r3, #56]
 2630              		.loc 1 1616 22
 2631 0126 43F08042 		orr	r2, r3, #1073741824
 2632 012a FB68     		ldr	r3, [r7, #12]
 2633 012c 9A63     		str	r2, [r3, #56]
1617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 2634              		.loc 1 1617 18
 2635 012e FB68     		ldr	r3, [r7, #12]
 2636 0130 0122     		movs	r2, #1
 2637 0132 83F83420 		strb	r2, [r3, #52]
1618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 2638              		.loc 1 1618 20
 2639 0136 FB68     		ldr	r3, [r7, #12]
 2640 0138 0022     		movs	r2, #0
 2641 013a 1A63     		str	r2, [r3, #48]
1619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2642              		.loc 1 1619 14
 2643 013c 0123     		movs	r3, #1
 2644 013e 20E0     		b	.L120
 2645              	.L119:
1620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
1622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Configure the SD DPSM (Data Path State Machine) */
1624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.DataTimeOut   = SDMMC_DATATIMEOUT;
 2646              		.loc 1 1624 28
 2647 0140 4FF0FF33 		mov	r3, #-1
 2648 0144 3B61     		str	r3, [r7, #16]
1625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.DataLength    = BLOCKSIZE * NumberOfBlocks;
 2649              		.loc 1 1625 40
 2650 0146 3B68     		ldr	r3, [r7]
 2651 0148 5B02     		lsls	r3, r3, #9
 2652              		.loc 1 1625 28
 2653 014a 7B61     		str	r3, [r7, #20]
1626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.DataBlockSize = SDMMC_DATABLOCK_SIZE_512B;
 2654              		.loc 1 1626 28
 2655 014c 9023     		movs	r3, #144
 2656 014e BB61     		str	r3, [r7, #24]
ARM GAS  /tmp/ccsLb3N5.s 			page 76


1627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.TransferDir   = SDMMC_TRANSFER_DIR_TO_CARD;
 2657              		.loc 1 1627 28
 2658 0150 0023     		movs	r3, #0
 2659 0152 FB61     		str	r3, [r7, #28]
1628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
 2660              		.loc 1 1628 28
 2661 0154 0023     		movs	r3, #0
 2662 0156 3B62     		str	r3, [r7, #32]
1629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       config.DPSM          = SDMMC_DPSM_ENABLE;
 2663              		.loc 1 1629 28
 2664 0158 0123     		movs	r3, #1
 2665 015a 7B62     		str	r3, [r7, #36]
1630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (void)SDMMC_ConfigData(hsd->Instance, &config);
 2666              		.loc 1 1630 13
 2667 015c FB68     		ldr	r3, [r7, #12]
 2668 015e 1B68     		ldr	r3, [r3]
 2669 0160 07F11002 		add	r2, r7, #16
 2670 0164 1146     		mov	r1, r2
 2671 0166 1846     		mov	r0, r3
 2672 0168 FFF7FEFF 		bl	SDMMC_ConfigData
1631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Enable SD Error interrupts */
1633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_ENABLE_IT(hsd, (SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | SDMMC_IT_TXUNDERR));
 2673              		.loc 1 1633 7
 2674 016c FB68     		ldr	r3, [r7, #12]
 2675 016e 1B68     		ldr	r3, [r3]
 2676 0170 DA6B     		ldr	r2, [r3, #60]
 2677 0172 FB68     		ldr	r3, [r7, #12]
 2678 0174 1B68     		ldr	r3, [r3]
 2679 0176 42F01A02 		orr	r2, r2, #26
 2680 017a DA63     		str	r2, [r3, #60]
1634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Enable transfer interrupts */
1636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_ENABLE_IT(hsd, (SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | SDMMC_IT_TXUNDERR | SDMMC_IT_D
1637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
1638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
1639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_OK;
 2681              		.loc 1 1640 14
 2682 017c 0023     		movs	r3, #0
 2683 017e 00E0     		b	.L120
 2684              	.L113:
1641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
1642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
1644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
1645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
1647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_BUSY;
 2685              		.loc 1 1648 12
 2686 0180 0223     		movs	r3, #2
 2687              	.L120:
1649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 2688              		.loc 1 1650 1
 2689 0182 1846     		mov	r0, r3
ARM GAS  /tmp/ccsLb3N5.s 			page 77


 2690 0184 3037     		adds	r7, r7, #48
 2691              		.cfi_def_cfa_offset 8
 2692 0186 BD46     		mov	sp, r7
 2693              		.cfi_def_cfa_register 13
 2694              		@ sp needed
 2695 0188 80BD     		pop	{r7, pc}
 2696              	.L122:
 2697 018a 00BF     		.align	2
 2698              	.L121:
 2699 018c 00000000 		.word	SD_DMATransmitCplt
 2700 0190 00000000 		.word	SD_DMAError
 2701 0194 FF054000 		.word	4195839
 2702              		.cfi_endproc
 2703              	.LFE455:
 2705              		.section	.text.HAL_SD_Erase,"ax",%progbits
 2706              		.align	1
 2707              		.global	HAL_SD_Erase
 2708              		.syntax unified
 2709              		.thumb
 2710              		.thumb_func
 2712              	HAL_SD_Erase:
 2713              	.LFB456:
1651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
1653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Erases the specified memory area of the given SD card.
1654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @note   This API should be followed by a check on the card state through
1655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         HAL_SD_GetCardState().
1656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
1657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  BlockStartAdd: Start Block address
1658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  BlockEndAdd: End Block address
1659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
1660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
1661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_Erase(SD_HandleTypeDef *hsd, uint32_t BlockStartAdd, uint32_t BlockEndAdd)
1662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 2714              		.loc 1 1662 1
 2715              		.cfi_startproc
 2716              		@ args = 0, pretend = 0, frame = 32
 2717              		@ frame_needed = 1, uses_anonymous_args = 0
 2718 0000 80B5     		push	{r7, lr}
 2719              		.cfi_def_cfa_offset 8
 2720              		.cfi_offset 7, -8
 2721              		.cfi_offset 14, -4
 2722 0002 88B0     		sub	sp, sp, #32
 2723              		.cfi_def_cfa_offset 40
 2724 0004 00AF     		add	r7, sp, #0
 2725              		.cfi_def_cfa_register 7
 2726 0006 F860     		str	r0, [r7, #12]
 2727 0008 B960     		str	r1, [r7, #8]
 2728 000a 7A60     		str	r2, [r7, #4]
1663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
1664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t start_add = BlockStartAdd;
 2729              		.loc 1 1664 12
 2730 000c BB68     		ldr	r3, [r7, #8]
 2731 000e FB61     		str	r3, [r7, #28]
1665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t end_add = BlockEndAdd;
 2732              		.loc 1 1665 12
 2733 0010 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsLb3N5.s 			page 78


 2734 0012 BB61     		str	r3, [r7, #24]
1666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
 2735              		.loc 1 1667 10
 2736 0014 FB68     		ldr	r3, [r7, #12]
 2737 0016 93F83430 		ldrb	r3, [r3, #52]
 2738 001a DBB2     		uxtb	r3, r3
 2739              		.loc 1 1667 6
 2740 001c 012B     		cmp	r3, #1
 2741 001e 40F0B480 		bne	.L124
1668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = HAL_SD_ERROR_NONE;
 2742              		.loc 1 1669 20
 2743 0022 FB68     		ldr	r3, [r7, #12]
 2744 0024 0022     		movs	r2, #0
 2745 0026 9A63     		str	r2, [r3, #56]
1670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (end_add < start_add)
 2746              		.loc 1 1671 8
 2747 0028 BA69     		ldr	r2, [r7, #24]
 2748 002a FB69     		ldr	r3, [r7, #28]
 2749 002c 9A42     		cmp	r2, r3
 2750 002e 07D2     		bcs	.L125
1672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
 2751              		.loc 1 1673 10
 2752 0030 FB68     		ldr	r3, [r7, #12]
 2753 0032 9B6B     		ldr	r3, [r3, #56]
 2754              		.loc 1 1673 22
 2755 0034 43F00062 		orr	r2, r3, #134217728
 2756 0038 FB68     		ldr	r3, [r7, #12]
 2757 003a 9A63     		str	r2, [r3, #56]
1674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2758              		.loc 1 1674 14
 2759 003c 0123     		movs	r3, #1
 2760 003e A5E0     		b	.L126
 2761              	.L125:
1675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (end_add > (hsd->SdCard.LogBlockNbr))
 2762              		.loc 1 1677 31
 2763 0040 FB68     		ldr	r3, [r7, #12]
 2764 0042 DB6D     		ldr	r3, [r3, #92]
 2765              		.loc 1 1677 8
 2766 0044 BA69     		ldr	r2, [r7, #24]
 2767 0046 9A42     		cmp	r2, r3
 2768 0048 07D9     		bls	.L127
1678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_ADDR_OUT_OF_RANGE;
 2769              		.loc 1 1679 10
 2770 004a FB68     		ldr	r3, [r7, #12]
 2771 004c 9B6B     		ldr	r3, [r3, #56]
 2772              		.loc 1 1679 22
 2773 004e 43F00072 		orr	r2, r3, #33554432
 2774 0052 FB68     		ldr	r3, [r7, #12]
 2775 0054 9A63     		str	r2, [r3, #56]
1680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
ARM GAS  /tmp/ccsLb3N5.s 			page 79


 2776              		.loc 1 1680 14
 2777 0056 0123     		movs	r3, #1
 2778 0058 98E0     		b	.L126
 2779              	.L127:
1681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_BUSY;
 2780              		.loc 1 1683 16
 2781 005a FB68     		ldr	r3, [r7, #12]
 2782 005c 0322     		movs	r2, #3
 2783 005e 83F83420 		strb	r2, [r3, #52]
1684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Check if the card command class supports erase command */
1686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (((hsd->SdCard.Class) & SDMMC_CCCC_ERASE) == 0U)
 2784              		.loc 1 1686 22
 2785 0062 FB68     		ldr	r3, [r7, #12]
 2786 0064 DB6C     		ldr	r3, [r3, #76]
 2787              		.loc 1 1686 30
 2788 0066 03F02003 		and	r3, r3, #32
 2789              		.loc 1 1686 8
 2790 006a 002B     		cmp	r3, #0
 2791 006c 0FD1     		bne	.L128
1687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2792              		.loc 1 1689 7
 2793 006e FB68     		ldr	r3, [r7, #12]
 2794 0070 1B68     		ldr	r3, [r3]
 2795 0072 484A     		ldr	r2, .L134
 2796 0074 9A63     		str	r2, [r3, #56]
1690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_REQUEST_NOT_APPLICABLE;
 2797              		.loc 1 1690 10
 2798 0076 FB68     		ldr	r3, [r7, #12]
 2799 0078 9B6B     		ldr	r3, [r3, #56]
 2800              		.loc 1 1690 22
 2801 007a 43F08062 		orr	r2, r3, #67108864
 2802 007e FB68     		ldr	r3, [r7, #12]
 2803 0080 9A63     		str	r2, [r3, #56]
1691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 2804              		.loc 1 1691 18
 2805 0082 FB68     		ldr	r3, [r7, #12]
 2806 0084 0122     		movs	r2, #1
 2807 0086 83F83420 		strb	r2, [r3, #52]
1692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2808              		.loc 1 1692 14
 2809 008a 0123     		movs	r3, #1
 2810 008c 7EE0     		b	.L126
 2811              	.L128:
1693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((SDMMC_GetResponse(hsd->Instance, SDMMC_RESP1) & SDMMC_CARD_LOCKED) == SDMMC_CARD_LOCKED)
 2812              		.loc 1 1695 31
 2813 008e FB68     		ldr	r3, [r7, #12]
 2814 0090 1B68     		ldr	r3, [r3]
 2815              		.loc 1 1695 10
 2816 0092 0021     		movs	r1, #0
 2817 0094 1846     		mov	r0, r3
ARM GAS  /tmp/ccsLb3N5.s 			page 80


 2818 0096 FFF7FEFF 		bl	SDMMC_GetResponse
 2819 009a 0346     		mov	r3, r0
 2820              		.loc 1 1695 56 discriminator 1
 2821 009c 03F00073 		and	r3, r3, #33554432
 2822              		.loc 1 1695 8 discriminator 1
 2823 00a0 B3F1007F 		cmp	r3, #33554432
 2824 00a4 0FD1     		bne	.L129
1696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2825              		.loc 1 1698 7
 2826 00a6 FB68     		ldr	r3, [r7, #12]
 2827 00a8 1B68     		ldr	r3, [r3]
 2828 00aa 3A4A     		ldr	r2, .L134
 2829 00ac 9A63     		str	r2, [r3, #56]
1699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_LOCK_UNLOCK_FAILED;
 2830              		.loc 1 1699 10
 2831 00ae FB68     		ldr	r3, [r7, #12]
 2832 00b0 9B6B     		ldr	r3, [r3, #56]
 2833              		.loc 1 1699 22
 2834 00b2 43F40062 		orr	r2, r3, #2048
 2835 00b6 FB68     		ldr	r3, [r7, #12]
 2836 00b8 9A63     		str	r2, [r3, #56]
1700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 2837              		.loc 1 1700 18
 2838 00ba FB68     		ldr	r3, [r7, #12]
 2839 00bc 0122     		movs	r2, #1
 2840 00be 83F83420 		strb	r2, [r3, #52]
1701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2841              		.loc 1 1701 14
 2842 00c2 0123     		movs	r3, #1
 2843 00c4 62E0     		b	.L126
 2844              	.L129:
1702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Get start and end block for high capacity cards */
1705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->SdCard.CardType != CARD_SDHC_SDXC)
 2845              		.loc 1 1705 20
 2846 00c6 FB68     		ldr	r3, [r7, #12]
 2847 00c8 5B6C     		ldr	r3, [r3, #68]
 2848              		.loc 1 1705 8
 2849 00ca 012B     		cmp	r3, #1
 2850 00cc 05D0     		beq	.L130
1706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       start_add *= BLOCKSIZE;
 2851              		.loc 1 1707 17
 2852 00ce FB69     		ldr	r3, [r7, #28]
 2853 00d0 5B02     		lsls	r3, r3, #9
 2854 00d2 FB61     		str	r3, [r7, #28]
1708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       end_add   *= BLOCKSIZE;
 2855              		.loc 1 1708 17
 2856 00d4 BB69     		ldr	r3, [r7, #24]
 2857 00d6 5B02     		lsls	r3, r3, #9
 2858 00d8 BB61     		str	r3, [r7, #24]
 2859              	.L130:
1709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 81


1711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* According to sd-card spec 1.0 ERASE_GROUP_START (CMD32) and erase_group_end(CMD33) */
1712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->SdCard.CardType != CARD_SECURED)
 2860              		.loc 1 1712 20
 2861 00da FB68     		ldr	r3, [r7, #12]
 2862 00dc 5B6C     		ldr	r3, [r3, #68]
 2863              		.loc 1 1712 8
 2864 00de 032B     		cmp	r3, #3
 2865 00e0 33D0     		beq	.L131
1713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Send CMD32 SD_ERASE_GRP_START with argument as addr  */
1715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdSDEraseStartAdd(hsd->Instance, start_add);
 2866              		.loc 1 1715 20
 2867 00e2 FB68     		ldr	r3, [r7, #12]
 2868 00e4 1B68     		ldr	r3, [r3]
 2869 00e6 F969     		ldr	r1, [r7, #28]
 2870 00e8 1846     		mov	r0, r3
 2871 00ea FFF7FEFF 		bl	SDMMC_CmdSDEraseStartAdd
 2872 00ee 7861     		str	r0, [r7, #20]
1716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (errorstate != HAL_SD_ERROR_NONE)
 2873              		.loc 1 1716 10
 2874 00f0 7B69     		ldr	r3, [r7, #20]
 2875 00f2 002B     		cmp	r3, #0
 2876 00f4 0FD0     		beq	.L132
1717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Clear all the static flags */
1719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2877              		.loc 1 1719 9
 2878 00f6 FB68     		ldr	r3, [r7, #12]
 2879 00f8 1B68     		ldr	r3, [r3]
 2880 00fa 264A     		ldr	r2, .L134
 2881 00fc 9A63     		str	r2, [r3, #56]
1720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= errorstate;
 2882              		.loc 1 1720 12
 2883 00fe FB68     		ldr	r3, [r7, #12]
 2884 0100 9A6B     		ldr	r2, [r3, #56]
 2885              		.loc 1 1720 24
 2886 0102 7B69     		ldr	r3, [r7, #20]
 2887 0104 1A43     		orrs	r2, r2, r3
 2888 0106 FB68     		ldr	r3, [r7, #12]
 2889 0108 9A63     		str	r2, [r3, #56]
1721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
 2890              		.loc 1 1721 20
 2891 010a FB68     		ldr	r3, [r7, #12]
 2892 010c 0122     		movs	r2, #1
 2893 010e 83F83420 		strb	r2, [r3, #52]
1722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         return HAL_ERROR;
 2894              		.loc 1 1722 16
 2895 0112 0123     		movs	r3, #1
 2896 0114 3AE0     		b	.L126
 2897              	.L132:
1723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Send CMD33 SD_ERASE_GRP_END with argument as addr  */
1726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SDMMC_CmdSDEraseEndAdd(hsd->Instance, end_add);
 2898              		.loc 1 1726 20
 2899 0116 FB68     		ldr	r3, [r7, #12]
 2900 0118 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccsLb3N5.s 			page 82


 2901 011a B969     		ldr	r1, [r7, #24]
 2902 011c 1846     		mov	r0, r3
 2903 011e FFF7FEFF 		bl	SDMMC_CmdSDEraseEndAdd
 2904 0122 7861     		str	r0, [r7, #20]
1727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (errorstate != HAL_SD_ERROR_NONE)
 2905              		.loc 1 1727 10
 2906 0124 7B69     		ldr	r3, [r7, #20]
 2907 0126 002B     		cmp	r3, #0
 2908 0128 0FD0     		beq	.L131
1728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Clear all the static flags */
1730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2909              		.loc 1 1730 9
 2910 012a FB68     		ldr	r3, [r7, #12]
 2911 012c 1B68     		ldr	r3, [r3]
 2912 012e 194A     		ldr	r2, .L134
 2913 0130 9A63     		str	r2, [r3, #56]
1731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= errorstate;
 2914              		.loc 1 1731 12
 2915 0132 FB68     		ldr	r3, [r7, #12]
 2916 0134 9A6B     		ldr	r2, [r3, #56]
 2917              		.loc 1 1731 24
 2918 0136 7B69     		ldr	r3, [r7, #20]
 2919 0138 1A43     		orrs	r2, r2, r3
 2920 013a FB68     		ldr	r3, [r7, #12]
 2921 013c 9A63     		str	r2, [r3, #56]
1732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
 2922              		.loc 1 1732 20
 2923 013e FB68     		ldr	r3, [r7, #12]
 2924 0140 0122     		movs	r2, #1
 2925 0142 83F83420 		strb	r2, [r3, #52]
1733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         return HAL_ERROR;
 2926              		.loc 1 1733 16
 2927 0146 0123     		movs	r3, #1
 2928 0148 20E0     		b	.L126
 2929              	.L131:
1734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send CMD38 ERASE */
1738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdErase(hsd->Instance, 0UL);
 2930              		.loc 1 1738 18
 2931 014a FB68     		ldr	r3, [r7, #12]
 2932 014c 1B68     		ldr	r3, [r3]
 2933 014e 0021     		movs	r1, #0
 2934 0150 1846     		mov	r0, r3
 2935 0152 FFF7FEFF 		bl	SDMMC_CmdErase
 2936 0156 7861     		str	r0, [r7, #20]
1739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 2937              		.loc 1 1739 8
 2938 0158 7B69     		ldr	r3, [r7, #20]
 2939 015a 002B     		cmp	r3, #0
 2940 015c 0FD0     		beq	.L133
1740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 2941              		.loc 1 1742 7
ARM GAS  /tmp/ccsLb3N5.s 			page 83


 2942 015e FB68     		ldr	r3, [r7, #12]
 2943 0160 1B68     		ldr	r3, [r3]
 2944 0162 0C4A     		ldr	r2, .L134
 2945 0164 9A63     		str	r2, [r3, #56]
1743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= errorstate;
 2946              		.loc 1 1743 10
 2947 0166 FB68     		ldr	r3, [r7, #12]
 2948 0168 9A6B     		ldr	r2, [r3, #56]
 2949              		.loc 1 1743 22
 2950 016a 7B69     		ldr	r3, [r7, #20]
 2951 016c 1A43     		orrs	r2, r2, r3
 2952 016e FB68     		ldr	r3, [r7, #12]
 2953 0170 9A63     		str	r2, [r3, #56]
1744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 2954              		.loc 1 1744 18
 2955 0172 FB68     		ldr	r3, [r7, #12]
 2956 0174 0122     		movs	r2, #1
 2957 0176 83F83420 		strb	r2, [r3, #52]
1745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 2958              		.loc 1 1745 14
 2959 017a 0123     		movs	r3, #1
 2960 017c 06E0     		b	.L126
 2961              	.L133:
1746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 2962              		.loc 1 1748 16
 2963 017e FB68     		ldr	r3, [r7, #12]
 2964 0180 0122     		movs	r2, #1
 2965 0182 83F83420 		strb	r2, [r3, #52]
1749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_OK;
 2966              		.loc 1 1750 12
 2967 0186 0023     		movs	r3, #0
 2968 0188 00E0     		b	.L126
 2969              	.L124:
1751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
1753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_BUSY;
 2970              		.loc 1 1754 12
 2971 018a 0223     		movs	r3, #2
 2972              	.L126:
1755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 2973              		.loc 1 1756 1
 2974 018c 1846     		mov	r0, r3
 2975 018e 2037     		adds	r7, r7, #32
 2976              		.cfi_def_cfa_offset 8
 2977 0190 BD46     		mov	sp, r7
 2978              		.cfi_def_cfa_register 13
 2979              		@ sp needed
 2980 0192 80BD     		pop	{r7, pc}
 2981              	.L135:
 2982              		.align	2
 2983              	.L134:
 2984 0194 FF054000 		.word	4195839
ARM GAS  /tmp/ccsLb3N5.s 			page 84


 2985              		.cfi_endproc
 2986              	.LFE456:
 2988              		.section	.text.HAL_SD_IRQHandler,"ax",%progbits
 2989              		.align	1
 2990              		.global	HAL_SD_IRQHandler
 2991              		.syntax unified
 2992              		.thumb
 2993              		.thumb_func
 2995              	HAL_SD_IRQHandler:
 2996              	.LFB457:
1757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
1759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  This function handles SD card interrupt request.
1760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
1761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
1762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
1763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** void HAL_SD_IRQHandler(SD_HandleTypeDef *hsd)
1764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 2997              		.loc 1 1764 1
 2998              		.cfi_startproc
 2999              		@ args = 0, pretend = 0, frame = 16
 3000              		@ frame_needed = 1, uses_anonymous_args = 0
 3001 0000 80B5     		push	{r7, lr}
 3002              		.cfi_def_cfa_offset 8
 3003              		.cfi_offset 7, -8
 3004              		.cfi_offset 14, -4
 3005 0002 84B0     		sub	sp, sp, #16
 3006              		.cfi_def_cfa_offset 24
 3007 0004 00AF     		add	r7, sp, #0
 3008              		.cfi_def_cfa_register 7
 3009 0006 7860     		str	r0, [r7, #4]
1765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
1766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t context = hsd->Context;
 3010              		.loc 1 1766 12
 3011 0008 7B68     		ldr	r3, [r7, #4]
 3012 000a 1B6B     		ldr	r3, [r3, #48]
 3013 000c FB60     		str	r3, [r7, #12]
1767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Check for SDMMC interrupt flags */
1769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXFIFOHF) != RESET) && ((context & SD_CONTEXT_IT) != 0U))
 3014              		.loc 1 1769 8
 3015 000e 7B68     		ldr	r3, [r7, #4]
 3016 0010 1B68     		ldr	r3, [r3]
 3017 0012 5B6B     		ldr	r3, [r3, #52]
 3018 0014 03F40043 		and	r3, r3, #32768
 3019              		.loc 1 1769 6
 3020 0018 002B     		cmp	r3, #0
 3021 001a 08D0     		beq	.L137
 3022              		.loc 1 1769 75 discriminator 1
 3023 001c FB68     		ldr	r3, [r7, #12]
 3024 001e 03F00803 		and	r3, r3, #8
 3025              		.loc 1 1769 62 discriminator 1
 3026 0022 002B     		cmp	r3, #0
 3027 0024 03D0     		beq	.L137
1770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     SD_Read_IT(hsd);
 3028              		.loc 1 1771 5
ARM GAS  /tmp/ccsLb3N5.s 			page 85


 3029 0026 7868     		ldr	r0, [r7, #4]
 3030 0028 FFF7FEFF 		bl	SD_Read_IT
 3031 002c 55E1     		b	.L138
 3032              	.L137:
1772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DATAEND) != RESET)
 3033              		.loc 1 1774 12
 3034 002e 7B68     		ldr	r3, [r7, #4]
 3035 0030 1B68     		ldr	r3, [r3]
 3036 0032 5B6B     		ldr	r3, [r3, #52]
 3037 0034 03F48073 		and	r3, r3, #256
 3038              		.loc 1 1774 11
 3039 0038 002B     		cmp	r3, #0
 3040 003a 00F08F80 		beq	.L139
1775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_FLAG_DATAEND);
 3041              		.loc 1 1776 5
 3042 003e 7B68     		ldr	r3, [r7, #4]
 3043 0040 1B68     		ldr	r3, [r3]
 3044 0042 4FF48072 		mov	r2, #256
 3045 0046 9A63     		str	r2, [r3, #56]
1777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_DISABLE_IT(hsd, SDMMC_IT_DATAEND  | SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | \
 3046              		.loc 1 1778 5
 3047 0048 7B68     		ldr	r3, [r7, #4]
 3048 004a 1B68     		ldr	r3, [r3]
 3049 004c DB6B     		ldr	r3, [r3, #60]
 3050 004e 7A68     		ldr	r2, [r7, #4]
 3051 0050 1268     		ldr	r2, [r2]
 3052 0052 23F44143 		bic	r3, r3, #49408
 3053 0056 23F03A03 		bic	r3, r3, #58
 3054 005a D363     		str	r3, [r2, #60]
1779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                         SDMMC_IT_TXUNDERR | SDMMC_IT_RXOVERR  | SDMMC_IT_TXFIFOHE | \
1780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                         SDMMC_IT_RXFIFOHF);
1781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_DISABLE_IT(hsd, SDMMC_IT_IDMABTC);
1784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __SDMMC_CMDTRANS_DISABLE(hsd->Instance);
1785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL &= ~(SDMMC_DCTRL_DTEN);
 3055              		.loc 1 1786 8
 3056 005c 7B68     		ldr	r3, [r7, #4]
 3057 005e 1B68     		ldr	r3, [r3]
 3058              		.loc 1 1786 18
 3059 0060 DA6A     		ldr	r2, [r3, #44]
 3060              		.loc 1 1786 8
 3061 0062 7B68     		ldr	r3, [r7, #4]
 3062 0064 1B68     		ldr	r3, [r3]
 3063              		.loc 1 1786 26
 3064 0066 22F00102 		bic	r2, r2, #1
 3065 006a DA62     		str	r2, [r3, #44]
1787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((context & SD_CONTEXT_IT) != 0U)
 3066              		.loc 1 1790 18
ARM GAS  /tmp/ccsLb3N5.s 			page 86


 3067 006c FB68     		ldr	r3, [r7, #12]
 3068 006e 03F00803 		and	r3, r3, #8
 3069              		.loc 1 1790 8
 3070 0072 002B     		cmp	r3, #0
 3071 0074 39D0     		beq	.L140
1791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((context & SD_CONTEXT_READ_MULTIPLE_BLOCK) != 0U) || ((context & SD_CONTEXT_WRITE_MULTIP
 3072              		.loc 1 1792 21
 3073 0076 FB68     		ldr	r3, [r7, #12]
 3074 0078 03F00203 		and	r3, r3, #2
 3075              		.loc 1 1792 10
 3076 007c 002B     		cmp	r3, #0
 3077 007e 04D1     		bne	.L141
 3078              		.loc 1 1792 75 discriminator 1
 3079 0080 FB68     		ldr	r3, [r7, #12]
 3080 0082 03F02003 		and	r3, r3, #32
 3081              		.loc 1 1792 62 discriminator 1
 3082 0086 002B     		cmp	r3, #0
 3083 0088 11D0     		beq	.L142
 3084              	.L141:
1793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         errorstate = SDMMC_CmdStopTransfer(hsd->Instance);
 3085              		.loc 1 1794 22
 3086 008a 7B68     		ldr	r3, [r7, #4]
 3087 008c 1B68     		ldr	r3, [r3]
 3088 008e 1846     		mov	r0, r3
 3089 0090 FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 3090 0094 B860     		str	r0, [r7, #8]
1795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (errorstate != HAL_SD_ERROR_NONE)
 3091              		.loc 1 1795 12
 3092 0096 BB68     		ldr	r3, [r7, #8]
 3093 0098 002B     		cmp	r3, #0
 3094 009a 08D0     		beq	.L142
1796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
1797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCode |= errorstate;
 3095              		.loc 1 1797 14
 3096 009c 7B68     		ldr	r3, [r7, #4]
 3097 009e 9A6B     		ldr	r2, [r3, #56]
 3098              		.loc 1 1797 26
 3099 00a0 BB68     		ldr	r3, [r7, #8]
 3100 00a2 1A43     		orrs	r2, r2, r3
 3101 00a4 7B68     		ldr	r3, [r7, #4]
 3102 00a6 9A63     		str	r2, [r3, #56]
1798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCallback(hsd);
1800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           HAL_SD_ErrorCallback(hsd);
 3103              		.loc 1 1801 11
 3104 00a8 7868     		ldr	r0, [r7, #4]
 3105 00aa FFF7FEFF 		bl	HAL_SD_ErrorCallback
 3106              	.L142:
1802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
1804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Clear all the static flags */
1807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
ARM GAS  /tmp/ccsLb3N5.s 			page 87


 3107              		.loc 1 1807 7
 3108 00ae 7B68     		ldr	r3, [r7, #4]
 3109 00b0 1B68     		ldr	r3, [r3]
 3110 00b2 40F23A52 		movw	r2, #1338
 3111 00b6 9A63     		str	r2, [r3, #56]
1808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
 3112              		.loc 1 1809 18
 3113 00b8 7B68     		ldr	r3, [r7, #4]
 3114 00ba 0122     		movs	r2, #1
 3115 00bc 83F83420 		strb	r2, [r3, #52]
1810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 3116              		.loc 1 1810 20
 3117 00c0 7B68     		ldr	r3, [r7, #4]
 3118 00c2 0022     		movs	r2, #0
 3119 00c4 1A63     		str	r2, [r3, #48]
1811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((context & SD_CONTEXT_READ_SINGLE_BLOCK) != 0U) || ((context & SD_CONTEXT_READ_MULTIPLE_
 3120              		.loc 1 1811 21
 3121 00c6 FB68     		ldr	r3, [r7, #12]
 3122 00c8 03F00103 		and	r3, r3, #1
 3123              		.loc 1 1811 10
 3124 00cc 002B     		cmp	r3, #0
 3125 00ce 04D1     		bne	.L143
 3126              		.loc 1 1811 73 discriminator 1
 3127 00d0 FB68     		ldr	r3, [r7, #12]
 3128 00d2 03F00203 		and	r3, r3, #2
 3129              		.loc 1 1811 60 discriminator 1
 3130 00d6 002B     		cmp	r3, #0
 3131 00d8 03D0     		beq	.L144
 3132              	.L143:
1812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->RxCpltCallback(hsd);
1815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SD_RxCpltCallback(hsd);
 3133              		.loc 1 1816 9
 3134 00da 7868     		ldr	r0, [r7, #4]
 3135 00dc FFF7FEFF 		bl	HAL_SD_RxCpltCallback
 3136 00e0 FBE0     		b	.L138
 3137              	.L144:
1817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else
1820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->TxCpltCallback(hsd);
1823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SD_TxCpltCallback(hsd);
 3138              		.loc 1 1824 9
 3139 00e2 7868     		ldr	r0, [r7, #4]
 3140 00e4 FFF7FEFF 		bl	HAL_SD_TxCpltCallback
1825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if ((context & SD_CONTEXT_DMA) != 0U)
1829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
ARM GAS  /tmp/ccsLb3N5.s 			page 88


1831:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Instance->DLEN = 0;
1832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Instance->DCTRL = 0;
1833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Instance->IDMACTRL = SDMMC_DISABLE_IDMA;
1834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Stop Transfer for Write Multi blocks or Read Multi blocks */
1836:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((context & SD_CONTEXT_READ_MULTIPLE_BLOCK) != 0U) || ((context & SD_CONTEXT_WRITE_MULTIP
1837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         errorstate = SDMMC_CmdStopTransfer(hsd->Instance);
1839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (errorstate != HAL_SD_ERROR_NONE)
1840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
1841:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCode |= errorstate;
1842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1843:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCallback(hsd);
1844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           HAL_SD_ErrorCallback(hsd);
1846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
1848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
1851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
1852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((context & SD_CONTEXT_WRITE_SINGLE_BLOCK) != 0U) || ((context & SD_CONTEXT_WRITE_MULTIPL
1853:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->TxCpltCallback(hsd);
1856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1857:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SD_TxCpltCallback(hsd);
1858:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1859:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((context & SD_CONTEXT_READ_SINGLE_BLOCK) != 0U) || ((context & SD_CONTEXT_READ_MULTIPLE_
1861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1863:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->RxCpltCallback(hsd);
1864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SD_RxCpltCallback(hsd);
1866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1867:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if ((context & SD_CONTEXT_WRITE_MULTIPLE_BLOCK) != 0U)
1870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         errorstate = SDMMC_CmdStopTransfer(hsd->Instance);
1872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (errorstate != HAL_SD_ERROR_NONE)
1873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
1874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCode |= errorstate;
1875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1876:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCallback(hsd);
1877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           HAL_SD_ErrorCallback(hsd);
1879:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1880:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
1881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((context & SD_CONTEXT_READ_SINGLE_BLOCK) == 0U) && ((context & SD_CONTEXT_READ_MULTIPLE_
1883:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Disable the DMA transfer for transmit request by setting the DMAEN bit
1885:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         in the SD DCTRL register */
1886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Instance->DCTRL &= (uint32_t)~((uint32_t)SDMMC_DCTRL_DMAEN);
1887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 89


1888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
1889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->TxCpltCallback(hsd);
1892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SD_TxCpltCallback(hsd);
1894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1899:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
1900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1901:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Nothing to do */
1902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1904:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if ((__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_TXFIFOHE) != RESET) && ((context & SD_CONTEXT_IT) != 
1906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     SD_Write_IT(hsd);
1908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
1909:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (__HAL_SD_GET_FLAG(hsd,
1911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                              SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT | SDMMC_FLAG_RXOVERR | SDMMC
1912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****            RESET)
1913:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
1914:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Set Error code */
1915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DCRCFAIL) != RESET)
1916:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_DATA_CRC_FAIL;
1918:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DTIMEOUT) != RESET)
1920:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_DATA_TIMEOUT;
1922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXOVERR) != RESET)
1924:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_RX_OVERRUN;
1926:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_TXUNDERR) != RESET)
1928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_TX_UNDERRUN;
1930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1931:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear All flags */
1933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
1934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Disable all interrupts */
1936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_DISABLE_IT(hsd, SDMMC_IT_DATAEND | SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | \
1937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                         SDMMC_IT_TXUNDERR | SDMMC_IT_RXOVERR);
1938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __SDMMC_CMDTRANS_DISABLE(hsd->Instance);
1941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL |= SDMMC_DCTRL_FIFORST;
1942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->CMD |= SDMMC_CMD_CMDSTOP;
1943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
ARM GAS  /tmp/ccsLb3N5.s 			page 90


1945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= SDMMC_CmdStopTransfer(hsd->Instance);
1946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1948:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->CMD &= ~(SDMMC_CMD_CMDSTOP);
1949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_FLAG_DABORT);
1950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
1951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
1952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((context & SD_CONTEXT_IT) != 0U)
1953:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Set the SD state to ready to be able to start again the process */
1955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
1956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
1957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCallback(hsd);
1959:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       HAL_SD_ErrorCallback(hsd);
1961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
1963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if ((context & SD_CONTEXT_DMA) != 0U)
1964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
1965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
1966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (hsd->ErrorCode != HAL_SD_ERROR_NONE)
1967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Disable Internal DMA */
1969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         __HAL_SD_DISABLE_IT(hsd, SDMMC_IT_IDMABTC);
1970:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Instance->IDMACTRL = SDMMC_DISABLE_IDMA;
1971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
1972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Set the SD state to ready to be able to start again the process */
1973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
1974:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
1975:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCallback(hsd);
1976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1977:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SD_ErrorCallback(hsd);
1978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
1979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1980:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
1981:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Abort the SD DMA channel */
1982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (((context & SD_CONTEXT_WRITE_SINGLE_BLOCK) != 0U) || ((context & SD_CONTEXT_WRITE_MULTIPL
1983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Set the DMA Tx abort callback */
1985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->hdmatx->XferAbortCallback = SD_DMATxAbort;
1986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Abort DMA in IT mode */
1987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (HAL_DMA_Abort_IT(hsd->hdmatx) != HAL_OK)
1988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
1989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           SD_DMATxAbort(hsd->hdmatx);
1990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
1991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
1992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else if (((context & SD_CONTEXT_READ_SINGLE_BLOCK) != 0U) || ((context & SD_CONTEXT_READ_MULT
1993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
1994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Set the DMA Rx abort callback */
1995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->hdmarx->XferAbortCallback = SD_DMARxAbort;
1996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Abort DMA in IT mode */
1997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (HAL_DMA_Abort_IT(hsd->hdmarx) != HAL_OK)
1998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
1999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           SD_DMARxAbort(hsd->hdmarx);
2000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2001:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
ARM GAS  /tmp/ccsLb3N5.s 			page 91


2002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else
2003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode = HAL_SD_ERROR_NONE;
2005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
2006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Context = SD_CONTEXT_NONE;
2007:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
2008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->AbortCpltCallback(hsd);
2009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
2010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SD_AbortCallback(hsd);
2011:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
2012:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
2014:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
2015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
2017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Nothing to do */
2019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2020:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
2023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_IDMABTC) != RESET)
2024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_FLAG_IDMABTC);
2026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (READ_BIT(hsd->Instance->IDMACTRL, SDMMC_IDMA_IDMABACT) == 0U)
2027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Current buffer is buffer0, Transfer complete for buffer1 */
2029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if ((context & SD_CONTEXT_WRITE_MULTIPLE_BLOCK) != 0U)
2030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
2032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Write_DMADblBuf1CpltCallback(hsd);
2033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
2034:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SDEx_Write_DMADoubleBuffer1CpltCallback(hsd);
2035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
2036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else /* SD_CONTEXT_READ_MULTIPLE_BLOCK */
2038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2039:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
2040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Read_DMADblBuf1CpltCallback(hsd);
2041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
2042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SDEx_Read_DMADoubleBuffer1CpltCallback(hsd);
2043:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
2044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else /* SD_DMA_BUFFER1 */
2047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Current buffer is buffer1, Transfer complete for buffer0 */
2049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if ((context & SD_CONTEXT_WRITE_MULTIPLE_BLOCK) != 0U)
2050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
2052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Write_DMADblBuf0CpltCallback(hsd);
2053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
2054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SDEx_Write_DMADoubleBuffer0CpltCallback(hsd);
2055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
2056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else /* SD_CONTEXT_READ_MULTIPLE_BLOCK */
2058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
ARM GAS  /tmp/ccsLb3N5.s 			page 92


2059:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
2060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Read_DMADblBuf0CpltCallback(hsd);
2061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
2062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         HAL_SDEx_Read_DMADoubleBuffer0CpltCallback(hsd);
2063:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
2064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2067:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
2068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
2069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
2070:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Nothing to do */
2072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 3141              		.loc 1 2073 1
 3142 00e8 F7E0     		b	.L160
 3143              	.L140:
1828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3144              		.loc 1 1828 23
 3145 00ea FB68     		ldr	r3, [r7, #12]
 3146 00ec 03F08003 		and	r3, r3, #128
1828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3147              		.loc 1 1828 13
 3148 00f0 002B     		cmp	r3, #0
 3149 00f2 00F0F280 		beq	.L160
1869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3150              		.loc 1 1869 20
 3151 00f6 FB68     		ldr	r3, [r7, #12]
 3152 00f8 03F02003 		and	r3, r3, #32
1869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3153              		.loc 1 1869 10
 3154 00fc 002B     		cmp	r3, #0
 3155 00fe 11D0     		beq	.L146
1871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (errorstate != HAL_SD_ERROR_NONE)
 3156              		.loc 1 1871 22
 3157 0100 7B68     		ldr	r3, [r7, #4]
 3158 0102 1B68     		ldr	r3, [r3]
 3159 0104 1846     		mov	r0, r3
 3160 0106 FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 3161 010a B860     		str	r0, [r7, #8]
1872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 3162              		.loc 1 1872 12
 3163 010c BB68     		ldr	r3, [r7, #8]
 3164 010e 002B     		cmp	r3, #0
 3165 0110 08D0     		beq	.L146
1874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
 3166              		.loc 1 1874 14
 3167 0112 7B68     		ldr	r3, [r7, #4]
 3168 0114 9A6B     		ldr	r2, [r3, #56]
1874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
 3169              		.loc 1 1874 26
 3170 0116 BB68     		ldr	r3, [r7, #8]
 3171 0118 1A43     		orrs	r2, r2, r3
 3172 011a 7B68     		ldr	r3, [r7, #4]
 3173 011c 9A63     		str	r2, [r3, #56]
1878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
ARM GAS  /tmp/ccsLb3N5.s 			page 93


 3174              		.loc 1 1878 11
 3175 011e 7868     		ldr	r0, [r7, #4]
 3176 0120 FFF7FEFF 		bl	HAL_SD_ErrorCallback
 3177              	.L146:
1882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3178              		.loc 1 1882 21
 3179 0124 FB68     		ldr	r3, [r7, #12]
 3180 0126 03F00103 		and	r3, r3, #1
1882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3181              		.loc 1 1882 10
 3182 012a 002B     		cmp	r3, #0
 3183 012c 40F0D580 		bne	.L160
1882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3184              		.loc 1 1882 73 discriminator 1
 3185 0130 FB68     		ldr	r3, [r7, #12]
 3186 0132 03F00203 		and	r3, r3, #2
1882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3187              		.loc 1 1882 60 discriminator 1
 3188 0136 002B     		cmp	r3, #0
 3189 0138 40F0CF80 		bne	.L160
1886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 3190              		.loc 1 1886 12
 3191 013c 7B68     		ldr	r3, [r7, #4]
 3192 013e 1B68     		ldr	r3, [r3]
1886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 3193              		.loc 1 1886 22
 3194 0140 DA6A     		ldr	r2, [r3, #44]
1886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 3195              		.loc 1 1886 12
 3196 0142 7B68     		ldr	r3, [r7, #4]
 3197 0144 1B68     		ldr	r3, [r3]
1886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 3198              		.loc 1 1886 30
 3199 0146 22F00802 		bic	r2, r2, #8
 3200 014a DA62     		str	r2, [r3, #44]
1888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 3201              		.loc 1 1888 20
 3202 014c 7B68     		ldr	r3, [r7, #4]
 3203 014e 0122     		movs	r2, #1
 3204 0150 83F83420 		strb	r2, [r3, #52]
1893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
 3205              		.loc 1 1893 9
 3206 0154 7868     		ldr	r0, [r7, #4]
 3207 0156 FFF7FEFF 		bl	HAL_SD_TxCpltCallback
 3208              		.loc 1 2073 1
 3209 015a BEE0     		b	.L160
 3210              	.L139:
1905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 3211              		.loc 1 1905 13
 3212 015c 7B68     		ldr	r3, [r7, #4]
 3213 015e 1B68     		ldr	r3, [r3]
 3214 0160 5B6B     		ldr	r3, [r3, #52]
 3215 0162 03F48043 		and	r3, r3, #16384
1905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 3216              		.loc 1 1905 11
 3217 0166 002B     		cmp	r3, #0
 3218 0168 08D0     		beq	.L147
ARM GAS  /tmp/ccsLb3N5.s 			page 94


1905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 3219              		.loc 1 1905 80 discriminator 1
 3220 016a FB68     		ldr	r3, [r7, #12]
 3221 016c 03F00803 		and	r3, r3, #8
1905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 3222              		.loc 1 1905 67 discriminator 1
 3223 0170 002B     		cmp	r3, #0
 3224 0172 03D0     		beq	.L147
1907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
 3225              		.loc 1 1907 5
 3226 0174 7868     		ldr	r0, [r7, #4]
 3227 0176 FFF7FEFF 		bl	SD_Write_IT
 3228 017a AEE0     		b	.L138
 3229              	.L147:
1910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                              SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT | SDMMC_FLAG_RXOVERR | SDMMC
 3230              		.loc 1 1910 12
 3231 017c 7B68     		ldr	r3, [r7, #4]
 3232 017e 1B68     		ldr	r3, [r3]
 3233 0180 5B6B     		ldr	r3, [r3, #52]
 3234 0182 03F03A03 		and	r3, r3, #58
1910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                              SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT | SDMMC_FLAG_RXOVERR | SDMMC
 3235              		.loc 1 1910 11
 3236 0186 002B     		cmp	r3, #0
 3237 0188 00F0A780 		beq	.L160
1915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3238              		.loc 1 1915 9
 3239 018c 7B68     		ldr	r3, [r7, #4]
 3240 018e 1B68     		ldr	r3, [r3]
 3241 0190 5B6B     		ldr	r3, [r3, #52]
 3242 0192 03F00203 		and	r3, r3, #2
1915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3243              		.loc 1 1915 8
 3244 0196 002B     		cmp	r3, #0
 3245 0198 05D0     		beq	.L148
1917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 3246              		.loc 1 1917 10
 3247 019a 7B68     		ldr	r3, [r7, #4]
 3248 019c 9B6B     		ldr	r3, [r3, #56]
1917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 3249              		.loc 1 1917 22
 3250 019e 43F00202 		orr	r2, r3, #2
 3251 01a2 7B68     		ldr	r3, [r7, #4]
 3252 01a4 9A63     		str	r2, [r3, #56]
 3253              	.L148:
1919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3254              		.loc 1 1919 9
 3255 01a6 7B68     		ldr	r3, [r7, #4]
 3256 01a8 1B68     		ldr	r3, [r3]
 3257 01aa 5B6B     		ldr	r3, [r3, #52]
 3258 01ac 03F00803 		and	r3, r3, #8
1919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3259              		.loc 1 1919 8
 3260 01b0 002B     		cmp	r3, #0
 3261 01b2 05D0     		beq	.L149
1921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 3262              		.loc 1 1921 10
 3263 01b4 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsLb3N5.s 			page 95


 3264 01b6 9B6B     		ldr	r3, [r3, #56]
1921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 3265              		.loc 1 1921 22
 3266 01b8 43F00802 		orr	r2, r3, #8
 3267 01bc 7B68     		ldr	r3, [r7, #4]
 3268 01be 9A63     		str	r2, [r3, #56]
 3269              	.L149:
1923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3270              		.loc 1 1923 9
 3271 01c0 7B68     		ldr	r3, [r7, #4]
 3272 01c2 1B68     		ldr	r3, [r3]
 3273 01c4 5B6B     		ldr	r3, [r3, #52]
 3274 01c6 03F02003 		and	r3, r3, #32
1923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3275              		.loc 1 1923 8
 3276 01ca 002B     		cmp	r3, #0
 3277 01cc 05D0     		beq	.L150
1925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 3278              		.loc 1 1925 10
 3279 01ce 7B68     		ldr	r3, [r7, #4]
 3280 01d0 9B6B     		ldr	r3, [r3, #56]
1925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 3281              		.loc 1 1925 22
 3282 01d2 43F02002 		orr	r2, r3, #32
 3283 01d6 7B68     		ldr	r3, [r7, #4]
 3284 01d8 9A63     		str	r2, [r3, #56]
 3285              	.L150:
1927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3286              		.loc 1 1927 9
 3287 01da 7B68     		ldr	r3, [r7, #4]
 3288 01dc 1B68     		ldr	r3, [r3]
 3289 01de 5B6B     		ldr	r3, [r3, #52]
 3290 01e0 03F01003 		and	r3, r3, #16
1927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3291              		.loc 1 1927 8
 3292 01e4 002B     		cmp	r3, #0
 3293 01e6 05D0     		beq	.L151
1929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 3294              		.loc 1 1929 10
 3295 01e8 7B68     		ldr	r3, [r7, #4]
 3296 01ea 9B6B     		ldr	r3, [r3, #56]
1929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 3297              		.loc 1 1929 22
 3298 01ec 43F01002 		orr	r2, r3, #16
 3299 01f0 7B68     		ldr	r3, [r7, #4]
 3300 01f2 9A63     		str	r2, [r3, #56]
 3301              	.L151:
1933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 3302              		.loc 1 1933 5
 3303 01f4 7B68     		ldr	r3, [r7, #4]
 3304 01f6 1B68     		ldr	r3, [r3]
 3305 01f8 40F23A52 		movw	r2, #1338
 3306 01fc 9A63     		str	r2, [r3, #56]
1936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                         SDMMC_IT_TXUNDERR | SDMMC_IT_RXOVERR);
 3307              		.loc 1 1936 5
 3308 01fe 7B68     		ldr	r3, [r7, #4]
 3309 0200 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccsLb3N5.s 			page 96


 3310 0202 DA6B     		ldr	r2, [r3, #60]
 3311 0204 7B68     		ldr	r3, [r7, #4]
 3312 0206 1B68     		ldr	r3, [r3]
 3313 0208 22F49D72 		bic	r2, r2, #314
 3314 020c DA63     		str	r2, [r3, #60]
1945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 3315              		.loc 1 1945 23
 3316 020e 7B68     		ldr	r3, [r7, #4]
 3317 0210 1B68     		ldr	r3, [r3]
 3318 0212 1846     		mov	r0, r3
 3319 0214 FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 3320 0218 0246     		mov	r2, r0
1945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 3321              		.loc 1 1945 8 discriminator 1
 3322 021a 7B68     		ldr	r3, [r7, #4]
 3323 021c 9B6B     		ldr	r3, [r3, #56]
1945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
 3324              		.loc 1 1945 20 discriminator 1
 3325 021e 1A43     		orrs	r2, r2, r3
 3326 0220 7B68     		ldr	r3, [r7, #4]
 3327 0222 9A63     		str	r2, [r3, #56]
1952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3328              		.loc 1 1952 18
 3329 0224 FB68     		ldr	r3, [r7, #12]
 3330 0226 03F00803 		and	r3, r3, #8
1952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3331              		.loc 1 1952 8
 3332 022a 002B     		cmp	r3, #0
 3333 022c 0AD0     		beq	.L152
1955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->Context = SD_CONTEXT_NONE;
 3334              		.loc 1 1955 18
 3335 022e 7B68     		ldr	r3, [r7, #4]
 3336 0230 0122     		movs	r2, #1
 3337 0232 83F83420 		strb	r2, [r3, #52]
1956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
 3338              		.loc 1 1956 20
 3339 0236 7B68     		ldr	r3, [r7, #4]
 3340 0238 0022     		movs	r2, #0
 3341 023a 1A63     		str	r2, [r3, #48]
1960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
 3342              		.loc 1 1960 7
 3343 023c 7868     		ldr	r0, [r7, #4]
 3344 023e FFF7FEFF 		bl	HAL_SD_ErrorCallback
 3345              		.loc 1 2073 1
 3346 0242 4AE0     		b	.L160
 3347              	.L152:
1963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3348              		.loc 1 1963 23
 3349 0244 FB68     		ldr	r3, [r7, #12]
 3350 0246 03F08003 		and	r3, r3, #128
1963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 3351              		.loc 1 1963 13
 3352 024a 002B     		cmp	r3, #0
 3353 024c 45D0     		beq	.L160
1982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3354              		.loc 1 1982 21
 3355 024e FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsLb3N5.s 			page 97


 3356 0250 03F01003 		and	r3, r3, #16
1982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3357              		.loc 1 1982 10
 3358 0254 002B     		cmp	r3, #0
 3359 0256 04D1     		bne	.L153
1982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3360              		.loc 1 1982 74 discriminator 1
 3361 0258 FB68     		ldr	r3, [r7, #12]
 3362 025a 03F02003 		and	r3, r3, #32
1982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3363              		.loc 1 1982 61 discriminator 1
 3364 025e 002B     		cmp	r3, #0
 3365 0260 11D0     		beq	.L154
 3366              	.L153:
1985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Abort DMA in IT mode */
 3367              		.loc 1 1985 12
 3368 0262 7B68     		ldr	r3, [r7, #4]
 3369 0264 DB6B     		ldr	r3, [r3, #60]
1985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Abort DMA in IT mode */
 3370              		.loc 1 1985 40
 3371 0266 1F4A     		ldr	r2, .L161
 3372 0268 9A63     		str	r2, [r3, #56]
1987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 3373              		.loc 1 1987 13
 3374 026a 7B68     		ldr	r3, [r7, #4]
 3375 026c DB6B     		ldr	r3, [r3, #60]
 3376 026e 1846     		mov	r0, r3
 3377 0270 FFF7FEFF 		bl	HAL_DMA_Abort_IT
 3378 0274 0346     		mov	r3, r0
1987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 3379              		.loc 1 1987 12 discriminator 1
 3380 0276 002B     		cmp	r3, #0
 3381 0278 2FD0     		beq	.L138
1989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
 3382              		.loc 1 1989 11
 3383 027a 7B68     		ldr	r3, [r7, #4]
 3384 027c DB6B     		ldr	r3, [r3, #60]
 3385 027e 1846     		mov	r0, r3
 3386 0280 FFF7FEFF 		bl	SD_DMATxAbort
1987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 3387              		.loc 1 1987 12
 3388 0284 29E0     		b	.L138
 3389              	.L154:
1992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3390              		.loc 1 1992 26
 3391 0286 FB68     		ldr	r3, [r7, #12]
 3392 0288 03F00103 		and	r3, r3, #1
1992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3393              		.loc 1 1992 15
 3394 028c 002B     		cmp	r3, #0
 3395 028e 04D1     		bne	.L157
1992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3396              		.loc 1 1992 78 discriminator 1
 3397 0290 FB68     		ldr	r3, [r7, #12]
 3398 0292 03F00203 		and	r3, r3, #2
1992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 3399              		.loc 1 1992 65 discriminator 1
ARM GAS  /tmp/ccsLb3N5.s 			page 98


 3400 0296 002B     		cmp	r3, #0
 3401 0298 11D0     		beq	.L158
 3402              	.L157:
1995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Abort DMA in IT mode */
 3403              		.loc 1 1995 12
 3404 029a 7B68     		ldr	r3, [r7, #4]
 3405 029c 1B6C     		ldr	r3, [r3, #64]
1995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Abort DMA in IT mode */
 3406              		.loc 1 1995 40
 3407 029e 124A     		ldr	r2, .L161+4
 3408 02a0 9A63     		str	r2, [r3, #56]
1997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 3409              		.loc 1 1997 13
 3410 02a2 7B68     		ldr	r3, [r7, #4]
 3411 02a4 1B6C     		ldr	r3, [r3, #64]
 3412 02a6 1846     		mov	r0, r3
 3413 02a8 FFF7FEFF 		bl	HAL_DMA_Abort_IT
 3414 02ac 0346     		mov	r3, r0
1997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 3415              		.loc 1 1997 12 discriminator 1
 3416 02ae 002B     		cmp	r3, #0
 3417 02b0 13D0     		beq	.L138
1999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
 3418              		.loc 1 1999 11
 3419 02b2 7B68     		ldr	r3, [r7, #4]
 3420 02b4 1B6C     		ldr	r3, [r3, #64]
 3421 02b6 1846     		mov	r0, r3
 3422 02b8 FFF7FEFF 		bl	SD_DMARxAbort
1997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
 3423              		.loc 1 1997 12
 3424 02bc 0DE0     		b	.L138
 3425              	.L158:
2004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->State = HAL_SD_STATE_READY;
 3426              		.loc 1 2004 24
 3427 02be 7B68     		ldr	r3, [r7, #4]
 3428 02c0 0022     		movs	r2, #0
 3429 02c2 9A63     		str	r2, [r3, #56]
2005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Context = SD_CONTEXT_NONE;
 3430              		.loc 1 2005 20
 3431 02c4 7B68     		ldr	r3, [r7, #4]
 3432 02c6 0122     		movs	r2, #1
 3433 02c8 83F83420 		strb	r2, [r3, #52]
2006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
 3434              		.loc 1 2006 22
 3435 02cc 7B68     		ldr	r3, [r7, #4]
 3436 02ce 0022     		movs	r2, #0
 3437 02d0 1A63     		str	r2, [r3, #48]
2010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
 3438              		.loc 1 2010 9
 3439 02d2 7868     		ldr	r0, [r7, #4]
 3440 02d4 FFF7FEFF 		bl	HAL_SD_AbortCallback
 3441              		.loc 1 2073 1
 3442 02d8 FFE7     		b	.L160
 3443              	.L138:
 3444              	.L160:
 3445 02da 00BF     		nop
 3446 02dc 1037     		adds	r7, r7, #16
ARM GAS  /tmp/ccsLb3N5.s 			page 99


 3447              		.cfi_def_cfa_offset 8
 3448 02de BD46     		mov	sp, r7
 3449              		.cfi_def_cfa_register 13
 3450              		@ sp needed
 3451 02e0 80BD     		pop	{r7, pc}
 3452              	.L162:
 3453 02e2 00BF     		.align	2
 3454              	.L161:
 3455 02e4 00000000 		.word	SD_DMATxAbort
 3456 02e8 00000000 		.word	SD_DMARxAbort
 3457              		.cfi_endproc
 3458              	.LFE457:
 3460              		.section	.text.HAL_SD_GetState,"ax",%progbits
 3461              		.align	1
 3462              		.global	HAL_SD_GetState
 3463              		.syntax unified
 3464              		.thumb
 3465              		.thumb_func
 3467              	HAL_SD_GetState:
 3468              	.LFB458:
2074:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2076:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief return the SD state
2077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param hsd: Pointer to sd handle
2078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL state
2079:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_SD_StateTypeDef HAL_SD_GetState(const SD_HandleTypeDef *hsd)
2081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 3469              		.loc 1 2081 1
 3470              		.cfi_startproc
 3471              		@ args = 0, pretend = 0, frame = 8
 3472              		@ frame_needed = 1, uses_anonymous_args = 0
 3473              		@ link register save eliminated.
 3474 0000 80B4     		push	{r7}
 3475              		.cfi_def_cfa_offset 4
 3476              		.cfi_offset 7, -4
 3477 0002 83B0     		sub	sp, sp, #12
 3478              		.cfi_def_cfa_offset 16
 3479 0004 00AF     		add	r7, sp, #0
 3480              		.cfi_def_cfa_register 7
 3481 0006 7860     		str	r0, [r7, #4]
2082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return hsd->State;
 3482              		.loc 1 2082 13
 3483 0008 7B68     		ldr	r3, [r7, #4]
 3484 000a 93F83430 		ldrb	r3, [r3, #52]
 3485 000e DBB2     		uxtb	r3, r3
2083:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 3486              		.loc 1 2083 1
 3487 0010 1846     		mov	r0, r3
 3488 0012 0C37     		adds	r7, r7, #12
 3489              		.cfi_def_cfa_offset 4
 3490 0014 BD46     		mov	sp, r7
 3491              		.cfi_def_cfa_register 13
 3492              		@ sp needed
 3493 0016 5DF8047B 		ldr	r7, [sp], #4
 3494              		.cfi_restore 7
 3495              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/ccsLb3N5.s 			page 100


 3496 001a 7047     		bx	lr
 3497              		.cfi_endproc
 3498              	.LFE458:
 3500              		.section	.text.HAL_SD_GetError,"ax",%progbits
 3501              		.align	1
 3502              		.global	HAL_SD_GetError
 3503              		.syntax unified
 3504              		.thumb
 3505              		.thumb_func
 3507              	HAL_SD_GetError:
 3508              	.LFB459:
2084:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Return the SD error code
2087:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd : Pointer to a SD_HandleTypeDef structure that contains
2088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *              the configuration information.
2089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval SD Error Code
2090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** uint32_t HAL_SD_GetError(const SD_HandleTypeDef *hsd)
2092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 3509              		.loc 1 2092 1
 3510              		.cfi_startproc
 3511              		@ args = 0, pretend = 0, frame = 8
 3512              		@ frame_needed = 1, uses_anonymous_args = 0
 3513              		@ link register save eliminated.
 3514 0000 80B4     		push	{r7}
 3515              		.cfi_def_cfa_offset 4
 3516              		.cfi_offset 7, -4
 3517 0002 83B0     		sub	sp, sp, #12
 3518              		.cfi_def_cfa_offset 16
 3519 0004 00AF     		add	r7, sp, #0
 3520              		.cfi_def_cfa_register 7
 3521 0006 7860     		str	r0, [r7, #4]
2093:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return hsd->ErrorCode;
 3522              		.loc 1 2093 13
 3523 0008 7B68     		ldr	r3, [r7, #4]
 3524 000a 9B6B     		ldr	r3, [r3, #56]
2094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 3525              		.loc 1 2094 1
 3526 000c 1846     		mov	r0, r3
 3527 000e 0C37     		adds	r7, r7, #12
 3528              		.cfi_def_cfa_offset 4
 3529 0010 BD46     		mov	sp, r7
 3530              		.cfi_def_cfa_register 13
 3531              		@ sp needed
 3532 0012 5DF8047B 		ldr	r7, [sp], #4
 3533              		.cfi_restore 7
 3534              		.cfi_def_cfa_offset 0
 3535 0016 7047     		bx	lr
 3536              		.cfi_endproc
 3537              	.LFE459:
 3539              		.section	.text.HAL_SD_TxCpltCallback,"ax",%progbits
 3540              		.align	1
 3541              		.weak	HAL_SD_TxCpltCallback
 3542              		.syntax unified
 3543              		.thumb
 3544              		.thumb_func
ARM GAS  /tmp/ccsLb3N5.s 			page 101


 3546              	HAL_SD_TxCpltCallback:
 3547              	.LFB460:
2095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2097:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief Tx Transfer completed callbacks
2098:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param hsd: Pointer to SD handle
2099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
2100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** __weak void HAL_SD_TxCpltCallback(SD_HandleTypeDef *hsd)
2102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 3548              		.loc 1 2102 1
 3549              		.cfi_startproc
 3550              		@ args = 0, pretend = 0, frame = 8
 3551              		@ frame_needed = 1, uses_anonymous_args = 0
 3552              		@ link register save eliminated.
 3553 0000 80B4     		push	{r7}
 3554              		.cfi_def_cfa_offset 4
 3555              		.cfi_offset 7, -4
 3556 0002 83B0     		sub	sp, sp, #12
 3557              		.cfi_def_cfa_offset 16
 3558 0004 00AF     		add	r7, sp, #0
 3559              		.cfi_def_cfa_register 7
 3560 0006 7860     		str	r0, [r7, #4]
2103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
2104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   UNUSED(hsd);
2105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             the HAL_SD_TxCpltCallback can be implemented in the user file
2108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****    */
2109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 3561              		.loc 1 2109 1
 3562 0008 00BF     		nop
 3563 000a 0C37     		adds	r7, r7, #12
 3564              		.cfi_def_cfa_offset 4
 3565 000c BD46     		mov	sp, r7
 3566              		.cfi_def_cfa_register 13
 3567              		@ sp needed
 3568 000e 5DF8047B 		ldr	r7, [sp], #4
 3569              		.cfi_restore 7
 3570              		.cfi_def_cfa_offset 0
 3571 0012 7047     		bx	lr
 3572              		.cfi_endproc
 3573              	.LFE460:
 3575              		.section	.text.HAL_SD_RxCpltCallback,"ax",%progbits
 3576              		.align	1
 3577              		.weak	HAL_SD_RxCpltCallback
 3578              		.syntax unified
 3579              		.thumb
 3580              		.thumb_func
 3582              	HAL_SD_RxCpltCallback:
 3583              	.LFB461:
2110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief Rx Transfer completed callbacks
2113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param hsd: Pointer SD handle
2114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
2115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
ARM GAS  /tmp/ccsLb3N5.s 			page 102


2116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** __weak void HAL_SD_RxCpltCallback(SD_HandleTypeDef *hsd)
2117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 3584              		.loc 1 2117 1
 3585              		.cfi_startproc
 3586              		@ args = 0, pretend = 0, frame = 8
 3587              		@ frame_needed = 1, uses_anonymous_args = 0
 3588              		@ link register save eliminated.
 3589 0000 80B4     		push	{r7}
 3590              		.cfi_def_cfa_offset 4
 3591              		.cfi_offset 7, -4
 3592 0002 83B0     		sub	sp, sp, #12
 3593              		.cfi_def_cfa_offset 16
 3594 0004 00AF     		add	r7, sp, #0
 3595              		.cfi_def_cfa_register 7
 3596 0006 7860     		str	r0, [r7, #4]
2118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
2119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   UNUSED(hsd);
2120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             the HAL_SD_RxCpltCallback can be implemented in the user file
2123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****    */
2124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 3597              		.loc 1 2124 1
 3598 0008 00BF     		nop
 3599 000a 0C37     		adds	r7, r7, #12
 3600              		.cfi_def_cfa_offset 4
 3601 000c BD46     		mov	sp, r7
 3602              		.cfi_def_cfa_register 13
 3603              		@ sp needed
 3604 000e 5DF8047B 		ldr	r7, [sp], #4
 3605              		.cfi_restore 7
 3606              		.cfi_def_cfa_offset 0
 3607 0012 7047     		bx	lr
 3608              		.cfi_endproc
 3609              	.LFE461:
 3611              		.section	.text.HAL_SD_ErrorCallback,"ax",%progbits
 3612              		.align	1
 3613              		.weak	HAL_SD_ErrorCallback
 3614              		.syntax unified
 3615              		.thumb
 3616              		.thumb_func
 3618              	HAL_SD_ErrorCallback:
 3619              	.LFB462:
2125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief SD error callbacks
2128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param hsd: Pointer SD handle
2129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
2130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** __weak void HAL_SD_ErrorCallback(SD_HandleTypeDef *hsd)
2132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 3620              		.loc 1 2132 1
 3621              		.cfi_startproc
 3622              		@ args = 0, pretend = 0, frame = 8
 3623              		@ frame_needed = 1, uses_anonymous_args = 0
 3624              		@ link register save eliminated.
 3625 0000 80B4     		push	{r7}
ARM GAS  /tmp/ccsLb3N5.s 			page 103


 3626              		.cfi_def_cfa_offset 4
 3627              		.cfi_offset 7, -4
 3628 0002 83B0     		sub	sp, sp, #12
 3629              		.cfi_def_cfa_offset 16
 3630 0004 00AF     		add	r7, sp, #0
 3631              		.cfi_def_cfa_register 7
 3632 0006 7860     		str	r0, [r7, #4]
2133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
2134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   UNUSED(hsd);
2135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             the HAL_SD_ErrorCallback can be implemented in the user file
2138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****    */
2139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 3633              		.loc 1 2139 1
 3634 0008 00BF     		nop
 3635 000a 0C37     		adds	r7, r7, #12
 3636              		.cfi_def_cfa_offset 4
 3637 000c BD46     		mov	sp, r7
 3638              		.cfi_def_cfa_register 13
 3639              		@ sp needed
 3640 000e 5DF8047B 		ldr	r7, [sp], #4
 3641              		.cfi_restore 7
 3642              		.cfi_def_cfa_offset 0
 3643 0012 7047     		bx	lr
 3644              		.cfi_endproc
 3645              	.LFE462:
 3647              		.section	.text.HAL_SD_AbortCallback,"ax",%progbits
 3648              		.align	1
 3649              		.weak	HAL_SD_AbortCallback
 3650              		.syntax unified
 3651              		.thumb
 3652              		.thumb_func
 3654              	HAL_SD_AbortCallback:
 3655              	.LFB463:
2140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief SD Abort callbacks
2143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param hsd: Pointer SD handle
2144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
2145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** __weak void HAL_SD_AbortCallback(SD_HandleTypeDef *hsd)
2147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 3656              		.loc 1 2147 1
 3657              		.cfi_startproc
 3658              		@ args = 0, pretend = 0, frame = 8
 3659              		@ frame_needed = 1, uses_anonymous_args = 0
 3660              		@ link register save eliminated.
 3661 0000 80B4     		push	{r7}
 3662              		.cfi_def_cfa_offset 4
 3663              		.cfi_offset 7, -4
 3664 0002 83B0     		sub	sp, sp, #12
 3665              		.cfi_def_cfa_offset 16
 3666 0004 00AF     		add	r7, sp, #0
 3667              		.cfi_def_cfa_register 7
 3668 0006 7860     		str	r0, [r7, #4]
2148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
ARM GAS  /tmp/ccsLb3N5.s 			page 104


2149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   UNUSED(hsd);
2150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             the HAL_SD_AbortCallback can be implemented in the user file
2153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****    */
2154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 3669              		.loc 1 2154 1
 3670 0008 00BF     		nop
 3671 000a 0C37     		adds	r7, r7, #12
 3672              		.cfi_def_cfa_offset 4
 3673 000c BD46     		mov	sp, r7
 3674              		.cfi_def_cfa_register 13
 3675              		@ sp needed
 3676 000e 5DF8047B 		ldr	r7, [sp], #4
 3677              		.cfi_restore 7
 3678              		.cfi_def_cfa_offset 0
 3679 0012 7047     		bx	lr
 3680              		.cfi_endproc
 3681              	.LFE463:
 3683              		.section	.text.HAL_SD_GetCardCID,"ax",%progbits
 3684              		.align	1
 3685              		.global	HAL_SD_GetCardCID
 3686              		.syntax unified
 3687              		.thumb
 3688              		.thumb_func
 3690              	HAL_SD_GetCardCID:
 3691              	.LFB464:
2155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
2157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Register a User SD Callback
2159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         To be used instead of the weak (surcharged) predefined callback
2160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param hsd : SD handle
2161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param CallbackID : ID of the callback to be registered
2162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *        This parameter can be one of the following values:
2163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_TX_CPLT_CB_ID    SD Tx Complete Callback ID
2164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_RX_CPLT_CB_ID    SD Rx Complete Callback ID
2165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_ERROR_CB_ID      SD Error Callback ID
2166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_ABORT_CB_ID      SD Abort Callback ID
2167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_READ_DMA_DBL_BUF0_CPLT_CB_ID  SD DMA Rx Double buffer 0 Callback ID
2168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_READ_DMA_DBL_BUF1_CPLT_CB_ID  SD DMA Rx Double buffer 1 Callback ID
2169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_WRITE_DMA_DBL_BUF0_CPLT_CB_ID SD DMA Tx Double buffer 0 Callback ID
2170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_WRITE_DMA_DBL_BUF1_CPLT_CB_ID SD DMA Tx Double buffer 1 Callback ID
2171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_MSP_INIT_CB_ID   SD MspInit Callback ID
2172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_MSP_DEINIT_CB_ID SD MspDeInit Callback ID
2173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param pCallback : pointer to the Callback function
2174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval status
2175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_RegisterCallback(SD_HandleTypeDef *hsd, HAL_SD_CallbackIDTypeDef CallbackI
2177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                           pSD_CallbackTypeDef pCallback)
2178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
2179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_StatusTypeDef status = HAL_OK;
2180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (pCallback == NULL)
2182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Update the error code */
2184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
ARM GAS  /tmp/ccsLb3N5.s 			page 105


2185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
2186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Process locked */
2189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_LOCK(hsd);
2190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
2192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     switch (CallbackID)
2194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_TX_CPLT_CB_ID :
2196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->TxCpltCallback = pCallback;
2197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_RX_CPLT_CB_ID :
2199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->RxCpltCallback = pCallback;
2200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_ERROR_CB_ID :
2202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCallback = pCallback;
2203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_ABORT_CB_ID :
2205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->AbortCpltCallback = pCallback;
2206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
2208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_READ_DMA_DBL_BUF0_CPLT_CB_ID :
2209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Read_DMADblBuf0CpltCallback = pCallback;
2210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_READ_DMA_DBL_BUF1_CPLT_CB_ID :
2212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Read_DMADblBuf1CpltCallback = pCallback;
2213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_WRITE_DMA_DBL_BUF0_CPLT_CB_ID :
2215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Write_DMADblBuf0CpltCallback = pCallback;
2216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_WRITE_DMA_DBL_BUF1_CPLT_CB_ID :
2218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Write_DMADblBuf1CpltCallback = pCallback;
2219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
2221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
2222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_MSP_INIT_CB_ID :
2223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->MspInitCallback = pCallback;
2224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_MSP_DEINIT_CB_ID :
2226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->MspDeInitCallback = pCallback;
2227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       default :
2229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Update the error code */
2230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
2231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* update return status */
2232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         status =  HAL_ERROR;
2233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (hsd->State == HAL_SD_STATE_RESET)
2237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     switch (CallbackID)
2239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_MSP_INIT_CB_ID :
2241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->MspInitCallback = pCallback;
ARM GAS  /tmp/ccsLb3N5.s 			page 106


2242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_MSP_DEINIT_CB_ID :
2244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->MspDeInitCallback = pCallback;
2245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       default :
2247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Update the error code */
2248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
2249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* update return status */
2250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         status =  HAL_ERROR;
2251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
2255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Update the error code */
2257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
2258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* update return status */
2259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     status =  HAL_ERROR;
2260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Release Lock */
2263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_UNLOCK(hsd);
2264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return status;
2265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
2266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Unregister a User SD Callback
2269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         SD Callback is redirected to the weak (surcharged) predefined callback
2270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param hsd : SD handle
2271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param CallbackID : ID of the callback to be unregistered
2272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *        This parameter can be one of the following values:
2273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_TX_CPLT_CB_ID    SD Tx Complete Callback ID
2274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_RX_CPLT_CB_ID    SD Rx Complete Callback ID
2275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_ERROR_CB_ID      SD Error Callback ID
2276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_ABORT_CB_ID      SD Abort Callback ID
2277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_READ_DMA_DBL_BUF0_CPLT_CB_ID  SD DMA Rx Double buffer 0 Callback ID
2278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_READ_DMA_DBL_BUF1_CPLT_CB_ID  SD DMA Rx Double buffer 1 Callback ID
2279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_WRITE_DMA_DBL_BUF0_CPLT_CB_ID SD DMA Tx Double buffer 0 Callback ID
2280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_WRITE_DMA_DBL_BUF1_CPLT_CB_ID SD DMA Tx Double buffer 1 Callback ID
2281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_MSP_INIT_CB_ID   SD MspInit Callback ID
2282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          @arg @ref HAL_SD_MSP_DEINIT_CB_ID SD MspDeInit Callback ID
2283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval status
2284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_UnRegisterCallback(SD_HandleTypeDef *hsd, HAL_SD_CallbackIDTypeDef Callbac
2286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
2287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_StatusTypeDef status = HAL_OK;
2288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Process locked */
2290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_LOCK(hsd);
2291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
2293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     switch (CallbackID)
2295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_TX_CPLT_CB_ID :
2297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->TxCpltCallback = HAL_SD_TxCpltCallback;
2298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
ARM GAS  /tmp/ccsLb3N5.s 			page 107


2299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_RX_CPLT_CB_ID :
2300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->RxCpltCallback = HAL_SD_RxCpltCallback;
2301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_ERROR_CB_ID :
2303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCallback = HAL_SD_ErrorCallback;
2304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_ABORT_CB_ID :
2306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->AbortCpltCallback = HAL_SD_AbortCallback;
2307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
2309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_READ_DMA_DBL_BUF0_CPLT_CB_ID :
2310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Read_DMADblBuf0CpltCallback = HAL_SDEx_Read_DMADoubleBuffer0CpltCallback;
2311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_READ_DMA_DBL_BUF1_CPLT_CB_ID :
2313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Read_DMADblBuf1CpltCallback = HAL_SDEx_Read_DMADoubleBuffer1CpltCallback;
2314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_WRITE_DMA_DBL_BUF0_CPLT_CB_ID :
2316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Write_DMADblBuf0CpltCallback = HAL_SDEx_Write_DMADoubleBuffer0CpltCallback;
2317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_WRITE_DMA_DBL_BUF1_CPLT_CB_ID :
2319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Write_DMADblBuf1CpltCallback = HAL_SDEx_Write_DMADoubleBuffer1CpltCallback;
2320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
2322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
2323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_MSP_INIT_CB_ID :
2324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->MspInitCallback = HAL_SD_MspInit;
2325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_MSP_DEINIT_CB_ID :
2327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->MspDeInitCallback = HAL_SD_MspDeInit;
2328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       default :
2330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Update the error code */
2331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
2332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* update return status */
2333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         status =  HAL_ERROR;
2334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (hsd->State == HAL_SD_STATE_RESET)
2338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     switch (CallbackID)
2340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_MSP_INIT_CB_ID :
2342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->MspInitCallback = HAL_SD_MspInit;
2343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case HAL_SD_MSP_DEINIT_CB_ID :
2345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->MspDeInitCallback = HAL_SD_MspDeInit;
2346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       default :
2348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Update the error code */
2349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
2350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* update return status */
2351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         status =  HAL_ERROR;
2352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
ARM GAS  /tmp/ccsLb3N5.s 			page 108


2356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Update the error code */
2358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
2359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* update return status */
2360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     status =  HAL_ERROR;
2361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Release Lock */
2364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_UNLOCK(hsd);
2365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return status;
2366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
2367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
2369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Register a User SD Transceiver Callback
2371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         To be used instead of the weak (overridden) predefined callback
2372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param hsd : SD handle
2373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param pCallback : pointer to the Callback function
2374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval status
2375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_RegisterTransceiverCallback(SD_HandleTypeDef *hsd, pSD_TransceiverCallback
2377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
2378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_StatusTypeDef status = HAL_OK;
2379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (pCallback == NULL)
2381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Update the error code */
2383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
2384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
2385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Process locked */
2388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_LOCK(hsd);
2389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
2391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->DriveTransceiver_1_8V_Callback = pCallback;
2393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
2395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Update the error code */
2397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
2398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* update return status */
2399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     status =  HAL_ERROR;
2400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Release Lock */
2403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_UNLOCK(hsd);
2404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return status;
2405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
2406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Unregister a User SD Transceiver Callback
2409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         SD Callback is redirected to the weak (overridden) predefined callback
2410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param hsd : SD handle
2411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval status
2412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
ARM GAS  /tmp/ccsLb3N5.s 			page 109


2413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_UnRegisterTransceiverCallback(SD_HandleTypeDef *hsd)
2414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
2415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_StatusTypeDef status = HAL_OK;
2416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Process locked */
2418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_LOCK(hsd);
2419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->State == HAL_SD_STATE_READY)
2421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->DriveTransceiver_1_8V_Callback = HAL_SDEx_DriveTransceiver_1_8V_Callback;
2423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
2425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Update the error code */
2427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_INVALID_CALLBACK;
2428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* update return status */
2429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     status =  HAL_ERROR;
2430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Release Lock */
2433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_UNLOCK(hsd);
2434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return status;
2435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
2436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
2438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
2439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
2440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @}
2443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /** @addtogroup SD_Exported_Functions_Group3
2446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *  @brief   management functions
2447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *
2448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** @verbatim
2449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==============================================================================
2450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                       ##### Peripheral Control functions #####
2451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   ==============================================================================
2452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   [..]
2453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     This subsection provides a set of functions allowing to control the SD card
2454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     operations and get the related information
2455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** @endverbatim
2457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @{
2458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Returns information the information of the card which are stored on
2462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         the CID register.
2463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
2464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pCID: Pointer to a HAL_SD_CardCIDTypeDef structure that
2465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         contains all CID register parameters
2466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
2467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_GetCardCID(SD_HandleTypeDef *hsd, HAL_SD_CardCIDTypeDef *pCID)
2469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
ARM GAS  /tmp/ccsLb3N5.s 			page 110


 3692              		.loc 1 2469 1
 3693              		.cfi_startproc
 3694              		@ args = 0, pretend = 0, frame = 8
 3695              		@ frame_needed = 1, uses_anonymous_args = 0
 3696              		@ link register save eliminated.
 3697 0000 80B4     		push	{r7}
 3698              		.cfi_def_cfa_offset 4
 3699              		.cfi_offset 7, -4
 3700 0002 83B0     		sub	sp, sp, #12
 3701              		.cfi_def_cfa_offset 16
 3702 0004 00AF     		add	r7, sp, #0
 3703              		.cfi_def_cfa_register 7
 3704 0006 7860     		str	r0, [r7, #4]
 3705 0008 3960     		str	r1, [r7]
2470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->ManufacturerID = (uint8_t)((hsd->CID[0] & 0xFF000000U) >> 24U);
 3706              		.loc 1 2470 45
 3707 000a 7B68     		ldr	r3, [r7, #4]
 3708 000c 5B6F     		ldr	r3, [r3, #116]
 3709              		.loc 1 2470 64
 3710 000e 1B0E     		lsrs	r3, r3, #24
 3711              		.loc 1 2470 26
 3712 0010 DAB2     		uxtb	r2, r3
 3713              		.loc 1 2470 24
 3714 0012 3B68     		ldr	r3, [r7]
 3715 0014 1A70     		strb	r2, [r3]
2471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->OEM_AppliID = (uint16_t)((hsd->CID[0] & 0x00FFFF00U) >> 8U);
 3716              		.loc 1 2472 43
 3717 0016 7B68     		ldr	r3, [r7, #4]
 3718 0018 5B6F     		ldr	r3, [r3, #116]
 3719              		.loc 1 2472 62
 3720 001a 1B0A     		lsrs	r3, r3, #8
 3721              		.loc 1 2472 23
 3722 001c 9AB2     		uxth	r2, r3
 3723              		.loc 1 2472 21
 3724 001e 3B68     		ldr	r3, [r7]
 3725 0020 5A80     		strh	r2, [r3, #2]	@ movhi
2473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->ProdName1 = (((hsd->CID[0] & 0x000000FFU) << 24U) | ((hsd->CID[1] & 0xFFFFFF00U) >> 8U));
 3726              		.loc 1 2474 32
 3727 0022 7B68     		ldr	r3, [r7, #4]
 3728 0024 5B6F     		ldr	r3, [r3, #116]
 3729              		.loc 1 2474 51
 3730 0026 1A06     		lsls	r2, r3, #24
 3731              		.loc 1 2474 71
 3732 0028 7B68     		ldr	r3, [r7, #4]
 3733 002a 9B6F     		ldr	r3, [r3, #120]
 3734              		.loc 1 2474 90
 3735 002c 1B0A     		lsrs	r3, r3, #8
 3736              		.loc 1 2474 59
 3737 002e 1A43     		orrs	r2, r2, r3
 3738              		.loc 1 2474 19
 3739 0030 3B68     		ldr	r3, [r7]
 3740 0032 5A60     		str	r2, [r3, #4]
2475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->ProdName2 = (uint8_t)(hsd->CID[1] & 0x000000FFU);
 3741              		.loc 1 2476 39
ARM GAS  /tmp/ccsLb3N5.s 			page 111


 3742 0034 7B68     		ldr	r3, [r7, #4]
 3743 0036 9B6F     		ldr	r3, [r3, #120]
 3744              		.loc 1 2476 21
 3745 0038 DAB2     		uxtb	r2, r3
 3746              		.loc 1 2476 19
 3747 003a 3B68     		ldr	r3, [r7]
 3748 003c 1A72     		strb	r2, [r3, #8]
2477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->ProdRev = (uint8_t)((hsd->CID[2] & 0xFF000000U) >> 24U);
 3749              		.loc 1 2478 38
 3750 003e 7B68     		ldr	r3, [r7, #4]
 3751 0040 DB6F     		ldr	r3, [r3, #124]
 3752              		.loc 1 2478 57
 3753 0042 1B0E     		lsrs	r3, r3, #24
 3754              		.loc 1 2478 19
 3755 0044 DAB2     		uxtb	r2, r3
 3756              		.loc 1 2478 17
 3757 0046 3B68     		ldr	r3, [r7]
 3758 0048 5A72     		strb	r2, [r3, #9]
2479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->ProdSN = (((hsd->CID[2] & 0x00FFFFFFU) << 8U) | ((hsd->CID[3] & 0xFF000000U) >> 24U));
 3759              		.loc 1 2480 29
 3760 004a 7B68     		ldr	r3, [r7, #4]
 3761 004c DB6F     		ldr	r3, [r3, #124]
 3762              		.loc 1 2480 48
 3763 004e 1A02     		lsls	r2, r3, #8
 3764              		.loc 1 2480 67
 3765 0050 7B68     		ldr	r3, [r7, #4]
 3766 0052 D3F88030 		ldr	r3, [r3, #128]
 3767              		.loc 1 2480 86
 3768 0056 1B0E     		lsrs	r3, r3, #24
 3769              		.loc 1 2480 55
 3770 0058 1A43     		orrs	r2, r2, r3
 3771              		.loc 1 2480 16
 3772 005a 3B68     		ldr	r3, [r7]
 3773 005c DA60     		str	r2, [r3, #12]
2481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->Reserved1 = (uint8_t)((hsd->CID[3] & 0x00F00000U) >> 20U);
 3774              		.loc 1 2482 40
 3775 005e 7B68     		ldr	r3, [r7, #4]
 3776 0060 D3F88030 		ldr	r3, [r3, #128]
 3777              		.loc 1 2482 59
 3778 0064 1B0D     		lsrs	r3, r3, #20
 3779              		.loc 1 2482 21
 3780 0066 DBB2     		uxtb	r3, r3
 3781 0068 03F00F03 		and	r3, r3, #15
 3782 006c DAB2     		uxtb	r2, r3
 3783              		.loc 1 2482 19
 3784 006e 3B68     		ldr	r3, [r7]
 3785 0070 1A74     		strb	r2, [r3, #16]
2483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->ManufactDate = (uint16_t)((hsd->CID[3] & 0x000FFF00U) >> 8U);
 3786              		.loc 1 2484 44
 3787 0072 7B68     		ldr	r3, [r7, #4]
 3788 0074 D3F88030 		ldr	r3, [r3, #128]
 3789              		.loc 1 2484 63
 3790 0078 1B0A     		lsrs	r3, r3, #8
ARM GAS  /tmp/ccsLb3N5.s 			page 112


 3791              		.loc 1 2484 24
 3792 007a 9BB2     		uxth	r3, r3
 3793 007c C3F30B03 		ubfx	r3, r3, #0, #12
 3794 0080 9AB2     		uxth	r2, r3
 3795              		.loc 1 2484 22
 3796 0082 3B68     		ldr	r3, [r7]
 3797 0084 5A82     		strh	r2, [r3, #18]	@ movhi
2485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->CID_CRC = (uint8_t)((hsd->CID[3] & 0x000000FEU) >> 1U);
 3798              		.loc 1 2486 38
 3799 0086 7B68     		ldr	r3, [r7, #4]
 3800 0088 D3F88030 		ldr	r3, [r3, #128]
 3801              		.loc 1 2486 57
 3802 008c 5B08     		lsrs	r3, r3, #1
 3803              		.loc 1 2486 19
 3804 008e DBB2     		uxtb	r3, r3
 3805 0090 03F07F03 		and	r3, r3, #127
 3806 0094 DAB2     		uxtb	r2, r3
 3807              		.loc 1 2486 17
 3808 0096 3B68     		ldr	r3, [r7]
 3809 0098 1A75     		strb	r2, [r3, #20]
2487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCID->Reserved2 = 1U;
 3810              		.loc 1 2488 19
 3811 009a 3B68     		ldr	r3, [r7]
 3812 009c 0122     		movs	r2, #1
 3813 009e 5A75     		strb	r2, [r3, #21]
2489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_OK;
 3814              		.loc 1 2490 10
 3815 00a0 0023     		movs	r3, #0
2491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 3816              		.loc 1 2491 1
 3817 00a2 1846     		mov	r0, r3
 3818 00a4 0C37     		adds	r7, r7, #12
 3819              		.cfi_def_cfa_offset 4
 3820 00a6 BD46     		mov	sp, r7
 3821              		.cfi_def_cfa_register 13
 3822              		@ sp needed
 3823 00a8 5DF8047B 		ldr	r7, [sp], #4
 3824              		.cfi_restore 7
 3825              		.cfi_def_cfa_offset 0
 3826 00ac 7047     		bx	lr
 3827              		.cfi_endproc
 3828              	.LFE464:
 3830              		.section	.text.HAL_SD_GetCardCSD,"ax",%progbits
 3831              		.align	1
 3832              		.global	HAL_SD_GetCardCSD
 3833              		.syntax unified
 3834              		.thumb
 3835              		.thumb_func
 3837              	HAL_SD_GetCardCSD:
 3838              	.LFB465:
2492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Returns information the information of the card which are stored on
2495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         the CSD register.
ARM GAS  /tmp/ccsLb3N5.s 			page 113


2496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
2497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pCSD: Pointer to a HAL_SD_CardCSDTypeDef structure that
2498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         contains all CSD register parameters
2499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
2500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_GetCardCSD(SD_HandleTypeDef *hsd, HAL_SD_CardCSDTypeDef *pCSD)
2502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 3839              		.loc 1 2502 1
 3840              		.cfi_startproc
 3841              		@ args = 0, pretend = 0, frame = 8
 3842              		@ frame_needed = 1, uses_anonymous_args = 0
 3843              		@ link register save eliminated.
 3844 0000 80B4     		push	{r7}
 3845              		.cfi_def_cfa_offset 4
 3846              		.cfi_offset 7, -4
 3847 0002 83B0     		sub	sp, sp, #12
 3848              		.cfi_def_cfa_offset 16
 3849 0004 00AF     		add	r7, sp, #0
 3850              		.cfi_def_cfa_register 7
 3851 0006 7860     		str	r0, [r7, #4]
 3852 0008 3960     		str	r1, [r7]
2503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->CSDStruct = (uint8_t)((hsd->CSD[0] & 0xC0000000U) >> 30U);
 3853              		.loc 1 2503 40
 3854 000a 7B68     		ldr	r3, [r7, #4]
 3855 000c 5B6E     		ldr	r3, [r3, #100]
 3856              		.loc 1 2503 59
 3857 000e 9B0F     		lsrs	r3, r3, #30
 3858              		.loc 1 2503 21
 3859 0010 DAB2     		uxtb	r2, r3
 3860              		.loc 1 2503 19
 3861 0012 3B68     		ldr	r3, [r7]
 3862 0014 1A70     		strb	r2, [r3]
2504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->SysSpecVersion = (uint8_t)((hsd->CSD[0] & 0x3C000000U) >> 26U);
 3863              		.loc 1 2505 45
 3864 0016 7B68     		ldr	r3, [r7, #4]
 3865 0018 5B6E     		ldr	r3, [r3, #100]
 3866              		.loc 1 2505 64
 3867 001a 9B0E     		lsrs	r3, r3, #26
 3868              		.loc 1 2505 26
 3869 001c DBB2     		uxtb	r3, r3
 3870 001e 03F00F03 		and	r3, r3, #15
 3871 0022 DAB2     		uxtb	r2, r3
 3872              		.loc 1 2505 24
 3873 0024 3B68     		ldr	r3, [r7]
 3874 0026 5A70     		strb	r2, [r3, #1]
2506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->Reserved1 = (uint8_t)((hsd->CSD[0] & 0x03000000U) >> 24U);
 3875              		.loc 1 2507 40
 3876 0028 7B68     		ldr	r3, [r7, #4]
 3877 002a 5B6E     		ldr	r3, [r3, #100]
 3878              		.loc 1 2507 59
 3879 002c 1B0E     		lsrs	r3, r3, #24
 3880              		.loc 1 2507 21
 3881 002e DBB2     		uxtb	r3, r3
 3882 0030 03F00303 		and	r3, r3, #3
 3883 0034 DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccsLb3N5.s 			page 114


 3884              		.loc 1 2507 19
 3885 0036 3B68     		ldr	r3, [r7]
 3886 0038 9A70     		strb	r2, [r3, #2]
2508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->TAAC = (uint8_t)((hsd->CSD[0] & 0x00FF0000U) >> 16U);
 3887              		.loc 1 2509 35
 3888 003a 7B68     		ldr	r3, [r7, #4]
 3889 003c 5B6E     		ldr	r3, [r3, #100]
 3890              		.loc 1 2509 54
 3891 003e 1B0C     		lsrs	r3, r3, #16
 3892              		.loc 1 2509 16
 3893 0040 DAB2     		uxtb	r2, r3
 3894              		.loc 1 2509 14
 3895 0042 3B68     		ldr	r3, [r7]
 3896 0044 DA70     		strb	r2, [r3, #3]
2510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->NSAC = (uint8_t)((hsd->CSD[0] & 0x0000FF00U) >> 8U);
 3897              		.loc 1 2511 35
 3898 0046 7B68     		ldr	r3, [r7, #4]
 3899 0048 5B6E     		ldr	r3, [r3, #100]
 3900              		.loc 1 2511 54
 3901 004a 1B0A     		lsrs	r3, r3, #8
 3902              		.loc 1 2511 16
 3903 004c DAB2     		uxtb	r2, r3
 3904              		.loc 1 2511 14
 3905 004e 3B68     		ldr	r3, [r7]
 3906 0050 1A71     		strb	r2, [r3, #4]
2512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->MaxBusClkFrec = (uint8_t)(hsd->CSD[0] & 0x000000FFU);
 3907              		.loc 1 2513 43
 3908 0052 7B68     		ldr	r3, [r7, #4]
 3909 0054 5B6E     		ldr	r3, [r3, #100]
 3910              		.loc 1 2513 25
 3911 0056 DAB2     		uxtb	r2, r3
 3912              		.loc 1 2513 23
 3913 0058 3B68     		ldr	r3, [r7]
 3914 005a 5A71     		strb	r2, [r3, #5]
2514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->CardComdClasses = (uint16_t)((hsd->CSD[1] & 0xFFF00000U) >> 20U);
 3915              		.loc 1 2515 47
 3916 005c 7B68     		ldr	r3, [r7, #4]
 3917 005e 9B6E     		ldr	r3, [r3, #104]
 3918              		.loc 1 2515 66
 3919 0060 1B0D     		lsrs	r3, r3, #20
 3920              		.loc 1 2515 27
 3921 0062 9AB2     		uxth	r2, r3
 3922              		.loc 1 2515 25
 3923 0064 3B68     		ldr	r3, [r7]
 3924 0066 DA80     		strh	r2, [r3, #6]	@ movhi
2516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->RdBlockLen = (uint8_t)((hsd->CSD[1] & 0x000F0000U) >> 16U);
 3925              		.loc 1 2517 41
 3926 0068 7B68     		ldr	r3, [r7, #4]
 3927 006a 9B6E     		ldr	r3, [r3, #104]
 3928              		.loc 1 2517 60
 3929 006c 1B0C     		lsrs	r3, r3, #16
 3930              		.loc 1 2517 22
ARM GAS  /tmp/ccsLb3N5.s 			page 115


 3931 006e DBB2     		uxtb	r3, r3
 3932 0070 03F00F03 		and	r3, r3, #15
 3933 0074 DAB2     		uxtb	r2, r3
 3934              		.loc 1 2517 20
 3935 0076 3B68     		ldr	r3, [r7]
 3936 0078 1A72     		strb	r2, [r3, #8]
2518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->PartBlockRead   = (uint8_t)((hsd->CSD[1] & 0x00008000U) >> 15U);
 3937              		.loc 1 2519 46
 3938 007a 7B68     		ldr	r3, [r7, #4]
 3939 007c 9B6E     		ldr	r3, [r3, #104]
 3940              		.loc 1 2519 65
 3941 007e DB0B     		lsrs	r3, r3, #15
 3942              		.loc 1 2519 27
 3943 0080 DBB2     		uxtb	r3, r3
 3944 0082 03F00103 		and	r3, r3, #1
 3945 0086 DAB2     		uxtb	r2, r3
 3946              		.loc 1 2519 25
 3947 0088 3B68     		ldr	r3, [r7]
 3948 008a 5A72     		strb	r2, [r3, #9]
2520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->WrBlockMisalign = (uint8_t)((hsd->CSD[1] & 0x00004000U) >> 14U);
 3949              		.loc 1 2521 46
 3950 008c 7B68     		ldr	r3, [r7, #4]
 3951 008e 9B6E     		ldr	r3, [r3, #104]
 3952              		.loc 1 2521 65
 3953 0090 9B0B     		lsrs	r3, r3, #14
 3954              		.loc 1 2521 27
 3955 0092 DBB2     		uxtb	r3, r3
 3956 0094 03F00103 		and	r3, r3, #1
 3957 0098 DAB2     		uxtb	r2, r3
 3958              		.loc 1 2521 25
 3959 009a 3B68     		ldr	r3, [r7]
 3960 009c 9A72     		strb	r2, [r3, #10]
2522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->RdBlockMisalign = (uint8_t)((hsd->CSD[1] & 0x00002000U) >> 13U);
 3961              		.loc 1 2523 46
 3962 009e 7B68     		ldr	r3, [r7, #4]
 3963 00a0 9B6E     		ldr	r3, [r3, #104]
 3964              		.loc 1 2523 65
 3965 00a2 5B0B     		lsrs	r3, r3, #13
 3966              		.loc 1 2523 27
 3967 00a4 DBB2     		uxtb	r3, r3
 3968 00a6 03F00103 		and	r3, r3, #1
 3969 00aa DAB2     		uxtb	r2, r3
 3970              		.loc 1 2523 25
 3971 00ac 3B68     		ldr	r3, [r7]
 3972 00ae DA72     		strb	r2, [r3, #11]
2524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->DSRImpl = (uint8_t)((hsd->CSD[1] & 0x00001000U) >> 12U);
 3973              		.loc 1 2525 38
 3974 00b0 7B68     		ldr	r3, [r7, #4]
 3975 00b2 9B6E     		ldr	r3, [r3, #104]
 3976              		.loc 1 2525 57
 3977 00b4 1B0B     		lsrs	r3, r3, #12
 3978              		.loc 1 2525 19
 3979 00b6 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccsLb3N5.s 			page 116


 3980 00b8 03F00103 		and	r3, r3, #1
 3981 00bc DAB2     		uxtb	r2, r3
 3982              		.loc 1 2525 17
 3983 00be 3B68     		ldr	r3, [r7]
 3984 00c0 1A73     		strb	r2, [r3, #12]
2526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->Reserved2 = 0U; /*!< Reserved */
 3985              		.loc 1 2527 19
 3986 00c2 3B68     		ldr	r3, [r7]
 3987 00c4 0022     		movs	r2, #0
 3988 00c6 5A73     		strb	r2, [r3, #13]
2528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->SdCard.CardType == CARD_SDSC)
 3989              		.loc 1 2529 18
 3990 00c8 7B68     		ldr	r3, [r7, #4]
 3991 00ca 5B6C     		ldr	r3, [r3, #68]
 3992              		.loc 1 2529 6
 3993 00cc 002B     		cmp	r3, #0
 3994 00ce 63D1     		bne	.L174
2530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pCSD->DeviceSize = (((hsd->CSD[1] & 0x000003FFU) << 2U) | ((hsd->CSD[2] & 0xC0000000U) >> 30U))
 3995              		.loc 1 2531 35
 3996 00d0 7B68     		ldr	r3, [r7, #4]
 3997 00d2 9B6E     		ldr	r3, [r3, #104]
 3998              		.loc 1 2531 54
 3999 00d4 9A00     		lsls	r2, r3, #2
 4000 00d6 40F6FC73 		movw	r3, #4092
 4001 00da 1340     		ands	r3, r3, r2
 4002              		.loc 1 2531 73
 4003 00dc 7A68     		ldr	r2, [r7, #4]
 4004 00de D26E     		ldr	r2, [r2, #108]
 4005              		.loc 1 2531 92
 4006 00e0 920F     		lsrs	r2, r2, #30
 4007              		.loc 1 2531 61
 4008 00e2 1A43     		orrs	r2, r2, r3
 4009              		.loc 1 2531 22
 4010 00e4 3B68     		ldr	r3, [r7]
 4011 00e6 1A61     		str	r2, [r3, #16]
2532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pCSD->MaxRdCurrentVDDMin = (uint8_t)((hsd->CSD[2] & 0x38000000U) >> 27U);
 4012              		.loc 1 2533 51
 4013 00e8 7B68     		ldr	r3, [r7, #4]
 4014 00ea DB6E     		ldr	r3, [r3, #108]
 4015              		.loc 1 2533 70
 4016 00ec DB0E     		lsrs	r3, r3, #27
 4017              		.loc 1 2533 32
 4018 00ee DBB2     		uxtb	r3, r3
 4019 00f0 03F00703 		and	r3, r3, #7
 4020 00f4 DAB2     		uxtb	r2, r3
 4021              		.loc 1 2533 30
 4022 00f6 3B68     		ldr	r3, [r7]
 4023 00f8 1A75     		strb	r2, [r3, #20]
2534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pCSD->MaxRdCurrentVDDMax = (uint8_t)((hsd->CSD[2] & 0x07000000U) >> 24U);
 4024              		.loc 1 2535 51
 4025 00fa 7B68     		ldr	r3, [r7, #4]
 4026 00fc DB6E     		ldr	r3, [r3, #108]
ARM GAS  /tmp/ccsLb3N5.s 			page 117


 4027              		.loc 1 2535 70
 4028 00fe 1B0E     		lsrs	r3, r3, #24
 4029              		.loc 1 2535 32
 4030 0100 DBB2     		uxtb	r3, r3
 4031 0102 03F00703 		and	r3, r3, #7
 4032 0106 DAB2     		uxtb	r2, r3
 4033              		.loc 1 2535 30
 4034 0108 3B68     		ldr	r3, [r7]
 4035 010a 5A75     		strb	r2, [r3, #21]
2536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pCSD->MaxWrCurrentVDDMin = (uint8_t)((hsd->CSD[2] & 0x00E00000U) >> 21U);
 4036              		.loc 1 2537 51
 4037 010c 7B68     		ldr	r3, [r7, #4]
 4038 010e DB6E     		ldr	r3, [r3, #108]
 4039              		.loc 1 2537 70
 4040 0110 5B0D     		lsrs	r3, r3, #21
 4041              		.loc 1 2537 32
 4042 0112 DBB2     		uxtb	r3, r3
 4043 0114 03F00703 		and	r3, r3, #7
 4044 0118 DAB2     		uxtb	r2, r3
 4045              		.loc 1 2537 30
 4046 011a 3B68     		ldr	r3, [r7]
 4047 011c 9A75     		strb	r2, [r3, #22]
2538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pCSD->MaxWrCurrentVDDMax = (uint8_t)((hsd->CSD[2] & 0x001C0000U) >> 18U);
 4048              		.loc 1 2539 51
 4049 011e 7B68     		ldr	r3, [r7, #4]
 4050 0120 DB6E     		ldr	r3, [r3, #108]
 4051              		.loc 1 2539 70
 4052 0122 9B0C     		lsrs	r3, r3, #18
 4053              		.loc 1 2539 32
 4054 0124 DBB2     		uxtb	r3, r3
 4055 0126 03F00703 		and	r3, r3, #7
 4056 012a DAB2     		uxtb	r2, r3
 4057              		.loc 1 2539 30
 4058 012c 3B68     		ldr	r3, [r7]
 4059 012e DA75     		strb	r2, [r3, #23]
2540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pCSD->DeviceSizeMul = (uint8_t)((hsd->CSD[2] & 0x00038000U) >> 15U);
 4060              		.loc 1 2541 46
 4061 0130 7B68     		ldr	r3, [r7, #4]
 4062 0132 DB6E     		ldr	r3, [r3, #108]
 4063              		.loc 1 2541 65
 4064 0134 DB0B     		lsrs	r3, r3, #15
 4065              		.loc 1 2541 27
 4066 0136 DBB2     		uxtb	r3, r3
 4067 0138 03F00703 		and	r3, r3, #7
 4068 013c DAB2     		uxtb	r2, r3
 4069              		.loc 1 2541 25
 4070 013e 3B68     		ldr	r3, [r7]
 4071 0140 1A76     		strb	r2, [r3, #24]
2542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.BlockNbr  = (pCSD->DeviceSize + 1U) ;
 4072              		.loc 1 2543 34
 4073 0142 3B68     		ldr	r3, [r7]
 4074 0144 1B69     		ldr	r3, [r3, #16]
 4075              		.loc 1 2543 47
ARM GAS  /tmp/ccsLb3N5.s 			page 118


 4076 0146 5A1C     		adds	r2, r3, #1
 4077              		.loc 1 2543 27
 4078 0148 7B68     		ldr	r3, [r7, #4]
 4079 014a 5A65     		str	r2, [r3, #84]
2544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.BlockNbr *= (1UL << ((pCSD->DeviceSizeMul & 0x07U) + 2U));
 4080              		.loc 1 2544 43
 4081 014c 3B68     		ldr	r3, [r7]
 4082 014e 1B7E     		ldrb	r3, [r3, #24]
 4083 0150 DBB2     		uxtb	r3, r3
 4084              		.loc 1 2544 59
 4085 0152 03F00703 		and	r3, r3, #7
 4086              		.loc 1 2544 68
 4087 0156 0233     		adds	r3, r3, #2
 4088              		.loc 1 2544 34
 4089 0158 0122     		movs	r2, #1
 4090 015a 02FA03F3 		lsl	r3, r2, r3
 4091              		.loc 1 2544 16
 4092 015e 7A68     		ldr	r2, [r7, #4]
 4093 0160 526D     		ldr	r2, [r2, #84]
 4094              		.loc 1 2544 26
 4095 0162 03FB02F2 		mul	r2, r3, r2
 4096 0166 7B68     		ldr	r3, [r7, #4]
 4097 0168 5A65     		str	r2, [r3, #84]
2545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.BlockSize = (1UL << (pCSD->RdBlockLen & 0x0FU));
 4098              		.loc 1 2545 42
 4099 016a 3B68     		ldr	r3, [r7]
 4100 016c 1B7A     		ldrb	r3, [r3, #8]
 4101 016e DBB2     		uxtb	r3, r3
 4102              		.loc 1 2545 55
 4103 0170 03F00F03 		and	r3, r3, #15
 4104              		.loc 1 2545 34
 4105 0174 0122     		movs	r2, #1
 4106 0176 9A40     		lsls	r2, r2, r3
 4107              		.loc 1 2545 27
 4108 0178 7B68     		ldr	r3, [r7, #4]
 4109 017a 9A65     		str	r2, [r3, #88]
2546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.LogBlockNbr = (hsd->SdCard.BlockNbr) * ((hsd->SdCard.BlockSize) / BLOCKSIZE);
 4110              		.loc 1 2547 43
 4111 017c 7B68     		ldr	r3, [r7, #4]
 4112 017e 5B6D     		ldr	r3, [r3, #84]
 4113              		.loc 1 2547 69
 4114 0180 7A68     		ldr	r2, [r7, #4]
 4115 0182 926D     		ldr	r2, [r2, #88]
 4116              		.loc 1 2547 81
 4117 0184 520A     		lsrs	r2, r2, #9
 4118              		.loc 1 2547 54
 4119 0186 03FB02F2 		mul	r2, r3, r2
 4120              		.loc 1 2547 29
 4121 018a 7B68     		ldr	r3, [r7, #4]
 4122 018c DA65     		str	r2, [r3, #92]
2548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.LogBlockSize = BLOCKSIZE;
 4123              		.loc 1 2548 30
 4124 018e 7B68     		ldr	r3, [r7, #4]
 4125 0190 4FF40072 		mov	r2, #512
 4126 0194 1A66     		str	r2, [r3, #96]
 4127 0196 31E0     		b	.L175
ARM GAS  /tmp/ccsLb3N5.s 			page 119


 4128              	.L174:
2549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (hsd->SdCard.CardType == CARD_SDHC_SDXC)
 4129              		.loc 1 2550 23
 4130 0198 7B68     		ldr	r3, [r7, #4]
 4131 019a 5B6C     		ldr	r3, [r3, #68]
 4132              		.loc 1 2550 11
 4133 019c 012B     		cmp	r3, #1
 4134 019e 1DD1     		bne	.L176
2551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Byte 7 */
2553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pCSD->DeviceSize = (((hsd->CSD[1] & 0x0000003FU) << 16U) | ((hsd->CSD[2] & 0xFFFF0000U) >> 16U)
 4135              		.loc 1 2553 35
 4136 01a0 7B68     		ldr	r3, [r7, #4]
 4137 01a2 9B6E     		ldr	r3, [r3, #104]
 4138              		.loc 1 2553 54
 4139 01a4 1B04     		lsls	r3, r3, #16
 4140 01a6 03F47C12 		and	r2, r3, #4128768
 4141              		.loc 1 2553 74
 4142 01aa 7B68     		ldr	r3, [r7, #4]
 4143 01ac DB6E     		ldr	r3, [r3, #108]
 4144              		.loc 1 2553 93
 4145 01ae 1B0C     		lsrs	r3, r3, #16
 4146              		.loc 1 2553 62
 4147 01b0 1A43     		orrs	r2, r2, r3
 4148              		.loc 1 2553 22
 4149 01b2 3B68     		ldr	r3, [r7]
 4150 01b4 1A61     		str	r2, [r3, #16]
2554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.BlockNbr = ((pCSD->DeviceSize + 1U) * 1024U);
 4151              		.loc 1 2555 34
 4152 01b6 3B68     		ldr	r3, [r7]
 4153 01b8 1B69     		ldr	r3, [r3, #16]
 4154              		.loc 1 2555 47
 4155 01ba 0133     		adds	r3, r3, #1
 4156              		.loc 1 2555 53
 4157 01bc 9A02     		lsls	r2, r3, #10
 4158              		.loc 1 2555 26
 4159 01be 7B68     		ldr	r3, [r7, #4]
 4160 01c0 5A65     		str	r2, [r3, #84]
2556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.LogBlockNbr = hsd->SdCard.BlockNbr;
 4161              		.loc 1 2556 42
 4162 01c2 7B68     		ldr	r3, [r7, #4]
 4163 01c4 5A6D     		ldr	r2, [r3, #84]
 4164              		.loc 1 2556 29
 4165 01c6 7B68     		ldr	r3, [r7, #4]
 4166 01c8 DA65     		str	r2, [r3, #92]
2557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.BlockSize = BLOCKSIZE;
 4167              		.loc 1 2557 27
 4168 01ca 7B68     		ldr	r3, [r7, #4]
 4169 01cc 4FF40072 		mov	r2, #512
 4170 01d0 9A65     		str	r2, [r3, #88]
2558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.LogBlockSize = hsd->SdCard.BlockSize;
 4171              		.loc 1 2558 43
 4172 01d2 7B68     		ldr	r3, [r7, #4]
 4173 01d4 9A6D     		ldr	r2, [r3, #88]
 4174              		.loc 1 2558 30
ARM GAS  /tmp/ccsLb3N5.s 			page 120


 4175 01d6 7B68     		ldr	r3, [r7, #4]
 4176 01d8 1A66     		str	r2, [r3, #96]
 4177 01da 0FE0     		b	.L175
 4178              	.L176:
2559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
2561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
2563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 4179              		.loc 1 2563 5
 4180 01dc 7B68     		ldr	r3, [r7, #4]
 4181 01de 1B68     		ldr	r3, [r3]
 4182 01e0 584A     		ldr	r2, .L178
 4183 01e2 9A63     		str	r2, [r3, #56]
2564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
 4184              		.loc 1 2564 8
 4185 01e4 7B68     		ldr	r3, [r7, #4]
 4186 01e6 9B6B     		ldr	r3, [r3, #56]
 4187              		.loc 1 2564 20
 4188 01e8 43F08052 		orr	r2, r3, #268435456
 4189 01ec 7B68     		ldr	r3, [r7, #4]
 4190 01ee 9A63     		str	r2, [r3, #56]
2565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 4191              		.loc 1 2565 16
 4192 01f0 7B68     		ldr	r3, [r7, #4]
 4193 01f2 0122     		movs	r2, #1
 4194 01f4 83F83420 		strb	r2, [r3, #52]
2566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 4195              		.loc 1 2566 12
 4196 01f8 0123     		movs	r3, #1
 4197 01fa 9DE0     		b	.L177
 4198              	.L175:
2567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->EraseGrSize = (uint8_t)((hsd->CSD[2] & 0x00004000U) >> 14U);
 4199              		.loc 1 2569 42
 4200 01fc 7B68     		ldr	r3, [r7, #4]
 4201 01fe DB6E     		ldr	r3, [r3, #108]
 4202              		.loc 1 2569 61
 4203 0200 9B0B     		lsrs	r3, r3, #14
 4204              		.loc 1 2569 23
 4205 0202 DBB2     		uxtb	r3, r3
 4206 0204 03F00103 		and	r3, r3, #1
 4207 0208 DAB2     		uxtb	r2, r3
 4208              		.loc 1 2569 21
 4209 020a 3B68     		ldr	r3, [r7]
 4210 020c 5A76     		strb	r2, [r3, #25]
2570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->EraseGrMul = (uint8_t)((hsd->CSD[2] & 0x00003F80U) >> 7U);
 4211              		.loc 1 2571 41
 4212 020e 7B68     		ldr	r3, [r7, #4]
 4213 0210 DB6E     		ldr	r3, [r3, #108]
 4214              		.loc 1 2571 60
 4215 0212 DB09     		lsrs	r3, r3, #7
 4216              		.loc 1 2571 22
 4217 0214 DBB2     		uxtb	r3, r3
 4218 0216 03F07F03 		and	r3, r3, #127
ARM GAS  /tmp/ccsLb3N5.s 			page 121


 4219 021a DAB2     		uxtb	r2, r3
 4220              		.loc 1 2571 20
 4221 021c 3B68     		ldr	r3, [r7]
 4222 021e 9A76     		strb	r2, [r3, #26]
2572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->WrProtectGrSize = (uint8_t)(hsd->CSD[2] & 0x0000007FU);
 4223              		.loc 1 2573 45
 4224 0220 7B68     		ldr	r3, [r7, #4]
 4225 0222 DB6E     		ldr	r3, [r3, #108]
 4226              		.loc 1 2573 27
 4227 0224 DBB2     		uxtb	r3, r3
 4228 0226 03F07F03 		and	r3, r3, #127
 4229 022a DAB2     		uxtb	r2, r3
 4230              		.loc 1 2573 25
 4231 022c 3B68     		ldr	r3, [r7]
 4232 022e DA76     		strb	r2, [r3, #27]
2574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->WrProtectGrEnable = (uint8_t)((hsd->CSD[3] & 0x80000000U) >> 31U);
 4233              		.loc 1 2575 48
 4234 0230 7B68     		ldr	r3, [r7, #4]
 4235 0232 1B6F     		ldr	r3, [r3, #112]
 4236              		.loc 1 2575 67
 4237 0234 DB0F     		lsrs	r3, r3, #31
 4238              		.loc 1 2575 29
 4239 0236 DAB2     		uxtb	r2, r3
 4240              		.loc 1 2575 27
 4241 0238 3B68     		ldr	r3, [r7]
 4242 023a 1A77     		strb	r2, [r3, #28]
2576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->ManDeflECC = (uint8_t)((hsd->CSD[3] & 0x60000000U) >> 29U);
 4243              		.loc 1 2577 41
 4244 023c 7B68     		ldr	r3, [r7, #4]
 4245 023e 1B6F     		ldr	r3, [r3, #112]
 4246              		.loc 1 2577 60
 4247 0240 5B0F     		lsrs	r3, r3, #29
 4248              		.loc 1 2577 22
 4249 0242 DBB2     		uxtb	r3, r3
 4250 0244 03F00303 		and	r3, r3, #3
 4251 0248 DAB2     		uxtb	r2, r3
 4252              		.loc 1 2577 20
 4253 024a 3B68     		ldr	r3, [r7]
 4254 024c 5A77     		strb	r2, [r3, #29]
2578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->WrSpeedFact = (uint8_t)((hsd->CSD[3] & 0x1C000000U) >> 26U);
 4255              		.loc 1 2579 42
 4256 024e 7B68     		ldr	r3, [r7, #4]
 4257 0250 1B6F     		ldr	r3, [r3, #112]
 4258              		.loc 1 2579 61
 4259 0252 9B0E     		lsrs	r3, r3, #26
 4260              		.loc 1 2579 23
 4261 0254 DBB2     		uxtb	r3, r3
 4262 0256 03F00703 		and	r3, r3, #7
 4263 025a DAB2     		uxtb	r2, r3
 4264              		.loc 1 2579 21
 4265 025c 3B68     		ldr	r3, [r7]
 4266 025e 9A77     		strb	r2, [r3, #30]
2580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 122


2581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->MaxWrBlockLen = (uint8_t)((hsd->CSD[3] & 0x03C00000U) >> 22U);
 4267              		.loc 1 2581 44
 4268 0260 7B68     		ldr	r3, [r7, #4]
 4269 0262 1B6F     		ldr	r3, [r3, #112]
 4270              		.loc 1 2581 63
 4271 0264 9B0D     		lsrs	r3, r3, #22
 4272              		.loc 1 2581 25
 4273 0266 DBB2     		uxtb	r3, r3
 4274 0268 03F00F03 		and	r3, r3, #15
 4275 026c DAB2     		uxtb	r2, r3
 4276              		.loc 1 2581 23
 4277 026e 3B68     		ldr	r3, [r7]
 4278 0270 DA77     		strb	r2, [r3, #31]
2582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->WriteBlockPaPartial = (uint8_t)((hsd->CSD[3] & 0x00200000U) >> 21U);
 4279              		.loc 1 2583 50
 4280 0272 7B68     		ldr	r3, [r7, #4]
 4281 0274 1B6F     		ldr	r3, [r3, #112]
 4282              		.loc 1 2583 69
 4283 0276 5B0D     		lsrs	r3, r3, #21
 4284              		.loc 1 2583 31
 4285 0278 DBB2     		uxtb	r3, r3
 4286 027a 03F00103 		and	r3, r3, #1
 4287 027e DAB2     		uxtb	r2, r3
 4288              		.loc 1 2583 29
 4289 0280 3B68     		ldr	r3, [r7]
 4290 0282 83F82020 		strb	r2, [r3, #32]
2584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->Reserved3 = 0;
 4291              		.loc 1 2585 19
 4292 0286 3B68     		ldr	r3, [r7]
 4293 0288 0022     		movs	r2, #0
 4294 028a 83F82120 		strb	r2, [r3, #33]
2586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->ContentProtectAppli = (uint8_t)((hsd->CSD[3] & 0x00010000U) >> 16U);
 4295              		.loc 1 2587 50
 4296 028e 7B68     		ldr	r3, [r7, #4]
 4297 0290 1B6F     		ldr	r3, [r3, #112]
 4298              		.loc 1 2587 69
 4299 0292 1B0C     		lsrs	r3, r3, #16
 4300              		.loc 1 2587 31
 4301 0294 DBB2     		uxtb	r3, r3
 4302 0296 03F00103 		and	r3, r3, #1
 4303 029a DAB2     		uxtb	r2, r3
 4304              		.loc 1 2587 29
 4305 029c 3B68     		ldr	r3, [r7]
 4306 029e 83F82220 		strb	r2, [r3, #34]
2588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->FileFormatGroup = (uint8_t)((hsd->CSD[3] & 0x00008000U) >> 15U);
 4307              		.loc 1 2589 46
 4308 02a2 7B68     		ldr	r3, [r7, #4]
 4309 02a4 1B6F     		ldr	r3, [r3, #112]
 4310              		.loc 1 2589 65
 4311 02a6 DB0B     		lsrs	r3, r3, #15
 4312              		.loc 1 2589 27
 4313 02a8 DBB2     		uxtb	r3, r3
 4314 02aa 03F00103 		and	r3, r3, #1
ARM GAS  /tmp/ccsLb3N5.s 			page 123


 4315 02ae DAB2     		uxtb	r2, r3
 4316              		.loc 1 2589 25
 4317 02b0 3B68     		ldr	r3, [r7]
 4318 02b2 83F82320 		strb	r2, [r3, #35]
2590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->CopyFlag = (uint8_t)((hsd->CSD[3] & 0x00004000U) >> 14U);
 4319              		.loc 1 2591 39
 4320 02b6 7B68     		ldr	r3, [r7, #4]
 4321 02b8 1B6F     		ldr	r3, [r3, #112]
 4322              		.loc 1 2591 58
 4323 02ba 9B0B     		lsrs	r3, r3, #14
 4324              		.loc 1 2591 20
 4325 02bc DBB2     		uxtb	r3, r3
 4326 02be 03F00103 		and	r3, r3, #1
 4327 02c2 DAB2     		uxtb	r2, r3
 4328              		.loc 1 2591 18
 4329 02c4 3B68     		ldr	r3, [r7]
 4330 02c6 83F82420 		strb	r2, [r3, #36]
2592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->PermWrProtect = (uint8_t)((hsd->CSD[3] & 0x00002000U) >> 13U);
 4331              		.loc 1 2593 44
 4332 02ca 7B68     		ldr	r3, [r7, #4]
 4333 02cc 1B6F     		ldr	r3, [r3, #112]
 4334              		.loc 1 2593 63
 4335 02ce 5B0B     		lsrs	r3, r3, #13
 4336              		.loc 1 2593 25
 4337 02d0 DBB2     		uxtb	r3, r3
 4338 02d2 03F00103 		and	r3, r3, #1
 4339 02d6 DAB2     		uxtb	r2, r3
 4340              		.loc 1 2593 23
 4341 02d8 3B68     		ldr	r3, [r7]
 4342 02da 83F82520 		strb	r2, [r3, #37]
2594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->TempWrProtect = (uint8_t)((hsd->CSD[3] & 0x00001000U) >> 12U);
 4343              		.loc 1 2595 44
 4344 02de 7B68     		ldr	r3, [r7, #4]
 4345 02e0 1B6F     		ldr	r3, [r3, #112]
 4346              		.loc 1 2595 63
 4347 02e2 1B0B     		lsrs	r3, r3, #12
 4348              		.loc 1 2595 25
 4349 02e4 DBB2     		uxtb	r3, r3
 4350 02e6 03F00103 		and	r3, r3, #1
 4351 02ea DAB2     		uxtb	r2, r3
 4352              		.loc 1 2595 23
 4353 02ec 3B68     		ldr	r3, [r7]
 4354 02ee 83F82620 		strb	r2, [r3, #38]
2596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->FileFormat = (uint8_t)((hsd->CSD[3] & 0x00000C00U) >> 10U);
 4355              		.loc 1 2597 41
 4356 02f2 7B68     		ldr	r3, [r7, #4]
 4357 02f4 1B6F     		ldr	r3, [r3, #112]
 4358              		.loc 1 2597 60
 4359 02f6 9B0A     		lsrs	r3, r3, #10
 4360              		.loc 1 2597 22
 4361 02f8 DBB2     		uxtb	r3, r3
 4362 02fa 03F00303 		and	r3, r3, #3
 4363 02fe DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccsLb3N5.s 			page 124


 4364              		.loc 1 2597 20
 4365 0300 3B68     		ldr	r3, [r7]
 4366 0302 83F82720 		strb	r2, [r3, #39]
2598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->ECC = (uint8_t)((hsd->CSD[3] & 0x00000300U) >> 8U);
 4367              		.loc 1 2599 34
 4368 0306 7B68     		ldr	r3, [r7, #4]
 4369 0308 1B6F     		ldr	r3, [r3, #112]
 4370              		.loc 1 2599 53
 4371 030a 1B0A     		lsrs	r3, r3, #8
 4372              		.loc 1 2599 15
 4373 030c DBB2     		uxtb	r3, r3
 4374 030e 03F00303 		and	r3, r3, #3
 4375 0312 DAB2     		uxtb	r2, r3
 4376              		.loc 1 2599 13
 4377 0314 3B68     		ldr	r3, [r7]
 4378 0316 83F82820 		strb	r2, [r3, #40]
2600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->CSD_CRC = (uint8_t)((hsd->CSD[3] & 0x000000FEU) >> 1U);
 4379              		.loc 1 2601 38
 4380 031a 7B68     		ldr	r3, [r7, #4]
 4381 031c 1B6F     		ldr	r3, [r3, #112]
 4382              		.loc 1 2601 57
 4383 031e 5B08     		lsrs	r3, r3, #1
 4384              		.loc 1 2601 19
 4385 0320 DBB2     		uxtb	r3, r3
 4386 0322 03F07F03 		and	r3, r3, #127
 4387 0326 DAB2     		uxtb	r2, r3
 4388              		.loc 1 2601 17
 4389 0328 3B68     		ldr	r3, [r7]
 4390 032a 83F82920 		strb	r2, [r3, #41]
2602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCSD->Reserved4 = 1;
 4391              		.loc 1 2603 19
 4392 032e 3B68     		ldr	r3, [r7]
 4393 0330 0122     		movs	r2, #1
 4394 0332 83F82A20 		strb	r2, [r3, #42]
2604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_OK;
 4395              		.loc 1 2605 10
 4396 0336 0023     		movs	r3, #0
 4397              	.L177:
2606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 4398              		.loc 1 2606 1
 4399 0338 1846     		mov	r0, r3
 4400 033a 0C37     		adds	r7, r7, #12
 4401              		.cfi_def_cfa_offset 4
 4402 033c BD46     		mov	sp, r7
 4403              		.cfi_def_cfa_register 13
 4404              		@ sp needed
 4405 033e 5DF8047B 		ldr	r7, [sp], #4
 4406              		.cfi_restore 7
 4407              		.cfi_def_cfa_offset 0
 4408 0342 7047     		bx	lr
 4409              	.L179:
 4410              		.align	2
 4411              	.L178:
ARM GAS  /tmp/ccsLb3N5.s 			page 125


 4412 0344 FF054000 		.word	4195839
 4413              		.cfi_endproc
 4414              	.LFE465:
 4416              		.section	.text.HAL_SD_GetCardStatus,"ax",%progbits
 4417              		.align	1
 4418              		.global	HAL_SD_GetCardStatus
 4419              		.syntax unified
 4420              		.thumb
 4421              		.thumb_func
 4423              	HAL_SD_GetCardStatus:
 4424              	.LFB466:
2607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Gets the SD status info.
2610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
2611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pStatus: Pointer to the HAL_SD_CardStatusTypeDef structure that
2612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         will contain the SD card status information
2613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
2614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_GetCardStatus(SD_HandleTypeDef *hsd, HAL_SD_CardStatusTypeDef *pStatus)
2616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 4425              		.loc 1 2616 1
 4426              		.cfi_startproc
 4427              		@ args = 0, pretend = 0, frame = 80
 4428              		@ frame_needed = 1, uses_anonymous_args = 0
 4429 0000 80B5     		push	{r7, lr}
 4430              		.cfi_def_cfa_offset 8
 4431              		.cfi_offset 7, -8
 4432              		.cfi_offset 14, -4
 4433 0002 94B0     		sub	sp, sp, #80
 4434              		.cfi_def_cfa_offset 88
 4435 0004 00AF     		add	r7, sp, #0
 4436              		.cfi_def_cfa_register 7
 4437 0006 7860     		str	r0, [r7, #4]
 4438 0008 3960     		str	r1, [r7]
2617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t sd_status[16];
2618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
2619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_StatusTypeDef status = HAL_OK;
 4439              		.loc 1 2619 21
 4440 000a 0023     		movs	r3, #0
 4441 000c 87F84F30 		strb	r3, [r7, #79]
2620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SD_SendSDStatus(hsd, sd_status);
 4442              		.loc 1 2621 16
 4443 0010 07F10803 		add	r3, r7, #8
 4444 0014 1946     		mov	r1, r3
 4445 0016 7868     		ldr	r0, [r7, #4]
 4446 0018 FFF7FEFF 		bl	SD_SendSDStatus
 4447 001c B864     		str	r0, [r7, #72]
2622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 4448              		.loc 1 2622 6
 4449 001e BB6C     		ldr	r3, [r7, #72]
 4450 0020 002B     		cmp	r3, #0
 4451 0022 11D0     		beq	.L181
2623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
2625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
ARM GAS  /tmp/ccsLb3N5.s 			page 126


 4452              		.loc 1 2625 5
 4453 0024 7B68     		ldr	r3, [r7, #4]
 4454 0026 1B68     		ldr	r3, [r3]
 4455 0028 454A     		ldr	r2, .L185
 4456 002a 9A63     		str	r2, [r3, #56]
2626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= errorstate;
 4457              		.loc 1 2626 8
 4458 002c 7B68     		ldr	r3, [r7, #4]
 4459 002e 9A6B     		ldr	r2, [r3, #56]
 4460              		.loc 1 2626 20
 4461 0030 BB6C     		ldr	r3, [r7, #72]
 4462 0032 1A43     		orrs	r2, r2, r3
 4463 0034 7B68     		ldr	r3, [r7, #4]
 4464 0036 9A63     		str	r2, [r3, #56]
2627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 4465              		.loc 1 2627 16
 4466 0038 7B68     		ldr	r3, [r7, #4]
 4467 003a 0122     		movs	r2, #1
 4468 003c 83F83420 		strb	r2, [r3, #52]
2628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     status = HAL_ERROR;
 4469              		.loc 1 2628 12
 4470 0040 0123     		movs	r3, #1
 4471 0042 87F84F30 		strb	r3, [r7, #79]
 4472 0046 5CE0     		b	.L182
 4473              	.L181:
2629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
2631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->DataBusWidth = (uint8_t)((sd_status[0] & 0xC0U) >> 6U);
 4474              		.loc 1 2632 49
 4475 0048 BB68     		ldr	r3, [r7, #8]
 4476              		.loc 1 2632 62
 4477 004a 9B09     		lsrs	r3, r3, #6
 4478              		.loc 1 2632 29
 4479 004c DBB2     		uxtb	r3, r3
 4480 004e 03F00303 		and	r3, r3, #3
 4481 0052 DAB2     		uxtb	r2, r3
 4482              		.loc 1 2632 27
 4483 0054 3B68     		ldr	r3, [r7]
 4484 0056 1A70     		strb	r2, [r3]
2633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->SecuredMode = (uint8_t)((sd_status[0] & 0x20U) >> 5U);
 4485              		.loc 1 2634 48
 4486 0058 BB68     		ldr	r3, [r7, #8]
 4487              		.loc 1 2634 61
 4488 005a 5B09     		lsrs	r3, r3, #5
 4489              		.loc 1 2634 28
 4490 005c DBB2     		uxtb	r3, r3
 4491 005e 03F00103 		and	r3, r3, #1
 4492 0062 DAB2     		uxtb	r2, r3
 4493              		.loc 1 2634 26
 4494 0064 3B68     		ldr	r3, [r7]
 4495 0066 5A70     		strb	r2, [r3, #1]
2635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->CardType = (uint16_t)(((sd_status[0] & 0x00FF0000U) >> 8U) | ((sd_status[0] & 0xFF0000
 4496              		.loc 1 2636 47
 4497 0068 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccsLb3N5.s 			page 127


 4498              		.loc 1 2636 66
 4499 006a 1B0A     		lsrs	r3, r3, #8
 4500              		.loc 1 2636 25
 4501 006c 9BB2     		uxth	r3, r3
 4502 006e 23F0FF03 		bic	r3, r3, #255
 4503 0072 9AB2     		uxth	r2, r3
 4504              		.loc 1 2636 86
 4505 0074 BB68     		ldr	r3, [r7, #8]
 4506              		.loc 1 2636 105
 4507 0076 1B0E     		lsrs	r3, r3, #24
 4508              		.loc 1 2636 25
 4509 0078 9BB2     		uxth	r3, r3
 4510 007a 1343     		orrs	r3, r3, r2
 4511 007c 9AB2     		uxth	r2, r3
 4512              		.loc 1 2636 23
 4513 007e 3B68     		ldr	r3, [r7]
 4514 0080 5A80     		strh	r2, [r3, #2]	@ movhi
2637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->ProtectedAreaSize = (((sd_status[1] & 0xFFU) << 24U)    | ((sd_status[1] & 0xFF00U) <<
 4515              		.loc 1 2638 46
 4516 0082 FB68     		ldr	r3, [r7, #12]
 4517              		.loc 1 2638 59
 4518 0084 1A06     		lsls	r2, r3, #24
 4519              		.loc 1 2638 83
 4520 0086 FB68     		ldr	r3, [r7, #12]
 4521              		.loc 1 2638 98
 4522 0088 1B02     		lsls	r3, r3, #8
 4523 008a 03F47F03 		and	r3, r3, #16711680
 4524              		.loc 1 2638 70
 4525 008e 1A43     		orrs	r2, r2, r3
2639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                   ((sd_status[1] & 0xFF0000U) >> 8U) | ((sd_status[1] & 0xFF000000U
 4526              		.loc 1 2639 46
 4527 0090 FB68     		ldr	r3, [r7, #12]
 4528              		.loc 1 2639 63
 4529 0092 1B0A     		lsrs	r3, r3, #8
 4530 0094 03F47F43 		and	r3, r3, #65280
2638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                   ((sd_status[1] & 0xFF0000U) >> 8U) | ((sd_status[1] & 0xFF000000U
 4531              		.loc 1 2638 105
 4532 0098 1A43     		orrs	r2, r2, r3
 4533              		.loc 1 2639 83
 4534 009a FB68     		ldr	r3, [r7, #12]
 4535              		.loc 1 2639 102
 4536 009c 1B0E     		lsrs	r3, r3, #24
 4537              		.loc 1 2639 70
 4538 009e 1A43     		orrs	r2, r2, r3
2638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                                   ((sd_status[1] & 0xFF0000U) >> 8U) | ((sd_status[1] & 0xFF000000U
 4539              		.loc 1 2638 32
 4540 00a0 3B68     		ldr	r3, [r7]
 4541 00a2 5A60     		str	r2, [r3, #4]
2640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->SpeedClass = (uint8_t)(sd_status[2] & 0xFFU);
 4542              		.loc 1 2641 46
 4543 00a4 3B69     		ldr	r3, [r7, #16]
 4544              		.loc 1 2641 27
 4545 00a6 DAB2     		uxtb	r2, r3
 4546              		.loc 1 2641 25
 4547 00a8 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccsLb3N5.s 			page 128


 4548 00aa 1A72     		strb	r2, [r3, #8]
2642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->PerformanceMove = (uint8_t)((sd_status[2] & 0xFF00U) >> 8U);
 4549              		.loc 1 2643 52
 4550 00ac 3B69     		ldr	r3, [r7, #16]
 4551              		.loc 1 2643 67
 4552 00ae 1B0A     		lsrs	r3, r3, #8
 4553              		.loc 1 2643 32
 4554 00b0 DAB2     		uxtb	r2, r3
 4555              		.loc 1 2643 30
 4556 00b2 3B68     		ldr	r3, [r7]
 4557 00b4 5A72     		strb	r2, [r3, #9]
2644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->AllocationUnitSize = (uint8_t)((sd_status[2] & 0xF00000U) >> 20U);
 4558              		.loc 1 2645 55
 4559 00b6 3B69     		ldr	r3, [r7, #16]
 4560              		.loc 1 2645 72
 4561 00b8 1B0D     		lsrs	r3, r3, #20
 4562              		.loc 1 2645 35
 4563 00ba DBB2     		uxtb	r3, r3
 4564 00bc 03F00F03 		and	r3, r3, #15
 4565 00c0 DAB2     		uxtb	r2, r3
 4566              		.loc 1 2645 33
 4567 00c2 3B68     		ldr	r3, [r7]
 4568 00c4 9A72     		strb	r2, [r3, #10]
2646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->EraseSize = (uint16_t)(((sd_status[2] & 0xFF000000U) >> 16U) | (sd_status[3] & 0xFFU))
 4569              		.loc 1 2647 48
 4570 00c6 3B69     		ldr	r3, [r7, #16]
 4571              		.loc 1 2647 67
 4572 00c8 1B0C     		lsrs	r3, r3, #16
 4573              		.loc 1 2647 26
 4574 00ca 9BB2     		uxth	r3, r3
 4575 00cc 23F0FF03 		bic	r3, r3, #255
 4576 00d0 9AB2     		uxth	r2, r3
 4577              		.loc 1 2647 87
 4578 00d2 7B69     		ldr	r3, [r7, #20]
 4579              		.loc 1 2647 91
 4580 00d4 9BB2     		uxth	r3, r3
 4581 00d6 DBB2     		uxtb	r3, r3
 4582 00d8 9BB2     		uxth	r3, r3
 4583              		.loc 1 2647 26
 4584 00da 1343     		orrs	r3, r3, r2
 4585 00dc 9AB2     		uxth	r2, r3
 4586              		.loc 1 2647 24
 4587 00de 3B68     		ldr	r3, [r7]
 4588 00e0 9A81     		strh	r2, [r3, #12]	@ movhi
2648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->EraseTimeout = (uint8_t)((sd_status[3] & 0xFC00U) >> 10U);
 4589              		.loc 1 2649 49
 4590 00e2 7B69     		ldr	r3, [r7, #20]
 4591              		.loc 1 2649 64
 4592 00e4 9B0A     		lsrs	r3, r3, #10
 4593              		.loc 1 2649 29
 4594 00e6 DBB2     		uxtb	r3, r3
 4595 00e8 03F03F03 		and	r3, r3, #63
 4596 00ec DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccsLb3N5.s 			page 129


 4597              		.loc 1 2649 27
 4598 00ee 3B68     		ldr	r3, [r7]
 4599 00f0 9A73     		strb	r2, [r3, #14]
2650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->EraseOffset = (uint8_t)((sd_status[3] & 0x0300U) >> 8U);
 4600              		.loc 1 2651 48
 4601 00f2 7B69     		ldr	r3, [r7, #20]
 4602              		.loc 1 2651 63
 4603 00f4 1B0A     		lsrs	r3, r3, #8
 4604              		.loc 1 2651 28
 4605 00f6 DBB2     		uxtb	r3, r3
 4606 00f8 03F00303 		and	r3, r3, #3
 4607 00fc DAB2     		uxtb	r2, r3
 4608              		.loc 1 2651 26
 4609 00fe 3B68     		ldr	r3, [r7]
 4610 0100 DA73     		strb	r2, [r3, #15]
 4611              	.L182:
2652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
2654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->UhsSpeedGrade = (uint8_t)((sd_status[3] & 0x00F0U) >> 4U);
2655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->UhsAllocationUnitSize = (uint8_t)(sd_status[3] & 0x000FU) ;
2656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pStatus->VideoSpeedClass = (uint8_t)((sd_status[4] & 0xFF000000U) >> 24U);
2657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
2658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
2659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Set Block Size for Card */
2662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdBlockLength(hsd->Instance, BLOCKSIZE);
 4612              		.loc 1 2662 16
 4613 0102 7B68     		ldr	r3, [r7, #4]
 4614 0104 1B68     		ldr	r3, [r3]
 4615 0106 4FF40071 		mov	r1, #512
 4616 010a 1846     		mov	r0, r3
 4617 010c FFF7FEFF 		bl	SDMMC_CmdBlockLength
 4618 0110 B864     		str	r0, [r7, #72]
2663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 4619              		.loc 1 2663 6
 4620 0112 BB6C     		ldr	r3, [r7, #72]
 4621 0114 002B     		cmp	r3, #0
 4622 0116 0DD0     		beq	.L183
2664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
2666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 4623              		.loc 1 2666 5
 4624 0118 7B68     		ldr	r3, [r7, #4]
 4625 011a 1B68     		ldr	r3, [r3]
 4626 011c 084A     		ldr	r2, .L185
 4627 011e 9A63     		str	r2, [r3, #56]
2667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = errorstate;
 4628              		.loc 1 2667 20
 4629 0120 7B68     		ldr	r3, [r7, #4]
 4630 0122 BA6C     		ldr	r2, [r7, #72]
 4631 0124 9A63     		str	r2, [r3, #56]
2668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 4632              		.loc 1 2668 16
 4633 0126 7B68     		ldr	r3, [r7, #4]
 4634 0128 0122     		movs	r2, #1
ARM GAS  /tmp/ccsLb3N5.s 			page 130


 4635 012a 83F83420 		strb	r2, [r3, #52]
2669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     status = HAL_ERROR;
 4636              		.loc 1 2669 12
 4637 012e 0123     		movs	r3, #1
 4638 0130 87F84F30 		strb	r3, [r7, #79]
 4639              	.L183:
2670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return status;
 4640              		.loc 1 2672 10
 4641 0134 97F84F30 		ldrb	r3, [r7, #79]	@ zero_extendqisi2
2673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 4642              		.loc 1 2673 1
 4643 0138 1846     		mov	r0, r3
 4644 013a 5037     		adds	r7, r7, #80
 4645              		.cfi_def_cfa_offset 8
 4646 013c BD46     		mov	sp, r7
 4647              		.cfi_def_cfa_register 13
 4648              		@ sp needed
 4649 013e 80BD     		pop	{r7, pc}
 4650              	.L186:
 4651              		.align	2
 4652              	.L185:
 4653 0140 FF054000 		.word	4195839
 4654              		.cfi_endproc
 4655              	.LFE466:
 4657              		.section	.text.HAL_SD_GetCardInfo,"ax",%progbits
 4658              		.align	1
 4659              		.global	HAL_SD_GetCardInfo
 4660              		.syntax unified
 4661              		.thumb
 4662              		.thumb_func
 4664              	HAL_SD_GetCardInfo:
 4665              	.LFB467:
2674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Gets the SD card info.
2677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
2678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pCardInfo: Pointer to the HAL_SD_CardInfoTypeDef structure that
2679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         will contain the SD card status information
2680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
2681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_GetCardInfo(SD_HandleTypeDef *hsd, HAL_SD_CardInfoTypeDef *pCardInfo)
2683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 4666              		.loc 1 2683 1
 4667              		.cfi_startproc
 4668              		@ args = 0, pretend = 0, frame = 8
 4669              		@ frame_needed = 1, uses_anonymous_args = 0
 4670              		@ link register save eliminated.
 4671 0000 80B4     		push	{r7}
 4672              		.cfi_def_cfa_offset 4
 4673              		.cfi_offset 7, -4
 4674 0002 83B0     		sub	sp, sp, #12
 4675              		.cfi_def_cfa_offset 16
 4676 0004 00AF     		add	r7, sp, #0
 4677              		.cfi_def_cfa_register 7
 4678 0006 7860     		str	r0, [r7, #4]
ARM GAS  /tmp/ccsLb3N5.s 			page 131


 4679 0008 3960     		str	r1, [r7]
2684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCardInfo->CardType     = (uint32_t)(hsd->SdCard.CardType);
 4680              		.loc 1 2684 51
 4681 000a 7B68     		ldr	r3, [r7, #4]
 4682 000c 5A6C     		ldr	r2, [r3, #68]
 4683              		.loc 1 2684 27
 4684 000e 3B68     		ldr	r3, [r7]
 4685 0010 1A60     		str	r2, [r3]
2685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCardInfo->CardVersion  = (uint32_t)(hsd->SdCard.CardVersion);
 4686              		.loc 1 2685 51
 4687 0012 7B68     		ldr	r3, [r7, #4]
 4688 0014 9A6C     		ldr	r2, [r3, #72]
 4689              		.loc 1 2685 27
 4690 0016 3B68     		ldr	r3, [r7]
 4691 0018 5A60     		str	r2, [r3, #4]
2686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCardInfo->Class        = (uint32_t)(hsd->SdCard.Class);
 4692              		.loc 1 2686 51
 4693 001a 7B68     		ldr	r3, [r7, #4]
 4694 001c DA6C     		ldr	r2, [r3, #76]
 4695              		.loc 1 2686 27
 4696 001e 3B68     		ldr	r3, [r7]
 4697 0020 9A60     		str	r2, [r3, #8]
2687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCardInfo->RelCardAdd   = (uint32_t)(hsd->SdCard.RelCardAdd);
 4698              		.loc 1 2687 51
 4699 0022 7B68     		ldr	r3, [r7, #4]
 4700 0024 1A6D     		ldr	r2, [r3, #80]
 4701              		.loc 1 2687 27
 4702 0026 3B68     		ldr	r3, [r7]
 4703 0028 DA60     		str	r2, [r3, #12]
2688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCardInfo->BlockNbr     = (uint32_t)(hsd->SdCard.BlockNbr);
 4704              		.loc 1 2688 51
 4705 002a 7B68     		ldr	r3, [r7, #4]
 4706 002c 5A6D     		ldr	r2, [r3, #84]
 4707              		.loc 1 2688 27
 4708 002e 3B68     		ldr	r3, [r7]
 4709 0030 1A61     		str	r2, [r3, #16]
2689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCardInfo->BlockSize    = (uint32_t)(hsd->SdCard.BlockSize);
 4710              		.loc 1 2689 51
 4711 0032 7B68     		ldr	r3, [r7, #4]
 4712 0034 9A6D     		ldr	r2, [r3, #88]
 4713              		.loc 1 2689 27
 4714 0036 3B68     		ldr	r3, [r7]
 4715 0038 5A61     		str	r2, [r3, #20]
2690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCardInfo->LogBlockNbr  = (uint32_t)(hsd->SdCard.LogBlockNbr);
 4716              		.loc 1 2690 51
 4717 003a 7B68     		ldr	r3, [r7, #4]
 4718 003c DA6D     		ldr	r2, [r3, #92]
 4719              		.loc 1 2690 27
 4720 003e 3B68     		ldr	r3, [r7]
 4721 0040 9A61     		str	r2, [r3, #24]
2691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCardInfo->LogBlockSize = (uint32_t)(hsd->SdCard.LogBlockSize);
 4722              		.loc 1 2691 51
 4723 0042 7B68     		ldr	r3, [r7, #4]
 4724 0044 1A6E     		ldr	r2, [r3, #96]
 4725              		.loc 1 2691 27
 4726 0046 3B68     		ldr	r3, [r7]
 4727 0048 DA61     		str	r2, [r3, #28]
ARM GAS  /tmp/ccsLb3N5.s 			page 132


2692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
2693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   pCardInfo->CardSpeed    = (uint32_t)(hsd->SdCard.CardSpeed);
2694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
2695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
2696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_OK;
 4728              		.loc 1 2697 10
 4729 004a 0023     		movs	r3, #0
2698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 4730              		.loc 1 2698 1
 4731 004c 1846     		mov	r0, r3
 4732 004e 0C37     		adds	r7, r7, #12
 4733              		.cfi_def_cfa_offset 4
 4734 0050 BD46     		mov	sp, r7
 4735              		.cfi_def_cfa_register 13
 4736              		@ sp needed
 4737 0052 5DF8047B 		ldr	r7, [sp], #4
 4738              		.cfi_restore 7
 4739              		.cfi_def_cfa_offset 0
 4740 0056 7047     		bx	lr
 4741              		.cfi_endproc
 4742              	.LFE467:
 4744              		.section	.text.HAL_SD_ConfigWideBusOperation,"ax",%progbits
 4745              		.align	1
 4746              		.global	HAL_SD_ConfigWideBusOperation
 4747              		.syntax unified
 4748              		.thumb
 4749              		.thumb_func
 4751              	HAL_SD_ConfigWideBusOperation:
 4752              	.LFB468:
2699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Enables wide bus operation for the requested card if supported by
2702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         card.
2703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
2704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  WideMode: Specifies the SD card wide bus mode
2705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          This parameter can be one of the following values:
2706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *            @arg SDMMC_BUS_WIDE_8B: 8-bit data transfer
2707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *            @arg SDMMC_BUS_WIDE_4B: 4-bit data transfer
2708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *            @arg SDMMC_BUS_WIDE_1B: 1-bit data transfer
2709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
2710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_ConfigWideBusOperation(SD_HandleTypeDef *hsd, uint32_t WideMode)
2712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 4753              		.loc 1 2712 1
 4754              		.cfi_startproc
 4755              		@ args = 0, pretend = 0, frame = 48
 4756              		@ frame_needed = 1, uses_anonymous_args = 0
 4757 0000 B0B5     		push	{r4, r5, r7, lr}
 4758              		.cfi_def_cfa_offset 16
 4759              		.cfi_offset 4, -16
 4760              		.cfi_offset 5, -12
 4761              		.cfi_offset 7, -8
 4762              		.cfi_offset 14, -4
 4763 0002 90B0     		sub	sp, sp, #64
 4764              		.cfi_def_cfa_offset 80
 4765 0004 04AF     		add	r7, sp, #16
ARM GAS  /tmp/ccsLb3N5.s 			page 133


 4766              		.cfi_def_cfa 7, 64
 4767 0006 7860     		str	r0, [r7, #4]
 4768 0008 3960     		str	r1, [r7]
2713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SDMMC_InitTypeDef Init;
2714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
2715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t sdmmc_clk;
2716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_StatusTypeDef status = HAL_OK;
 4769              		.loc 1 2716 21
 4770 000a 0023     		movs	r3, #0
 4771 000c 87F82F30 		strb	r3, [r7, #47]
2717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Check the parameters */
2719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_BUS_WIDE(WideMode));
2720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Change State */
2722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_BUSY;
 4772              		.loc 1 2722 14
 4773 0010 7B68     		ldr	r3, [r7, #4]
 4774 0012 0322     		movs	r2, #3
 4775 0014 83F83420 		strb	r2, [r3, #52]
2723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->SdCard.CardType != CARD_SECURED)
 4776              		.loc 1 2724 18
 4777 0018 7B68     		ldr	r3, [r7, #4]
 4778 001a 5B6C     		ldr	r3, [r3, #68]
 4779              		.loc 1 2724 6
 4780 001c 032B     		cmp	r3, #3
 4781 001e 2ED0     		beq	.L190
2725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (WideMode == SDMMC_BUS_WIDE_8B)
 4782              		.loc 1 2726 8
 4783 0020 3B68     		ldr	r3, [r7]
 4784 0022 B3F5805F 		cmp	r3, #4096
 4785 0026 06D1     		bne	.L191
2727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
 4786              		.loc 1 2728 10
 4787 0028 7B68     		ldr	r3, [r7, #4]
 4788 002a 9B6B     		ldr	r3, [r3, #56]
 4789              		.loc 1 2728 22
 4790 002c 43F08052 		orr	r2, r3, #268435456
 4791 0030 7B68     		ldr	r3, [r7, #4]
 4792 0032 9A63     		str	r2, [r3, #56]
 4793 0034 29E0     		b	.L192
 4794              	.L191:
2729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if (WideMode == SDMMC_BUS_WIDE_4B)
 4795              		.loc 1 2730 13
 4796 0036 3B68     		ldr	r3, [r7]
 4797 0038 B3F5006F 		cmp	r3, #2048
 4798 003c 0AD1     		bne	.L193
2731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SD_WideBus_Enable(hsd);
 4799              		.loc 1 2732 20
 4800 003e 7868     		ldr	r0, [r7, #4]
 4801 0040 FFF7FEFF 		bl	SD_WideBus_Enable
 4802 0044 B862     		str	r0, [r7, #40]
ARM GAS  /tmp/ccsLb3N5.s 			page 134


2733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= errorstate;
 4803              		.loc 1 2734 10
 4804 0046 7B68     		ldr	r3, [r7, #4]
 4805 0048 9A6B     		ldr	r2, [r3, #56]
 4806              		.loc 1 2734 22
 4807 004a BB6A     		ldr	r3, [r7, #40]
 4808 004c 1A43     		orrs	r2, r2, r3
 4809 004e 7B68     		ldr	r3, [r7, #4]
 4810 0050 9A63     		str	r2, [r3, #56]
 4811 0052 1AE0     		b	.L192
 4812              	.L193:
2735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if (WideMode == SDMMC_BUS_WIDE_1B)
 4813              		.loc 1 2736 13
 4814 0054 3B68     		ldr	r3, [r7]
 4815 0056 002B     		cmp	r3, #0
 4816 0058 0AD1     		bne	.L194
2737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       errorstate = SD_WideBus_Disable(hsd);
 4817              		.loc 1 2738 20
 4818 005a 7868     		ldr	r0, [r7, #4]
 4819 005c FFF7FEFF 		bl	SD_WideBus_Disable
 4820 0060 B862     		str	r0, [r7, #40]
2739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= errorstate;
 4821              		.loc 1 2740 10
 4822 0062 7B68     		ldr	r3, [r7, #4]
 4823 0064 9A6B     		ldr	r2, [r3, #56]
 4824              		.loc 1 2740 22
 4825 0066 BB6A     		ldr	r3, [r7, #40]
 4826 0068 1A43     		orrs	r2, r2, r3
 4827 006a 7B68     		ldr	r3, [r7, #4]
 4828 006c 9A63     		str	r2, [r3, #56]
 4829 006e 0CE0     		b	.L192
 4830              	.L194:
2741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
2743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* WideMode is not a valid argument*/
2745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
 4831              		.loc 1 2745 10
 4832 0070 7B68     		ldr	r3, [r7, #4]
 4833 0072 9B6B     		ldr	r3, [r3, #56]
 4834              		.loc 1 2745 22
 4835 0074 43F00062 		orr	r2, r3, #134217728
 4836 0078 7B68     		ldr	r3, [r7, #4]
 4837 007a 9A63     		str	r2, [r3, #56]
 4838 007c 05E0     		b	.L192
 4839              	.L190:
2746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
2749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* MMC Card does not support this feature */
2751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
 4840              		.loc 1 2751 8
ARM GAS  /tmp/ccsLb3N5.s 			page 135


 4841 007e 7B68     		ldr	r3, [r7, #4]
 4842 0080 9B6B     		ldr	r3, [r3, #56]
 4843              		.loc 1 2751 20
 4844 0082 43F08052 		orr	r2, r3, #268435456
 4845 0086 7B68     		ldr	r3, [r7, #4]
 4846 0088 9A63     		str	r2, [r3, #56]
 4847              	.L192:
2752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->ErrorCode != HAL_SD_ERROR_NONE)
 4848              		.loc 1 2754 10
 4849 008a 7B68     		ldr	r3, [r7, #4]
 4850 008c 9B6B     		ldr	r3, [r3, #56]
 4851              		.loc 1 2754 6
 4852 008e 002B     		cmp	r3, #0
 4853 0090 0BD0     		beq	.L195
2755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
2757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 4854              		.loc 1 2757 5
 4855 0092 7B68     		ldr	r3, [r7, #4]
 4856 0094 1B68     		ldr	r3, [r3]
 4857 0096 374A     		ldr	r2, .L202
 4858 0098 9A63     		str	r2, [r3, #56]
2758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 4859              		.loc 1 2758 16
 4860 009a 7B68     		ldr	r3, [r7, #4]
 4861 009c 0122     		movs	r2, #1
 4862 009e 83F83420 		strb	r2, [r3, #52]
2759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     status = HAL_ERROR;
 4863              		.loc 1 2759 12
 4864 00a2 0123     		movs	r3, #1
 4865 00a4 87F82F30 		strb	r3, [r7, #47]
 4866 00a8 42E0     		b	.L196
 4867              	.L195:
2760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
2762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     sdmmc_clk = HAL_RCCEx_GetPeriphCLKFreq(RCC_PERIPHCLK_SDMMC1);
 4868              		.loc 1 2763 17
 4869 00aa 4FF40020 		mov	r0, #524288
 4870 00ae FFF7FEFF 		bl	HAL_RCCEx_GetPeriphCLKFreq
 4871 00b2 7862     		str	r0, [r7, #36]
2764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (sdmmc_clk != 0U)
 4872              		.loc 1 2764 8
 4873 00b4 7B6A     		ldr	r3, [r7, #36]
 4874 00b6 002B     		cmp	r3, #0
 4875 00b8 31D0     		beq	.L197
2765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Configure the SDMMC peripheral */
2767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       Init.ClockEdge           = hsd->Init.ClockEdge;
 4876              		.loc 1 2767 43
 4877 00ba 7B68     		ldr	r3, [r7, #4]
 4878 00bc 5B68     		ldr	r3, [r3, #4]
 4879              		.loc 1 2767 32
 4880 00be FB60     		str	r3, [r7, #12]
2768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
ARM GAS  /tmp/ccsLb3N5.s 			page 136


2769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       Init.ClockBypass         = hsd->Init.ClockBypass;
 4881              		.loc 1 2769 43
 4882 00c0 7B68     		ldr	r3, [r7, #4]
 4883 00c2 9B68     		ldr	r3, [r3, #8]
 4884              		.loc 1 2769 32
 4885 00c4 3B61     		str	r3, [r7, #16]
2770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
2771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
2772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       Init.ClockPowerSave      = hsd->Init.ClockPowerSave;
 4886              		.loc 1 2772 43
 4887 00c6 7B68     		ldr	r3, [r7, #4]
 4888 00c8 DB68     		ldr	r3, [r3, #12]
 4889              		.loc 1 2772 32
 4890 00ca 7B61     		str	r3, [r7, #20]
2773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       Init.BusWide             = WideMode;
 4891              		.loc 1 2773 32
 4892 00cc 3B68     		ldr	r3, [r7]
 4893 00ce BB61     		str	r3, [r7, #24]
2774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       Init.HardwareFlowControl = hsd->Init.HardwareFlowControl;
 4894              		.loc 1 2774 43
 4895 00d0 7B68     		ldr	r3, [r7, #4]
 4896 00d2 5B69     		ldr	r3, [r3, #20]
 4897              		.loc 1 2774 32
 4898 00d4 FB61     		str	r3, [r7, #28]
2775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
2777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Check if user Clock div < Normal speed 25Mhz, no change in Clockdiv */
2778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (hsd->Init.ClockDiv >= (sdmmc_clk / (2U * SD_NORMAL_SPEED_FREQ)))
2779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         Init.ClockDiv = hsd->Init.ClockDiv;
2781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else if (hsd->SdCard.CardSpeed == CARD_ULTRA_HIGH_SPEED)
2783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* UltraHigh speed SD card,user Clock div */
2785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         Init.ClockDiv = hsd->Init.ClockDiv;
2786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else if (hsd->SdCard.CardSpeed == CARD_HIGH_SPEED)
2788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* High speed SD card, Max Frequency = 50Mhz */
2790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (hsd->Init.ClockDiv == 0U)
2791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if (sdmmc_clk > SD_HIGH_SPEED_FREQ)
2793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             Init.ClockDiv = sdmmc_clk / (2U * SD_HIGH_SPEED_FREQ);
2795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           else
2797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             Init.ClockDiv = hsd->Init.ClockDiv;
2799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else
2802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if ((sdmmc_clk / (2U * hsd->Init.ClockDiv)) > SD_HIGH_SPEED_FREQ)
2804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             Init.ClockDiv = sdmmc_clk / (2U * SD_HIGH_SPEED_FREQ);
2806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           else
ARM GAS  /tmp/ccsLb3N5.s 			page 137


2808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             Init.ClockDiv = hsd->Init.ClockDiv;
2810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else
2814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* No High speed SD card, Max Frequency = 25Mhz */
2816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (hsd->Init.ClockDiv == 0U)
2817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if (sdmmc_clk > SD_NORMAL_SPEED_FREQ)
2819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             Init.ClockDiv = sdmmc_clk / (2U * SD_NORMAL_SPEED_FREQ);
2821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           else
2823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             Init.ClockDiv = hsd->Init.ClockDiv;
2825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else
2828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if ((sdmmc_clk / (2U * hsd->Init.ClockDiv)) > SD_NORMAL_SPEED_FREQ)
2830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2831:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             Init.ClockDiv = sdmmc_clk / (2U * SD_NORMAL_SPEED_FREQ);
2832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           else
2834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             Init.ClockDiv = hsd->Init.ClockDiv;
2836:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       Init.Transceiver = hsd->Init.Transceiver;
2841:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
2842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if ((sdmmc_clk / (hsd->Init.ClockDiv + 2U)) > SD_NORMAL_SPEED_FREQ)
 4899              		.loc 1 2842 34
 4900 00d6 7B68     		ldr	r3, [r7, #4]
 4901 00d8 9B69     		ldr	r3, [r3, #24]
 4902              		.loc 1 2842 44
 4903 00da 0233     		adds	r3, r3, #2
 4904              		.loc 1 2842 22
 4905 00dc 7A6A     		ldr	r2, [r7, #36]
 4906 00de B2FBF3F3 		udiv	r3, r2, r3
 4907              		.loc 1 2842 10
 4908 00e2 254A     		ldr	r2, .L202+4
 4909 00e4 9342     		cmp	r3, r2
 4910 00e6 07D9     		bls	.L198
2843:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         Init.ClockDiv = ((sdmmc_clk / SD_NORMAL_SPEED_FREQ) - 2U);
 4911              		.loc 1 2844 37
 4912 00e8 7B6A     		ldr	r3, [r7, #36]
 4913 00ea 244A     		ldr	r2, .L202+8
 4914 00ec A2FB0323 		umull	r2, r3, r2, r3
 4915 00f0 DB0D     		lsrs	r3, r3, #23
 4916              		.loc 1 2844 61
 4917 00f2 023B     		subs	r3, r3, #2
 4918              		.loc 1 2844 23
ARM GAS  /tmp/ccsLb3N5.s 			page 138


 4919 00f4 3B62     		str	r3, [r7, #32]
 4920 00f6 02E0     		b	.L199
 4921              	.L198:
2845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       else
2847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         Init.ClockDiv = hsd->Init.ClockDiv;
 4922              		.loc 1 2848 34
 4923 00f8 7B68     		ldr	r3, [r7, #4]
 4924 00fa 9B69     		ldr	r3, [r3, #24]
 4925              		.loc 1 2848 23
 4926 00fc 3B62     		str	r3, [r7, #32]
 4927              	.L199:
2849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
2851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
2852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2853:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (void)SDMMC_Init(hsd->Instance, Init);
 4928              		.loc 1 2853 13
 4929 00fe 7B68     		ldr	r3, [r7, #4]
 4930 0100 1D68     		ldr	r5, [r3]
 4931 0102 6C46     		mov	r4, sp
 4932 0104 07F11803 		add	r3, r7, #24
 4933 0108 93E80700 		ldm	r3, {r0, r1, r2}
 4934 010c 84E80700 		stm	r4, {r0, r1, r2}
 4935 0110 07F10C03 		add	r3, r7, #12
 4936 0114 0ECB     		ldm	r3, {r1, r2, r3}
 4937 0116 2846     		mov	r0, r5
 4938 0118 FFF7FEFF 		bl	SDMMC_Init
 4939 011c 08E0     		b	.L196
 4940              	.L197:
2854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
2856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2857:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= SDMMC_ERROR_INVALID_PARAMETER;
 4941              		.loc 1 2857 10
 4942 011e 7B68     		ldr	r3, [r7, #4]
 4943 0120 9B6B     		ldr	r3, [r3, #56]
 4944              		.loc 1 2857 22
 4945 0122 43F00062 		orr	r2, r3, #134217728
 4946 0126 7B68     		ldr	r3, [r7, #4]
 4947 0128 9A63     		str	r2, [r3, #56]
2858:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       status = HAL_ERROR;
 4948              		.loc 1 2858 14
 4949 012a 0123     		movs	r3, #1
 4950 012c 87F82F30 		strb	r3, [r7, #47]
 4951              	.L196:
2859:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
2860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Set Block Size for Card */
2863:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdBlockLength(hsd->Instance, BLOCKSIZE);
 4952              		.loc 1 2863 16
 4953 0130 7B68     		ldr	r3, [r7, #4]
 4954 0132 1B68     		ldr	r3, [r3]
 4955 0134 4FF40071 		mov	r1, #512
 4956 0138 1846     		mov	r0, r3
ARM GAS  /tmp/ccsLb3N5.s 			page 139


 4957 013a FFF7FEFF 		bl	SDMMC_CmdBlockLength
 4958 013e B862     		str	r0, [r7, #40]
2864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 4959              		.loc 1 2864 6
 4960 0140 BB6A     		ldr	r3, [r7, #40]
 4961 0142 002B     		cmp	r3, #0
 4962 0144 0CD0     		beq	.L200
2865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
2867:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 4963              		.loc 1 2867 5
 4964 0146 7B68     		ldr	r3, [r7, #4]
 4965 0148 1B68     		ldr	r3, [r3]
 4966 014a 0A4A     		ldr	r2, .L202
 4967 014c 9A63     		str	r2, [r3, #56]
2868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= errorstate;
 4968              		.loc 1 2868 8
 4969 014e 7B68     		ldr	r3, [r7, #4]
 4970 0150 9A6B     		ldr	r2, [r3, #56]
 4971              		.loc 1 2868 20
 4972 0152 BB6A     		ldr	r3, [r7, #40]
 4973 0154 1A43     		orrs	r2, r2, r3
 4974 0156 7B68     		ldr	r3, [r7, #4]
 4975 0158 9A63     		str	r2, [r3, #56]
2869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     status = HAL_ERROR;
 4976              		.loc 1 2869 12
 4977 015a 0123     		movs	r3, #1
 4978 015c 87F82F30 		strb	r3, [r7, #47]
 4979              	.L200:
2870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
2871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Change State */
2873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_READY;
 4980              		.loc 1 2873 14
 4981 0160 7B68     		ldr	r3, [r7, #4]
 4982 0162 0122     		movs	r2, #1
 4983 0164 83F83420 		strb	r2, [r3, #52]
2874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return status;
 4984              		.loc 1 2875 10
 4985 0168 97F82F30 		ldrb	r3, [r7, #47]	@ zero_extendqisi2
2876:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 4986              		.loc 1 2876 1
 4987 016c 1846     		mov	r0, r3
 4988 016e 3037     		adds	r7, r7, #48
 4989              		.cfi_def_cfa_offset 16
 4990 0170 BD46     		mov	sp, r7
 4991              		.cfi_def_cfa_register 13
 4992              		@ sp needed
 4993 0172 B0BD     		pop	{r4, r5, r7, pc}
 4994              	.L203:
 4995              		.align	2
 4996              	.L202:
 4997 0174 FF054000 		.word	4195839
 4998 0178 40787D01 		.word	25000000
 4999 017c 893BE655 		.word	1441151881
 5000              		.cfi_endproc
ARM GAS  /tmp/ccsLb3N5.s 			page 140


 5001              	.LFE468:
 5003              		.section	.text.HAL_SD_GetCardState,"ax",%progbits
 5004              		.align	1
 5005              		.global	HAL_SD_GetCardState
 5006              		.syntax unified
 5007              		.thumb
 5008              		.thumb_func
 5010              	HAL_SD_GetCardState:
 5011              	.LFB469:
2877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
2879:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
2880:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Configure the speed bus mode
2881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd Pointer to the SD handle
2882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  SpeedMode Specifies the SD card speed bus mode
2883:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *          This parameter can be one of the following values:
2884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *            @arg SDMMC_SPEED_MODE_AUTO: Max speed mode supported by the card
2885:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *            @arg SDMMC_SPEED_MODE_DEFAULT: Default Speed/SDR12 mode
2886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *            @arg SDMMC_SPEED_MODE_HIGH: High Speed/SDR25 mode
2887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *            @arg SDMMC_SPEED_MODE_ULTRA: Ultra high speed mode
2888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
2889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
2890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_ConfigSpeedBusOperation(SD_HandleTypeDef *hsd, uint32_t SpeedMode)
2892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
2893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t tickstart;
2894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
2895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_StatusTypeDef status = HAL_OK;
2896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Check the parameters */
2898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   assert_param(IS_SDMMC_SPEED_MODE(SpeedMode));
2899:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Change State */
2900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_BUSY;
2901:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->Init.Transceiver == SDMMC_TRANSCEIVER_ENABLE)
2903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
2904:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     switch (SpeedMode)
2905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
2906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case SDMMC_SPEED_MODE_AUTO:
2907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if ((hsd->SdCard.CardSpeed  == CARD_ULTRA_HIGH_SPEED) ||
2909:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (hsd->SdCard.CardType == CARD_SDHC_SDXC))
2910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->Instance->CLKCR |= 0x00100000U;
2912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Enable Ultra High Speed */
2913:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if (SD_UltraHighSpeed(hsd) != HAL_SD_ERROR_NONE)
2914:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             if (SD_HighSpeed(hsd) != HAL_SD_ERROR_NONE)
2916:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             {
2917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****               hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
2918:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****               status = HAL_ERROR;
2919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             }
2920:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else if (hsd->SdCard.CardSpeed  == CARD_HIGH_SPEED)
2923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2924:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Enable High Speed */
ARM GAS  /tmp/ccsLb3N5.s 			page 141


2925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if (SD_HighSpeed(hsd) != HAL_SD_ERROR_NONE)
2926:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
2928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             status = HAL_ERROR;
2929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2931:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else
2932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /*Nothing to do, Use defaultSpeed */
2934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case SDMMC_SPEED_MODE_ULTRA:
2939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if ((hsd->SdCard.CardSpeed  == CARD_ULTRA_HIGH_SPEED) ||
2941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (hsd->SdCard.CardType == CARD_SDHC_SDXC))
2942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->Instance->CLKCR |= 0x00100000U;
2944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Enable UltraHigh Speed */
2945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if (SD_UltraHighSpeed(hsd) != HAL_SD_ERROR_NONE)
2946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
2948:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             status = HAL_ERROR;
2949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else
2952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2953:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
2954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           status = HAL_ERROR;
2955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2959:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case SDMMC_SPEED_MODE_DDR:
2960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
2961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if ((hsd->SdCard.CardSpeed  == CARD_ULTRA_HIGH_SPEED) ||
2962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (hsd->SdCard.CardType == CARD_SDHC_SDXC))
2963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->Instance->CLKCR |= 0x00100000U;
2965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Enable DDR Mode*/
2966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if (SD_DDR_Mode(hsd) != HAL_SD_ERROR_NONE)
2967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
2969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             status = HAL_ERROR;
2970:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else
2973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2974:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
2975:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           status = HAL_ERROR;
2976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2977:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
2979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
2980:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case SDMMC_SPEED_MODE_HIGH:
2981:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
ARM GAS  /tmp/ccsLb3N5.s 			page 142


2982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if ((hsd->SdCard.CardSpeed  == CARD_ULTRA_HIGH_SPEED) ||
2983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (hsd->SdCard.CardSpeed  == CARD_HIGH_SPEED) ||
2984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (hsd->SdCard.CardType == CARD_SDHC_SDXC))
2985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Enable High Speed */
2987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if (SD_HighSpeed(hsd) != HAL_SD_ERROR_NONE)
2988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
2989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
2990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             status = HAL_ERROR;
2991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
2992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else
2994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
2995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
2996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           status = HAL_ERROR;
2997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
2998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
2999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
3000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3001:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case SDMMC_SPEED_MODE_DEFAULT:
3002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
3003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       default:
3005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
3006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         status = HAL_ERROR;
3007:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
3008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
3011:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3012:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     switch (SpeedMode)
3013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3014:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case SDMMC_SPEED_MODE_AUTO:
3015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
3016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if ((hsd->SdCard.CardSpeed  == CARD_ULTRA_HIGH_SPEED) ||
3017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (hsd->SdCard.CardSpeed  == CARD_HIGH_SPEED) ||
3018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (hsd->SdCard.CardType == CARD_SDHC_SDXC))
3019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
3020:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Enable High Speed */
3021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if (SD_HighSpeed(hsd) != HAL_SD_ERROR_NONE)
3022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
3023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
3024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             status = HAL_ERROR;
3025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
3026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
3027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else
3028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
3029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /*Nothing to do, Use defaultSpeed */
3030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
3031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
3032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
3033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3034:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case SDMMC_SPEED_MODE_HIGH:
3035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
3036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if ((hsd->SdCard.CardSpeed  == CARD_ULTRA_HIGH_SPEED) ||
3037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (hsd->SdCard.CardSpeed  == CARD_HIGH_SPEED) ||
3038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             (hsd->SdCard.CardType == CARD_SDHC_SDXC))
ARM GAS  /tmp/ccsLb3N5.s 			page 143


3039:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
3040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Enable High Speed */
3041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if (SD_HighSpeed(hsd) != HAL_SD_ERROR_NONE)
3042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
3043:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
3044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             status = HAL_ERROR;
3045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
3046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
3047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else
3048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
3049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->ErrorCode |= HAL_SD_ERROR_UNSUPPORTED_FEATURE;
3050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           status = HAL_ERROR;
3051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
3052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
3053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
3054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case SDMMC_SPEED_MODE_DEFAULT:
3056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
3057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       case SDMMC_SPEED_MODE_ULTRA: /*not valid without transceiver*/
3059:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       default:
3060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_PARAM;
3061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         status = HAL_ERROR;
3062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         break;
3063:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Verify that SD card is ready to use after Speed mode switch*/
3067:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   tickstart = HAL_GetTick();
3068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   while ((HAL_SD_GetCardState(hsd) != HAL_SD_CARD_TRANSFER))
3069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3070:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((HAL_GetTick() - tickstart) >=  SDMMC_DATATIMEOUT)
3071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode = HAL_SD_ERROR_TIMEOUT;
3073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->State = HAL_SD_STATE_READY;
3074:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_TIMEOUT;
3075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3076:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Set Block Size for Card */
3079:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdBlockLength(hsd->Instance, BLOCKSIZE);
3080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
3081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
3083:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
3084:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= errorstate;
3085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     status = HAL_ERROR;
3086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3087:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Change State */
3089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_READY;
3090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return status;
3091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
3092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
3093:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
3094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
ARM GAS  /tmp/ccsLb3N5.s 			page 144


3096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Gets the current sd card data state.
3097:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: pointer to SD handle
3098:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval Card state
3099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_SD_CardStateTypeDef HAL_SD_GetCardState(SD_HandleTypeDef *hsd)
3101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 5012              		.loc 1 3101 1
 5013              		.cfi_startproc
 5014              		@ args = 0, pretend = 0, frame = 24
 5015              		@ frame_needed = 1, uses_anonymous_args = 0
 5016 0000 80B5     		push	{r7, lr}
 5017              		.cfi_def_cfa_offset 8
 5018              		.cfi_offset 7, -8
 5019              		.cfi_offset 14, -4
 5020 0002 86B0     		sub	sp, sp, #24
 5021              		.cfi_def_cfa_offset 32
 5022 0004 00AF     		add	r7, sp, #0
 5023              		.cfi_def_cfa_register 7
 5024 0006 7860     		str	r0, [r7, #4]
3102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t cardstate;
3103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
3104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t resp1 = 0;
 5025              		.loc 1 3104 12
 5026 0008 0023     		movs	r3, #0
 5027 000a FB60     		str	r3, [r7, #12]
3105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SD_SendStatus(hsd, &resp1);
 5028              		.loc 1 3106 16
 5029 000c 07F10C03 		add	r3, r7, #12
 5030 0010 1946     		mov	r1, r3
 5031 0012 7868     		ldr	r0, [r7, #4]
 5032 0014 FFF7FEFF 		bl	SD_SendStatus
 5033 0018 7861     		str	r0, [r7, #20]
3107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 5034              		.loc 1 3107 6
 5035 001a 7B69     		ldr	r3, [r7, #20]
 5036 001c 002B     		cmp	r3, #0
 5037 001e 05D0     		beq	.L205
3108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= errorstate;
 5038              		.loc 1 3109 8
 5039 0020 7B68     		ldr	r3, [r7, #4]
 5040 0022 9A6B     		ldr	r2, [r3, #56]
 5041              		.loc 1 3109 20
 5042 0024 7B69     		ldr	r3, [r7, #20]
 5043 0026 1A43     		orrs	r2, r2, r3
 5044 0028 7B68     		ldr	r3, [r7, #4]
 5045 002a 9A63     		str	r2, [r3, #56]
 5046              	.L205:
3110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   cardstate = ((resp1 >> 9U) & 0x0FU);
 5047              		.loc 1 3112 23
 5048 002c FB68     		ldr	r3, [r7, #12]
 5049 002e 5B0A     		lsrs	r3, r3, #9
 5050              		.loc 1 3112 13
 5051 0030 03F00F03 		and	r3, r3, #15
ARM GAS  /tmp/ccsLb3N5.s 			page 145


 5052 0034 3B61     		str	r3, [r7, #16]
3113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return (HAL_SD_CardStateTypeDef)cardstate;
 5053              		.loc 1 3114 10
 5054 0036 3B69     		ldr	r3, [r7, #16]
3115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 5055              		.loc 1 3115 1
 5056 0038 1846     		mov	r0, r3
 5057 003a 1837     		adds	r7, r7, #24
 5058              		.cfi_def_cfa_offset 8
 5059 003c BD46     		mov	sp, r7
 5060              		.cfi_def_cfa_register 13
 5061              		@ sp needed
 5062 003e 80BD     		pop	{r7, pc}
 5063              		.cfi_endproc
 5064              	.LFE469:
 5066              		.section	.text.HAL_SD_Abort,"ax",%progbits
 5067              		.align	1
 5068              		.global	HAL_SD_Abort
 5069              		.syntax unified
 5070              		.thumb
 5071              		.thumb_func
 5073              	HAL_SD_Abort:
 5074              	.LFB470:
3116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Abort the current transfer and disable the SD.
3119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: pointer to a SD_HandleTypeDef structure that contains
3120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *                the configuration information for SD module.
3121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
3122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_Abort(SD_HandleTypeDef *hsd)
3124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 5075              		.loc 1 3124 1
 5076              		.cfi_startproc
 5077              		@ args = 0, pretend = 0, frame = 16
 5078              		@ frame_needed = 1, uses_anonymous_args = 0
 5079 0000 80B5     		push	{r7, lr}
 5080              		.cfi_def_cfa_offset 8
 5081              		.cfi_offset 7, -8
 5082              		.cfi_offset 14, -4
 5083 0002 84B0     		sub	sp, sp, #16
 5084              		.cfi_def_cfa_offset 24
 5085 0004 00AF     		add	r7, sp, #0
 5086              		.cfi_def_cfa_register 7
 5087 0006 7860     		str	r0, [r7, #4]
3125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_CardStateTypeDef CardState;
3126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
3127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t context = hsd->Context;
 5088              		.loc 1 3127 12
 5089 0008 7B68     		ldr	r3, [r7, #4]
 5090 000a 1B6B     		ldr	r3, [r3, #48]
 5091 000c FB60     		str	r3, [r7, #12]
3128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
3129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
3130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* DIsable All interrupts */
ARM GAS  /tmp/ccsLb3N5.s 			page 146


3132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_DISABLE_IT(hsd, SDMMC_IT_DATAEND | SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | \
 5092              		.loc 1 3132 3
 5093 000e 7B68     		ldr	r3, [r7, #4]
 5094 0010 1B68     		ldr	r3, [r3]
 5095 0012 DA6B     		ldr	r2, [r3, #60]
 5096 0014 7B68     		ldr	r3, [r7, #4]
 5097 0016 1B68     		ldr	r3, [r3]
 5098 0018 22F49D72 		bic	r2, r2, #314
 5099 001c DA63     		str	r2, [r3, #60]
3133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                       SDMMC_IT_TXUNDERR | SDMMC_IT_RXOVERR);
3134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Clear All flags */
3136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
 5100              		.loc 1 3136 3
 5101 001e 7B68     		ldr	r3, [r7, #4]
 5102 0020 1B68     		ldr	r3, [r3]
 5103 0022 40F23A52 		movw	r2, #1338
 5104 0026 9A63     		str	r2, [r3, #56]
3137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   CLEAR_BIT(hsd->Instance->DCTRL, SDMMC_DCTRL_DTEN);
 5105              		.loc 1 3138 3
 5106 0028 7B68     		ldr	r3, [r7, #4]
 5107 002a 1B68     		ldr	r3, [r3]
 5108 002c DA6A     		ldr	r2, [r3, #44]
 5109 002e 7B68     		ldr	r3, [r7, #4]
 5110 0030 1B68     		ldr	r3, [r3]
 5111 0032 22F00102 		bic	r2, r2, #1
 5112 0036 DA62     		str	r2, [r3, #44]
3139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
3140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* If IDMA Context, disable Internal DMA */
3141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->Instance->IDMACTRL = SDMMC_DISABLE_IDMA;
3142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   CLEAR_BIT(hsd->Instance->DCTRL, SDMMC_DCTRL_DTEN);
 5113              		.loc 1 3143 3
 5114 0038 7B68     		ldr	r3, [r7, #4]
 5115 003a 1B68     		ldr	r3, [r3]
 5116 003c DA6A     		ldr	r2, [r3, #44]
 5117 003e 7B68     		ldr	r3, [r7, #4]
 5118 0040 1B68     		ldr	r3, [r3]
 5119 0042 22F00102 		bic	r2, r2, #1
 5120 0046 DA62     		str	r2, [r3, #44]
3144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((context & SD_CONTEXT_DMA) != 0U)
 5121              		.loc 1 3145 16
 5122 0048 FB68     		ldr	r3, [r7, #12]
 5123 004a 03F08003 		and	r3, r3, #128
 5124              		.loc 1 3145 6
 5125 004e 002B     		cmp	r3, #0
 5126 0050 38D0     		beq	.L208
3146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Disable the SD DMA request */
3148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL &= (uint32_t)~((uint32_t)SDMMC_DCTRL_DMAEN);
 5127              		.loc 1 3148 8
 5128 0052 7B68     		ldr	r3, [r7, #4]
 5129 0054 1B68     		ldr	r3, [r3]
 5130              		.loc 1 3148 18
 5131 0056 DA6A     		ldr	r2, [r3, #44]
ARM GAS  /tmp/ccsLb3N5.s 			page 147


 5132              		.loc 1 3148 8
 5133 0058 7B68     		ldr	r3, [r7, #4]
 5134 005a 1B68     		ldr	r3, [r3]
 5135              		.loc 1 3148 26
 5136 005c 22F00802 		bic	r2, r2, #8
 5137 0060 DA62     		str	r2, [r3, #44]
3149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Abort the SD DMA Tx channel */
3151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (((context & SD_CONTEXT_WRITE_SINGLE_BLOCK) != 0U) || ((context & SD_CONTEXT_WRITE_MULTIPLE_
 5138              		.loc 1 3151 19
 5139 0062 FB68     		ldr	r3, [r7, #12]
 5140 0064 03F01003 		and	r3, r3, #16
 5141              		.loc 1 3151 8
 5142 0068 002B     		cmp	r3, #0
 5143 006a 04D1     		bne	.L209
 5144              		.loc 1 3151 72 discriminator 1
 5145 006c FB68     		ldr	r3, [r7, #12]
 5146 006e 03F02003 		and	r3, r3, #32
 5147              		.loc 1 3151 59 discriminator 1
 5148 0072 002B     		cmp	r3, #0
 5149 0074 0ED0     		beq	.L210
 5150              	.L209:
3152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (HAL_DMA_Abort(hsd->hdmatx) != HAL_OK)
 5151              		.loc 1 3153 11
 5152 0076 7B68     		ldr	r3, [r7, #4]
 5153 0078 DB6B     		ldr	r3, [r3, #60]
 5154 007a 1846     		mov	r0, r3
 5155 007c FFF7FEFF 		bl	HAL_DMA_Abort
 5156 0080 0346     		mov	r3, r0
 5157              		.loc 1 3153 10 discriminator 1
 5158 0082 002B     		cmp	r3, #0
 5159 0084 1ED0     		beq	.L208
3154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
3155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_DMA;
 5160              		.loc 1 3155 12
 5161 0086 7B68     		ldr	r3, [r7, #4]
 5162 0088 9B6B     		ldr	r3, [r3, #56]
 5163              		.loc 1 3155 24
 5164 008a 43F08042 		orr	r2, r3, #1073741824
 5165 008e 7B68     		ldr	r3, [r7, #4]
 5166 0090 9A63     		str	r2, [r3, #56]
3153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 5167              		.loc 1 3153 10
 5168 0092 17E0     		b	.L208
 5169              	.L210:
3156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
3157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Abort the SD DMA Rx channel */
3159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if (((context & SD_CONTEXT_READ_SINGLE_BLOCK) != 0U) || ((context & SD_CONTEXT_READ_MULTIP
 5170              		.loc 1 3159 24
 5171 0094 FB68     		ldr	r3, [r7, #12]
 5172 0096 03F00103 		and	r3, r3, #1
 5173              		.loc 1 3159 13
 5174 009a 002B     		cmp	r3, #0
 5175 009c 04D1     		bne	.L212
 5176              		.loc 1 3159 76 discriminator 1
ARM GAS  /tmp/ccsLb3N5.s 			page 148


 5177 009e FB68     		ldr	r3, [r7, #12]
 5178 00a0 03F00203 		and	r3, r3, #2
 5179              		.loc 1 3159 63 discriminator 1
 5180 00a4 002B     		cmp	r3, #0
 5181 00a6 0DD0     		beq	.L208
 5182              	.L212:
3160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (HAL_DMA_Abort(hsd->hdmarx) != HAL_OK)
 5183              		.loc 1 3161 11
 5184 00a8 7B68     		ldr	r3, [r7, #4]
 5185 00aa 1B6C     		ldr	r3, [r3, #64]
 5186 00ac 1846     		mov	r0, r3
 5187 00ae FFF7FEFF 		bl	HAL_DMA_Abort
 5188 00b2 0346     		mov	r3, r0
 5189              		.loc 1 3161 10 discriminator 1
 5190 00b4 002B     		cmp	r3, #0
 5191 00b6 05D0     		beq	.L208
3162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
3163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->ErrorCode |= HAL_SD_ERROR_DMA;
 5192              		.loc 1 3163 12
 5193 00b8 7B68     		ldr	r3, [r7, #4]
 5194 00ba 9B6B     		ldr	r3, [r3, #56]
 5195              		.loc 1 3163 24
 5196 00bc 43F08042 		orr	r2, r3, #1073741824
 5197 00c0 7B68     		ldr	r3, [r7, #4]
 5198 00c2 9A63     		str	r2, [r3, #56]
 5199              	.L208:
3164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
3165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
3167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Nothing to do */
3169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
3172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
3173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_READY;
 5200              		.loc 1 3174 14
 5201 00c4 7B68     		ldr	r3, [r7, #4]
 5202 00c6 0122     		movs	r2, #1
 5203 00c8 83F83420 		strb	r2, [r3, #52]
3175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Initialize the SD operation */
3177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->Context = SD_CONTEXT_NONE;
 5204              		.loc 1 3177 16
 5205 00cc 7B68     		ldr	r3, [r7, #4]
 5206 00ce 0022     		movs	r2, #0
 5207 00d0 1A63     		str	r2, [r3, #48]
3178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   CardState = HAL_SD_GetCardState(hsd);
 5208              		.loc 1 3179 15
 5209 00d2 7868     		ldr	r0, [r7, #4]
 5210 00d4 FFF7FEFF 		bl	HAL_SD_GetCardState
 5211 00d8 B860     		str	r0, [r7, #8]
3180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((CardState == HAL_SD_CARD_RECEIVING) || (CardState == HAL_SD_CARD_SENDING))
 5212              		.loc 1 3180 6
ARM GAS  /tmp/ccsLb3N5.s 			page 149


 5213 00da BB68     		ldr	r3, [r7, #8]
 5214 00dc 062B     		cmp	r3, #6
 5215 00de 02D0     		beq	.L213
 5216              		.loc 1 3180 44 discriminator 1
 5217 00e0 BB68     		ldr	r3, [r7, #8]
 5218 00e2 052B     		cmp	r3, #5
 5219 00e4 07D1     		bne	.L214
 5220              	.L213:
3181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = SDMMC_CmdStopTransfer(hsd->Instance);
 5221              		.loc 1 3182 22
 5222 00e6 7B68     		ldr	r3, [r7, #4]
 5223 00e8 1B68     		ldr	r3, [r3]
 5224 00ea 1846     		mov	r0, r3
 5225 00ec FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 5226 00f0 0246     		mov	r2, r0
 5227              		.loc 1 3182 20 discriminator 1
 5228 00f2 7B68     		ldr	r3, [r7, #4]
 5229 00f4 9A63     		str	r2, [r3, #56]
 5230              	.L214:
3183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->ErrorCode != HAL_SD_ERROR_NONE)
 5231              		.loc 1 3184 10
 5232 00f6 7B68     		ldr	r3, [r7, #4]
 5233 00f8 9B6B     		ldr	r3, [r3, #56]
 5234              		.loc 1 3184 6
 5235 00fa 002B     		cmp	r3, #0
 5236 00fc 01D0     		beq	.L215
3185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
 5237              		.loc 1 3186 12
 5238 00fe 0123     		movs	r3, #1
 5239 0100 00E0     		b	.L216
 5240              	.L215:
3187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_OK;
 5241              		.loc 1 3188 10
 5242 0102 0023     		movs	r3, #0
 5243              	.L216:
3189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 5244              		.loc 1 3189 1
 5245 0104 1846     		mov	r0, r3
 5246 0106 1037     		adds	r7, r7, #16
 5247              		.cfi_def_cfa_offset 8
 5248 0108 BD46     		mov	sp, r7
 5249              		.cfi_def_cfa_register 13
 5250              		@ sp needed
 5251 010a 80BD     		pop	{r7, pc}
 5252              		.cfi_endproc
 5253              	.LFE470:
 5255              		.section	.text.HAL_SD_Abort_IT,"ax",%progbits
 5256              		.align	1
 5257              		.global	HAL_SD_Abort_IT
 5258              		.syntax unified
 5259              		.thumb
 5260              		.thumb_func
 5262              	HAL_SD_Abort_IT:
ARM GAS  /tmp/ccsLb3N5.s 			page 150


 5263              	.LFB471:
3190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Abort the current transfer and disable the SD (IT mode).
3193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: pointer to a SD_HandleTypeDef structure that contains
3194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *                the configuration information for SD module.
3195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval HAL status
3196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_Abort_IT(SD_HandleTypeDef *hsd)
3198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 5264              		.loc 1 3198 1
 5265              		.cfi_startproc
 5266              		@ args = 0, pretend = 0, frame = 16
 5267              		@ frame_needed = 1, uses_anonymous_args = 0
 5268 0000 80B5     		push	{r7, lr}
 5269              		.cfi_def_cfa_offset 8
 5270              		.cfi_offset 7, -8
 5271              		.cfi_offset 14, -4
 5272 0002 84B0     		sub	sp, sp, #16
 5273              		.cfi_def_cfa_offset 24
 5274 0004 00AF     		add	r7, sp, #0
 5275              		.cfi_def_cfa_register 7
 5276 0006 7860     		str	r0, [r7, #4]
3199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_CardStateTypeDef CardState;
3200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
3201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t context = hsd->Context;
 5277              		.loc 1 3201 12
 5278 0008 7B68     		ldr	r3, [r7, #4]
 5279 000a 1B6B     		ldr	r3, [r3, #48]
 5280 000c FB60     		str	r3, [r7, #12]
3202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
3203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
3204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Disable All interrupts */
3206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_DISABLE_IT(hsd, SDMMC_IT_DATAEND | SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | \
 5281              		.loc 1 3206 3
 5282 000e 7B68     		ldr	r3, [r7, #4]
 5283 0010 1B68     		ldr	r3, [r3]
 5284 0012 DA6B     		ldr	r2, [r3, #60]
 5285 0014 7B68     		ldr	r3, [r7, #4]
 5286 0016 1B68     		ldr	r3, [r3]
 5287 0018 22F49D72 		bic	r2, r2, #314
 5288 001c DA63     		str	r2, [r3, #60]
3207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                       SDMMC_IT_TXUNDERR | SDMMC_IT_RXOVERR);
3208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
3210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* If IDMA Context, disable Internal DMA */
3211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->Instance->IDMACTRL = SDMMC_DISABLE_IDMA;
3212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Clear All flags */
3214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
3215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   CardState = HAL_SD_GetCardState(hsd);
3217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_READY;
3218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((CardState == HAL_SD_CARD_RECEIVING) || (CardState == HAL_SD_CARD_SENDING))
3220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
ARM GAS  /tmp/ccsLb3N5.s 			page 151


3221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode = SDMMC_CmdStopTransfer(hsd->Instance);
3222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->ErrorCode != HAL_SD_ERROR_NONE)
3225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_ERROR;
3227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
3229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
3231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->AbortCpltCallback(hsd);
3232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     HAL_SD_AbortCallback(hsd);
3234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   CLEAR_BIT(hsd->Instance->DCTRL, SDMMC_DCTRL_DTEN);
 5289              		.loc 1 3237 3
 5290 001e 7B68     		ldr	r3, [r7, #4]
 5291 0020 1B68     		ldr	r3, [r3]
 5292 0022 DA6A     		ldr	r2, [r3, #44]
 5293 0024 7B68     		ldr	r3, [r7, #4]
 5294 0026 1B68     		ldr	r3, [r3]
 5295 0028 22F00102 		bic	r2, r2, #1
 5296 002c DA62     		str	r2, [r3, #44]
3238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((context & SD_CONTEXT_DMA) != 0U)
 5297              		.loc 1 3239 16
 5298 002e FB68     		ldr	r3, [r7, #12]
 5299 0030 03F08003 		and	r3, r3, #128
 5300              		.loc 1 3239 6
 5301 0034 002B     		cmp	r3, #0
 5302 0036 3BD0     		beq	.L218
3240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Disable the SD DMA request */
3242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Instance->DCTRL &= (uint32_t)~((uint32_t)SDMMC_DCTRL_DMAEN);
 5303              		.loc 1 3242 8
 5304 0038 7B68     		ldr	r3, [r7, #4]
 5305 003a 1B68     		ldr	r3, [r3]
 5306              		.loc 1 3242 18
 5307 003c DA6A     		ldr	r2, [r3, #44]
 5308              		.loc 1 3242 8
 5309 003e 7B68     		ldr	r3, [r7, #4]
 5310 0040 1B68     		ldr	r3, [r3]
 5311              		.loc 1 3242 26
 5312 0042 22F00802 		bic	r2, r2, #8
 5313 0046 DA62     		str	r2, [r3, #44]
3243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Abort the SD DMA Tx channel */
3245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (((context & SD_CONTEXT_WRITE_SINGLE_BLOCK) != 0U) || ((context & SD_CONTEXT_WRITE_MULTIPLE_
 5314              		.loc 1 3245 19
 5315 0048 FB68     		ldr	r3, [r7, #12]
 5316 004a 03F01003 		and	r3, r3, #16
 5317              		.loc 1 3245 8
 5318 004e 002B     		cmp	r3, #0
 5319 0050 04D1     		bne	.L219
 5320              		.loc 1 3245 72 discriminator 1
ARM GAS  /tmp/ccsLb3N5.s 			page 152


 5321 0052 FB68     		ldr	r3, [r7, #12]
 5322 0054 03F02003 		and	r3, r3, #32
 5323              		.loc 1 3245 59 discriminator 1
 5324 0058 002B     		cmp	r3, #0
 5325 005a 0FD0     		beq	.L220
 5326              	.L219:
3246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->hdmatx->XferAbortCallback = SD_DMATxAbort;
 5327              		.loc 1 3247 10
 5328 005c 7B68     		ldr	r3, [r7, #4]
 5329 005e DB6B     		ldr	r3, [r3, #60]
 5330              		.loc 1 3247 38
 5331 0060 294A     		ldr	r2, .L229
 5332 0062 9A63     		str	r2, [r3, #56]
3248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (HAL_DMA_Abort_IT(hsd->hdmatx) != HAL_OK)
 5333              		.loc 1 3248 11
 5334 0064 7B68     		ldr	r3, [r7, #4]
 5335 0066 DB6B     		ldr	r3, [r3, #60]
 5336 0068 1846     		mov	r0, r3
 5337 006a FFF7FEFF 		bl	HAL_DMA_Abort_IT
 5338 006e 0346     		mov	r3, r0
 5339              		.loc 1 3248 10 discriminator 1
 5340 0070 002B     		cmp	r3, #0
 5341 0072 44D0     		beq	.L224
3249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
3250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->hdmatx = NULL;
 5342              		.loc 1 3250 21
 5343 0074 7B68     		ldr	r3, [r7, #4]
 5344 0076 0022     		movs	r2, #0
 5345 0078 DA63     		str	r2, [r3, #60]
3248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (HAL_DMA_Abort_IT(hsd->hdmatx) != HAL_OK)
 5346              		.loc 1 3248 10
 5347 007a 40E0     		b	.L224
 5348              	.L220:
3251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
3252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Abort the SD DMA Rx channel */
3254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if (((context & SD_CONTEXT_READ_SINGLE_BLOCK) != 0U) || ((context & SD_CONTEXT_READ_MULTIP
 5349              		.loc 1 3254 24
 5350 007c FB68     		ldr	r3, [r7, #12]
 5351 007e 03F00103 		and	r3, r3, #1
 5352              		.loc 1 3254 13
 5353 0082 002B     		cmp	r3, #0
 5354 0084 04D1     		bne	.L223
 5355              		.loc 1 3254 76 discriminator 1
 5356 0086 FB68     		ldr	r3, [r7, #12]
 5357 0088 03F00203 		and	r3, r3, #2
 5358              		.loc 1 3254 63 discriminator 1
 5359 008c 002B     		cmp	r3, #0
 5360 008e 36D0     		beq	.L224
 5361              	.L223:
3255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->hdmarx->XferAbortCallback = SD_DMARxAbort;
 5362              		.loc 1 3256 10
 5363 0090 7B68     		ldr	r3, [r7, #4]
 5364 0092 1B6C     		ldr	r3, [r3, #64]
 5365              		.loc 1 3256 38
ARM GAS  /tmp/ccsLb3N5.s 			page 153


 5366 0094 1D4A     		ldr	r2, .L229+4
 5367 0096 9A63     		str	r2, [r3, #56]
3257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if (HAL_DMA_Abort_IT(hsd->hdmarx) != HAL_OK)
 5368              		.loc 1 3257 11
 5369 0098 7B68     		ldr	r3, [r7, #4]
 5370 009a 1B6C     		ldr	r3, [r3, #64]
 5371 009c 1846     		mov	r0, r3
 5372 009e FFF7FEFF 		bl	HAL_DMA_Abort_IT
 5373 00a2 0346     		mov	r3, r0
 5374              		.loc 1 3257 10 discriminator 1
 5375 00a4 002B     		cmp	r3, #0
 5376 00a6 2AD0     		beq	.L224
3258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
3259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->hdmarx = NULL;
 5377              		.loc 1 3259 21
 5378 00a8 7B68     		ldr	r3, [r7, #4]
 5379 00aa 0022     		movs	r2, #0
 5380 00ac 1A64     		str	r2, [r3, #64]
 5381 00ae 26E0     		b	.L224
 5382              	.L218:
3260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
3261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
3263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Nothing to do */
3265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* No transfer ongoing on both DMA channels*/
3268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
3269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear All flags */
3271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
 5383              		.loc 1 3271 5
 5384 00b0 7B68     		ldr	r3, [r7, #4]
 5385 00b2 1B68     		ldr	r3, [r3]
 5386 00b4 40F23A52 		movw	r2, #1338
 5387 00b8 9A63     		str	r2, [r3, #56]
3272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     CardState = HAL_SD_GetCardState(hsd);
 5388              		.loc 1 3273 17
 5389 00ba 7868     		ldr	r0, [r7, #4]
 5390 00bc FFF7FEFF 		bl	HAL_SD_GetCardState
 5391 00c0 B860     		str	r0, [r7, #8]
3274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 5392              		.loc 1 3274 16
 5393 00c2 7B68     		ldr	r3, [r7, #4]
 5394 00c4 0122     		movs	r2, #1
 5395 00c6 83F83420 		strb	r2, [r3, #52]
3275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Context = SD_CONTEXT_NONE;
 5396              		.loc 1 3275 18
 5397 00ca 7B68     		ldr	r3, [r7, #4]
 5398 00cc 0022     		movs	r2, #0
 5399 00ce 1A63     		str	r2, [r3, #48]
3276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((CardState == HAL_SD_CARD_RECEIVING) || (CardState == HAL_SD_CARD_SENDING))
 5400              		.loc 1 3276 8
 5401 00d0 BB68     		ldr	r3, [r7, #8]
 5402 00d2 062B     		cmp	r3, #6
ARM GAS  /tmp/ccsLb3N5.s 			page 154


 5403 00d4 02D0     		beq	.L225
 5404              		.loc 1 3276 46 discriminator 1
 5405 00d6 BB68     		ldr	r3, [r7, #8]
 5406 00d8 052B     		cmp	r3, #5
 5407 00da 07D1     		bne	.L226
 5408              	.L225:
3277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode = SDMMC_CmdStopTransfer(hsd->Instance);
 5409              		.loc 1 3278 24
 5410 00dc 7B68     		ldr	r3, [r7, #4]
 5411 00de 1B68     		ldr	r3, [r3]
 5412 00e0 1846     		mov	r0, r3
 5413 00e2 FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 5414 00e6 0246     		mov	r2, r0
 5415              		.loc 1 3278 22 discriminator 1
 5416 00e8 7B68     		ldr	r3, [r7, #4]
 5417 00ea 9A63     		str	r2, [r3, #56]
 5418              	.L226:
3279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->ErrorCode != HAL_SD_ERROR_NONE)
 5419              		.loc 1 3280 12
 5420 00ec 7B68     		ldr	r3, [r7, #4]
 5421 00ee 9B6B     		ldr	r3, [r3, #56]
 5422              		.loc 1 3280 8
 5423 00f0 002B     		cmp	r3, #0
 5424 00f2 01D0     		beq	.L227
3281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_ERROR;
 5425              		.loc 1 3282 14
 5426 00f4 0123     		movs	r3, #1
 5427 00f6 03E0     		b	.L228
 5428              	.L227:
3283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
3285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
3287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->AbortCpltCallback(hsd);
3288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       HAL_SD_AbortCallback(hsd);
 5429              		.loc 1 3289 7
 5430 00f8 7868     		ldr	r0, [r7, #4]
 5431 00fa FFF7FEFF 		bl	HAL_SD_AbortCallback
 5432              	.L224:
3290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
3294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
3295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_OK;
 5433              		.loc 1 3296 10
 5434 00fe 0023     		movs	r3, #0
 5435              	.L228:
3297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 5436              		.loc 1 3297 1
 5437 0100 1846     		mov	r0, r3
 5438 0102 1037     		adds	r7, r7, #16
ARM GAS  /tmp/ccsLb3N5.s 			page 155


 5439              		.cfi_def_cfa_offset 8
 5440 0104 BD46     		mov	sp, r7
 5441              		.cfi_def_cfa_register 13
 5442              		@ sp needed
 5443 0106 80BD     		pop	{r7, pc}
 5444              	.L230:
 5445              		.align	2
 5446              	.L229:
 5447 0108 00000000 		.word	SD_DMATxAbort
 5448 010c 00000000 		.word	SD_DMARxAbort
 5449              		.cfi_endproc
 5450              	.LFE471:
 5452              		.section	.text.SD_DMATransmitCplt,"ax",%progbits
 5453              		.align	1
 5454              		.syntax unified
 5455              		.thumb
 5456              		.thumb_func
 5458              	SD_DMATransmitCplt:
 5459              	.LFB472:
3298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @}
3301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @}
3305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /* Private function ----------------------------------------------------------*/
3308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /** @addtogroup SD_Private_Functions
3309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @{
3310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if !defined(STM32L4P5xx) && !defined(STM32L4Q5xx) && !defined(STM32L4R5xx) && !defined(STM32L4R7xx
3312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  DMA SD transmit process complete callback
3314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hdma: DMA handle
3315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
3316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_DMATransmitCplt(DMA_HandleTypeDef *hdma)
3318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 5460              		.loc 1 3318 1
 5461              		.cfi_startproc
 5462              		@ args = 0, pretend = 0, frame = 16
 5463              		@ frame_needed = 1, uses_anonymous_args = 0
 5464              		@ link register save eliminated.
 5465 0000 80B4     		push	{r7}
 5466              		.cfi_def_cfa_offset 4
 5467              		.cfi_offset 7, -4
 5468 0002 85B0     		sub	sp, sp, #20
 5469              		.cfi_def_cfa_offset 24
 5470 0004 00AF     		add	r7, sp, #0
 5471              		.cfi_def_cfa_register 7
 5472 0006 7860     		str	r0, [r7, #4]
3319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef *)(hdma->Parent);
 5473              		.loc 1 3319 21
 5474 0008 7B68     		ldr	r3, [r7, #4]
 5475 000a 9B6A     		ldr	r3, [r3, #40]
ARM GAS  /tmp/ccsLb3N5.s 			page 156


 5476 000c FB60     		str	r3, [r7, #12]
3320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Enable DATAEND Interrupt */
3322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_ENABLE_IT(hsd, (SDMMC_IT_DATAEND));
 5477              		.loc 1 3322 3
 5478 000e FB68     		ldr	r3, [r7, #12]
 5479 0010 1B68     		ldr	r3, [r3]
 5480 0012 DA6B     		ldr	r2, [r3, #60]
 5481 0014 FB68     		ldr	r3, [r7, #12]
 5482 0016 1B68     		ldr	r3, [r3]
 5483 0018 42F48072 		orr	r2, r2, #256
 5484 001c DA63     		str	r2, [r3, #60]
3323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 5485              		.loc 1 3323 1
 5486 001e 00BF     		nop
 5487 0020 1437     		adds	r7, r7, #20
 5488              		.cfi_def_cfa_offset 4
 5489 0022 BD46     		mov	sp, r7
 5490              		.cfi_def_cfa_register 13
 5491              		@ sp needed
 5492 0024 5DF8047B 		ldr	r7, [sp], #4
 5493              		.cfi_restore 7
 5494              		.cfi_def_cfa_offset 0
 5495 0028 7047     		bx	lr
 5496              		.cfi_endproc
 5497              	.LFE472:
 5499              		.section	.text.SD_DMAReceiveCplt,"ax",%progbits
 5500              		.align	1
 5501              		.syntax unified
 5502              		.thumb
 5503              		.thumb_func
 5505              	SD_DMAReceiveCplt:
 5506              	.LFB473:
3324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  DMA SD receive process complete callback
3327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hdma: DMA handle
3328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
3329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_DMAReceiveCplt(DMA_HandleTypeDef *hdma)
3331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 5507              		.loc 1 3331 1
 5508              		.cfi_startproc
 5509              		@ args = 0, pretend = 0, frame = 16
 5510              		@ frame_needed = 1, uses_anonymous_args = 0
 5511 0000 80B5     		push	{r7, lr}
 5512              		.cfi_def_cfa_offset 8
 5513              		.cfi_offset 7, -8
 5514              		.cfi_offset 14, -4
 5515 0002 84B0     		sub	sp, sp, #16
 5516              		.cfi_def_cfa_offset 24
 5517 0004 00AF     		add	r7, sp, #0
 5518              		.cfi_def_cfa_register 7
 5519 0006 7860     		str	r0, [r7, #4]
3332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef *)(hdma->Parent);
 5520              		.loc 1 3332 21
 5521 0008 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsLb3N5.s 			page 157


 5522 000a 9B6A     		ldr	r3, [r3, #40]
 5523 000c FB60     		str	r3, [r7, #12]
3333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
3334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Send stop command in multiblock write */
3336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->Context == (SD_CONTEXT_READ_MULTIPLE_BLOCK | SD_CONTEXT_DMA))
 5524              		.loc 1 3336 10
 5525 000e FB68     		ldr	r3, [r7, #12]
 5526 0010 1B6B     		ldr	r3, [r3, #48]
 5527              		.loc 1 3336 6
 5528 0012 822B     		cmp	r3, #130
 5529 0014 11D1     		bne	.L233
3337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdStopTransfer(hsd->Instance);
 5530              		.loc 1 3338 18
 5531 0016 FB68     		ldr	r3, [r7, #12]
 5532 0018 1B68     		ldr	r3, [r3]
 5533 001a 1846     		mov	r0, r3
 5534 001c FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 5535 0020 B860     		str	r0, [r7, #8]
3339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 5536              		.loc 1 3339 8
 5537 0022 BB68     		ldr	r3, [r7, #8]
 5538 0024 002B     		cmp	r3, #0
 5539 0026 08D0     		beq	.L233
3340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= errorstate;
 5540              		.loc 1 3341 10
 5541 0028 FB68     		ldr	r3, [r7, #12]
 5542 002a 9A6B     		ldr	r2, [r3, #56]
 5543              		.loc 1 3341 22
 5544 002c BB68     		ldr	r3, [r7, #8]
 5545 002e 1A43     		orrs	r2, r2, r3
 5546 0030 FB68     		ldr	r3, [r7, #12]
 5547 0032 9A63     		str	r2, [r3, #56]
3342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if (USE_HAL_SD_REGISTER_CALLBACKS == 1)
3343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCallback(hsd);
3344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       HAL_SD_ErrorCallback(hsd);
 5548              		.loc 1 3345 7
 5549 0034 F868     		ldr	r0, [r7, #12]
 5550 0036 FFF7FEFF 		bl	HAL_SD_ErrorCallback
 5551              	.L233:
3346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Disable the DMA transfer for transmit request by setting the DMAEN bit
3351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   in the SD DCTRL register */
3352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->Instance->DCTRL &= (uint32_t)~((uint32_t)SDMMC_DCTRL_DMAEN);
 5552              		.loc 1 3352 6
 5553 003a FB68     		ldr	r3, [r7, #12]
 5554 003c 1B68     		ldr	r3, [r3]
 5555              		.loc 1 3352 16
 5556 003e DA6A     		ldr	r2, [r3, #44]
 5557              		.loc 1 3352 6
 5558 0040 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsLb3N5.s 			page 158


 5559 0042 1B68     		ldr	r3, [r3]
 5560              		.loc 1 3352 24
 5561 0044 22F00802 		bic	r2, r2, #8
 5562 0048 DA62     		str	r2, [r3, #44]
3353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Clear all the static flags */
3355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
 5563              		.loc 1 3355 3
 5564 004a FB68     		ldr	r3, [r7, #12]
 5565 004c 1B68     		ldr	r3, [r3]
 5566 004e 40F23A52 		movw	r2, #1338
 5567 0052 9A63     		str	r2, [r3, #56]
3356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_READY;
 5568              		.loc 1 3357 14
 5569 0054 FB68     		ldr	r3, [r7, #12]
 5570 0056 0122     		movs	r2, #1
 5571 0058 83F83420 		strb	r2, [r3, #52]
3358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->Context = SD_CONTEXT_NONE;
 5572              		.loc 1 3358 16
 5573 005c FB68     		ldr	r3, [r7, #12]
 5574 005e 0022     		movs	r2, #0
 5575 0060 1A63     		str	r2, [r3, #48]
3359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if (USE_HAL_SD_REGISTER_CALLBACKS == 1)
3361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->RxCpltCallback(hsd);
3362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_RxCpltCallback(hsd);
 5576              		.loc 1 3363 3
 5577 0062 F868     		ldr	r0, [r7, #12]
 5578 0064 FFF7FEFF 		bl	HAL_SD_RxCpltCallback
3364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 5579              		.loc 1 3365 1
 5580 0068 00BF     		nop
 5581 006a 1037     		adds	r7, r7, #16
 5582              		.cfi_def_cfa_offset 8
 5583 006c BD46     		mov	sp, r7
 5584              		.cfi_def_cfa_register 13
 5585              		@ sp needed
 5586 006e 80BD     		pop	{r7, pc}
 5587              		.cfi_endproc
 5588              	.LFE473:
 5590              		.section	.text.SD_DMAError,"ax",%progbits
 5591              		.align	1
 5592              		.syntax unified
 5593              		.thumb
 5594              		.thumb_func
 5596              	SD_DMAError:
 5597              	.LFB474:
3366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  DMA SD communication error callback
3369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hdma: DMA handle
3370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
3371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_DMAError(DMA_HandleTypeDef *hdma)
ARM GAS  /tmp/ccsLb3N5.s 			page 159


3373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 5598              		.loc 1 3373 1
 5599              		.cfi_startproc
 5600              		@ args = 0, pretend = 0, frame = 24
 5601              		@ frame_needed = 1, uses_anonymous_args = 0
 5602 0000 80B5     		push	{r7, lr}
 5603              		.cfi_def_cfa_offset 8
 5604              		.cfi_offset 7, -8
 5605              		.cfi_offset 14, -4
 5606 0002 86B0     		sub	sp, sp, #24
 5607              		.cfi_def_cfa_offset 32
 5608 0004 00AF     		add	r7, sp, #0
 5609              		.cfi_def_cfa_register 7
 5610 0006 7860     		str	r0, [r7, #4]
3374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef *)(hdma->Parent);
 5611              		.loc 1 3374 21
 5612 0008 7B68     		ldr	r3, [r7, #4]
 5613 000a 9B6A     		ldr	r3, [r3, #40]
 5614 000c 7B61     		str	r3, [r7, #20]
3375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_CardStateTypeDef CardState;
3376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t RxErrorCode;
3377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t TxErrorCode;
3378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   RxErrorCode = hsd->hdmarx->ErrorCode;
 5615              		.loc 1 3379 20
 5616 000e 7B69     		ldr	r3, [r7, #20]
 5617 0010 1B6C     		ldr	r3, [r3, #64]
 5618              		.loc 1 3379 15
 5619 0012 DB6B     		ldr	r3, [r3, #60]
 5620 0014 3B61     		str	r3, [r7, #16]
3380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   TxErrorCode = hsd->hdmatx->ErrorCode;
 5621              		.loc 1 3380 20
 5622 0016 7B69     		ldr	r3, [r7, #20]
 5623 0018 DB6B     		ldr	r3, [r3, #60]
 5624              		.loc 1 3380 15
 5625 001a DB6B     		ldr	r3, [r3, #60]
 5626 001c FB60     		str	r3, [r7, #12]
3381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((RxErrorCode == HAL_DMA_ERROR_TE) || (TxErrorCode == HAL_DMA_ERROR_TE))
 5627              		.loc 1 3381 6
 5628 001e 3B69     		ldr	r3, [r7, #16]
 5629 0020 012B     		cmp	r3, #1
 5630 0022 02D0     		beq	.L235
 5631              		.loc 1 3381 41 discriminator 1
 5632 0024 FB68     		ldr	r3, [r7, #12]
 5633 0026 012B     		cmp	r3, #1
 5634 0028 2DD1     		bne	.L236
 5635              	.L235:
3382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear All flags */
3384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_FLAGS);
 5636              		.loc 1 3384 5
 5637 002a 7B69     		ldr	r3, [r7, #20]
 5638 002c 1B68     		ldr	r3, [r3]
 5639 002e 194A     		ldr	r2, .L239
 5640 0030 9A63     		str	r2, [r3, #56]
3385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Disable All interrupts */
ARM GAS  /tmp/ccsLb3N5.s 			page 160


3387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_DISABLE_IT(hsd, SDMMC_IT_DATAEND | SDMMC_IT_DCRCFAIL | SDMMC_IT_DTIMEOUT | \
 5641              		.loc 1 3387 5
 5642 0032 7B69     		ldr	r3, [r7, #20]
 5643 0034 1B68     		ldr	r3, [r3]
 5644 0036 DA6B     		ldr	r2, [r3, #60]
 5645 0038 7B69     		ldr	r3, [r7, #20]
 5646 003a 1B68     		ldr	r3, [r3]
 5647 003c 22F49D72 		bic	r2, r2, #314
 5648 0040 DA63     		str	r2, [r3, #60]
3388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                         SDMMC_IT_TXUNDERR | SDMMC_IT_RXOVERR);
3389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_DMA;
 5649              		.loc 1 3390 8
 5650 0042 7B69     		ldr	r3, [r7, #20]
 5651 0044 9B6B     		ldr	r3, [r3, #56]
 5652              		.loc 1 3390 20
 5653 0046 43F08042 		orr	r2, r3, #1073741824
 5654 004a 7B69     		ldr	r3, [r7, #20]
 5655 004c 9A63     		str	r2, [r3, #56]
3391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     CardState = HAL_SD_GetCardState(hsd);
 5656              		.loc 1 3391 17
 5657 004e 7869     		ldr	r0, [r7, #20]
 5658 0050 FFF7FEFF 		bl	HAL_SD_GetCardState
 5659 0054 B860     		str	r0, [r7, #8]
3392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((CardState == HAL_SD_CARD_RECEIVING) || (CardState == HAL_SD_CARD_SENDING))
 5660              		.loc 1 3392 8
 5661 0056 BB68     		ldr	r3, [r7, #8]
 5662 0058 062B     		cmp	r3, #6
 5663 005a 02D0     		beq	.L237
 5664              		.loc 1 3392 46 discriminator 1
 5665 005c BB68     		ldr	r3, [r7, #8]
 5666 005e 052B     		cmp	r3, #5
 5667 0060 0AD1     		bne	.L238
 5668              	.L237:
3393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->ErrorCode |= SDMMC_CmdStopTransfer(hsd->Instance);
 5669              		.loc 1 3394 25
 5670 0062 7B69     		ldr	r3, [r7, #20]
 5671 0064 1B68     		ldr	r3, [r3]
 5672 0066 1846     		mov	r0, r3
 5673 0068 FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 5674 006c 0246     		mov	r2, r0
 5675              		.loc 1 3394 10 discriminator 1
 5676 006e 7B69     		ldr	r3, [r7, #20]
 5677 0070 9B6B     		ldr	r3, [r3, #56]
 5678              		.loc 1 3394 22 discriminator 1
 5679 0072 1A43     		orrs	r2, r2, r3
 5680 0074 7B69     		ldr	r3, [r7, #20]
 5681 0076 9A63     		str	r2, [r3, #56]
 5682              	.L238:
3395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->State = HAL_SD_STATE_READY;
 5683              		.loc 1 3397 16
 5684 0078 7B69     		ldr	r3, [r7, #20]
 5685 007a 0122     		movs	r2, #1
 5686 007c 83F83420 		strb	r2, [r3, #52]
ARM GAS  /tmp/ccsLb3N5.s 			page 161


3398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->Context = SD_CONTEXT_NONE;
 5687              		.loc 1 3398 18
 5688 0080 7B69     		ldr	r3, [r7, #20]
 5689 0082 0022     		movs	r2, #0
 5690 0084 1A63     		str	r2, [r3, #48]
 5691              	.L236:
3399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if (USE_HAL_SD_REGISTER_CALLBACKS == 1)
3402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->ErrorCallback(hsd);
3403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_ErrorCallback(hsd);
 5692              		.loc 1 3404 3
 5693 0086 7869     		ldr	r0, [r7, #20]
 5694 0088 FFF7FEFF 		bl	HAL_SD_ErrorCallback
3405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 5695              		.loc 1 3406 1
 5696 008c 00BF     		nop
 5697 008e 1837     		adds	r7, r7, #24
 5698              		.cfi_def_cfa_offset 8
 5699 0090 BD46     		mov	sp, r7
 5700              		.cfi_def_cfa_register 13
 5701              		@ sp needed
 5702 0092 80BD     		pop	{r7, pc}
 5703              	.L240:
 5704              		.align	2
 5705              	.L239:
 5706 0094 FF054000 		.word	4195839
 5707              		.cfi_endproc
 5708              	.LFE474:
 5710              		.section	.text.SD_DMATxAbort,"ax",%progbits
 5711              		.align	1
 5712              		.syntax unified
 5713              		.thumb
 5714              		.thumb_func
 5716              	SD_DMATxAbort:
 5717              	.LFB475:
3407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  DMA SD Tx Abort callback
3410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hdma: DMA handle
3411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
3412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_DMATxAbort(DMA_HandleTypeDef *hdma)
3414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 5718              		.loc 1 3414 1
 5719              		.cfi_startproc
 5720              		@ args = 0, pretend = 0, frame = 16
 5721              		@ frame_needed = 1, uses_anonymous_args = 0
 5722 0000 80B5     		push	{r7, lr}
 5723              		.cfi_def_cfa_offset 8
 5724              		.cfi_offset 7, -8
 5725              		.cfi_offset 14, -4
 5726 0002 84B0     		sub	sp, sp, #16
 5727              		.cfi_def_cfa_offset 24
 5728 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/ccsLb3N5.s 			page 162


 5729              		.cfi_def_cfa_register 7
 5730 0006 7860     		str	r0, [r7, #4]
3415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef *)(hdma->Parent);
 5731              		.loc 1 3415 21
 5732 0008 7B68     		ldr	r3, [r7, #4]
 5733 000a 9B6A     		ldr	r3, [r3, #40]
 5734 000c FB60     		str	r3, [r7, #12]
3416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_CardStateTypeDef CardState;
3417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Clear All flags */
3419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
 5735              		.loc 1 3419 3
 5736 000e FB68     		ldr	r3, [r7, #12]
 5737 0010 1B68     		ldr	r3, [r3]
 5738 0012 40F23A52 		movw	r2, #1338
 5739 0016 9A63     		str	r2, [r3, #56]
3420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   CardState = HAL_SD_GetCardState(hsd);
 5740              		.loc 1 3421 15
 5741 0018 F868     		ldr	r0, [r7, #12]
 5742 001a FFF7FEFF 		bl	HAL_SD_GetCardState
 5743 001e B860     		str	r0, [r7, #8]
3422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_READY;
 5744              		.loc 1 3422 14
 5745 0020 FB68     		ldr	r3, [r7, #12]
 5746 0022 0122     		movs	r2, #1
 5747 0024 83F83420 		strb	r2, [r3, #52]
3423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->Context = SD_CONTEXT_NONE;
 5748              		.loc 1 3423 16
 5749 0028 FB68     		ldr	r3, [r7, #12]
 5750 002a 0022     		movs	r2, #0
 5751 002c 1A63     		str	r2, [r3, #48]
3424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((CardState == HAL_SD_CARD_RECEIVING) || (CardState == HAL_SD_CARD_SENDING))
 5752              		.loc 1 3424 6
 5753 002e BB68     		ldr	r3, [r7, #8]
 5754 0030 062B     		cmp	r3, #6
 5755 0032 02D0     		beq	.L242
 5756              		.loc 1 3424 44 discriminator 1
 5757 0034 BB68     		ldr	r3, [r7, #8]
 5758 0036 052B     		cmp	r3, #5
 5759 0038 0AD1     		bne	.L243
 5760              	.L242:
3425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= SDMMC_CmdStopTransfer(hsd->Instance);
 5761              		.loc 1 3426 23
 5762 003a FB68     		ldr	r3, [r7, #12]
 5763 003c 1B68     		ldr	r3, [r3]
 5764 003e 1846     		mov	r0, r3
 5765 0040 FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 5766 0044 0246     		mov	r2, r0
 5767              		.loc 1 3426 8 discriminator 1
 5768 0046 FB68     		ldr	r3, [r7, #12]
 5769 0048 9B6B     		ldr	r3, [r3, #56]
 5770              		.loc 1 3426 20 discriminator 1
 5771 004a 1A43     		orrs	r2, r2, r3
 5772 004c FB68     		ldr	r3, [r7, #12]
 5773 004e 9A63     		str	r2, [r3, #56]
ARM GAS  /tmp/ccsLb3N5.s 			page 163


 5774              	.L243:
3427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->ErrorCode == HAL_SD_ERROR_NONE)
 5775              		.loc 1 3429 10
 5776 0050 FB68     		ldr	r3, [r7, #12]
 5777 0052 9B6B     		ldr	r3, [r3, #56]
 5778              		.loc 1 3429 6
 5779 0054 002B     		cmp	r3, #0
 5780 0056 03D1     		bne	.L244
3430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if (USE_HAL_SD_REGISTER_CALLBACKS == 1)
3432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->AbortCpltCallback(hsd);
3433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     HAL_SD_AbortCallback(hsd);
 5781              		.loc 1 3434 5
 5782 0058 F868     		ldr	r0, [r7, #12]
 5783 005a FFF7FEFF 		bl	HAL_SD_AbortCallback
3435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
3438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if (USE_HAL_SD_REGISTER_CALLBACKS == 1)
3440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCallback(hsd);
3441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     HAL_SD_ErrorCallback(hsd);
3443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 5784              		.loc 1 3445 1
 5785 005e 02E0     		b	.L246
 5786              	.L244:
3442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
 5787              		.loc 1 3442 5
 5788 0060 F868     		ldr	r0, [r7, #12]
 5789 0062 FFF7FEFF 		bl	HAL_SD_ErrorCallback
 5790              	.L246:
 5791              		.loc 1 3445 1
 5792 0066 00BF     		nop
 5793 0068 1037     		adds	r7, r7, #16
 5794              		.cfi_def_cfa_offset 8
 5795 006a BD46     		mov	sp, r7
 5796              		.cfi_def_cfa_register 13
 5797              		@ sp needed
 5798 006c 80BD     		pop	{r7, pc}
 5799              		.cfi_endproc
 5800              	.LFE475:
 5802              		.section	.text.SD_DMARxAbort,"ax",%progbits
 5803              		.align	1
 5804              		.syntax unified
 5805              		.thumb
 5806              		.thumb_func
 5808              	SD_DMARxAbort:
 5809              	.LFB476:
3446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  DMA SD Rx Abort callback
ARM GAS  /tmp/ccsLb3N5.s 			page 164


3449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hdma: DMA handle
3450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
3451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_DMARxAbort(DMA_HandleTypeDef *hdma)
3453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 5810              		.loc 1 3453 1
 5811              		.cfi_startproc
 5812              		@ args = 0, pretend = 0, frame = 16
 5813              		@ frame_needed = 1, uses_anonymous_args = 0
 5814 0000 80B5     		push	{r7, lr}
 5815              		.cfi_def_cfa_offset 8
 5816              		.cfi_offset 7, -8
 5817              		.cfi_offset 14, -4
 5818 0002 84B0     		sub	sp, sp, #16
 5819              		.cfi_def_cfa_offset 24
 5820 0004 00AF     		add	r7, sp, #0
 5821              		.cfi_def_cfa_register 7
 5822 0006 7860     		str	r0, [r7, #4]
3454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef *)(hdma->Parent);
 5823              		.loc 1 3454 21
 5824 0008 7B68     		ldr	r3, [r7, #4]
 5825 000a 9B6A     		ldr	r3, [r3, #40]
 5826 000c FB60     		str	r3, [r7, #12]
3455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_CardStateTypeDef CardState;
3456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Clear All flags */
3458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
 5827              		.loc 1 3458 3
 5828 000e FB68     		ldr	r3, [r7, #12]
 5829 0010 1B68     		ldr	r3, [r3]
 5830 0012 40F23A52 		movw	r2, #1338
 5831 0016 9A63     		str	r2, [r3, #56]
3459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   CardState = HAL_SD_GetCardState(hsd);
 5832              		.loc 1 3460 15
 5833 0018 F868     		ldr	r0, [r7, #12]
 5834 001a FFF7FEFF 		bl	HAL_SD_GetCardState
 5835 001e B860     		str	r0, [r7, #8]
3461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->State = HAL_SD_STATE_READY;
 5836              		.loc 1 3461 14
 5837 0020 FB68     		ldr	r3, [r7, #12]
 5838 0022 0122     		movs	r2, #1
 5839 0024 83F83420 		strb	r2, [r3, #52]
3462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->Context = SD_CONTEXT_NONE;
 5840              		.loc 1 3462 16
 5841 0028 FB68     		ldr	r3, [r7, #12]
 5842 002a 0022     		movs	r2, #0
 5843 002c 1A63     		str	r2, [r3, #48]
3463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((CardState == HAL_SD_CARD_RECEIVING) || (CardState == HAL_SD_CARD_SENDING))
 5844              		.loc 1 3463 6
 5845 002e BB68     		ldr	r3, [r7, #8]
 5846 0030 062B     		cmp	r3, #6
 5847 0032 02D0     		beq	.L248
 5848              		.loc 1 3463 44 discriminator 1
 5849 0034 BB68     		ldr	r3, [r7, #8]
 5850 0036 052B     		cmp	r3, #5
 5851 0038 0AD1     		bne	.L249
ARM GAS  /tmp/ccsLb3N5.s 			page 165


 5852              	.L248:
3464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= SDMMC_CmdStopTransfer(hsd->Instance);
 5853              		.loc 1 3465 23
 5854 003a FB68     		ldr	r3, [r7, #12]
 5855 003c 1B68     		ldr	r3, [r3]
 5856 003e 1846     		mov	r0, r3
 5857 0040 FFF7FEFF 		bl	SDMMC_CmdStopTransfer
 5858 0044 0246     		mov	r2, r0
 5859              		.loc 1 3465 8 discriminator 1
 5860 0046 FB68     		ldr	r3, [r7, #12]
 5861 0048 9B6B     		ldr	r3, [r3, #56]
 5862              		.loc 1 3465 20 discriminator 1
 5863 004a 1A43     		orrs	r2, r2, r3
 5864 004c FB68     		ldr	r3, [r7, #12]
 5865 004e 9A63     		str	r2, [r3, #56]
 5866              	.L249:
3466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->ErrorCode == HAL_SD_ERROR_NONE)
 5867              		.loc 1 3468 10
 5868 0050 FB68     		ldr	r3, [r7, #12]
 5869 0052 9B6B     		ldr	r3, [r3, #56]
 5870              		.loc 1 3468 6
 5871 0054 002B     		cmp	r3, #0
 5872 0056 03D1     		bne	.L250
3469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if (USE_HAL_SD_REGISTER_CALLBACKS == 1)
3471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->AbortCpltCallback(hsd);
3472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     HAL_SD_AbortCallback(hsd);
 5873              		.loc 1 3473 5
 5874 0058 F868     		ldr	r0, [r7, #12]
 5875 005a FFF7FEFF 		bl	HAL_SD_AbortCallback
3474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
3477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if (USE_HAL_SD_REGISTER_CALLBACKS == 1)
3479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCallback(hsd);
3480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     HAL_SD_ErrorCallback(hsd);
3482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 5876              		.loc 1 3484 1
 5877 005e 02E0     		b	.L252
 5878              	.L250:
3481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
 5879              		.loc 1 3481 5
 5880 0060 F868     		ldr	r0, [r7, #12]
 5881 0062 FFF7FEFF 		bl	HAL_SD_ErrorCallback
 5882              	.L252:
 5883              		.loc 1 3484 1
 5884 0066 00BF     		nop
 5885 0068 1037     		adds	r7, r7, #16
 5886              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccsLb3N5.s 			page 166


 5887 006a BD46     		mov	sp, r7
 5888              		.cfi_def_cfa_register 13
 5889              		@ sp needed
 5890 006c 80BD     		pop	{r7, pc}
 5891              		.cfi_endproc
 5892              	.LFE476:
 5894              		.section	.text.SD_InitCard,"ax",%progbits
 5895              		.align	1
 5896              		.syntax unified
 5897              		.thumb
 5898              		.thumb_func
 5900              	SD_InitCard:
 5901              	.LFB477:
3485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* !STM32L4P5xx && !STM32L4Q5xx && !STM32L4R5xx && !STM32L4R7xx && !STM32L4R9xx \
3486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           && !STM32L4S5xx && !STM32L4S7xx && !STM32L4S9xx */
3487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Initializes the sd card.
3490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
3491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval SD Card error state
3492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_InitCard(SD_HandleTypeDef *hsd)
3494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 5902              		.loc 1 3494 1
 5903              		.cfi_startproc
 5904              		@ args = 0, pretend = 0, frame = 64
 5905              		@ frame_needed = 1, uses_anonymous_args = 0
 5906 0000 B0B5     		push	{r4, r5, r7, lr}
 5907              		.cfi_def_cfa_offset 16
 5908              		.cfi_offset 4, -16
 5909              		.cfi_offset 5, -12
 5910              		.cfi_offset 7, -8
 5911              		.cfi_offset 14, -4
 5912 0002 90B0     		sub	sp, sp, #64
 5913              		.cfi_def_cfa_offset 80
 5914 0004 00AF     		add	r7, sp, #0
 5915              		.cfi_def_cfa_register 7
 5916 0006 7860     		str	r0, [r7, #4]
3495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   HAL_SD_CardCSDTypeDef CSD;
3496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
3497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint16_t sd_rca = 1U;
 5917              		.loc 1 3497 12
 5918 0008 0123     		movs	r3, #1
 5919 000a FB81     		strh	r3, [r7, #14]	@ movhi
3498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Check the power State */
3500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (SDMMC_GetPowerState(hsd->Instance) == 0U)
 5920              		.loc 1 3500 30
 5921 000c 7B68     		ldr	r3, [r7, #4]
 5922 000e 1B68     		ldr	r3, [r3]
 5923              		.loc 1 3500 7
 5924 0010 1846     		mov	r0, r3
 5925 0012 FFF7FEFF 		bl	SDMMC_GetPowerState
 5926 0016 0346     		mov	r3, r0
 5927              		.loc 1 3500 6 discriminator 1
 5928 0018 002B     		cmp	r3, #0
 5929 001a 02D1     		bne	.L254
ARM GAS  /tmp/ccsLb3N5.s 			page 167


3501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Power off */
3503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_REQUEST_NOT_APPLICABLE;
 5930              		.loc 1 3503 12
 5931 001c 4FF08063 		mov	r3, #67108864
 5932 0020 AAE0     		b	.L263
 5933              	.L254:
3504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->SdCard.CardType != CARD_SECURED)
 5934              		.loc 1 3506 18
 5935 0022 7B68     		ldr	r3, [r7, #4]
 5936 0024 5B6C     		ldr	r3, [r3, #68]
 5937              		.loc 1 3506 6
 5938 0026 032B     		cmp	r3, #3
 5939 0028 2FD0     		beq	.L256
3507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send CMD2 ALL_SEND_CID */
3509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdSendCID(hsd->Instance);
 5940              		.loc 1 3509 18
 5941 002a 7B68     		ldr	r3, [r7, #4]
 5942 002c 1B68     		ldr	r3, [r3]
 5943 002e 1846     		mov	r0, r3
 5944 0030 FFF7FEFF 		bl	SDMMC_CmdSendCID
 5945 0034 F863     		str	r0, [r7, #60]
3510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 5946              		.loc 1 3510 8
 5947 0036 FB6B     		ldr	r3, [r7, #60]
 5948 0038 002B     		cmp	r3, #0
 5949 003a 01D0     		beq	.L257
3511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return errorstate;
 5950              		.loc 1 3512 14
 5951 003c FB6B     		ldr	r3, [r7, #60]
 5952 003e 9BE0     		b	.L263
 5953              	.L257:
3513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
3515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Get Card identification number data */
3517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->CID[0U] = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP1);
 5954              		.loc 1 3517 43
 5955 0040 7B68     		ldr	r3, [r7, #4]
 5956 0042 1B68     		ldr	r3, [r3]
 5957              		.loc 1 3517 22
 5958 0044 0021     		movs	r1, #0
 5959 0046 1846     		mov	r0, r3
 5960 0048 FFF7FEFF 		bl	SDMMC_GetResponse
 5961 004c 0246     		mov	r2, r0
 5962              		.loc 1 3517 20 discriminator 1
 5963 004e 7B68     		ldr	r3, [r7, #4]
 5964 0050 5A67     		str	r2, [r3, #116]
3518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->CID[1U] = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP2);
 5965              		.loc 1 3518 43
 5966 0052 7B68     		ldr	r3, [r7, #4]
 5967 0054 1B68     		ldr	r3, [r3]
 5968              		.loc 1 3518 22
ARM GAS  /tmp/ccsLb3N5.s 			page 168


 5969 0056 0421     		movs	r1, #4
 5970 0058 1846     		mov	r0, r3
 5971 005a FFF7FEFF 		bl	SDMMC_GetResponse
 5972 005e 0246     		mov	r2, r0
 5973              		.loc 1 3518 20 discriminator 1
 5974 0060 7B68     		ldr	r3, [r7, #4]
 5975 0062 9A67     		str	r2, [r3, #120]
3519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->CID[2U] = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP3);
 5976              		.loc 1 3519 43
 5977 0064 7B68     		ldr	r3, [r7, #4]
 5978 0066 1B68     		ldr	r3, [r3]
 5979              		.loc 1 3519 22
 5980 0068 0821     		movs	r1, #8
 5981 006a 1846     		mov	r0, r3
 5982 006c FFF7FEFF 		bl	SDMMC_GetResponse
 5983 0070 0246     		mov	r2, r0
 5984              		.loc 1 3519 20 discriminator 1
 5985 0072 7B68     		ldr	r3, [r7, #4]
 5986 0074 DA67     		str	r2, [r3, #124]
3520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->CID[3U] = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP4);
 5987              		.loc 1 3520 43
 5988 0076 7B68     		ldr	r3, [r7, #4]
 5989 0078 1B68     		ldr	r3, [r3]
 5990              		.loc 1 3520 22
 5991 007a 0C21     		movs	r1, #12
 5992 007c 1846     		mov	r0, r3
 5993 007e FFF7FEFF 		bl	SDMMC_GetResponse
 5994 0082 0246     		mov	r2, r0
 5995              		.loc 1 3520 20 discriminator 1
 5996 0084 7B68     		ldr	r3, [r7, #4]
 5997 0086 C3F88020 		str	r2, [r3, #128]
 5998              	.L256:
3521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->SdCard.CardType != CARD_SECURED)
 5999              		.loc 1 3524 18
 6000 008a 7B68     		ldr	r3, [r7, #4]
 6001 008c 5B6C     		ldr	r3, [r3, #68]
 6002              		.loc 1 3524 6
 6003 008e 032B     		cmp	r3, #3
 6004 0090 0DD0     		beq	.L258
3525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send CMD3 SET_REL_ADDR with argument 0 */
3527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* SD Card publishes its RCA. */
3528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdSetRelAdd(hsd->Instance, &sd_rca);
 6005              		.loc 1 3528 18
 6006 0092 7B68     		ldr	r3, [r7, #4]
 6007 0094 1B68     		ldr	r3, [r3]
 6008 0096 07F10E02 		add	r2, r7, #14
 6009 009a 1146     		mov	r1, r2
 6010 009c 1846     		mov	r0, r3
 6011 009e FFF7FEFF 		bl	SDMMC_CmdSetRelAdd
 6012 00a2 F863     		str	r0, [r7, #60]
3529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6013              		.loc 1 3529 8
 6014 00a4 FB6B     		ldr	r3, [r7, #60]
ARM GAS  /tmp/ccsLb3N5.s 			page 169


 6015 00a6 002B     		cmp	r3, #0
 6016 00a8 01D0     		beq	.L258
3530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return errorstate;
 6017              		.loc 1 3531 14
 6018 00aa FB6B     		ldr	r3, [r7, #60]
 6019 00ac 64E0     		b	.L263
 6020              	.L258:
3532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->SdCard.CardType != CARD_SECURED)
 6021              		.loc 1 3534 18
 6022 00ae 7B68     		ldr	r3, [r7, #4]
 6023 00b0 5B6C     		ldr	r3, [r3, #68]
 6024              		.loc 1 3534 6
 6025 00b2 032B     		cmp	r3, #3
 6026 00b4 36D0     		beq	.L259
3535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Get the SD card RCA */
3537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.RelCardAdd = sd_rca;
 6027              		.loc 1 3537 28
 6028 00b6 FB89     		ldrh	r3, [r7, #14]
 6029 00b8 1A46     		mov	r2, r3
 6030 00ba 7B68     		ldr	r3, [r7, #4]
 6031 00bc 1A65     		str	r2, [r3, #80]
3538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send CMD9 SEND_CSD with argument as card's RCA */
3540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdSendCSD(hsd->Instance, (uint32_t)(hsd->SdCard.RelCardAdd << 16U));
 6032              		.loc 1 3540 18
 6033 00be 7B68     		ldr	r3, [r7, #4]
 6034 00c0 1A68     		ldr	r2, [r3]
 6035              		.loc 1 3540 72
 6036 00c2 7B68     		ldr	r3, [r7, #4]
 6037 00c4 1B6D     		ldr	r3, [r3, #80]
 6038              		.loc 1 3540 18
 6039 00c6 1B04     		lsls	r3, r3, #16
 6040 00c8 1946     		mov	r1, r3
 6041 00ca 1046     		mov	r0, r2
 6042 00cc FFF7FEFF 		bl	SDMMC_CmdSendCSD
 6043 00d0 F863     		str	r0, [r7, #60]
3541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6044              		.loc 1 3541 8
 6045 00d2 FB6B     		ldr	r3, [r7, #60]
 6046 00d4 002B     		cmp	r3, #0
 6047 00d6 01D0     		beq	.L260
3542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return errorstate;
 6048              		.loc 1 3543 14
 6049 00d8 FB6B     		ldr	r3, [r7, #60]
 6050 00da 4DE0     		b	.L263
 6051              	.L260:
3544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
3546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Get Card Specific Data */
3548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->CSD[0U] = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP1);
 6052              		.loc 1 3548 43
ARM GAS  /tmp/ccsLb3N5.s 			page 170


 6053 00dc 7B68     		ldr	r3, [r7, #4]
 6054 00de 1B68     		ldr	r3, [r3]
 6055              		.loc 1 3548 22
 6056 00e0 0021     		movs	r1, #0
 6057 00e2 1846     		mov	r0, r3
 6058 00e4 FFF7FEFF 		bl	SDMMC_GetResponse
 6059 00e8 0246     		mov	r2, r0
 6060              		.loc 1 3548 20 discriminator 1
 6061 00ea 7B68     		ldr	r3, [r7, #4]
 6062 00ec 5A66     		str	r2, [r3, #100]
3549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->CSD[1U] = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP2);
 6063              		.loc 1 3549 43
 6064 00ee 7B68     		ldr	r3, [r7, #4]
 6065 00f0 1B68     		ldr	r3, [r3]
 6066              		.loc 1 3549 22
 6067 00f2 0421     		movs	r1, #4
 6068 00f4 1846     		mov	r0, r3
 6069 00f6 FFF7FEFF 		bl	SDMMC_GetResponse
 6070 00fa 0246     		mov	r2, r0
 6071              		.loc 1 3549 20 discriminator 1
 6072 00fc 7B68     		ldr	r3, [r7, #4]
 6073 00fe 9A66     		str	r2, [r3, #104]
3550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->CSD[2U] = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP3);
 6074              		.loc 1 3550 43
 6075 0100 7B68     		ldr	r3, [r7, #4]
 6076 0102 1B68     		ldr	r3, [r3]
 6077              		.loc 1 3550 22
 6078 0104 0821     		movs	r1, #8
 6079 0106 1846     		mov	r0, r3
 6080 0108 FFF7FEFF 		bl	SDMMC_GetResponse
 6081 010c 0246     		mov	r2, r0
 6082              		.loc 1 3550 20 discriminator 1
 6083 010e 7B68     		ldr	r3, [r7, #4]
 6084 0110 DA66     		str	r2, [r3, #108]
3551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       hsd->CSD[3U] = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP4);
 6085              		.loc 1 3551 43
 6086 0112 7B68     		ldr	r3, [r7, #4]
 6087 0114 1B68     		ldr	r3, [r3]
 6088              		.loc 1 3551 22
 6089 0116 0C21     		movs	r1, #12
 6090 0118 1846     		mov	r0, r3
 6091 011a FFF7FEFF 		bl	SDMMC_GetResponse
 6092 011e 0246     		mov	r2, r0
 6093              		.loc 1 3551 20 discriminator 1
 6094 0120 7B68     		ldr	r3, [r7, #4]
 6095 0122 1A67     		str	r2, [r3, #112]
 6096              	.L259:
3552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Get the Card Class */
3556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   hsd->SdCard.Class = (SDMMC_GetResponse(hsd->Instance, SDMMC_RESP2) >> 20U);
 6097              		.loc 1 3556 45
 6098 0124 7B68     		ldr	r3, [r7, #4]
 6099 0126 1B68     		ldr	r3, [r3]
 6100              		.loc 1 3556 24
 6101 0128 0421     		movs	r1, #4
ARM GAS  /tmp/ccsLb3N5.s 			page 171


 6102 012a 1846     		mov	r0, r3
 6103 012c FFF7FEFF 		bl	SDMMC_GetResponse
 6104 0130 0346     		mov	r3, r0
 6105              		.loc 1 3556 70 discriminator 1
 6106 0132 1A0D     		lsrs	r2, r3, #20
 6107              		.loc 1 3556 21 discriminator 1
 6108 0134 7B68     		ldr	r3, [r7, #4]
 6109 0136 DA64     		str	r2, [r3, #76]
3557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Get CSD parameters */
3559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (HAL_SD_GetCardCSD(hsd, &CSD) != HAL_OK)
 6110              		.loc 1 3559 7
 6111 0138 07F11003 		add	r3, r7, #16
 6112 013c 1946     		mov	r1, r3
 6113 013e 7868     		ldr	r0, [r7, #4]
 6114 0140 FFF7FEFF 		bl	HAL_SD_GetCardCSD
 6115 0144 0346     		mov	r3, r0
 6116              		.loc 1 3559 6 discriminator 1
 6117 0146 002B     		cmp	r3, #0
 6118 0148 02D0     		beq	.L261
3560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_UNSUPPORTED_FEATURE;
 6119              		.loc 1 3561 12
 6120 014a 4FF08053 		mov	r3, #268435456
 6121 014e 13E0     		b	.L263
 6122              	.L261:
3562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Select the Card */
3565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdSelDesel(hsd->Instance, (uint32_t)(((uint32_t)hsd->SdCard.RelCardAdd) << 16
 6123              		.loc 1 3565 16
 6124 0150 7B68     		ldr	r3, [r7, #4]
 6125 0152 1968     		ldr	r1, [r3]
 6126              		.loc 1 3565 82
 6127 0154 7B68     		ldr	r3, [r7, #4]
 6128 0156 1B6D     		ldr	r3, [r3, #80]
 6129              		.loc 1 3565 49
 6130 0158 1B04     		lsls	r3, r3, #16
 6131              		.loc 1 3565 16
 6132 015a 0022     		movs	r2, #0
 6133 015c 1C46     		mov	r4, r3
 6134 015e 1546     		mov	r5, r2
 6135 0160 2246     		mov	r2, r4
 6136 0162 2B46     		mov	r3, r5
 6137 0164 0846     		mov	r0, r1
 6138 0166 FFF7FEFF 		bl	SDMMC_CmdSelDesel
 6139 016a F863     		str	r0, [r7, #60]
3566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 6140              		.loc 1 3566 6
 6141 016c FB6B     		ldr	r3, [r7, #60]
 6142 016e 002B     		cmp	r3, #0
 6143 0170 01D0     		beq	.L262
3567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 6144              		.loc 1 3568 12
 6145 0172 FB6B     		ldr	r3, [r7, #60]
 6146 0174 00E0     		b	.L263
ARM GAS  /tmp/ccsLb3N5.s 			page 172


 6147              	.L262:
3569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* All cards are initialized */
3572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_SD_ERROR_NONE;
 6148              		.loc 1 3572 10
 6149 0176 0023     		movs	r3, #0
 6150              	.L263:
3573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 6151              		.loc 1 3573 1
 6152 0178 1846     		mov	r0, r3
 6153 017a 4037     		adds	r7, r7, #64
 6154              		.cfi_def_cfa_offset 16
 6155 017c BD46     		mov	sp, r7
 6156              		.cfi_def_cfa_register 13
 6157              		@ sp needed
 6158 017e B0BD     		pop	{r4, r5, r7, pc}
 6159              		.cfi_endproc
 6160              	.LFE477:
 6162              		.section	.text.SD_PowerON,"ax",%progbits
 6163              		.align	1
 6164              		.syntax unified
 6165              		.thumb
 6166              		.thumb_func
 6168              	SD_PowerON:
 6169              	.LFB478:
3574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Enquires cards about their operating voltage and configures clock
3577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         controls and stores SD information that will be needed in future
3578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         in the SD handle.
3579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
3580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval error state
3581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_PowerON(SD_HandleTypeDef *hsd)
3583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 6170              		.loc 1 3583 1
 6171              		.cfi_startproc
 6172              		@ args = 0, pretend = 0, frame = 24
 6173              		@ frame_needed = 1, uses_anonymous_args = 0
 6174 0000 80B5     		push	{r7, lr}
 6175              		.cfi_def_cfa_offset 8
 6176              		.cfi_offset 7, -8
 6177              		.cfi_offset 14, -4
 6178 0002 86B0     		sub	sp, sp, #24
 6179              		.cfi_def_cfa_offset 32
 6180 0004 00AF     		add	r7, sp, #0
 6181              		.cfi_def_cfa_register 7
 6182 0006 7860     		str	r0, [r7, #4]
3584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __IO uint32_t count = 0U;
 6183              		.loc 1 3584 17
 6184 0008 0023     		movs	r3, #0
 6185 000a BB60     		str	r3, [r7, #8]
3585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t response = 0U;
 6186              		.loc 1 3585 12
 6187 000c 0023     		movs	r3, #0
 6188 000e 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/ccsLb3N5.s 			page 173


3586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t validvoltage = 0U;
 6189              		.loc 1 3586 12
 6190 0010 0023     		movs	r3, #0
 6191 0012 3B61     		str	r3, [r7, #16]
3587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
3588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
3589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t tickstart = HAL_GetTick();
3590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
3591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
3592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* CMD0: GO_IDLE_STATE */
3594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdGoIdleState(hsd->Instance);
 6192              		.loc 1 3594 16
 6193 0014 7B68     		ldr	r3, [r7, #4]
 6194 0016 1B68     		ldr	r3, [r3]
 6195 0018 1846     		mov	r0, r3
 6196 001a FFF7FEFF 		bl	SDMMC_CmdGoIdleState
 6197 001e F860     		str	r0, [r7, #12]
3595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 6198              		.loc 1 3595 6
 6199 0020 FB68     		ldr	r3, [r7, #12]
 6200 0022 002B     		cmp	r3, #0
 6201 0024 01D0     		beq	.L265
3596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 6202              		.loc 1 3597 12
 6203 0026 FB68     		ldr	r3, [r7, #12]
 6204 0028 72E0     		b	.L266
 6205              	.L265:
3598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* CMD8: SEND_IF_COND: Command available only on V2.0 cards */
3601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdOperCond(hsd->Instance);
 6206              		.loc 1 3601 16
 6207 002a 7B68     		ldr	r3, [r7, #4]
 6208 002c 1B68     		ldr	r3, [r3]
 6209 002e 1846     		mov	r0, r3
 6210 0030 FFF7FEFF 		bl	SDMMC_CmdOperCond
 6211 0034 F860     		str	r0, [r7, #12]
3602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 6212              		.loc 1 3602 6
 6213 0036 FB68     		ldr	r3, [r7, #12]
 6214 0038 002B     		cmp	r3, #0
 6215 003a 0DD0     		beq	.L267
3603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.CardVersion = CARD_V1_X;
 6216              		.loc 1 3604 29
 6217 003c 7B68     		ldr	r3, [r7, #4]
 6218 003e 0022     		movs	r2, #0
 6219 0040 9A64     		str	r2, [r3, #72]
3605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* CMD0: GO_IDLE_STATE */
3606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdGoIdleState(hsd->Instance);
 6220              		.loc 1 3606 18
 6221 0042 7B68     		ldr	r3, [r7, #4]
 6222 0044 1B68     		ldr	r3, [r3]
 6223 0046 1846     		mov	r0, r3
 6224 0048 FFF7FEFF 		bl	SDMMC_CmdGoIdleState
ARM GAS  /tmp/ccsLb3N5.s 			page 174


 6225 004c F860     		str	r0, [r7, #12]
3607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6226              		.loc 1 3607 8
 6227 004e FB68     		ldr	r3, [r7, #12]
 6228 0050 002B     		cmp	r3, #0
 6229 0052 04D0     		beq	.L268
3608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return errorstate;
 6230              		.loc 1 3609 14
 6231 0054 FB68     		ldr	r3, [r7, #12]
 6232 0056 5BE0     		b	.L266
 6233              	.L267:
3610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
3614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.CardVersion = CARD_V2_X;
 6234              		.loc 1 3615 29
 6235 0058 7B68     		ldr	r3, [r7, #4]
 6236 005a 0122     		movs	r2, #1
 6237 005c 9A64     		str	r2, [r3, #72]
 6238              	.L268:
3616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (hsd->SdCard.CardVersion == CARD_V2_X)
 6239              		.loc 1 3618 18
 6240 005e 7B68     		ldr	r3, [r7, #4]
 6241 0060 9B6C     		ldr	r3, [r3, #72]
 6242              		.loc 1 3618 6
 6243 0062 012B     		cmp	r3, #1
 6244 0064 37D1     		bne	.L270
3619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* SEND CMD55 APP_CMD with RCA as 0 */
3621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdAppCommand(hsd->Instance, 0);
 6245              		.loc 1 3621 18
 6246 0066 7B68     		ldr	r3, [r7, #4]
 6247 0068 1B68     		ldr	r3, [r3]
 6248 006a 0021     		movs	r1, #0
 6249 006c 1846     		mov	r0, r3
 6250 006e FFF7FEFF 		bl	SDMMC_CmdAppCommand
 6251 0072 F860     		str	r0, [r7, #12]
3622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6252              		.loc 1 3622 8
 6253 0074 FB68     		ldr	r3, [r7, #12]
 6254 0076 002B     		cmp	r3, #0
 6255 0078 2DD0     		beq	.L270
3623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_SD_ERROR_UNSUPPORTED_FEATURE;
 6256              		.loc 1 3624 14
 6257 007a 4FF08053 		mov	r3, #268435456
 6258 007e 47E0     		b	.L266
 6259              	.L276:
3625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* SD CARD */
3628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Send ACMD41 SD_APP_OP_COND with Argument 0x80100000 */
ARM GAS  /tmp/ccsLb3N5.s 			page 175


3629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   while ((count < SDMMC_MAX_VOLT_TRIAL) && (validvoltage == 0U))
3630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* SEND CMD55 APP_CMD with RCA as 0 */
3632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdAppCommand(hsd->Instance, 0);
 6260              		.loc 1 3632 18
 6261 0080 7B68     		ldr	r3, [r7, #4]
 6262 0082 1B68     		ldr	r3, [r3]
 6263 0084 0021     		movs	r1, #0
 6264 0086 1846     		mov	r0, r3
 6265 0088 FFF7FEFF 		bl	SDMMC_CmdAppCommand
 6266 008c F860     		str	r0, [r7, #12]
3633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6267              		.loc 1 3633 8
 6268 008e FB68     		ldr	r3, [r7, #12]
 6269 0090 002B     		cmp	r3, #0
 6270 0092 01D0     		beq	.L271
3634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return errorstate;
 6271              		.loc 1 3635 14
 6272 0094 FB68     		ldr	r3, [r7, #12]
 6273 0096 3BE0     		b	.L266
 6274              	.L271:
3636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send CMD41 */
3639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdAppOperCommand(
 6275              		.loc 1 3639 18
 6276 0098 7B68     		ldr	r3, [r7, #4]
 6277 009a 1B68     		ldr	r3, [r3]
 6278 009c 1E49     		ldr	r1, .L280
 6279 009e 1846     		mov	r0, r3
 6280 00a0 FFF7FEFF 		bl	SDMMC_CmdAppOperCommand
 6281 00a4 F860     		str	r0, [r7, #12]
3640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                    hsd->Instance,
3641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                    SDMMC_VOLTAGE_WINDOW_SD | SDMMC_HIGH_CAPACITY | SD_SWITCH_1_8V_CAPACITY
3642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                  );
3643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6282              		.loc 1 3643 8
 6283 00a6 FB68     		ldr	r3, [r7, #12]
 6284 00a8 002B     		cmp	r3, #0
 6285 00aa 02D0     		beq	.L272
3644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_SD_ERROR_UNSUPPORTED_FEATURE;
 6286              		.loc 1 3645 14
 6287 00ac 4FF08053 		mov	r3, #268435456
 6288 00b0 2EE0     		b	.L266
 6289              	.L272:
3646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Get command response */
3649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     response = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP1);
 6290              		.loc 1 3649 37
 6291 00b2 7B68     		ldr	r3, [r7, #4]
 6292 00b4 1B68     		ldr	r3, [r3]
 6293              		.loc 1 3649 16
 6294 00b6 0021     		movs	r1, #0
 6295 00b8 1846     		mov	r0, r3
ARM GAS  /tmp/ccsLb3N5.s 			page 176


 6296 00ba FFF7FEFF 		bl	SDMMC_GetResponse
 6297 00be 7861     		str	r0, [r7, #20]
3650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Get operating voltage*/
3652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     validvoltage = (((response >> 31U) == 1U) ? 1U : 0U);
 6298              		.loc 1 3652 32
 6299 00c0 7B69     		ldr	r3, [r7, #20]
 6300 00c2 DB0F     		lsrs	r3, r3, #31
 6301              		.loc 1 3652 52
 6302 00c4 012B     		cmp	r3, #1
 6303 00c6 01D1     		bne	.L273
 6304              		.loc 1 3652 52 is_stmt 0 discriminator 1
 6305 00c8 0123     		movs	r3, #1
 6306 00ca 00E0     		b	.L274
 6307              	.L273:
 6308              		.loc 1 3652 52 discriminator 2
 6309 00cc 0023     		movs	r3, #0
 6310              	.L274:
 6311              		.loc 1 3652 18 is_stmt 1 discriminator 4
 6312 00ce 3B61     		str	r3, [r7, #16]
3653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     count++;
 6313              		.loc 1 3654 10
 6314 00d0 BB68     		ldr	r3, [r7, #8]
 6315 00d2 0133     		adds	r3, r3, #1
 6316 00d4 BB60     		str	r3, [r7, #8]
 6317              	.L270:
3629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 6318              		.loc 1 3629 17
 6319 00d6 BB68     		ldr	r3, [r7, #8]
3629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 6320              		.loc 1 3629 41
 6321 00d8 4FF6FE72 		movw	r2, #65534
 6322 00dc 9342     		cmp	r3, r2
 6323 00de 02D8     		bhi	.L275
3629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 6324              		.loc 1 3629 41 is_stmt 0 discriminator 1
 6325 00e0 3B69     		ldr	r3, [r7, #16]
 6326 00e2 002B     		cmp	r3, #0
 6327 00e4 CCD0     		beq	.L276
 6328              	.L275:
3655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (count >= SDMMC_MAX_VOLT_TRIAL)
 6329              		.loc 1 3657 13 is_stmt 1
 6330 00e6 BB68     		ldr	r3, [r7, #8]
 6331              		.loc 1 3657 6
 6332 00e8 4FF6FE72 		movw	r2, #65534
 6333 00ec 9342     		cmp	r3, r2
 6334 00ee 02D9     		bls	.L277
3658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_INVALID_VOLTRANGE;
 6335              		.loc 1 3659 12
 6336 00f0 4FF08073 		mov	r3, #16777216
 6337 00f4 0CE0     		b	.L266
 6338              	.L277:
3660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
ARM GAS  /tmp/ccsLb3N5.s 			page 177


3661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((response & SDMMC_HIGH_CAPACITY) == SDMMC_HIGH_CAPACITY) /* (response &= SD_HIGH_CAPACITY) */
 6339              		.loc 1 3662 17
 6340 00f6 7B69     		ldr	r3, [r7, #20]
 6341 00f8 03F08043 		and	r3, r3, #1073741824
 6342              		.loc 1 3662 6
 6343 00fc 002B     		cmp	r3, #0
 6344 00fe 03D0     		beq	.L278
3663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.CardType = CARD_SDHC_SDXC;
 6345              		.loc 1 3664 26
 6346 0100 7B68     		ldr	r3, [r7, #4]
 6347 0102 0122     		movs	r2, #1
 6348 0104 5A64     		str	r2, [r3, #68]
 6349 0106 02E0     		b	.L279
 6350              	.L278:
3665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
3666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (hsd->Init.Transceiver == SDMMC_TRANSCEIVER_ENABLE)
3667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       if ((response & SD_SWITCH_1_8V_CAPACITY) == SD_SWITCH_1_8V_CAPACITY)
3669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
3670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->SdCard.CardSpeed = CARD_ULTRA_HIGH_SPEED;
3671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Start switching procedue */
3673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Instance->POWER |= SDMMC_POWER_VSWITCHEN;
3674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Send CMD11 to switch 1.8V mode */
3676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         errorstate = SDMMC_CmdVoltageSwitch(hsd->Instance);
3677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if (errorstate != HAL_SD_ERROR_NONE)
3678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
3679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           return errorstate;
3680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
3681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Check to CKSTOP */
3683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         while ((hsd->Instance->STA & SDMMC_FLAG_CKSTOP) != SDMMC_FLAG_CKSTOP)
3684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
3685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if ((HAL_GetTick() - tickstart) >=  SDMMC_DATATIMEOUT)
3686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
3687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             return HAL_SD_ERROR_TIMEOUT;
3688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
3689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
3690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Clear CKSTOP Flag */
3692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         hsd->Instance->ICR = SDMMC_FLAG_CKSTOP;
3693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         /* Check to BusyD0 */
3695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         if ((hsd->Instance->STA & SDMMC_FLAG_BUSYD0) != SDMMC_FLAG_BUSYD0)
3696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
3697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Error when activate Voltage Switch in SDMMC Peripheral */
3698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           return SDMMC_ERROR_UNSUPPORTED_FEATURE;
3699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
3700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         else
3701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         {
3702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Enable Transceiver Switch PIN */
3703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined (USE_HAL_SD_REGISTER_CALLBACKS) && (USE_HAL_SD_REGISTER_CALLBACKS == 1U)
3704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->DriveTransceiver_1_8V_Callback(SET);
3705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
ARM GAS  /tmp/ccsLb3N5.s 			page 178


3706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           HAL_SDEx_DriveTransceiver_1_8V_Callback(SET);
3707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* USE_HAL_SD_REGISTER_CALLBACKS */
3708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Switch ready */
3710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->Instance->POWER |= SDMMC_POWER_VSWITCH;
3711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Check VSWEND Flag */
3713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           while ((hsd->Instance->STA & SDMMC_FLAG_VSWEND) != SDMMC_FLAG_VSWEND)
3714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
3715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             if ((HAL_GetTick() - tickstart) >=  SDMMC_DATATIMEOUT)
3716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             {
3717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****               return HAL_SD_ERROR_TIMEOUT;
3718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             }
3719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
3720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Clear VSWEND Flag */
3722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->Instance->ICR = SDMMC_FLAG_VSWEND;
3723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Check BusyD0 status */
3725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           if ((hsd->Instance->STA & SDMMC_FLAG_BUSYD0) == SDMMC_FLAG_BUSYD0)
3726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           {
3727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             /* Error when enabling 1.8V mode */
3728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             return HAL_SD_ERROR_INVALID_VOLTRANGE;
3729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           }
3730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Switch to 1.8V OK */
3731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Disable VSWITCH FLAG from SDMMC Peripheral */
3733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->Instance->POWER = 0x13U;
3734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           /* Clean Status flags */
3736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           hsd->Instance->ICR = 0xFFFFFFFFU;
3737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         }
3738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
3739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
3741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
3742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
3744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->SdCard.CardType = CARD_SDSC;
 6351              		.loc 1 3745 26
 6352 0108 7B68     		ldr	r3, [r7, #4]
 6353 010a 0022     		movs	r2, #0
 6354 010c 5A64     		str	r2, [r3, #68]
 6355              	.L279:
3746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_SD_ERROR_NONE;
 6356              		.loc 1 3749 10
 6357 010e 0023     		movs	r3, #0
 6358              	.L266:
3750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 6359              		.loc 1 3750 1
 6360 0110 1846     		mov	r0, r3
 6361 0112 1837     		adds	r7, r7, #24
 6362              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccsLb3N5.s 			page 179


 6363 0114 BD46     		mov	sp, r7
 6364              		.cfi_def_cfa_register 13
 6365              		@ sp needed
 6366 0116 80BD     		pop	{r7, pc}
 6367              	.L281:
 6368              		.align	2
 6369              	.L280:
 6370 0118 000010C1 		.word	-1055916032
 6371              		.cfi_endproc
 6372              	.LFE478:
 6374              		.section	.text.SD_PowerOFF,"ax",%progbits
 6375              		.align	1
 6376              		.syntax unified
 6377              		.thumb
 6378              		.thumb_func
 6380              	SD_PowerOFF:
 6381              	.LFB479:
3751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Turns the SDMMC output signals off.
3754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
3755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
3756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_PowerOFF(SD_HandleTypeDef *hsd)
3758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 6382              		.loc 1 3758 1
 6383              		.cfi_startproc
 6384              		@ args = 0, pretend = 0, frame = 8
 6385              		@ frame_needed = 1, uses_anonymous_args = 0
 6386 0000 80B5     		push	{r7, lr}
 6387              		.cfi_def_cfa_offset 8
 6388              		.cfi_offset 7, -8
 6389              		.cfi_offset 14, -4
 6390 0002 82B0     		sub	sp, sp, #8
 6391              		.cfi_def_cfa_offset 16
 6392 0004 00AF     		add	r7, sp, #0
 6393              		.cfi_def_cfa_register 7
 6394 0006 7860     		str	r0, [r7, #4]
3759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Set Power State to OFF */
3760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   (void)SDMMC_PowerState_OFF(hsd->Instance);
 6395              		.loc 1 3760 9
 6396 0008 7B68     		ldr	r3, [r7, #4]
 6397 000a 1B68     		ldr	r3, [r3]
 6398 000c 1846     		mov	r0, r3
 6399 000e FFF7FEFF 		bl	SDMMC_PowerState_OFF
3761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 6400              		.loc 1 3761 1
 6401 0012 00BF     		nop
 6402 0014 0837     		adds	r7, r7, #8
 6403              		.cfi_def_cfa_offset 8
 6404 0016 BD46     		mov	sp, r7
 6405              		.cfi_def_cfa_register 13
 6406              		@ sp needed
 6407 0018 80BD     		pop	{r7, pc}
 6408              		.cfi_endproc
 6409              	.LFE479:
 6411              		.section	.text.SD_SendSDStatus,"ax",%progbits
ARM GAS  /tmp/ccsLb3N5.s 			page 180


 6412              		.align	1
 6413              		.syntax unified
 6414              		.thumb
 6415              		.thumb_func
 6417              	SD_SendSDStatus:
 6418              	.LFB480:
3762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Send Status info command.
3765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: pointer to SD handle
3766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pSDstatus: Pointer to the buffer that will contain the SD card status
3767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         SD Status register)
3768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval error state
3769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_SendSDStatus(SD_HandleTypeDef *hsd, uint32_t *pSDstatus)
3771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 6419              		.loc 1 3771 1
 6420              		.cfi_startproc
 6421              		@ args = 0, pretend = 0, frame = 48
 6422              		@ frame_needed = 1, uses_anonymous_args = 0
 6423 0000 80B5     		push	{r7, lr}
 6424              		.cfi_def_cfa_offset 8
 6425              		.cfi_offset 7, -8
 6426              		.cfi_offset 14, -4
 6427 0002 8CB0     		sub	sp, sp, #48
 6428              		.cfi_def_cfa_offset 56
 6429 0004 00AF     		add	r7, sp, #0
 6430              		.cfi_def_cfa_register 7
 6431 0006 7860     		str	r0, [r7, #4]
 6432 0008 3960     		str	r1, [r7]
3772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SDMMC_DataInitTypeDef config;
3773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
3774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t tickstart = HAL_GetTick();
 6433              		.loc 1 3774 24
 6434 000a FFF7FEFF 		bl	HAL_GetTick
 6435 000e 7862     		str	r0, [r7, #36]
3775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t count;
3776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t *pData = pSDstatus;
 6436              		.loc 1 3776 13
 6437 0010 3B68     		ldr	r3, [r7]
 6438 0012 BB62     		str	r3, [r7, #40]
3777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Check SD response */
3779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((SDMMC_GetResponse(hsd->Instance, SDMMC_RESP1) & SDMMC_CARD_LOCKED) == SDMMC_CARD_LOCKED)
 6439              		.loc 1 3779 29
 6440 0014 7B68     		ldr	r3, [r7, #4]
 6441 0016 1B68     		ldr	r3, [r3]
 6442              		.loc 1 3779 8
 6443 0018 0021     		movs	r1, #0
 6444 001a 1846     		mov	r0, r3
 6445 001c FFF7FEFF 		bl	SDMMC_GetResponse
 6446 0020 0346     		mov	r3, r0
 6447              		.loc 1 3779 54 discriminator 1
 6448 0022 03F00073 		and	r3, r3, #33554432
 6449              		.loc 1 3779 6 discriminator 1
 6450 0026 B3F1007F 		cmp	r3, #33554432
 6451 002a 02D1     		bne	.L284
ARM GAS  /tmp/ccsLb3N5.s 			page 181


3780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_LOCK_UNLOCK_FAILED;
 6452              		.loc 1 3781 12
 6453 002c 4FF40063 		mov	r3, #2048
 6454 0030 B2E0     		b	.L299
 6455              	.L284:
3782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Set block size for card if it is not equal to current block size for card */
3785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdBlockLength(hsd->Instance, 64U);
 6456              		.loc 1 3785 16
 6457 0032 7B68     		ldr	r3, [r7, #4]
 6458 0034 1B68     		ldr	r3, [r3]
 6459 0036 4021     		movs	r1, #64
 6460 0038 1846     		mov	r0, r3
 6461 003a FFF7FEFF 		bl	SDMMC_CmdBlockLength
 6462 003e 3862     		str	r0, [r7, #32]
3786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 6463              		.loc 1 3786 6
 6464 0040 3B6A     		ldr	r3, [r7, #32]
 6465 0042 002B     		cmp	r3, #0
 6466 0044 05D0     		beq	.L286
3787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_NONE;
 6467              		.loc 1 3788 8
 6468 0046 7B68     		ldr	r3, [r7, #4]
 6469 0048 9A6B     		ldr	r2, [r3, #56]
 6470              		.loc 1 3788 20
 6471 004a 7B68     		ldr	r3, [r7, #4]
 6472 004c 9A63     		str	r2, [r3, #56]
3789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 6473              		.loc 1 3789 12
 6474 004e 3B6A     		ldr	r3, [r7, #32]
 6475 0050 A2E0     		b	.L299
 6476              	.L286:
3790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Send CMD55 */
3793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdAppCommand(hsd->Instance, (uint32_t)(hsd->SdCard.RelCardAdd << 16U));
 6477              		.loc 1 3793 16
 6478 0052 7B68     		ldr	r3, [r7, #4]
 6479 0054 1A68     		ldr	r2, [r3]
 6480              		.loc 1 3793 73
 6481 0056 7B68     		ldr	r3, [r7, #4]
 6482 0058 1B6D     		ldr	r3, [r3, #80]
 6483              		.loc 1 3793 16
 6484 005a 1B04     		lsls	r3, r3, #16
 6485 005c 1946     		mov	r1, r3
 6486 005e 1046     		mov	r0, r2
 6487 0060 FFF7FEFF 		bl	SDMMC_CmdAppCommand
 6488 0064 3862     		str	r0, [r7, #32]
3794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 6489              		.loc 1 3794 6
 6490 0066 3B6A     		ldr	r3, [r7, #32]
 6491 0068 002B     		cmp	r3, #0
 6492 006a 05D0     		beq	.L287
3795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
ARM GAS  /tmp/ccsLb3N5.s 			page 182


3796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_NONE;
 6493              		.loc 1 3796 8
 6494 006c 7B68     		ldr	r3, [r7, #4]
 6495 006e 9A6B     		ldr	r2, [r3, #56]
 6496              		.loc 1 3796 20
 6497 0070 7B68     		ldr	r3, [r7, #4]
 6498 0072 9A63     		str	r2, [r3, #56]
3797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 6499              		.loc 1 3797 12
 6500 0074 3B6A     		ldr	r3, [r7, #32]
 6501 0076 8FE0     		b	.L299
 6502              	.L287:
3798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Configure the SD DPSM (Data Path State Machine) */
3801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.DataTimeOut   = SDMMC_DATATIMEOUT;
 6503              		.loc 1 3801 24
 6504 0078 4FF0FF33 		mov	r3, #-1
 6505 007c BB60     		str	r3, [r7, #8]
3802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.DataLength    = 64U;
 6506              		.loc 1 3802 24
 6507 007e 4023     		movs	r3, #64
 6508 0080 FB60     		str	r3, [r7, #12]
3803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.DataBlockSize = SDMMC_DATABLOCK_SIZE_64B;
 6509              		.loc 1 3803 24
 6510 0082 6023     		movs	r3, #96
 6511 0084 3B61     		str	r3, [r7, #16]
3804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.TransferDir   = SDMMC_TRANSFER_DIR_TO_SDMMC;
 6512              		.loc 1 3804 24
 6513 0086 0223     		movs	r3, #2
 6514 0088 7B61     		str	r3, [r7, #20]
3805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
 6515              		.loc 1 3805 24
 6516 008a 0023     		movs	r3, #0
 6517 008c BB61     		str	r3, [r7, #24]
3806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.DPSM          = SDMMC_DPSM_ENABLE;
 6518              		.loc 1 3806 24
 6519 008e 0123     		movs	r3, #1
 6520 0090 FB61     		str	r3, [r7, #28]
3807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   (void)SDMMC_ConfigData(hsd->Instance, &config);
 6521              		.loc 1 3807 9
 6522 0092 7B68     		ldr	r3, [r7, #4]
 6523 0094 1B68     		ldr	r3, [r3]
 6524 0096 07F10802 		add	r2, r7, #8
 6525 009a 1146     		mov	r1, r2
 6526 009c 1846     		mov	r0, r3
 6527 009e FFF7FEFF 		bl	SDMMC_ConfigData
3808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Send ACMD13 (SD_APP_STAUS)  with argument as card's RCA */
3810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdStatusRegister(hsd->Instance);
 6528              		.loc 1 3810 16
 6529 00a2 7B68     		ldr	r3, [r7, #4]
 6530 00a4 1B68     		ldr	r3, [r3]
 6531 00a6 1846     		mov	r0, r3
 6532 00a8 FFF7FEFF 		bl	SDMMC_CmdStatusRegister
 6533 00ac 3862     		str	r0, [r7, #32]
3811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
ARM GAS  /tmp/ccsLb3N5.s 			page 183


 6534              		.loc 1 3811 6
 6535 00ae 3B6A     		ldr	r3, [r7, #32]
 6536 00b0 002B     		cmp	r3, #0
 6537 00b2 2BD0     		beq	.L289
3812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->ErrorCode |= HAL_SD_ERROR_NONE;
 6538              		.loc 1 3813 8
 6539 00b4 7B68     		ldr	r3, [r7, #4]
 6540 00b6 9A6B     		ldr	r2, [r3, #56]
 6541              		.loc 1 3813 20
 6542 00b8 7B68     		ldr	r3, [r7, #4]
 6543 00ba 9A63     		str	r2, [r3, #56]
3814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 6544              		.loc 1 3814 12
 6545 00bc 3B6A     		ldr	r3, [r7, #32]
 6546 00be 6BE0     		b	.L299
 6547              	.L293:
3815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Get status data */
3818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
3819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   while (!__HAL_SD_GET_FLAG(hsd,
3820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_RXOVERR |
3821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DCRCFAIL |
3822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DTIMEOUT |
3823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DATAEND))
3824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   while (!__HAL_SD_GET_FLAG(hsd,
3826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_RXOVERR |
3827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DCRCFAIL |
3828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DTIMEOUT |
3829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DBCKEND))
3830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
3831:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
3832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXFIFOHF))
 6548              		.loc 1 3833 9
 6549 00c0 7B68     		ldr	r3, [r7, #4]
 6550 00c2 1B68     		ldr	r3, [r3]
 6551 00c4 5B6B     		ldr	r3, [r3, #52]
 6552 00c6 03F40043 		and	r3, r3, #32768
 6553              		.loc 1 3833 8
 6554 00ca 002B     		cmp	r3, #0
 6555 00cc 13D0     		beq	.L290
3834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       for (count = 0U; count < 8U; count++)
 6556              		.loc 1 3835 18
 6557 00ce 0023     		movs	r3, #0
 6558 00d0 FB62     		str	r3, [r7, #44]
 6559              		.loc 1 3835 7
 6560 00d2 0DE0     		b	.L291
 6561              	.L292:
3836:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
3837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         *pData = SDMMC_ReadFIFO(hsd->Instance);
 6562              		.loc 1 3837 36
 6563 00d4 7B68     		ldr	r3, [r7, #4]
 6564 00d6 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccsLb3N5.s 			page 184


 6565              		.loc 1 3837 18
 6566 00d8 1846     		mov	r0, r3
 6567 00da FFF7FEFF 		bl	SDMMC_ReadFIFO
 6568 00de 0246     		mov	r2, r0
 6569              		.loc 1 3837 16 discriminator 1
 6570 00e0 BB6A     		ldr	r3, [r7, #40]
 6571 00e2 1A60     		str	r2, [r3]
3838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****         pData++;
 6572              		.loc 1 3838 14
 6573 00e4 BB6A     		ldr	r3, [r7, #40]
 6574 00e6 0433     		adds	r3, r3, #4
 6575 00e8 BB62     		str	r3, [r7, #40]
3835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 6576              		.loc 1 3835 41 discriminator 3
 6577 00ea FB6A     		ldr	r3, [r7, #44]
 6578 00ec 0133     		adds	r3, r3, #1
 6579 00ee FB62     		str	r3, [r7, #44]
 6580              	.L291:
3835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       {
 6581              		.loc 1 3835 30 discriminator 1
 6582 00f0 FB6A     		ldr	r3, [r7, #44]
 6583 00f2 072B     		cmp	r3, #7
 6584 00f4 EED9     		bls	.L292
 6585              	.L290:
3839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       }
3840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3841:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((HAL_GetTick() - tickstart) >=  SDMMC_SWDATATIMEOUT)
 6586              		.loc 1 3842 10
 6587 00f6 FFF7FEFF 		bl	HAL_GetTick
 6588 00fa 0246     		mov	r2, r0
 6589              		.loc 1 3842 24 discriminator 1
 6590 00fc 7B6A     		ldr	r3, [r7, #36]
 6591 00fe D31A     		subs	r3, r2, r3
 6592              		.loc 1 3842 8 discriminator 1
 6593 0100 B3F1FF3F 		cmp	r3, #-1
 6594 0104 02D1     		bne	.L289
3843:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_SD_ERROR_TIMEOUT;
 6595              		.loc 1 3844 14
 6596 0106 4FF00043 		mov	r3, #-2147483648
 6597 010a 45E0     		b	.L299
 6598              	.L289:
3825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_RXOVERR |
 6599              		.loc 1 3825 11
 6600 010c 7B68     		ldr	r3, [r7, #4]
 6601 010e 1B68     		ldr	r3, [r3]
 6602 0110 5A6B     		ldr	r2, [r3, #52]
 6603 0112 40F22A43 		movw	r3, #1066
 6604 0116 1340     		ands	r3, r3, r2
3825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_RXOVERR |
 6605              		.loc 1 3825 10
 6606 0118 002B     		cmp	r3, #0
 6607 011a D1D0     		beq	.L293
3845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 185


3848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DTIMEOUT))
 6608              		.loc 1 3848 7
 6609 011c 7B68     		ldr	r3, [r7, #4]
 6610 011e 1B68     		ldr	r3, [r3]
 6611 0120 5B6B     		ldr	r3, [r3, #52]
 6612 0122 03F00803 		and	r3, r3, #8
 6613              		.loc 1 3848 6
 6614 0126 002B     		cmp	r3, #0
 6615 0128 01D0     		beq	.L294
3849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_DATA_TIMEOUT;
 6616              		.loc 1 3850 12
 6617 012a 0823     		movs	r3, #8
 6618 012c 34E0     		b	.L299
 6619              	.L294:
3851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DCRCFAIL))
 6620              		.loc 1 3852 12
 6621 012e 7B68     		ldr	r3, [r7, #4]
 6622 0130 1B68     		ldr	r3, [r3]
 6623 0132 5B6B     		ldr	r3, [r3, #52]
 6624 0134 03F00203 		and	r3, r3, #2
 6625              		.loc 1 3852 11
 6626 0138 002B     		cmp	r3, #0
 6627 013a 01D0     		beq	.L295
3853:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_DATA_CRC_FAIL;
 6628              		.loc 1 3854 12
 6629 013c 0223     		movs	r3, #2
 6630 013e 2BE0     		b	.L299
 6631              	.L295:
3855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXOVERR))
 6632              		.loc 1 3856 12
 6633 0140 7B68     		ldr	r3, [r7, #4]
 6634 0142 1B68     		ldr	r3, [r3]
 6635 0144 5B6B     		ldr	r3, [r3, #52]
 6636 0146 03F02003 		and	r3, r3, #32
 6637              		.loc 1 3856 11
 6638 014a 002B     		cmp	r3, #0
 6639 014c 17D0     		beq	.L297
3857:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3858:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_RX_OVERRUN;
 6640              		.loc 1 3858 12
 6641 014e 2023     		movs	r3, #32
 6642 0150 22E0     		b	.L299
 6643              	.L298:
3859:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
3861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Nothing to do */
3863:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
3866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   while ((__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DPSMACT)))
3867:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
3868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   while ((__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXDAVL)))
ARM GAS  /tmp/ccsLb3N5.s 			page 186


3869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
3870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
3871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     *pData = SDMMC_ReadFIFO(hsd->Instance);
 6644              		.loc 1 3872 32
 6645 0152 7B68     		ldr	r3, [r7, #4]
 6646 0154 1B68     		ldr	r3, [r3]
 6647              		.loc 1 3872 14
 6648 0156 1846     		mov	r0, r3
 6649 0158 FFF7FEFF 		bl	SDMMC_ReadFIFO
 6650 015c 0246     		mov	r2, r0
 6651              		.loc 1 3872 12 discriminator 1
 6652 015e BB6A     		ldr	r3, [r7, #40]
 6653 0160 1A60     		str	r2, [r3]
3873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     pData++;
 6654              		.loc 1 3873 10
 6655 0162 BB6A     		ldr	r3, [r7, #40]
 6656 0164 0433     		adds	r3, r3, #4
 6657 0166 BB62     		str	r3, [r7, #40]
3874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((HAL_GetTick() - tickstart) >=  SDMMC_SWDATATIMEOUT)
 6658              		.loc 1 3875 10
 6659 0168 FFF7FEFF 		bl	HAL_GetTick
 6660 016c 0246     		mov	r2, r0
 6661              		.loc 1 3875 24 discriminator 1
 6662 016e 7B6A     		ldr	r3, [r7, #36]
 6663 0170 D31A     		subs	r3, r2, r3
 6664              		.loc 1 3875 8 discriminator 1
 6665 0172 B3F1FF3F 		cmp	r3, #-1
 6666 0176 02D1     		bne	.L297
3876:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_SD_ERROR_TIMEOUT;
 6667              		.loc 1 3877 14
 6668 0178 4FF00043 		mov	r3, #-2147483648
 6669 017c 0CE0     		b	.L299
 6670              	.L297:
3868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
 6671              		.loc 1 3868 11
 6672 017e 7B68     		ldr	r3, [r7, #4]
 6673 0180 1B68     		ldr	r3, [r3]
 6674 0182 5B6B     		ldr	r3, [r3, #52]
 6675 0184 03F40013 		and	r3, r3, #2097152
 6676 0188 002B     		cmp	r3, #0
 6677 018a E2D1     		bne	.L298
3878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3879:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3880:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Clear all the static status flags*/
3882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
 6678              		.loc 1 3882 3
 6679 018c 7B68     		ldr	r3, [r7, #4]
 6680 018e 1B68     		ldr	r3, [r3]
 6681 0190 40F23A52 		movw	r2, #1338
 6682 0194 9A63     		str	r2, [r3, #56]
3883:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_SD_ERROR_NONE;
 6683              		.loc 1 3884 10
ARM GAS  /tmp/ccsLb3N5.s 			page 187


 6684 0196 0023     		movs	r3, #0
 6685              	.L299:
3885:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 6686              		.loc 1 3885 1
 6687 0198 1846     		mov	r0, r3
 6688 019a 3037     		adds	r7, r7, #48
 6689              		.cfi_def_cfa_offset 8
 6690 019c BD46     		mov	sp, r7
 6691              		.cfi_def_cfa_register 13
 6692              		@ sp needed
 6693 019e 80BD     		pop	{r7, pc}
 6694              		.cfi_endproc
 6695              	.LFE480:
 6697              		.section	.text.SD_SendStatus,"ax",%progbits
 6698              		.align	1
 6699              		.syntax unified
 6700              		.thumb
 6701              		.thumb_func
 6703              	SD_SendStatus:
 6704              	.LFB481:
3886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Returns the current card's status.
3889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
3890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pCardStatus: pointer to the buffer that will contain the SD card
3891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *         status (Card Status register)
3892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval error state
3893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_SendStatus(SD_HandleTypeDef *hsd, uint32_t *pCardStatus)
3895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 6705              		.loc 1 3895 1
 6706              		.cfi_startproc
 6707              		@ args = 0, pretend = 0, frame = 16
 6708              		@ frame_needed = 1, uses_anonymous_args = 0
 6709 0000 80B5     		push	{r7, lr}
 6710              		.cfi_def_cfa_offset 8
 6711              		.cfi_offset 7, -8
 6712              		.cfi_offset 14, -4
 6713 0002 84B0     		sub	sp, sp, #16
 6714              		.cfi_def_cfa_offset 24
 6715 0004 00AF     		add	r7, sp, #0
 6716              		.cfi_def_cfa_register 7
 6717 0006 7860     		str	r0, [r7, #4]
 6718 0008 3960     		str	r1, [r7]
3896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
3897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (pCardStatus == NULL)
 6719              		.loc 1 3898 6
 6720 000a 3B68     		ldr	r3, [r7]
 6721 000c 002B     		cmp	r3, #0
 6722 000e 02D1     		bne	.L301
3899:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_PARAM;
 6723              		.loc 1 3900 12
 6724 0010 4FF00063 		mov	r3, #134217728
 6725 0014 18E0     		b	.L302
 6726              	.L301:
ARM GAS  /tmp/ccsLb3N5.s 			page 188


3901:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Send Status command */
3904:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdSendStatus(hsd->Instance, (uint32_t)(hsd->SdCard.RelCardAdd << 16U));
 6727              		.loc 1 3904 16
 6728 0016 7B68     		ldr	r3, [r7, #4]
 6729 0018 1A68     		ldr	r2, [r3]
 6730              		.loc 1 3904 73
 6731 001a 7B68     		ldr	r3, [r7, #4]
 6732 001c 1B6D     		ldr	r3, [r3, #80]
 6733              		.loc 1 3904 16
 6734 001e 1B04     		lsls	r3, r3, #16
 6735 0020 1946     		mov	r1, r3
 6736 0022 1046     		mov	r0, r2
 6737 0024 FFF7FEFF 		bl	SDMMC_CmdSendStatus
 6738 0028 F860     		str	r0, [r7, #12]
3905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 6739              		.loc 1 3905 6
 6740 002a FB68     		ldr	r3, [r7, #12]
 6741 002c 002B     		cmp	r3, #0
 6742 002e 01D0     		beq	.L303
3906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 6743              		.loc 1 3907 12
 6744 0030 FB68     		ldr	r3, [r7, #12]
 6745 0032 09E0     		b	.L302
 6746              	.L303:
3908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3909:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Get SD card status */
3911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *pCardStatus = SDMMC_GetResponse(hsd->Instance, SDMMC_RESP1);
 6747              		.loc 1 3911 39
 6748 0034 7B68     		ldr	r3, [r7, #4]
 6749 0036 1B68     		ldr	r3, [r3]
 6750              		.loc 1 3911 18
 6751 0038 0021     		movs	r1, #0
 6752 003a 1846     		mov	r0, r3
 6753 003c FFF7FEFF 		bl	SDMMC_GetResponse
 6754 0040 0246     		mov	r2, r0
 6755              		.loc 1 3911 16 discriminator 1
 6756 0042 3B68     		ldr	r3, [r7]
 6757 0044 1A60     		str	r2, [r3]
3912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3913:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_SD_ERROR_NONE;
 6758              		.loc 1 3913 10
 6759 0046 0023     		movs	r3, #0
 6760              	.L302:
3914:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 6761              		.loc 1 3914 1
 6762 0048 1846     		mov	r0, r3
 6763 004a 1037     		adds	r7, r7, #16
 6764              		.cfi_def_cfa_offset 8
 6765 004c BD46     		mov	sp, r7
 6766              		.cfi_def_cfa_register 13
 6767              		@ sp needed
 6768 004e 80BD     		pop	{r7, pc}
 6769              		.cfi_endproc
ARM GAS  /tmp/ccsLb3N5.s 			page 189


 6770              	.LFE481:
 6772              		.section	.text.SD_WideBus_Enable,"ax",%progbits
 6773              		.align	1
 6774              		.syntax unified
 6775              		.thumb
 6776              		.thumb_func
 6778              	SD_WideBus_Enable:
 6779              	.LFB482:
3915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3916:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Enables the SDMMC wide bus mode.
3918:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: pointer to SD handle
3919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval error state
3920:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_WideBus_Enable(SD_HandleTypeDef *hsd)
3922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 6780              		.loc 1 3922 1
 6781              		.cfi_startproc
 6782              		@ args = 0, pretend = 0, frame = 24
 6783              		@ frame_needed = 1, uses_anonymous_args = 0
 6784 0000 80B5     		push	{r7, lr}
 6785              		.cfi_def_cfa_offset 8
 6786              		.cfi_offset 7, -8
 6787              		.cfi_offset 14, -4
 6788 0002 86B0     		sub	sp, sp, #24
 6789              		.cfi_def_cfa_offset 32
 6790 0004 00AF     		add	r7, sp, #0
 6791              		.cfi_def_cfa_register 7
 6792 0006 7860     		str	r0, [r7, #4]
3923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t scr[2U] = {0U, 0U};
 6793              		.loc 1 3923 12
 6794 0008 0023     		movs	r3, #0
 6795 000a FB60     		str	r3, [r7, #12]
 6796 000c 0023     		movs	r3, #0
 6797 000e 3B61     		str	r3, [r7, #16]
3924:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
3925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3926:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((SDMMC_GetResponse(hsd->Instance, SDMMC_RESP1) & SDMMC_CARD_LOCKED) == SDMMC_CARD_LOCKED)
 6798              		.loc 1 3926 29
 6799 0010 7B68     		ldr	r3, [r7, #4]
 6800 0012 1B68     		ldr	r3, [r3]
 6801              		.loc 1 3926 8
 6802 0014 0021     		movs	r1, #0
 6803 0016 1846     		mov	r0, r3
 6804 0018 FFF7FEFF 		bl	SDMMC_GetResponse
 6805 001c 0346     		mov	r3, r0
 6806              		.loc 1 3926 54 discriminator 1
 6807 001e 03F00073 		and	r3, r3, #33554432
 6808              		.loc 1 3926 6 discriminator 1
 6809 0022 B3F1007F 		cmp	r3, #33554432
 6810 0026 02D1     		bne	.L305
3927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_LOCK_UNLOCK_FAILED;
 6811              		.loc 1 3928 12
 6812 0028 4FF40063 		mov	r3, #2048
 6813 002c 2FE0     		b	.L311
 6814              	.L305:
ARM GAS  /tmp/ccsLb3N5.s 			page 190


3929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3931:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Get SCR Register */
3932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SD_FindSCR(hsd, scr);
 6815              		.loc 1 3932 16
 6816 002e 07F10C03 		add	r3, r7, #12
 6817 0032 1946     		mov	r1, r3
 6818 0034 7868     		ldr	r0, [r7, #4]
 6819 0036 FFF7FEFF 		bl	SD_FindSCR
 6820 003a 7861     		str	r0, [r7, #20]
3933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 6821              		.loc 1 3933 6
 6822 003c 7B69     		ldr	r3, [r7, #20]
 6823 003e 002B     		cmp	r3, #0
 6824 0040 01D0     		beq	.L307
3934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 6825              		.loc 1 3935 12
 6826 0042 7B69     		ldr	r3, [r7, #20]
 6827 0044 23E0     		b	.L311
 6828              	.L307:
3936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* If requested card supports wide bus operation */
3939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((scr[1U] & SDMMC_WIDE_BUS_SUPPORT) != SDMMC_ALLZERO)
 6829              		.loc 1 3939 11
 6830 0046 3B69     		ldr	r3, [r7, #16]
 6831              		.loc 1 3939 16
 6832 0048 03F48023 		and	r3, r3, #262144
 6833              		.loc 1 3939 6
 6834 004c 002B     		cmp	r3, #0
 6835 004e 1CD0     		beq	.L308
3940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send CMD55 APP_CMD with argument as card's RCA.*/
3942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdAppCommand(hsd->Instance, (uint32_t)(hsd->SdCard.RelCardAdd << 16U));
 6836              		.loc 1 3942 18
 6837 0050 7B68     		ldr	r3, [r7, #4]
 6838 0052 1A68     		ldr	r2, [r3]
 6839              		.loc 1 3942 75
 6840 0054 7B68     		ldr	r3, [r7, #4]
 6841 0056 1B6D     		ldr	r3, [r3, #80]
 6842              		.loc 1 3942 18
 6843 0058 1B04     		lsls	r3, r3, #16
 6844 005a 1946     		mov	r1, r3
 6845 005c 1046     		mov	r0, r2
 6846 005e FFF7FEFF 		bl	SDMMC_CmdAppCommand
 6847 0062 7861     		str	r0, [r7, #20]
3943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6848              		.loc 1 3943 8
 6849 0064 7B69     		ldr	r3, [r7, #20]
 6850 0066 002B     		cmp	r3, #0
 6851 0068 01D0     		beq	.L309
3944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return errorstate;
 6852              		.loc 1 3945 14
 6853 006a 7B69     		ldr	r3, [r7, #20]
 6854 006c 0FE0     		b	.L311
ARM GAS  /tmp/ccsLb3N5.s 			page 191


 6855              	.L309:
3946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3948:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send ACMD6 APP_CMD with argument as 2 for wide bus mode */
3949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdBusWidth(hsd->Instance, 2U);
 6856              		.loc 1 3949 18
 6857 006e 7B68     		ldr	r3, [r7, #4]
 6858 0070 1B68     		ldr	r3, [r3]
 6859 0072 0221     		movs	r1, #2
 6860 0074 1846     		mov	r0, r3
 6861 0076 FFF7FEFF 		bl	SDMMC_CmdBusWidth
 6862 007a 7861     		str	r0, [r7, #20]
3950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6863              		.loc 1 3950 8
 6864 007c 7B69     		ldr	r3, [r7, #20]
 6865 007e 002B     		cmp	r3, #0
 6866 0080 01D0     		beq	.L310
3951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return errorstate;
 6867              		.loc 1 3952 14
 6868 0082 7B69     		ldr	r3, [r7, #20]
 6869 0084 03E0     		b	.L311
 6870              	.L310:
3953:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_NONE;
 6871              		.loc 1 3955 12
 6872 0086 0023     		movs	r3, #0
 6873 0088 01E0     		b	.L311
 6874              	.L308:
3956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
3958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3959:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_REQUEST_NOT_APPLICABLE;
 6875              		.loc 1 3959 12
 6876 008a 4FF08063 		mov	r3, #67108864
 6877              	.L311:
3960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 6878              		.loc 1 3961 1
 6879 008e 1846     		mov	r0, r3
 6880 0090 1837     		adds	r7, r7, #24
 6881              		.cfi_def_cfa_offset 8
 6882 0092 BD46     		mov	sp, r7
 6883              		.cfi_def_cfa_register 13
 6884              		@ sp needed
 6885 0094 80BD     		pop	{r7, pc}
 6886              		.cfi_endproc
 6887              	.LFE482:
 6889              		.section	.text.SD_WideBus_Disable,"ax",%progbits
 6890              		.align	1
 6891              		.syntax unified
 6892              		.thumb
 6893              		.thumb_func
 6895              	SD_WideBus_Disable:
 6896              	.LFB483:
3962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 192


3963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
3964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Disables the SDMMC wide bus mode.
3965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
3966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval error state
3967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
3968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_WideBus_Disable(SD_HandleTypeDef *hsd)
3969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 6897              		.loc 1 3969 1
 6898              		.cfi_startproc
 6899              		@ args = 0, pretend = 0, frame = 24
 6900              		@ frame_needed = 1, uses_anonymous_args = 0
 6901 0000 80B5     		push	{r7, lr}
 6902              		.cfi_def_cfa_offset 8
 6903              		.cfi_offset 7, -8
 6904              		.cfi_offset 14, -4
 6905 0002 86B0     		sub	sp, sp, #24
 6906              		.cfi_def_cfa_offset 32
 6907 0004 00AF     		add	r7, sp, #0
 6908              		.cfi_def_cfa_register 7
 6909 0006 7860     		str	r0, [r7, #4]
3970:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t scr[2U] = {0U, 0U};
 6910              		.loc 1 3970 12
 6911 0008 0023     		movs	r3, #0
 6912 000a FB60     		str	r3, [r7, #12]
 6913 000c 0023     		movs	r3, #0
 6914 000e 3B61     		str	r3, [r7, #16]
3971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
3972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((SDMMC_GetResponse(hsd->Instance, SDMMC_RESP1) & SDMMC_CARD_LOCKED) == SDMMC_CARD_LOCKED)
 6915              		.loc 1 3973 29
 6916 0010 7B68     		ldr	r3, [r7, #4]
 6917 0012 1B68     		ldr	r3, [r3]
 6918              		.loc 1 3973 8
 6919 0014 0021     		movs	r1, #0
 6920 0016 1846     		mov	r0, r3
 6921 0018 FFF7FEFF 		bl	SDMMC_GetResponse
 6922 001c 0346     		mov	r3, r0
 6923              		.loc 1 3973 54 discriminator 1
 6924 001e 03F00073 		and	r3, r3, #33554432
 6925              		.loc 1 3973 6 discriminator 1
 6926 0022 B3F1007F 		cmp	r3, #33554432
 6927 0026 02D1     		bne	.L313
3974:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3975:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_LOCK_UNLOCK_FAILED;
 6928              		.loc 1 3975 12
 6929 0028 4FF40063 		mov	r3, #2048
 6930 002c 2FE0     		b	.L319
 6931              	.L313:
3976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3977:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Get SCR Register */
3979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SD_FindSCR(hsd, scr);
 6932              		.loc 1 3979 16
 6933 002e 07F10C03 		add	r3, r7, #12
 6934 0032 1946     		mov	r1, r3
 6935 0034 7868     		ldr	r0, [r7, #4]
 6936 0036 FFF7FEFF 		bl	SD_FindSCR
ARM GAS  /tmp/ccsLb3N5.s 			page 193


 6937 003a 7861     		str	r0, [r7, #20]
3980:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 6938              		.loc 1 3980 6
 6939 003c 7B69     		ldr	r3, [r7, #20]
 6940 003e 002B     		cmp	r3, #0
 6941 0040 01D0     		beq	.L315
3981:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 6942              		.loc 1 3982 12
 6943 0042 7B69     		ldr	r3, [r7, #20]
 6944 0044 23E0     		b	.L319
 6945              	.L315:
3983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
3984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* If requested card supports 1 bit mode operation */
3986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if ((scr[1U] & SDMMC_SINGLE_BUS_SUPPORT) != SDMMC_ALLZERO)
 6946              		.loc 1 3986 11
 6947 0046 3B69     		ldr	r3, [r7, #16]
 6948              		.loc 1 3986 16
 6949 0048 03F48033 		and	r3, r3, #65536
 6950              		.loc 1 3986 6
 6951 004c 002B     		cmp	r3, #0
 6952 004e 1CD0     		beq	.L316
3987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
3988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send CMD55 APP_CMD with argument as card's RCA */
3989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdAppCommand(hsd->Instance, (uint32_t)(hsd->SdCard.RelCardAdd << 16U));
 6953              		.loc 1 3989 18
 6954 0050 7B68     		ldr	r3, [r7, #4]
 6955 0052 1A68     		ldr	r2, [r3]
 6956              		.loc 1 3989 75
 6957 0054 7B68     		ldr	r3, [r7, #4]
 6958 0056 1B6D     		ldr	r3, [r3, #80]
 6959              		.loc 1 3989 18
 6960 0058 1B04     		lsls	r3, r3, #16
 6961 005a 1946     		mov	r1, r3
 6962 005c 1046     		mov	r0, r2
 6963 005e FFF7FEFF 		bl	SDMMC_CmdAppCommand
 6964 0062 7861     		str	r0, [r7, #20]
3990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6965              		.loc 1 3990 8
 6966 0064 7B69     		ldr	r3, [r7, #20]
 6967 0066 002B     		cmp	r3, #0
 6968 0068 01D0     		beq	.L317
3991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return errorstate;
 6969              		.loc 1 3992 14
 6970 006a 7B69     		ldr	r3, [r7, #20]
 6971 006c 0FE0     		b	.L319
 6972              	.L317:
3993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
3994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
3995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Send ACMD6 APP_CMD with argument as 0 for single bus mode */
3996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     errorstate = SDMMC_CmdBusWidth(hsd->Instance, 0U);
 6973              		.loc 1 3996 18
 6974 006e 7B68     		ldr	r3, [r7, #4]
 6975 0070 1B68     		ldr	r3, [r3]
 6976 0072 0021     		movs	r1, #0
ARM GAS  /tmp/ccsLb3N5.s 			page 194


 6977 0074 1846     		mov	r0, r3
 6978 0076 FFF7FEFF 		bl	SDMMC_CmdBusWidth
 6979 007a 7861     		str	r0, [r7, #20]
3997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (errorstate != HAL_SD_ERROR_NONE)
 6980              		.loc 1 3997 8
 6981 007c 7B69     		ldr	r3, [r7, #20]
 6982 007e 002B     		cmp	r3, #0
 6983 0080 01D0     		beq	.L318
3998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
3999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return errorstate;
 6984              		.loc 1 3999 14
 6985 0082 7B69     		ldr	r3, [r7, #20]
 6986 0084 03E0     		b	.L319
 6987              	.L318:
4000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
4001:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_NONE;
 6988              		.loc 1 4002 12
 6989 0086 0023     		movs	r3, #0
 6990 0088 01E0     		b	.L319
 6991              	.L316:
4003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
4005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_REQUEST_NOT_APPLICABLE;
 6992              		.loc 1 4006 12
 6993 008a 4FF08063 		mov	r3, #67108864
 6994              	.L319:
4007:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 6995              		.loc 1 4008 1
 6996 008e 1846     		mov	r0, r3
 6997 0090 1837     		adds	r7, r7, #24
 6998              		.cfi_def_cfa_offset 8
 6999 0092 BD46     		mov	sp, r7
 7000              		.cfi_def_cfa_register 13
 7001              		@ sp needed
 7002 0094 80BD     		pop	{r7, pc}
 7003              		.cfi_endproc
 7004              	.LFE483:
 7006              		.section	.text.SD_FindSCR,"ax",%progbits
 7007              		.align	1
 7008              		.syntax unified
 7009              		.thumb
 7010              		.thumb_func
 7012              	SD_FindSCR:
 7013              	.LFB484:
4009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4011:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
4012:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Finds the SD card SCR register value.
4013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: Pointer to SD handle
4014:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  pSCR: pointer to the buffer that will contain the SCR value
4015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval error state
4016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
4017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static uint32_t SD_FindSCR(SD_HandleTypeDef *hsd, uint32_t *pSCR)
4018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
ARM GAS  /tmp/ccsLb3N5.s 			page 195


 7014              		.loc 1 4018 1
 7015              		.cfi_startproc
 7016              		@ args = 0, pretend = 0, frame = 56
 7017              		@ frame_needed = 1, uses_anonymous_args = 0
 7018 0000 90B5     		push	{r4, r7, lr}
 7019              		.cfi_def_cfa_offset 12
 7020              		.cfi_offset 4, -12
 7021              		.cfi_offset 7, -8
 7022              		.cfi_offset 14, -4
 7023 0002 8FB0     		sub	sp, sp, #60
 7024              		.cfi_def_cfa_offset 72
 7025 0004 00AF     		add	r7, sp, #0
 7026              		.cfi_def_cfa_register 7
 7027 0006 7860     		str	r0, [r7, #4]
 7028 0008 3960     		str	r1, [r7]
4019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   SDMMC_DataInitTypeDef config;
4020:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t errorstate;
4021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t tickstart = HAL_GetTick();
 7029              		.loc 1 4021 24
 7030 000a FFF7FEFF 		bl	HAL_GetTick
 7031 000e 3863     		str	r0, [r7, #48]
4022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t index = 0U;
 7032              		.loc 1 4022 12
 7033 0010 0023     		movs	r3, #0
 7034 0012 7B63     		str	r3, [r7, #52]
4023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t tempscr[2U] = {0U, 0U};
 7035              		.loc 1 4023 12
 7036 0014 0023     		movs	r3, #0
 7037 0016 BB60     		str	r3, [r7, #8]
 7038 0018 0023     		movs	r3, #0
 7039 001a FB60     		str	r3, [r7, #12]
4024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t *scr = pSCR;
 7040              		.loc 1 4024 13
 7041 001c 3B68     		ldr	r3, [r7]
 7042 001e FB62     		str	r3, [r7, #44]
4025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Set Block Size To 8 Bytes */
4027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdBlockLength(hsd->Instance, 8U);
 7043              		.loc 1 4027 16
 7044 0020 7B68     		ldr	r3, [r7, #4]
 7045 0022 1B68     		ldr	r3, [r3]
 7046 0024 0821     		movs	r1, #8
 7047 0026 1846     		mov	r0, r3
 7048 0028 FFF7FEFF 		bl	SDMMC_CmdBlockLength
 7049 002c B862     		str	r0, [r7, #40]
4028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 7050              		.loc 1 4028 6
 7051 002e BB6A     		ldr	r3, [r7, #40]
 7052 0030 002B     		cmp	r3, #0
 7053 0032 01D0     		beq	.L321
4029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 7054              		.loc 1 4030 12
 7055 0034 BB6A     		ldr	r3, [r7, #40]
 7056 0036 B2E0     		b	.L333
 7057              	.L321:
4031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
ARM GAS  /tmp/ccsLb3N5.s 			page 196


4032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Send CMD55 APP_CMD with argument as card's RCA */
4034:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdAppCommand(hsd->Instance, (uint32_t)((hsd->SdCard.RelCardAdd) << 16U));
 7058              		.loc 1 4034 16
 7059 0038 7B68     		ldr	r3, [r7, #4]
 7060 003a 1A68     		ldr	r2, [r3]
 7061              		.loc 1 4034 74
 7062 003c 7B68     		ldr	r3, [r7, #4]
 7063 003e 1B6D     		ldr	r3, [r3, #80]
 7064              		.loc 1 4034 16
 7065 0040 1B04     		lsls	r3, r3, #16
 7066 0042 1946     		mov	r1, r3
 7067 0044 1046     		mov	r0, r2
 7068 0046 FFF7FEFF 		bl	SDMMC_CmdAppCommand
 7069 004a B862     		str	r0, [r7, #40]
4035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 7070              		.loc 1 4035 6
 7071 004c BB6A     		ldr	r3, [r7, #40]
 7072 004e 002B     		cmp	r3, #0
 7073 0050 01D0     		beq	.L323
4036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 7074              		.loc 1 4037 12
 7075 0052 BB6A     		ldr	r3, [r7, #40]
 7076 0054 A3E0     		b	.L333
 7077              	.L323:
4038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4039:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.DataTimeOut   = SDMMC_DATATIMEOUT;
 7078              		.loc 1 4040 24
 7079 0056 4FF0FF33 		mov	r3, #-1
 7080 005a 3B61     		str	r3, [r7, #16]
4041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.DataLength    = 8U;
 7081              		.loc 1 4041 24
 7082 005c 0823     		movs	r3, #8
 7083 005e 7B61     		str	r3, [r7, #20]
4042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.DataBlockSize = SDMMC_DATABLOCK_SIZE_8B;
 7084              		.loc 1 4042 24
 7085 0060 3023     		movs	r3, #48
 7086 0062 BB61     		str	r3, [r7, #24]
4043:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.TransferDir   = SDMMC_TRANSFER_DIR_TO_SDMMC;
 7087              		.loc 1 4043 24
 7088 0064 0223     		movs	r3, #2
 7089 0066 FB61     		str	r3, [r7, #28]
4044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.TransferMode  = SDMMC_TRANSFER_MODE_BLOCK;
 7090              		.loc 1 4044 24
 7091 0068 0023     		movs	r3, #0
 7092 006a 3B62     		str	r3, [r7, #32]
4045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   config.DPSM          = SDMMC_DPSM_ENABLE;
 7093              		.loc 1 4045 24
 7094 006c 0123     		movs	r3, #1
 7095 006e 7B62     		str	r3, [r7, #36]
4046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   (void)SDMMC_ConfigData(hsd->Instance, &config);
 7096              		.loc 1 4046 9
 7097 0070 7B68     		ldr	r3, [r7, #4]
 7098 0072 1B68     		ldr	r3, [r3]
 7099 0074 07F11002 		add	r2, r7, #16
ARM GAS  /tmp/ccsLb3N5.s 			page 197


 7100 0078 1146     		mov	r1, r2
 7101 007a 1846     		mov	r0, r3
 7102 007c FFF7FEFF 		bl	SDMMC_ConfigData
4047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   /* Send ACMD51 SD_APP_SEND_SCR with argument as 0 */
4049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   errorstate = SDMMC_CmdSendSCR(hsd->Instance);
 7103              		.loc 1 4049 16
 7104 0080 7B68     		ldr	r3, [r7, #4]
 7105 0082 1B68     		ldr	r3, [r3]
 7106 0084 1846     		mov	r0, r3
 7107 0086 FFF7FEFF 		bl	SDMMC_CmdSendSCR
 7108 008a B862     		str	r0, [r7, #40]
4050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (errorstate != HAL_SD_ERROR_NONE)
 7109              		.loc 1 4050 6
 7110 008c BB6A     		ldr	r3, [r7, #40]
 7111 008e 002B     		cmp	r3, #0
 7112 0090 2AD0     		beq	.L325
4051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return errorstate;
 7113              		.loc 1 4052 12
 7114 0092 BB6A     		ldr	r3, [r7, #40]
 7115 0094 83E0     		b	.L333
 7116              	.L329:
4053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #if defined(STM32L4P5xx) || defined(STM32L4Q5xx) || defined(STM32L4R5xx) || defined(STM32L4R7xx) ||
4056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   while (!__HAL_SD_GET_FLAG(hsd,
4057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_RXOVERR |
4058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DCRCFAIL |
4059:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DTIMEOUT |
4060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DBCKEND |
4061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****                             SDMMC_FLAG_DATAEND))
4062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4063:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((!__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXFIFOE)) && (index == 0U))
4064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
4065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tempscr[0] = SDMMC_ReadFIFO(hsd->Instance);
4066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tempscr[1] = SDMMC_ReadFIFO(hsd->Instance);
4067:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       index++;
4068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
4069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4070:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((HAL_GetTick() - tickstart) >=  SDMMC_SWDATATIMEOUT)
4072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
4073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_SD_ERROR_TIMEOUT;
4074:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
4075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4076:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #else
4077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   while (!__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXOVERR | SDMMC_FLAG_DCRCFAIL | SDMMC_FLAG_DTIMEOUT))
4078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4079:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXDAVL))
 7117              		.loc 1 4079 9
 7118 0096 7B68     		ldr	r3, [r7, #4]
 7119 0098 1B68     		ldr	r3, [r3]
 7120 009a 5B6B     		ldr	r3, [r3, #52]
 7121 009c 03F40013 		and	r3, r3, #2097152
 7122              		.loc 1 4079 8
 7123 00a0 002B     		cmp	r3, #0
ARM GAS  /tmp/ccsLb3N5.s 			page 198


 7124 00a2 0FD0     		beq	.L326
4080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
4081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       *(tempscr + index) = SDMMC_ReadFIFO(hsd->Instance);
 7125              		.loc 1 4081 46
 7126 00a4 7B68     		ldr	r3, [r7, #4]
 7127 00a6 1968     		ldr	r1, [r3]
 7128              		.loc 1 4081 17
 7129 00a8 7B6B     		ldr	r3, [r7, #52]
 7130 00aa 9B00     		lsls	r3, r3, #2
 7131 00ac 07F10802 		add	r2, r7, #8
 7132 00b0 D418     		adds	r4, r2, r3
 7133              		.loc 1 4081 28
 7134 00b2 0846     		mov	r0, r1
 7135 00b4 FFF7FEFF 		bl	SDMMC_ReadFIFO
 7136 00b8 0346     		mov	r3, r0
 7137              		.loc 1 4081 26 discriminator 1
 7138 00ba 2360     		str	r3, [r4]
4082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       index++;
 7139              		.loc 1 4082 12
 7140 00bc 7B6B     		ldr	r3, [r7, #52]
 7141 00be 0133     		adds	r3, r3, #1
 7142 00c0 7B63     		str	r3, [r7, #52]
 7143 00c2 06E0     		b	.L327
 7144              	.L326:
4083:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
4084:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else if (!__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXACT))
 7145              		.loc 1 4084 15
 7146 00c4 7B68     		ldr	r3, [r7, #4]
 7147 00c6 1B68     		ldr	r3, [r3]
 7148 00c8 5B6B     		ldr	r3, [r3, #52]
 7149 00ca 03F40053 		and	r3, r3, #8192
 7150              		.loc 1 4084 13
 7151 00ce 002B     		cmp	r3, #0
 7152 00d0 12D0     		beq	.L334
 7153              	.L327:
4085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
4086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       break;
4087:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
4088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     else
4089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
4090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       /* Nothing to do */
4091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
4092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     if ((HAL_GetTick() - tickstart) >=  SDMMC_SWDATATIMEOUT)
 7154              		.loc 1 4092 10
 7155 00d2 FFF7FEFF 		bl	HAL_GetTick
 7156 00d6 0246     		mov	r2, r0
 7157              		.loc 1 4092 24 discriminator 1
 7158 00d8 3B6B     		ldr	r3, [r7, #48]
 7159 00da D31A     		subs	r3, r2, r3
 7160              		.loc 1 4092 8 discriminator 1
 7161 00dc B3F1FF3F 		cmp	r3, #-1
 7162 00e0 02D1     		bne	.L325
4093:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
4094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       return HAL_SD_ERROR_TIMEOUT;
 7163              		.loc 1 4094 14
 7164 00e2 4FF00043 		mov	r3, #-2147483648
 7165 00e6 5AE0     		b	.L333
ARM GAS  /tmp/ccsLb3N5.s 			page 199


 7166              	.L325:
4077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 7167              		.loc 1 4077 11
 7168 00e8 7B68     		ldr	r3, [r7, #4]
 7169 00ea 1B68     		ldr	r3, [r3]
 7170 00ec 5B6B     		ldr	r3, [r3, #52]
 7171 00ee 03F02A03 		and	r3, r3, #42
4077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
 7172              		.loc 1 4077 10
 7173 00f2 002B     		cmp	r3, #0
 7174 00f4 CFD0     		beq	.L329
 7175 00f6 00E0     		b	.L328
 7176              	.L334:
4086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
 7177              		.loc 1 4086 7
 7178 00f8 00BF     		nop
 7179              	.L328:
4095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
4096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4097:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** #endif /* STM32L4P5xx || STM32L4Q5xx || STM32L4R5xx || STM32L4R7xx || STM32L4R9xx \
4098:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****           || STM32L4S5xx || STM32L4S7xx || STM32L4S9xx */
4099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DTIMEOUT))
 7180              		.loc 1 4100 7
 7181 00fa 7B68     		ldr	r3, [r7, #4]
 7182 00fc 1B68     		ldr	r3, [r3]
 7183 00fe 5B6B     		ldr	r3, [r3, #52]
 7184 0100 03F00803 		and	r3, r3, #8
 7185              		.loc 1 4100 6
 7186 0104 002B     		cmp	r3, #0
 7187 0106 05D0     		beq	.L330
4101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_FLAG_DTIMEOUT);
 7188              		.loc 1 4102 5
 7189 0108 7B68     		ldr	r3, [r7, #4]
 7190 010a 1B68     		ldr	r3, [r3]
 7191 010c 0822     		movs	r2, #8
 7192 010e 9A63     		str	r2, [r3, #56]
4103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_DATA_TIMEOUT;
 7193              		.loc 1 4104 12
 7194 0110 0823     		movs	r3, #8
 7195 0112 44E0     		b	.L333
 7196              	.L330:
4105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_DCRCFAIL))
 7197              		.loc 1 4106 12
 7198 0114 7B68     		ldr	r3, [r7, #4]
 7199 0116 1B68     		ldr	r3, [r3]
 7200 0118 5B6B     		ldr	r3, [r3, #52]
 7201 011a 03F00203 		and	r3, r3, #2
 7202              		.loc 1 4106 11
 7203 011e 002B     		cmp	r3, #0
 7204 0120 05D0     		beq	.L331
4107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_FLAG_DCRCFAIL);
 7205              		.loc 1 4108 5
ARM GAS  /tmp/ccsLb3N5.s 			page 200


 7206 0122 7B68     		ldr	r3, [r7, #4]
 7207 0124 1B68     		ldr	r3, [r3]
 7208 0126 0222     		movs	r2, #2
 7209 0128 9A63     		str	r2, [r3, #56]
4109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_DATA_CRC_FAIL;
 7210              		.loc 1 4110 12
 7211 012a 0223     		movs	r3, #2
 7212 012c 37E0     		b	.L333
 7213              	.L331:
4111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else if (__HAL_SD_GET_FLAG(hsd, SDMMC_FLAG_RXOVERR))
 7214              		.loc 1 4112 12
 7215 012e 7B68     		ldr	r3, [r7, #4]
 7216 0130 1B68     		ldr	r3, [r3]
 7217 0132 5B6B     		ldr	r3, [r3, #52]
 7218 0134 03F02003 		and	r3, r3, #32
 7219              		.loc 1 4112 11
 7220 0138 002B     		cmp	r3, #0
 7221 013a 05D0     		beq	.L332
4113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_FLAG_RXOVERR);
 7222              		.loc 1 4114 5
 7223 013c 7B68     		ldr	r3, [r7, #4]
 7224 013e 1B68     		ldr	r3, [r3]
 7225 0140 2022     		movs	r2, #32
 7226 0142 9A63     		str	r2, [r3, #56]
4115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     return HAL_SD_ERROR_RX_OVERRUN;
 7227              		.loc 1 4116 12
 7228 0144 2023     		movs	r3, #32
 7229 0146 2AE0     		b	.L333
 7230              	.L332:
4117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   else
4119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* No error flag set */
4121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Clear all the static flags */
4122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     __HAL_SD_CLEAR_FLAG(hsd, SDMMC_STATIC_DATA_FLAGS);
 7231              		.loc 1 4122 5
 7232 0148 7B68     		ldr	r3, [r7, #4]
 7233 014a 1B68     		ldr	r3, [r3]
 7234 014c 40F23A52 		movw	r2, #1338
 7235 0150 9A63     		str	r2, [r3, #56]
4123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     *scr = (((tempscr[1] & SDMMC_0TO7BITS) << 24)  | ((tempscr[1] & SDMMC_8TO15BITS) << 8) | \
 7236              		.loc 1 4124 22
 7237 0152 FB68     		ldr	r3, [r7, #12]
 7238              		.loc 1 4124 44
 7239 0154 1A06     		lsls	r2, r3, #24
 7240              		.loc 1 4124 63
 7241 0156 FB68     		ldr	r3, [r7, #12]
 7242              		.loc 1 4124 86
 7243 0158 1B02     		lsls	r3, r3, #8
 7244 015a 03F47F03 		and	r3, r3, #16711680
 7245              		.loc 1 4124 52
 7246 015e 1A43     		orrs	r2, r2, r3
ARM GAS  /tmp/ccsLb3N5.s 			page 201


4125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             ((tempscr[1] & SDMMC_16TO23BITS) >> 8) | ((tempscr[1] & SDMMC_24TO31BITS) >> 24));
 7247              		.loc 1 4125 22
 7248 0160 FB68     		ldr	r3, [r7, #12]
 7249              		.loc 1 4125 46
 7250 0162 1B0A     		lsrs	r3, r3, #8
 7251 0164 03F47F43 		and	r3, r3, #65280
4124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             ((tempscr[1] & SDMMC_16TO23BITS) >> 8) | ((tempscr[1] & SDMMC_24TO31BITS) >> 24));
 7252              		.loc 1 4124 92
 7253 0168 1A43     		orrs	r2, r2, r3
 7254              		.loc 1 4125 63
 7255 016a FB68     		ldr	r3, [r7, #12]
 7256              		.loc 1 4125 87
 7257 016c 1B0E     		lsrs	r3, r3, #24
 7258              		.loc 1 4125 52
 7259 016e 1A43     		orrs	r2, r2, r3
4124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             ((tempscr[1] & SDMMC_16TO23BITS) >> 8) | ((tempscr[1] & SDMMC_24TO31BITS) >> 24));
 7260              		.loc 1 4124 10
 7261 0170 FB6A     		ldr	r3, [r7, #44]
 7262 0172 1A60     		str	r2, [r3]
4126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     scr++;
 7263              		.loc 1 4126 8
 7264 0174 FB6A     		ldr	r3, [r7, #44]
 7265 0176 0433     		adds	r3, r3, #4
 7266 0178 FB62     		str	r3, [r7, #44]
4127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     *scr = (((tempscr[0] & SDMMC_0TO7BITS) << 24)  | ((tempscr[0] & SDMMC_8TO15BITS) << 8) | \
 7267              		.loc 1 4127 22
 7268 017a BB68     		ldr	r3, [r7, #8]
 7269              		.loc 1 4127 44
 7270 017c 1A06     		lsls	r2, r3, #24
 7271              		.loc 1 4127 63
 7272 017e BB68     		ldr	r3, [r7, #8]
 7273              		.loc 1 4127 86
 7274 0180 1B02     		lsls	r3, r3, #8
 7275 0182 03F47F03 		and	r3, r3, #16711680
 7276              		.loc 1 4127 52
 7277 0186 1A43     		orrs	r2, r2, r3
4128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****             ((tempscr[0] & SDMMC_16TO23BITS) >> 8) | ((tempscr[0] & SDMMC_24TO31BITS) >> 24));
 7278              		.loc 1 4128 22
 7279 0188 BB68     		ldr	r3, [r7, #8]
 7280              		.loc 1 4128 46
 7281 018a 1B0A     		lsrs	r3, r3, #8
 7282 018c 03F47F43 		and	r3, r3, #65280
4127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     *scr = (((tempscr[0] & SDMMC_0TO7BITS) << 24)  | ((tempscr[0] & SDMMC_8TO15BITS) << 8) | \
 7283              		.loc 1 4127 92
 7284 0190 1A43     		orrs	r2, r2, r3
 7285              		.loc 1 4128 63
 7286 0192 BB68     		ldr	r3, [r7, #8]
 7287              		.loc 1 4128 87
 7288 0194 1B0E     		lsrs	r3, r3, #24
 7289              		.loc 1 4128 52
 7290 0196 1A43     		orrs	r2, r2, r3
4127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     *scr = (((tempscr[0] & SDMMC_0TO7BITS) << 24)  | ((tempscr[0] & SDMMC_8TO15BITS) << 8) | \
 7291              		.loc 1 4127 10
 7292 0198 FB6A     		ldr	r3, [r7, #44]
 7293 019a 1A60     		str	r2, [r3]
4129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
ARM GAS  /tmp/ccsLb3N5.s 			page 202


4131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   return HAL_SD_ERROR_NONE;
 7294              		.loc 1 4132 10
 7295 019c 0023     		movs	r3, #0
 7296              	.L333:
4133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 7297              		.loc 1 4133 1
 7298 019e 1846     		mov	r0, r3
 7299 01a0 3C37     		adds	r7, r7, #60
 7300              		.cfi_def_cfa_offset 12
 7301 01a2 BD46     		mov	sp, r7
 7302              		.cfi_def_cfa_register 13
 7303              		@ sp needed
 7304 01a4 90BD     		pop	{r4, r7, pc}
 7305              		.cfi_endproc
 7306              	.LFE484:
 7308              		.section	.text.SD_Read_IT,"ax",%progbits
 7309              		.align	1
 7310              		.syntax unified
 7311              		.thumb
 7312              		.thumb_func
 7314              	SD_Read_IT:
 7315              	.LFB485:
4134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
4136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Wrap up reading in non-blocking mode.
4137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: pointer to a SD_HandleTypeDef structure that contains
4138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *              the configuration information.
4139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
4140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
4141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_Read_IT(SD_HandleTypeDef *hsd)
4142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 7316              		.loc 1 4142 1
 7317              		.cfi_startproc
 7318              		@ args = 0, pretend = 0, frame = 24
 7319              		@ frame_needed = 1, uses_anonymous_args = 0
 7320 0000 80B5     		push	{r7, lr}
 7321              		.cfi_def_cfa_offset 8
 7322              		.cfi_offset 7, -8
 7323              		.cfi_offset 14, -4
 7324 0002 86B0     		sub	sp, sp, #24
 7325              		.cfi_def_cfa_offset 32
 7326 0004 00AF     		add	r7, sp, #0
 7327              		.cfi_def_cfa_register 7
 7328 0006 7860     		str	r0, [r7, #4]
4143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t count;
4144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t data;
4145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t dataremaining;
4146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint8_t *tmp;
4147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   tmp = hsd->pRxBuffPtr;
 7329              		.loc 1 4148 7
 7330 0008 7B68     		ldr	r3, [r7, #4]
 7331 000a 9B6A     		ldr	r3, [r3, #40]
 7332 000c FB60     		str	r3, [r7, #12]
4149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   dataremaining = hsd->RxXferSize;
 7333              		.loc 1 4149 17
ARM GAS  /tmp/ccsLb3N5.s 			page 203


 7334 000e 7B68     		ldr	r3, [r7, #4]
 7335 0010 DB6A     		ldr	r3, [r3, #44]
 7336 0012 3B61     		str	r3, [r7, #16]
4150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (dataremaining > 0U)
 7337              		.loc 1 4151 6
 7338 0014 3B69     		ldr	r3, [r7, #16]
 7339 0016 002B     		cmp	r3, #0
 7340 0018 3FD0     		beq	.L339
4152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Read data from SDMMC Rx FIFO */
4154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     for (count = 0U; count < 8U; count++)
 7341              		.loc 1 4154 16
 7342 001a 0023     		movs	r3, #0
 7343 001c 7B61     		str	r3, [r7, #20]
 7344              		.loc 1 4154 5
 7345 001e 33E0     		b	.L337
 7346              	.L338:
4155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
4156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       data = SDMMC_ReadFIFO(hsd->Instance);
 7347              		.loc 1 4156 32
 7348 0020 7B68     		ldr	r3, [r7, #4]
 7349 0022 1B68     		ldr	r3, [r3]
 7350              		.loc 1 4156 14
 7351 0024 1846     		mov	r0, r3
 7352 0026 FFF7FEFF 		bl	SDMMC_ReadFIFO
 7353 002a B860     		str	r0, [r7, #8]
4157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       *tmp = (uint8_t)(data & 0xFFU);
 7354              		.loc 1 4157 14
 7355 002c BB68     		ldr	r3, [r7, #8]
 7356 002e DAB2     		uxtb	r2, r3
 7357              		.loc 1 4157 12
 7358 0030 FB68     		ldr	r3, [r7, #12]
 7359 0032 1A70     		strb	r2, [r3]
4158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tmp++;
 7360              		.loc 1 4158 10
 7361 0034 FB68     		ldr	r3, [r7, #12]
 7362 0036 0133     		adds	r3, r3, #1
 7363 0038 FB60     		str	r3, [r7, #12]
4159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 7364              		.loc 1 4159 20
 7365 003a 3B69     		ldr	r3, [r7, #16]
 7366 003c 013B     		subs	r3, r3, #1
 7367 003e 3B61     		str	r3, [r7, #16]
4160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       *tmp = (uint8_t)((data >> 8U) & 0xFFU);
 7368              		.loc 1 4160 30
 7369 0040 BB68     		ldr	r3, [r7, #8]
 7370 0042 1B0A     		lsrs	r3, r3, #8
 7371              		.loc 1 4160 14
 7372 0044 DAB2     		uxtb	r2, r3
 7373              		.loc 1 4160 12
 7374 0046 FB68     		ldr	r3, [r7, #12]
 7375 0048 1A70     		strb	r2, [r3]
4161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tmp++;
 7376              		.loc 1 4161 10
 7377 004a FB68     		ldr	r3, [r7, #12]
 7378 004c 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccsLb3N5.s 			page 204


 7379 004e FB60     		str	r3, [r7, #12]
4162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 7380              		.loc 1 4162 20
 7381 0050 3B69     		ldr	r3, [r7, #16]
 7382 0052 013B     		subs	r3, r3, #1
 7383 0054 3B61     		str	r3, [r7, #16]
4163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       *tmp = (uint8_t)((data >> 16U) & 0xFFU);
 7384              		.loc 1 4163 30
 7385 0056 BB68     		ldr	r3, [r7, #8]
 7386 0058 1B0C     		lsrs	r3, r3, #16
 7387              		.loc 1 4163 14
 7388 005a DAB2     		uxtb	r2, r3
 7389              		.loc 1 4163 12
 7390 005c FB68     		ldr	r3, [r7, #12]
 7391 005e 1A70     		strb	r2, [r3]
4164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tmp++;
 7392              		.loc 1 4164 10
 7393 0060 FB68     		ldr	r3, [r7, #12]
 7394 0062 0133     		adds	r3, r3, #1
 7395 0064 FB60     		str	r3, [r7, #12]
4165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 7396              		.loc 1 4165 20
 7397 0066 3B69     		ldr	r3, [r7, #16]
 7398 0068 013B     		subs	r3, r3, #1
 7399 006a 3B61     		str	r3, [r7, #16]
4166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       *tmp = (uint8_t)((data >> 24U) & 0xFFU);
 7400              		.loc 1 4166 30
 7401 006c BB68     		ldr	r3, [r7, #8]
 7402 006e 1B0E     		lsrs	r3, r3, #24
 7403              		.loc 1 4166 14
 7404 0070 DAB2     		uxtb	r2, r3
 7405              		.loc 1 4166 12
 7406 0072 FB68     		ldr	r3, [r7, #12]
 7407 0074 1A70     		strb	r2, [r3]
4167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tmp++;
 7408              		.loc 1 4167 10
 7409 0076 FB68     		ldr	r3, [r7, #12]
 7410 0078 0133     		adds	r3, r3, #1
 7411 007a FB60     		str	r3, [r7, #12]
4168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 7412              		.loc 1 4168 20
 7413 007c 3B69     		ldr	r3, [r7, #16]
 7414 007e 013B     		subs	r3, r3, #1
 7415 0080 3B61     		str	r3, [r7, #16]
4154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 7416              		.loc 1 4154 39 discriminator 3
 7417 0082 7B69     		ldr	r3, [r7, #20]
 7418 0084 0133     		adds	r3, r3, #1
 7419 0086 7B61     		str	r3, [r7, #20]
 7420              	.L337:
4154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 7421              		.loc 1 4154 28 discriminator 1
 7422 0088 7B69     		ldr	r3, [r7, #20]
 7423 008a 072B     		cmp	r3, #7
 7424 008c C8D9     		bls	.L338
4169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
4170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 205


4171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->pRxBuffPtr = tmp;
 7425              		.loc 1 4171 21
 7426 008e 7B68     		ldr	r3, [r7, #4]
 7427 0090 FA68     		ldr	r2, [r7, #12]
 7428 0092 9A62     		str	r2, [r3, #40]
4172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->RxXferSize = dataremaining;
 7429              		.loc 1 4172 21
 7430 0094 7B68     		ldr	r3, [r7, #4]
 7431 0096 3A69     		ldr	r2, [r7, #16]
 7432 0098 DA62     		str	r2, [r3, #44]
 7433              	.L339:
4173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 7434              		.loc 1 4174 1
 7435 009a 00BF     		nop
 7436 009c 1837     		adds	r7, r7, #24
 7437              		.cfi_def_cfa_offset 8
 7438 009e BD46     		mov	sp, r7
 7439              		.cfi_def_cfa_register 13
 7440              		@ sp needed
 7441 00a0 80BD     		pop	{r7, pc}
 7442              		.cfi_endproc
 7443              	.LFE485:
 7445              		.section	.text.SD_Write_IT,"ax",%progbits
 7446              		.align	1
 7447              		.syntax unified
 7448              		.thumb
 7449              		.thumb_func
 7451              	SD_Write_IT:
 7452              	.LFB486:
4175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** /**
4177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @brief  Wrap up writing in non-blocking mode.
4178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @param  hsd: pointer to a SD_HandleTypeDef structure that contains
4179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   *              the configuration information.
4180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   * @retval None
4181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   */
4182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** static void SD_Write_IT(SD_HandleTypeDef *hsd)
4183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** {
 7453              		.loc 1 4183 1
 7454              		.cfi_startproc
 7455              		@ args = 0, pretend = 0, frame = 24
 7456              		@ frame_needed = 1, uses_anonymous_args = 0
 7457 0000 80B5     		push	{r7, lr}
 7458              		.cfi_def_cfa_offset 8
 7459              		.cfi_offset 7, -8
 7460              		.cfi_offset 14, -4
 7461 0002 86B0     		sub	sp, sp, #24
 7462              		.cfi_def_cfa_offset 32
 7463 0004 00AF     		add	r7, sp, #0
 7464              		.cfi_def_cfa_register 7
 7465 0006 7860     		str	r0, [r7, #4]
4184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t count;
4185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t data;
4186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint32_t dataremaining;
4187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   uint8_t *tmp;
4188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
ARM GAS  /tmp/ccsLb3N5.s 			page 206


4189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   tmp = hsd->pTxBuffPtr;
 7466              		.loc 1 4189 7
 7467 0008 7B68     		ldr	r3, [r7, #4]
 7468 000a 1B6A     		ldr	r3, [r3, #32]
 7469 000c FB60     		str	r3, [r7, #12]
4190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   dataremaining = hsd->TxXferSize;
 7470              		.loc 1 4190 17
 7471 000e 7B68     		ldr	r3, [r7, #4]
 7472 0010 5B6A     		ldr	r3, [r3, #36]
 7473 0012 3B61     		str	r3, [r7, #16]
4191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   if (dataremaining > 0U)
 7474              		.loc 1 4192 6
 7475 0014 3B69     		ldr	r3, [r7, #16]
 7476 0016 002B     		cmp	r3, #0
 7477 0018 43D0     		beq	.L344
4193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   {
4194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     /* Write data to SDMMC Tx FIFO */
4195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     for (count = 0U; count < 8U; count++)
 7478              		.loc 1 4195 16
 7479 001a 0023     		movs	r3, #0
 7480 001c 7B61     		str	r3, [r7, #20]
 7481              		.loc 1 4195 5
 7482 001e 37E0     		b	.L342
 7483              	.L343:
4196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
4197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       data = (uint32_t)(*tmp);
 7484              		.loc 1 4197 25
 7485 0020 FB68     		ldr	r3, [r7, #12]
 7486 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7487              		.loc 1 4197 12
 7488 0024 BB60     		str	r3, [r7, #8]
4198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tmp++;
 7489              		.loc 1 4198 10
 7490 0026 FB68     		ldr	r3, [r7, #12]
 7491 0028 0133     		adds	r3, r3, #1
 7492 002a FB60     		str	r3, [r7, #12]
4199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 7493              		.loc 1 4199 20
 7494 002c 3B69     		ldr	r3, [r7, #16]
 7495 002e 013B     		subs	r3, r3, #1
 7496 0030 3B61     		str	r3, [r7, #16]
4200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       data |= ((uint32_t)(*tmp) << 8U);
 7497              		.loc 1 4200 27
 7498 0032 FB68     		ldr	r3, [r7, #12]
 7499 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7500              		.loc 1 4200 33
 7501 0036 1A02     		lsls	r2, r3, #8
 7502              		.loc 1 4200 12
 7503 0038 BB68     		ldr	r3, [r7, #8]
 7504 003a 1343     		orrs	r3, r3, r2
 7505 003c BB60     		str	r3, [r7, #8]
4201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tmp++;
 7506              		.loc 1 4201 10
 7507 003e FB68     		ldr	r3, [r7, #12]
 7508 0040 0133     		adds	r3, r3, #1
 7509 0042 FB60     		str	r3, [r7, #12]
ARM GAS  /tmp/ccsLb3N5.s 			page 207


4202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 7510              		.loc 1 4202 20
 7511 0044 3B69     		ldr	r3, [r7, #16]
 7512 0046 013B     		subs	r3, r3, #1
 7513 0048 3B61     		str	r3, [r7, #16]
4203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       data |= ((uint32_t)(*tmp) << 16U);
 7514              		.loc 1 4203 27
 7515 004a FB68     		ldr	r3, [r7, #12]
 7516 004c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7517              		.loc 1 4203 33
 7518 004e 1A04     		lsls	r2, r3, #16
 7519              		.loc 1 4203 12
 7520 0050 BB68     		ldr	r3, [r7, #8]
 7521 0052 1343     		orrs	r3, r3, r2
 7522 0054 BB60     		str	r3, [r7, #8]
4204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tmp++;
 7523              		.loc 1 4204 10
 7524 0056 FB68     		ldr	r3, [r7, #12]
 7525 0058 0133     		adds	r3, r3, #1
 7526 005a FB60     		str	r3, [r7, #12]
4205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 7527              		.loc 1 4205 20
 7528 005c 3B69     		ldr	r3, [r7, #16]
 7529 005e 013B     		subs	r3, r3, #1
 7530 0060 3B61     		str	r3, [r7, #16]
4206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       data |= ((uint32_t)(*tmp) << 24U);
 7531              		.loc 1 4206 27
 7532 0062 FB68     		ldr	r3, [r7, #12]
 7533 0064 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7534              		.loc 1 4206 33
 7535 0066 1A06     		lsls	r2, r3, #24
 7536              		.loc 1 4206 12
 7537 0068 BB68     		ldr	r3, [r7, #8]
 7538 006a 1343     		orrs	r3, r3, r2
 7539 006c BB60     		str	r3, [r7, #8]
4207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       tmp++;
 7540              		.loc 1 4207 10
 7541 006e FB68     		ldr	r3, [r7, #12]
 7542 0070 0133     		adds	r3, r3, #1
 7543 0072 FB60     		str	r3, [r7, #12]
4208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       dataremaining--;
 7544              		.loc 1 4208 20
 7545 0074 3B69     		ldr	r3, [r7, #16]
 7546 0076 013B     		subs	r3, r3, #1
 7547 0078 3B61     		str	r3, [r7, #16]
4209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****       (void)SDMMC_WriteFIFO(hsd->Instance, &data);
 7548              		.loc 1 4209 13
 7549 007a 7B68     		ldr	r3, [r7, #4]
 7550 007c 1B68     		ldr	r3, [r3]
 7551 007e 07F10802 		add	r2, r7, #8
 7552 0082 1146     		mov	r1, r2
 7553 0084 1846     		mov	r0, r3
 7554 0086 FFF7FEFF 		bl	SDMMC_WriteFIFO
4195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 7555              		.loc 1 4195 39 discriminator 3
 7556 008a 7B69     		ldr	r3, [r7, #20]
 7557 008c 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccsLb3N5.s 			page 208


 7558 008e 7B61     		str	r3, [r7, #20]
 7559              	.L342:
4195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     {
 7560              		.loc 1 4195 28 discriminator 1
 7561 0090 7B69     		ldr	r3, [r7, #20]
 7562 0092 072B     		cmp	r3, #7
 7563 0094 C4D9     		bls	.L343
4210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     }
4211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** 
4212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->pTxBuffPtr = tmp;
 7564              		.loc 1 4212 21
 7565 0096 7B68     		ldr	r3, [r7, #4]
 7566 0098 FA68     		ldr	r2, [r7, #12]
 7567 009a 1A62     		str	r2, [r3, #32]
4213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****     hsd->TxXferSize = dataremaining;
 7568              		.loc 1 4213 21
 7569 009c 7B68     		ldr	r3, [r7, #4]
 7570 009e 3A69     		ldr	r2, [r7, #16]
 7571 00a0 5A62     		str	r2, [r3, #36]
 7572              	.L344:
4214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c ****   }
4215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_sd.c **** }
 7573              		.loc 1 4215 1
 7574 00a2 00BF     		nop
 7575 00a4 1837     		adds	r7, r7, #24
 7576              		.cfi_def_cfa_offset 8
 7577 00a6 BD46     		mov	sp, r7
 7578              		.cfi_def_cfa_register 13
 7579              		@ sp needed
 7580 00a8 80BD     		pop	{r7, pc}
 7581              		.cfi_endproc
 7582              	.LFE486:
 7584              		.text
 7585              	.Letext0:
 7586              		.file 2 "/usr/lib/gcc/arm-none-eabi/13.2.1/include/stdint.h"
 7587              		.file 3 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l475xx.h"
 7588              		.file 4 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l4xx.h"
 7589              		.file 5 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 7590              		.file 6 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 7591              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_ll_sdmmc.h"
 7592              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_sd.h"
 7593              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_rcc_ex.h"
 7594              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_ll_dma.h"
 7595              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
ARM GAS  /tmp/ccsLb3N5.s 			page 209


DEFINED SYMBOLS
                            *ABS*:00000000 stm32l4xx_hal_sd.c
     /tmp/ccsLb3N5.s:21     .rodata.CHANNEL_OFFSET_TAB:00000000 $d
     /tmp/ccsLb3N5.s:24     .rodata.CHANNEL_OFFSET_TAB:00000000 CHANNEL_OFFSET_TAB
     /tmp/ccsLb3N5.s:27     .text.HAL_SD_Init:00000000 $t
     /tmp/ccsLb3N5.s:33     .text.HAL_SD_Init:00000000 HAL_SD_Init
     /tmp/ccsLb3N5.s:436    .text.HAL_SD_MspInit:00000000 HAL_SD_MspInit
     /tmp/ccsLb3N5.s:147    .text.HAL_SD_InitCard:00000000 HAL_SD_InitCard
     /tmp/ccsLb3N5.s:4751   .text.HAL_SD_ConfigWideBusOperation:00000000 HAL_SD_ConfigWideBusOperation
     /tmp/ccsLb3N5.s:141    .text.HAL_SD_InitCard:00000000 $t
     /tmp/ccsLb3N5.s:6168   .text.SD_PowerON:00000000 SD_PowerON
     /tmp/ccsLb3N5.s:5900   .text.SD_InitCard:00000000 SD_InitCard
     /tmp/ccsLb3N5.s:361    .text.HAL_SD_InitCard:00000154 $d
     /tmp/ccsLb3N5.s:368    .text.HAL_SD_DeInit:00000000 $t
     /tmp/ccsLb3N5.s:374    .text.HAL_SD_DeInit:00000000 HAL_SD_DeInit
     /tmp/ccsLb3N5.s:6380   .text.SD_PowerOFF:00000000 SD_PowerOFF
     /tmp/ccsLb3N5.s:472    .text.HAL_SD_MspDeInit:00000000 HAL_SD_MspDeInit
     /tmp/ccsLb3N5.s:430    .text.HAL_SD_MspInit:00000000 $t
     /tmp/ccsLb3N5.s:466    .text.HAL_SD_MspDeInit:00000000 $t
     /tmp/ccsLb3N5.s:502    .text.HAL_SD_ReadBlocks:00000000 $t
     /tmp/ccsLb3N5.s:508    .text.HAL_SD_ReadBlocks:00000000 HAL_SD_ReadBlocks
     /tmp/ccsLb3N5.s:989    .text.HAL_SD_ReadBlocks:000002d4 $d
     /tmp/ccsLb3N5.s:992    .text.HAL_SD_ReadBlocks:000002d8 $t
     /tmp/ccsLb3N5.s:1146   .text.HAL_SD_ReadBlocks:000003b8 $d
     /tmp/ccsLb3N5.s:1151   .text.HAL_SD_WriteBlocks:00000000 $t
     /tmp/ccsLb3N5.s:1157   .text.HAL_SD_WriteBlocks:00000000 HAL_SD_WriteBlocks
     /tmp/ccsLb3N5.s:1673   .text.HAL_SD_WriteBlocks:00000308 $d
     /tmp/ccsLb3N5.s:1678   .text.HAL_SD_ReadBlocks_IT:00000000 $t
     /tmp/ccsLb3N5.s:1684   .text.HAL_SD_ReadBlocks_IT:00000000 HAL_SD_ReadBlocks_IT
     /tmp/ccsLb3N5.s:1895   .text.HAL_SD_ReadBlocks_IT:00000130 $d
     /tmp/ccsLb3N5.s:1900   .text.HAL_SD_WriteBlocks_IT:00000000 $t
     /tmp/ccsLb3N5.s:1906   .text.HAL_SD_WriteBlocks_IT:00000000 HAL_SD_WriteBlocks_IT
     /tmp/ccsLb3N5.s:2117   .text.HAL_SD_WriteBlocks_IT:00000130 $d
     /tmp/ccsLb3N5.s:2122   .text.HAL_SD_ReadBlocks_DMA:00000000 $t
     /tmp/ccsLb3N5.s:2128   .text.HAL_SD_ReadBlocks_DMA:00000000 HAL_SD_ReadBlocks_DMA
     /tmp/ccsLb3N5.s:2415   .text.HAL_SD_ReadBlocks_DMA:000001a8 $d
     /tmp/ccsLb3N5.s:5505   .text.SD_DMAReceiveCplt:00000000 SD_DMAReceiveCplt
     /tmp/ccsLb3N5.s:5596   .text.SD_DMAError:00000000 SD_DMAError
     /tmp/ccsLb3N5.s:2422   .text.HAL_SD_WriteBlocks_DMA:00000000 $t
     /tmp/ccsLb3N5.s:2428   .text.HAL_SD_WriteBlocks_DMA:00000000 HAL_SD_WriteBlocks_DMA
     /tmp/ccsLb3N5.s:2699   .text.HAL_SD_WriteBlocks_DMA:0000018c $d
     /tmp/ccsLb3N5.s:5458   .text.SD_DMATransmitCplt:00000000 SD_DMATransmitCplt
     /tmp/ccsLb3N5.s:2706   .text.HAL_SD_Erase:00000000 $t
     /tmp/ccsLb3N5.s:2712   .text.HAL_SD_Erase:00000000 HAL_SD_Erase
     /tmp/ccsLb3N5.s:2984   .text.HAL_SD_Erase:00000194 $d
     /tmp/ccsLb3N5.s:2989   .text.HAL_SD_IRQHandler:00000000 $t
     /tmp/ccsLb3N5.s:2995   .text.HAL_SD_IRQHandler:00000000 HAL_SD_IRQHandler
     /tmp/ccsLb3N5.s:7314   .text.SD_Read_IT:00000000 SD_Read_IT
     /tmp/ccsLb3N5.s:3618   .text.HAL_SD_ErrorCallback:00000000 HAL_SD_ErrorCallback
     /tmp/ccsLb3N5.s:3582   .text.HAL_SD_RxCpltCallback:00000000 HAL_SD_RxCpltCallback
     /tmp/ccsLb3N5.s:3546   .text.HAL_SD_TxCpltCallback:00000000 HAL_SD_TxCpltCallback
     /tmp/ccsLb3N5.s:7451   .text.SD_Write_IT:00000000 SD_Write_IT
     /tmp/ccsLb3N5.s:5716   .text.SD_DMATxAbort:00000000 SD_DMATxAbort
     /tmp/ccsLb3N5.s:5808   .text.SD_DMARxAbort:00000000 SD_DMARxAbort
     /tmp/ccsLb3N5.s:3654   .text.HAL_SD_AbortCallback:00000000 HAL_SD_AbortCallback
     /tmp/ccsLb3N5.s:3455   .text.HAL_SD_IRQHandler:000002e4 $d
     /tmp/ccsLb3N5.s:3461   .text.HAL_SD_GetState:00000000 $t
ARM GAS  /tmp/ccsLb3N5.s 			page 210


     /tmp/ccsLb3N5.s:3467   .text.HAL_SD_GetState:00000000 HAL_SD_GetState
     /tmp/ccsLb3N5.s:3501   .text.HAL_SD_GetError:00000000 $t
     /tmp/ccsLb3N5.s:3507   .text.HAL_SD_GetError:00000000 HAL_SD_GetError
     /tmp/ccsLb3N5.s:3540   .text.HAL_SD_TxCpltCallback:00000000 $t
     /tmp/ccsLb3N5.s:3576   .text.HAL_SD_RxCpltCallback:00000000 $t
     /tmp/ccsLb3N5.s:3612   .text.HAL_SD_ErrorCallback:00000000 $t
     /tmp/ccsLb3N5.s:3648   .text.HAL_SD_AbortCallback:00000000 $t
     /tmp/ccsLb3N5.s:3684   .text.HAL_SD_GetCardCID:00000000 $t
     /tmp/ccsLb3N5.s:3690   .text.HAL_SD_GetCardCID:00000000 HAL_SD_GetCardCID
     /tmp/ccsLb3N5.s:3831   .text.HAL_SD_GetCardCSD:00000000 $t
     /tmp/ccsLb3N5.s:3837   .text.HAL_SD_GetCardCSD:00000000 HAL_SD_GetCardCSD
     /tmp/ccsLb3N5.s:4412   .text.HAL_SD_GetCardCSD:00000344 $d
     /tmp/ccsLb3N5.s:4417   .text.HAL_SD_GetCardStatus:00000000 $t
     /tmp/ccsLb3N5.s:4423   .text.HAL_SD_GetCardStatus:00000000 HAL_SD_GetCardStatus
     /tmp/ccsLb3N5.s:6417   .text.SD_SendSDStatus:00000000 SD_SendSDStatus
     /tmp/ccsLb3N5.s:4653   .text.HAL_SD_GetCardStatus:00000140 $d
     /tmp/ccsLb3N5.s:4658   .text.HAL_SD_GetCardInfo:00000000 $t
     /tmp/ccsLb3N5.s:4664   .text.HAL_SD_GetCardInfo:00000000 HAL_SD_GetCardInfo
     /tmp/ccsLb3N5.s:4745   .text.HAL_SD_ConfigWideBusOperation:00000000 $t
     /tmp/ccsLb3N5.s:6778   .text.SD_WideBus_Enable:00000000 SD_WideBus_Enable
     /tmp/ccsLb3N5.s:6895   .text.SD_WideBus_Disable:00000000 SD_WideBus_Disable
     /tmp/ccsLb3N5.s:4997   .text.HAL_SD_ConfigWideBusOperation:00000174 $d
     /tmp/ccsLb3N5.s:5004   .text.HAL_SD_GetCardState:00000000 $t
     /tmp/ccsLb3N5.s:5010   .text.HAL_SD_GetCardState:00000000 HAL_SD_GetCardState
     /tmp/ccsLb3N5.s:6703   .text.SD_SendStatus:00000000 SD_SendStatus
     /tmp/ccsLb3N5.s:5067   .text.HAL_SD_Abort:00000000 $t
     /tmp/ccsLb3N5.s:5073   .text.HAL_SD_Abort:00000000 HAL_SD_Abort
     /tmp/ccsLb3N5.s:5256   .text.HAL_SD_Abort_IT:00000000 $t
     /tmp/ccsLb3N5.s:5262   .text.HAL_SD_Abort_IT:00000000 HAL_SD_Abort_IT
     /tmp/ccsLb3N5.s:5447   .text.HAL_SD_Abort_IT:00000108 $d
     /tmp/ccsLb3N5.s:5453   .text.SD_DMATransmitCplt:00000000 $t
     /tmp/ccsLb3N5.s:5500   .text.SD_DMAReceiveCplt:00000000 $t
     /tmp/ccsLb3N5.s:5591   .text.SD_DMAError:00000000 $t
     /tmp/ccsLb3N5.s:5706   .text.SD_DMAError:00000094 $d
     /tmp/ccsLb3N5.s:5711   .text.SD_DMATxAbort:00000000 $t
     /tmp/ccsLb3N5.s:5803   .text.SD_DMARxAbort:00000000 $t
     /tmp/ccsLb3N5.s:5895   .text.SD_InitCard:00000000 $t
     /tmp/ccsLb3N5.s:6163   .text.SD_PowerON:00000000 $t
     /tmp/ccsLb3N5.s:6370   .text.SD_PowerON:00000118 $d
     /tmp/ccsLb3N5.s:6375   .text.SD_PowerOFF:00000000 $t
     /tmp/ccsLb3N5.s:6412   .text.SD_SendSDStatus:00000000 $t
     /tmp/ccsLb3N5.s:6698   .text.SD_SendStatus:00000000 $t
     /tmp/ccsLb3N5.s:6773   .text.SD_WideBus_Enable:00000000 $t
     /tmp/ccsLb3N5.s:7012   .text.SD_FindSCR:00000000 SD_FindSCR
     /tmp/ccsLb3N5.s:6890   .text.SD_WideBus_Disable:00000000 $t
     /tmp/ccsLb3N5.s:7007   .text.SD_FindSCR:00000000 $t
     /tmp/ccsLb3N5.s:7309   .text.SD_Read_IT:00000000 $t
     /tmp/ccsLb3N5.s:7446   .text.SD_Write_IT:00000000 $t
                           .group:00000000 wm4.0.e7b64c2c371cf922f2c8028878d5c18e
                           .group:00000000 wm4.stm32l4xx_hal_conf.h.23.286c2f63aaa73ed97ffb4d26f7caa6e9
                           .group:00000000 wm4.stm32l4xx.h.38.9f5830373ca31b8a3cd182fdc6c7b69a
                           .group:00000000 wm4.stm32l475xx.h.34.2f1a75aed66751e299f09004aef64973
                           .group:00000000 wm4.stdint.h.29.6d480f4ba0f60596e88234283d42444f
                           .group:00000000 wm4.cmsis_version.h.32.46e8eccfa2cfeaae11d008bb2823a3ed
                           .group:00000000 wm4.core_cm4.h.66.e4ff136c4a17abc46741866f64f8e729
                           .group:00000000 wm4.cmsis_gcc.h.26.78077cef1206e937f7b56043ffca496a
                           .group:00000000 wm4.core_cm4.h.174.fcddd62df80231752fa39eb9b61dadfe
ARM GAS  /tmp/ccsLb3N5.s 			page 211


                           .group:00000000 wm4.mpu_armv7.h.32.4049752bb5792d4e15357775e9506cfc
                           .group:00000000 wm4.stm32l475xx.h.423.4d783859c9ac66890c9807dd7bd3a4db
                           .group:00000000 wm4.stm32l4xx.h.196.f5ae8047c57b6175c94f246ef967a286
                           .group:00000000 wm4.stm32_hal_legacy.h.22.08b8350ccf512ba8d98002fb33e7cbe5
                           .group:00000000 wm4.stddef.h.39.0dc9006b34572d4d9cae4c8b422c4971
                           .group:00000000 wm4.stm32l4xx_hal_def.h.58.1058a33f7217e935f2a6b51956d66a69
                           .group:00000000 wm4.stm32l4xx_hal_rcc.h.156.ab8eecc4e10f4827a2aa75d3549a356d
                           .group:00000000 wm4.stm32l4xx_hal_rcc_ex.h.20.4a82a27d561b6d42fa16a54f82e29067
                           .group:00000000 wm4.stm32l4xx_hal_gpio.h.21.2d2b1fd6aa6afa7b6dcc89cf752a9a25
                           .group:00000000 wm4.stm32l4xx_hal_gpio_ex.h.21.7ea705f5185dd3c6b8ea336f2858cd46
                           .group:00000000 wm4.stm32l4xx_ll_dma.h.21.b30e7f48d60d1fc53041ec1e3fd6e54a
                           .group:00000000 wm4.stm32l4xx_hal_dma.h.166.54a7f8d65cee6f051d541dc010387b5a
                           .group:00000000 wm4.stm32l4xx_hal_dfsdm.h.21.6785e38d00075079c7f2e5657def82ae
                           .group:00000000 wm4.stm32l4xx_hal_cortex.h.21.cb491126bd2d6f44e90b66f27acb8434
                           .group:00000000 wm4.stm32l4xx_ll_adc.h.21.0c578f71501c74365c67044efed214d6
                           .group:00000000 wm4.stm32l4xx_hal_adc.h.411.68f60682cdb20556089756a482f23764
                           .group:00000000 wm4.stm32l4xx_hal_adc_ex.h.21.7b82cb80166a21dfa8cb3e2fa8f8e654
                           .group:00000000 wm4.stm32l4xx_hal_can.h.21.5019586d8e7137c0cec16eb1f9d6677b
                           .group:00000000 wm4.stm32l4xx_ll_exti.h.21.d866eff070d6f999af2ce4ea60aa40ac
                           .group:00000000 wm4.stm32l4xx_hal_comp.h.87.7f14cb673a463359c83faa552328844d
                           .group:00000000 wm4.stm32l4xx_hal_crc.h.21.4c36a140cca35e6a8e478e76c6ad98e3
                           .group:00000000 wm4.stm32l4xx_hal_crc_ex.h.21.9cc3dead436542d416ee5572c231a242
                           .group:00000000 wm4.stm32l4xx_hal_dac.h.21.69feba704135531cf3d9b92de27b71d5
                           .group:00000000 wm4.stm32l4xx_hal_dac_ex.h.21.c86699169bead5415cc3e94027b67df4
                           .group:00000000 wm4.stm32l4xx_hal_exti.h.21.242e0410874d91d6d7523948fff74125
                           .group:00000000 wm4.stm32l4xx_hal_firewall.h.21.7ed44f4228fcc2ef96d2177dd8632645
                           .group:00000000 wm4.stm32l4xx_hal_flash.h.20.5e337018ccfa211b4afe888a79aae9f5
                           .group:00000000 wm4.stm32l4xx_hal_flash.h.846.0445f6ea07a3f9aac82891c8687d96fb
                           .group:00000000 wm4.stm32l4xx_ll_usb.h.21.5b5e42fb72a33dd326d7b20064953946
                           .group:00000000 wm4.stm32l4xx_hal_hcd.h.107.73f2fd24f57e8822da5cc86bd5ad3dfd
                           .group:00000000 wm4.stm32l4xx_hal_i2c.h.21.e7fc2065051c77019a818818e4a637d8
                           .group:00000000 wm4.stm32l4xx_hal_i2c_ex.h.21.ad4ad4e558d4fec06df87d163a6927d7
                           .group:00000000 wm4.stm32l4xx_hal_i2c.h.737.fa3908c81294cf0f9894ae336466002c
                           .group:00000000 wm4.stm32l4xx_hal_irda.h.21.136c042f9eef333167a549cc099df0c9
                           .group:00000000 wm4.stm32l4xx_hal_irda_ex.h.21.e0ada4e6d2b2cadfb512dd3c8ac0a637
                           .group:00000000 wm4.stm32l4xx_hal_iwdg.h.21.f94ca75f2fe1ebc7a2a8d0f5b58d8430
                           .group:00000000 wm4.stm32l4xx_hal_lptim.h.21.78222ea6639fc8c02789d293a048991e
                           .group:00000000 wm4.stm32l4xx_ll_sdmmc.h.21.65a5a8696b6ca7b87cc93d218084d702
                           .group:00000000 wm4.stm32l4xx_hal_mmc.h.69.8f4159f0a88ef1ebc33c58a8f10362b9
                           .group:00000000 wm4.stm32l4xx_ll_fmc.h.21.156a244c55010643ee92c6119049cb68
                           .group:00000000 wm4.stm32l4xx_hal_nand.h.176.9bfeac6e4e757991088bbd0df44e2be9
                           .group:00000000 wm4.stm32l4xx_hal_nor.h.21.d47e91e825f466bbac02fac0a7845a7a
                           .group:00000000 wm4.stm32l4xx_hal_opamp.h.21.9d841e1eaccee939f247b3f973f8af5f
                           .group:00000000 wm4.stm32l4xx_hal_pcd.h.169.addb1fac652268a18a0707cfcb5e2e47
                           .group:00000000 wm4.stm32l4xx_hal_pwr.h.21.7ddab2caa97243c36e496eca17b27618
                           .group:00000000 wm4.stm32l4xx_hal_pwr_ex.h.21.65ad8bbdbcb1950d945c0de10f22dc80
                           .group:00000000 wm4.stm32l4xx_hal_qspi.h.21.0291dad4eaa82101f2f77d76315c9b12
                           .group:00000000 wm4.stm32l4xx_hal_rng.h.21.96593715bdeab0c74ac9dfc538fb2feb
                           .group:00000000 wm4.stm32l4xx_hal_rtc.h.21.9da6b1aeebde99930891f803cb7f9678
                           .group:00000000 wm4.stm32l4xx_hal_rtc_ex.h.21.c692539378320719c7f2a2da1ca64502
                           .group:00000000 wm4.stm32l4xx_hal_rtc.h.999.c8bd9450c783628bd606ecb31bea5cc9
                           .group:00000000 wm4.stm32l4xx_hal_sai.h.21.c1165aaf2bbde65fae28ed4817be5cc5
                           .group:00000000 wm4.stm32l4xx_hal_sd.h.21.b395c90a87e82f7e8d77d4a518036063
                           .group:00000000 wm4.stm32l4xx_hal_smartcard.h.21.423c3ad63e0df35b864303e89e6d253c
                           .group:00000000 wm4.stm32l4xx_hal_smartcard_ex.h.21.801a2ce9252a785aec000b3fc7667a74
                           .group:00000000 wm4.stm32l4xx_hal_smbus.h.21.7480adb16468bfdce819ee591f21299e
                           .group:00000000 wm4.stm32l4xx_hal_smbus_ex.h.21.bdc715f5f6fb6612a871d3c03c3b871f
ARM GAS  /tmp/ccsLb3N5.s 			page 212


                           .group:00000000 wm4.stm32l4xx_hal_spi.h.21.3b51f9f7b241962f6b3483c47a43334f
                           .group:00000000 wm4.stm32l4xx_hal_sram.h.21.285210181e158bddc1cdde63dde572fd
                           .group:00000000 wm4.stm32l4xx_hal_swpmi.h.21.787f994f40b117a62aad9a6dd408b8fc
                           .group:00000000 wm4.stm32l4xx_hal_tim.h.21.d190832030e7505384ad081daa7ba8d6
                           .group:00000000 wm4.stm32l4xx_hal_tim_ex.h.21.1d0860218366ee9f64a97fd8af0ddee1
                           .group:00000000 wm4.stm32l4xx_hal_tsc.h.21.e9010049847ea38297d4b95a5ede0d8c
                           .group:00000000 wm4.stm32l4xx_hal_uart.h.21.480c0a64ca01596a921cda9dceb01df4
                           .group:00000000 wm4.stm32l4xx_hal_uart_ex.h.21.d793e64693c93af07c90464aef42bd83
                           .group:00000000 wm4.stm32l4xx_hal_usart.h.21.561c0058e33cb8df6671dcd29d5d25f9
                           .group:00000000 wm4.stm32l4xx_hal_usart_ex.h.21.111da650523691ebc80d64103d7b26e5
                           .group:00000000 wm4.stm32l4xx_hal_wwdg.h.21.073aa79d58120ae4fb8590c46b210051
                           .group:00000000 wm4.stm32l4xx_hal.h.75.d364b3778b3801d2f66bb409c48d396d

UNDEFINED SYMBOLS
HAL_RCCEx_GetPeriphCLKFreq
SDMMC_Init
SDMMC_PowerState_ON
HAL_Delay
SDMMC_CmdBlockLength
HAL_GetTick
SDMMC_ConfigData
SDMMC_CmdReadMultiBlock
SDMMC_CmdReadSingleBlock
SDMMC_ReadFIFO
SDMMC_CmdStopTransfer
SDMMC_CmdWriteMultiBlock
SDMMC_CmdWriteSingleBlock
SDMMC_WriteFIFO
HAL_DMA_Start_IT
SDMMC_GetResponse
SDMMC_CmdSDEraseStartAdd
SDMMC_CmdSDEraseEndAdd
SDMMC_CmdErase
HAL_DMA_Abort_IT
HAL_DMA_Abort
SDMMC_GetPowerState
SDMMC_CmdSendCID
SDMMC_CmdSetRelAdd
SDMMC_CmdSendCSD
SDMMC_CmdSelDesel
SDMMC_CmdGoIdleState
SDMMC_CmdOperCond
SDMMC_CmdAppCommand
SDMMC_CmdAppOperCommand
SDMMC_PowerState_OFF
SDMMC_CmdStatusRegister
SDMMC_CmdSendStatus
SDMMC_CmdBusWidth
SDMMC_CmdSendSCR
