ARM GAS  /tmp/cczksE0f.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"queue.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Middlewares/FreeRTOS/queue.c"
  20              		.section	.text.xQueueGenericReset,"ax",%progbits
  21              		.align	1
  22              		.global	xQueueGenericReset
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	xQueueGenericReset:
  28              	.LFB4:
   1:Middlewares/FreeRTOS/queue.c **** /*
   2:Middlewares/FreeRTOS/queue.c ****  * FreeRTOS Kernel V11.1.0
   3:Middlewares/FreeRTOS/queue.c ****  * Copyright (C) 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.
   4:Middlewares/FreeRTOS/queue.c ****  *
   5:Middlewares/FreeRTOS/queue.c ****  * SPDX-License-Identifier: MIT
   6:Middlewares/FreeRTOS/queue.c ****  *
   7:Middlewares/FreeRTOS/queue.c ****  * Permission is hereby granted, free of charge, to any person obtaining a copy of
   8:Middlewares/FreeRTOS/queue.c ****  * this software and associated documentation files (the "Software"), to deal in
   9:Middlewares/FreeRTOS/queue.c ****  * the Software without restriction, including without limitation the rights to
  10:Middlewares/FreeRTOS/queue.c ****  * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
  11:Middlewares/FreeRTOS/queue.c ****  * the Software, and to permit persons to whom the Software is furnished to do so,
  12:Middlewares/FreeRTOS/queue.c ****  * subject to the following conditions:
  13:Middlewares/FreeRTOS/queue.c ****  *
  14:Middlewares/FreeRTOS/queue.c ****  * The above copyright notice and this permission notice shall be included in all
  15:Middlewares/FreeRTOS/queue.c ****  * copies or substantial portions of the Software.
  16:Middlewares/FreeRTOS/queue.c ****  *
  17:Middlewares/FreeRTOS/queue.c ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  18:Middlewares/FreeRTOS/queue.c ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
  19:Middlewares/FreeRTOS/queue.c ****  * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
  20:Middlewares/FreeRTOS/queue.c ****  * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
  21:Middlewares/FreeRTOS/queue.c ****  * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
  22:Middlewares/FreeRTOS/queue.c ****  * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  23:Middlewares/FreeRTOS/queue.c ****  *
  24:Middlewares/FreeRTOS/queue.c ****  * https://www.FreeRTOS.org
  25:Middlewares/FreeRTOS/queue.c ****  * https://github.com/FreeRTOS
  26:Middlewares/FreeRTOS/queue.c ****  *
  27:Middlewares/FreeRTOS/queue.c ****  */
  28:Middlewares/FreeRTOS/queue.c **** 
  29:Middlewares/FreeRTOS/queue.c **** #include <stdlib.h>
  30:Middlewares/FreeRTOS/queue.c **** #include <string.h>
ARM GAS  /tmp/cczksE0f.s 			page 2


  31:Middlewares/FreeRTOS/queue.c **** 
  32:Middlewares/FreeRTOS/queue.c **** /* Defining MPU_WRAPPERS_INCLUDED_FROM_API_FILE prevents task.h from redefining
  33:Middlewares/FreeRTOS/queue.c ****  * all the API functions to use the MPU wrappers.  That should only be done when
  34:Middlewares/FreeRTOS/queue.c ****  * task.h is included from an application file. */
  35:Middlewares/FreeRTOS/queue.c **** #define MPU_WRAPPERS_INCLUDED_FROM_API_FILE
  36:Middlewares/FreeRTOS/queue.c **** 
  37:Middlewares/FreeRTOS/queue.c **** #include "FreeRTOS.h"
  38:Middlewares/FreeRTOS/queue.c **** #include "task.h"
  39:Middlewares/FreeRTOS/queue.c **** #include "queue.h"
  40:Middlewares/FreeRTOS/queue.c **** 
  41:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_CO_ROUTINES == 1 )
  42:Middlewares/FreeRTOS/queue.c ****     #include "croutine.h"
  43:Middlewares/FreeRTOS/queue.c **** #endif
  44:Middlewares/FreeRTOS/queue.c **** 
  45:Middlewares/FreeRTOS/queue.c **** /* The MPU ports require MPU_WRAPPERS_INCLUDED_FROM_API_FILE to be defined
  46:Middlewares/FreeRTOS/queue.c ****  * for the header files above, but not in this file, in order to generate the
  47:Middlewares/FreeRTOS/queue.c ****  * correct privileged Vs unprivileged linkage and placement. */
  48:Middlewares/FreeRTOS/queue.c **** #undef MPU_WRAPPERS_INCLUDED_FROM_API_FILE
  49:Middlewares/FreeRTOS/queue.c **** 
  50:Middlewares/FreeRTOS/queue.c **** 
  51:Middlewares/FreeRTOS/queue.c **** /* Constants used with the cRxLock and cTxLock structure members. */
  52:Middlewares/FreeRTOS/queue.c **** #define queueUNLOCKED             ( ( int8_t ) -1 )
  53:Middlewares/FreeRTOS/queue.c **** #define queueLOCKED_UNMODIFIED    ( ( int8_t ) 0 )
  54:Middlewares/FreeRTOS/queue.c **** #define queueINT8_MAX             ( ( int8_t ) 127 )
  55:Middlewares/FreeRTOS/queue.c **** 
  56:Middlewares/FreeRTOS/queue.c **** /* When the Queue_t structure is used to represent a base queue its pcHead and
  57:Middlewares/FreeRTOS/queue.c ****  * pcTail members are used as pointers into the queue storage area.  When the
  58:Middlewares/FreeRTOS/queue.c ****  * Queue_t structure is used to represent a mutex pcHead and pcTail pointers are
  59:Middlewares/FreeRTOS/queue.c ****  * not necessary, and the pcHead pointer is set to NULL to indicate that the
  60:Middlewares/FreeRTOS/queue.c ****  * structure instead holds a pointer to the mutex holder (if any).  Map alternative
  61:Middlewares/FreeRTOS/queue.c ****  * names to the pcHead and structure member to ensure the readability of the code
  62:Middlewares/FreeRTOS/queue.c ****  * is maintained.  The QueuePointers_t and SemaphoreData_t types are used to form
  63:Middlewares/FreeRTOS/queue.c ****  * a union as their usage is mutually exclusive dependent on what the queue is
  64:Middlewares/FreeRTOS/queue.c ****  * being used for. */
  65:Middlewares/FreeRTOS/queue.c **** #define uxQueueType               pcHead
  66:Middlewares/FreeRTOS/queue.c **** #define queueQUEUE_IS_MUTEX       NULL
  67:Middlewares/FreeRTOS/queue.c **** 
  68:Middlewares/FreeRTOS/queue.c **** typedef struct QueuePointers
  69:Middlewares/FreeRTOS/queue.c **** {
  70:Middlewares/FreeRTOS/queue.c ****     int8_t * pcTail;     /**< Points to the byte at the end of the queue storage area.  Once more b
  71:Middlewares/FreeRTOS/queue.c ****     int8_t * pcReadFrom; /**< Points to the last place that a queued item was read from when the st
  72:Middlewares/FreeRTOS/queue.c **** } QueuePointers_t;
  73:Middlewares/FreeRTOS/queue.c **** 
  74:Middlewares/FreeRTOS/queue.c **** typedef struct SemaphoreData
  75:Middlewares/FreeRTOS/queue.c **** {
  76:Middlewares/FreeRTOS/queue.c ****     TaskHandle_t xMutexHolder;        /**< The handle of the task that holds the mutex. */
  77:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxRecursiveCallCount; /**< Maintains a count of the number of times a recursive mut
  78:Middlewares/FreeRTOS/queue.c **** } SemaphoreData_t;
  79:Middlewares/FreeRTOS/queue.c **** 
  80:Middlewares/FreeRTOS/queue.c **** /* Semaphores do not actually store or copy data, so have an item size of
  81:Middlewares/FreeRTOS/queue.c ****  * zero. */
  82:Middlewares/FreeRTOS/queue.c **** #define queueSEMAPHORE_QUEUE_ITEM_LENGTH    ( ( UBaseType_t ) 0 )
  83:Middlewares/FreeRTOS/queue.c **** #define queueMUTEX_GIVE_BLOCK_TIME          ( ( TickType_t ) 0U )
  84:Middlewares/FreeRTOS/queue.c **** 
  85:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_PREEMPTION == 0 )
  86:Middlewares/FreeRTOS/queue.c **** 
  87:Middlewares/FreeRTOS/queue.c **** /* If the cooperative scheduler is being used then a yield should not be
ARM GAS  /tmp/cczksE0f.s 			page 3


  88:Middlewares/FreeRTOS/queue.c ****  * performed just because a higher priority task has been woken. */
  89:Middlewares/FreeRTOS/queue.c ****     #define queueYIELD_IF_USING_PREEMPTION()
  90:Middlewares/FreeRTOS/queue.c **** #else
  91:Middlewares/FreeRTOS/queue.c ****     #if ( configNUMBER_OF_CORES == 1 )
  92:Middlewares/FreeRTOS/queue.c ****         #define queueYIELD_IF_USING_PREEMPTION()    portYIELD_WITHIN_API()
  93:Middlewares/FreeRTOS/queue.c ****     #else /* #if ( configNUMBER_OF_CORES == 1 ) */
  94:Middlewares/FreeRTOS/queue.c ****         #define queueYIELD_IF_USING_PREEMPTION()    vTaskYieldWithinAPI()
  95:Middlewares/FreeRTOS/queue.c ****     #endif /* #if ( configNUMBER_OF_CORES == 1 ) */
  96:Middlewares/FreeRTOS/queue.c **** #endif
  97:Middlewares/FreeRTOS/queue.c **** 
  98:Middlewares/FreeRTOS/queue.c **** /*
  99:Middlewares/FreeRTOS/queue.c ****  * Definition of the queue used by the scheduler.
 100:Middlewares/FreeRTOS/queue.c ****  * Items are queued by copy, not reference.  See the following link for the
 101:Middlewares/FreeRTOS/queue.c ****  * rationale: https://www.FreeRTOS.org/Embedded-RTOS-Queues.html
 102:Middlewares/FreeRTOS/queue.c ****  */
 103:Middlewares/FreeRTOS/queue.c **** typedef struct QueueDefinition /* The old naming convention is used to prevent breaking kernel awar
 104:Middlewares/FreeRTOS/queue.c **** {
 105:Middlewares/FreeRTOS/queue.c ****     int8_t * pcHead;           /**< Points to the beginning of the queue storage area. */
 106:Middlewares/FreeRTOS/queue.c ****     int8_t * pcWriteTo;        /**< Points to the free next place in the storage area. */
 107:Middlewares/FreeRTOS/queue.c **** 
 108:Middlewares/FreeRTOS/queue.c ****     union
 109:Middlewares/FreeRTOS/queue.c ****     {
 110:Middlewares/FreeRTOS/queue.c ****         QueuePointers_t xQueue;     /**< Data required exclusively when this structure is used as a
 111:Middlewares/FreeRTOS/queue.c ****         SemaphoreData_t xSemaphore; /**< Data required exclusively when this structure is used as a
 112:Middlewares/FreeRTOS/queue.c ****     } u;
 113:Middlewares/FreeRTOS/queue.c **** 
 114:Middlewares/FreeRTOS/queue.c ****     List_t xTasksWaitingToSend;             /**< List of tasks that are blocked waiting to post ont
 115:Middlewares/FreeRTOS/queue.c ****     List_t xTasksWaitingToReceive;          /**< List of tasks that are blocked waiting to read fro
 116:Middlewares/FreeRTOS/queue.c **** 
 117:Middlewares/FreeRTOS/queue.c ****     volatile UBaseType_t uxMessagesWaiting; /**< The number of items currently in the queue. */
 118:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxLength;                   /**< The length of the queue defined as the number of i
 119:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxItemSize;                 /**< The size of each items that the queue will hold. *
 120:Middlewares/FreeRTOS/queue.c **** 
 121:Middlewares/FreeRTOS/queue.c ****     volatile int8_t cRxLock;                /**< Stores the number of items received from the queue
 122:Middlewares/FreeRTOS/queue.c ****     volatile int8_t cTxLock;                /**< Stores the number of items transmitted to the queu
 123:Middlewares/FreeRTOS/queue.c **** 
 124:Middlewares/FreeRTOS/queue.c ****     #if ( ( configSUPPORT_STATIC_ALLOCATION == 1 ) && ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) )
 125:Middlewares/FreeRTOS/queue.c ****         uint8_t ucStaticallyAllocated; /**< Set to pdTRUE if the memory used by the queue was stati
 126:Middlewares/FreeRTOS/queue.c ****     #endif
 127:Middlewares/FreeRTOS/queue.c **** 
 128:Middlewares/FreeRTOS/queue.c ****     #if ( configUSE_QUEUE_SETS == 1 )
 129:Middlewares/FreeRTOS/queue.c ****         struct QueueDefinition * pxQueueSetContainer;
 130:Middlewares/FreeRTOS/queue.c ****     #endif
 131:Middlewares/FreeRTOS/queue.c **** 
 132:Middlewares/FreeRTOS/queue.c ****     #if ( configUSE_TRACE_FACILITY == 1 )
 133:Middlewares/FreeRTOS/queue.c ****         UBaseType_t uxQueueNumber;
 134:Middlewares/FreeRTOS/queue.c ****         uint8_t ucQueueType;
 135:Middlewares/FreeRTOS/queue.c ****     #endif
 136:Middlewares/FreeRTOS/queue.c **** } xQUEUE;
 137:Middlewares/FreeRTOS/queue.c **** 
 138:Middlewares/FreeRTOS/queue.c **** /* The old xQUEUE name is maintained above then typedefed to the new Queue_t
 139:Middlewares/FreeRTOS/queue.c ****  * name below to enable the use of older kernel aware debuggers. */
 140:Middlewares/FreeRTOS/queue.c **** typedef xQUEUE Queue_t;
 141:Middlewares/FreeRTOS/queue.c **** 
 142:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 143:Middlewares/FreeRTOS/queue.c **** 
 144:Middlewares/FreeRTOS/queue.c **** /*
ARM GAS  /tmp/cczksE0f.s 			page 4


 145:Middlewares/FreeRTOS/queue.c ****  * The queue registry is just a means for kernel aware debuggers to locate
 146:Middlewares/FreeRTOS/queue.c ****  * queue structures.  It has no other purpose so is an optional component.
 147:Middlewares/FreeRTOS/queue.c ****  */
 148:Middlewares/FreeRTOS/queue.c **** #if ( configQUEUE_REGISTRY_SIZE > 0 )
 149:Middlewares/FreeRTOS/queue.c **** 
 150:Middlewares/FreeRTOS/queue.c **** /* The type stored within the queue registry array.  This allows a name
 151:Middlewares/FreeRTOS/queue.c ****  * to be assigned to each queue making kernel aware debugging a little
 152:Middlewares/FreeRTOS/queue.c ****  * more user friendly. */
 153:Middlewares/FreeRTOS/queue.c ****     typedef struct QUEUE_REGISTRY_ITEM
 154:Middlewares/FreeRTOS/queue.c ****     {
 155:Middlewares/FreeRTOS/queue.c ****         const char * pcQueueName;
 156:Middlewares/FreeRTOS/queue.c ****         QueueHandle_t xHandle;
 157:Middlewares/FreeRTOS/queue.c ****     } xQueueRegistryItem;
 158:Middlewares/FreeRTOS/queue.c **** 
 159:Middlewares/FreeRTOS/queue.c **** /* The old xQueueRegistryItem name is maintained above then typedefed to the
 160:Middlewares/FreeRTOS/queue.c ****  * new xQueueRegistryItem name below to enable the use of older kernel aware
 161:Middlewares/FreeRTOS/queue.c ****  * debuggers. */
 162:Middlewares/FreeRTOS/queue.c ****     typedef xQueueRegistryItem QueueRegistryItem_t;
 163:Middlewares/FreeRTOS/queue.c **** 
 164:Middlewares/FreeRTOS/queue.c **** /* The queue registry is simply an array of QueueRegistryItem_t structures.
 165:Middlewares/FreeRTOS/queue.c ****  * The pcQueueName member of a structure being NULL is indicative of the
 166:Middlewares/FreeRTOS/queue.c ****  * array position being vacant. */
 167:Middlewares/FreeRTOS/queue.c **** 
 168:Middlewares/FreeRTOS/queue.c **** /* MISRA Ref 8.4.2 [Declaration shall be visible] */
 169:Middlewares/FreeRTOS/queue.c **** /* More details at: https://github.com/FreeRTOS/FreeRTOS-Kernel/blob/main/MISRA.md#rule-84 */
 170:Middlewares/FreeRTOS/queue.c **** /* coverity[misra_c_2012_rule_8_4_violation] */
 171:Middlewares/FreeRTOS/queue.c ****     PRIVILEGED_DATA QueueRegistryItem_t xQueueRegistry[ configQUEUE_REGISTRY_SIZE ];
 172:Middlewares/FreeRTOS/queue.c **** 
 173:Middlewares/FreeRTOS/queue.c **** #endif /* configQUEUE_REGISTRY_SIZE */
 174:Middlewares/FreeRTOS/queue.c **** 
 175:Middlewares/FreeRTOS/queue.c **** /*
 176:Middlewares/FreeRTOS/queue.c ****  * Unlocks a queue locked by a call to prvLockQueue.  Locking a queue does not
 177:Middlewares/FreeRTOS/queue.c ****  * prevent an ISR from adding or removing items to the queue, but does prevent
 178:Middlewares/FreeRTOS/queue.c ****  * an ISR from removing tasks from the queue event lists.  If an ISR finds a
 179:Middlewares/FreeRTOS/queue.c ****  * queue is locked it will instead increment the appropriate queue lock count
 180:Middlewares/FreeRTOS/queue.c ****  * to indicate that a task may require unblocking.  When the queue in unlocked
 181:Middlewares/FreeRTOS/queue.c ****  * these lock counts are inspected, and the appropriate action taken.
 182:Middlewares/FreeRTOS/queue.c ****  */
 183:Middlewares/FreeRTOS/queue.c **** static void prvUnlockQueue( Queue_t * const pxQueue ) PRIVILEGED_FUNCTION;
 184:Middlewares/FreeRTOS/queue.c **** 
 185:Middlewares/FreeRTOS/queue.c **** /*
 186:Middlewares/FreeRTOS/queue.c ****  * Uses a critical section to determine if there is any data in a queue.
 187:Middlewares/FreeRTOS/queue.c ****  *
 188:Middlewares/FreeRTOS/queue.c ****  * @return pdTRUE if the queue contains no items, otherwise pdFALSE.
 189:Middlewares/FreeRTOS/queue.c ****  */
 190:Middlewares/FreeRTOS/queue.c **** static BaseType_t prvIsQueueEmpty( const Queue_t * pxQueue ) PRIVILEGED_FUNCTION;
 191:Middlewares/FreeRTOS/queue.c **** 
 192:Middlewares/FreeRTOS/queue.c **** /*
 193:Middlewares/FreeRTOS/queue.c ****  * Uses a critical section to determine if there is any space in a queue.
 194:Middlewares/FreeRTOS/queue.c ****  *
 195:Middlewares/FreeRTOS/queue.c ****  * @return pdTRUE if there is no space, otherwise pdFALSE;
 196:Middlewares/FreeRTOS/queue.c ****  */
 197:Middlewares/FreeRTOS/queue.c **** static BaseType_t prvIsQueueFull( const Queue_t * pxQueue ) PRIVILEGED_FUNCTION;
 198:Middlewares/FreeRTOS/queue.c **** 
 199:Middlewares/FreeRTOS/queue.c **** /*
 200:Middlewares/FreeRTOS/queue.c ****  * Copies an item into the queue, either at the front of the queue or the
 201:Middlewares/FreeRTOS/queue.c ****  * back of the queue.
ARM GAS  /tmp/cczksE0f.s 			page 5


 202:Middlewares/FreeRTOS/queue.c ****  */
 203:Middlewares/FreeRTOS/queue.c **** static BaseType_t prvCopyDataToQueue( Queue_t * const pxQueue,
 204:Middlewares/FreeRTOS/queue.c ****                                       const void * pvItemToQueue,
 205:Middlewares/FreeRTOS/queue.c ****                                       const BaseType_t xPosition ) PRIVILEGED_FUNCTION;
 206:Middlewares/FreeRTOS/queue.c **** 
 207:Middlewares/FreeRTOS/queue.c **** /*
 208:Middlewares/FreeRTOS/queue.c ****  * Copies an item out of a queue.
 209:Middlewares/FreeRTOS/queue.c ****  */
 210:Middlewares/FreeRTOS/queue.c **** static void prvCopyDataFromQueue( Queue_t * const pxQueue,
 211:Middlewares/FreeRTOS/queue.c ****                                   void * const pvBuffer ) PRIVILEGED_FUNCTION;
 212:Middlewares/FreeRTOS/queue.c **** 
 213:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_QUEUE_SETS == 1 )
 214:Middlewares/FreeRTOS/queue.c **** 
 215:Middlewares/FreeRTOS/queue.c **** /*
 216:Middlewares/FreeRTOS/queue.c ****  * Checks to see if a queue is a member of a queue set, and if so, notifies
 217:Middlewares/FreeRTOS/queue.c ****  * the queue set that the queue contains data.
 218:Middlewares/FreeRTOS/queue.c ****  */
 219:Middlewares/FreeRTOS/queue.c ****     static BaseType_t prvNotifyQueueSetContainer( const Queue_t * const pxQueue ) PRIVILEGED_FUNCTI
 220:Middlewares/FreeRTOS/queue.c **** #endif
 221:Middlewares/FreeRTOS/queue.c **** 
 222:Middlewares/FreeRTOS/queue.c **** /*
 223:Middlewares/FreeRTOS/queue.c ****  * Called after a Queue_t structure has been allocated either statically or
 224:Middlewares/FreeRTOS/queue.c ****  * dynamically to fill in the structure's members.
 225:Middlewares/FreeRTOS/queue.c ****  */
 226:Middlewares/FreeRTOS/queue.c **** static void prvInitialiseNewQueue( const UBaseType_t uxQueueLength,
 227:Middlewares/FreeRTOS/queue.c ****                                    const UBaseType_t uxItemSize,
 228:Middlewares/FreeRTOS/queue.c ****                                    uint8_t * pucQueueStorage,
 229:Middlewares/FreeRTOS/queue.c ****                                    const uint8_t ucQueueType,
 230:Middlewares/FreeRTOS/queue.c ****                                    Queue_t * pxNewQueue ) PRIVILEGED_FUNCTION;
 231:Middlewares/FreeRTOS/queue.c **** 
 232:Middlewares/FreeRTOS/queue.c **** /*
 233:Middlewares/FreeRTOS/queue.c ****  * Mutexes are a special type of queue.  When a mutex is created, first the
 234:Middlewares/FreeRTOS/queue.c ****  * queue is created, then prvInitialiseMutex() is called to configure the queue
 235:Middlewares/FreeRTOS/queue.c ****  * as a mutex.
 236:Middlewares/FreeRTOS/queue.c ****  */
 237:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_MUTEXES == 1 )
 238:Middlewares/FreeRTOS/queue.c ****     static void prvInitialiseMutex( Queue_t * pxNewQueue ) PRIVILEGED_FUNCTION;
 239:Middlewares/FreeRTOS/queue.c **** #endif
 240:Middlewares/FreeRTOS/queue.c **** 
 241:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_MUTEXES == 1 )
 242:Middlewares/FreeRTOS/queue.c **** 
 243:Middlewares/FreeRTOS/queue.c **** /*
 244:Middlewares/FreeRTOS/queue.c ****  * If a task waiting for a mutex causes the mutex holder to inherit a
 245:Middlewares/FreeRTOS/queue.c ****  * priority, but the waiting task times out, then the holder should
 246:Middlewares/FreeRTOS/queue.c ****  * disinherit the priority - but only down to the highest priority of any
 247:Middlewares/FreeRTOS/queue.c ****  * other tasks that are waiting for the same mutex.  This function returns
 248:Middlewares/FreeRTOS/queue.c ****  * that priority.
 249:Middlewares/FreeRTOS/queue.c ****  */
 250:Middlewares/FreeRTOS/queue.c ****     static UBaseType_t prvGetDisinheritPriorityAfterTimeout( const Queue_t * const pxQueue ) PRIVIL
 251:Middlewares/FreeRTOS/queue.c **** #endif
 252:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 253:Middlewares/FreeRTOS/queue.c **** 
 254:Middlewares/FreeRTOS/queue.c **** /*
 255:Middlewares/FreeRTOS/queue.c ****  * Macro to mark a queue as locked.  Locking a queue prevents an ISR from
 256:Middlewares/FreeRTOS/queue.c ****  * accessing the queue event lists.
 257:Middlewares/FreeRTOS/queue.c ****  */
 258:Middlewares/FreeRTOS/queue.c **** #define prvLockQueue( pxQueue )                            \
ARM GAS  /tmp/cczksE0f.s 			page 6


 259:Middlewares/FreeRTOS/queue.c ****     taskENTER_CRITICAL();                                  \
 260:Middlewares/FreeRTOS/queue.c ****     {                                                      \
 261:Middlewares/FreeRTOS/queue.c ****         if( ( pxQueue )->cRxLock == queueUNLOCKED )        \
 262:Middlewares/FreeRTOS/queue.c ****         {                                                  \
 263:Middlewares/FreeRTOS/queue.c ****             ( pxQueue )->cRxLock = queueLOCKED_UNMODIFIED; \
 264:Middlewares/FreeRTOS/queue.c ****         }                                                  \
 265:Middlewares/FreeRTOS/queue.c ****         if( ( pxQueue )->cTxLock == queueUNLOCKED )        \
 266:Middlewares/FreeRTOS/queue.c ****         {                                                  \
 267:Middlewares/FreeRTOS/queue.c ****             ( pxQueue )->cTxLock = queueLOCKED_UNMODIFIED; \
 268:Middlewares/FreeRTOS/queue.c ****         }                                                  \
 269:Middlewares/FreeRTOS/queue.c ****     }                                                      \
 270:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL()
 271:Middlewares/FreeRTOS/queue.c **** 
 272:Middlewares/FreeRTOS/queue.c **** /*
 273:Middlewares/FreeRTOS/queue.c ****  * Macro to increment cTxLock member of the queue data structure. It is
 274:Middlewares/FreeRTOS/queue.c ****  * capped at the number of tasks in the system as we cannot unblock more
 275:Middlewares/FreeRTOS/queue.c ****  * tasks than the number of tasks in the system.
 276:Middlewares/FreeRTOS/queue.c ****  */
 277:Middlewares/FreeRTOS/queue.c **** #define prvIncrementQueueTxLock( pxQueue, cTxLock )                           \
 278:Middlewares/FreeRTOS/queue.c ****     do {                                                                      \
 279:Middlewares/FreeRTOS/queue.c ****         const UBaseType_t uxNumberOfTasks = uxTaskGetNumberOfTasks();         \
 280:Middlewares/FreeRTOS/queue.c ****         if( ( UBaseType_t ) ( cTxLock ) < uxNumberOfTasks )                   \
 281:Middlewares/FreeRTOS/queue.c ****         {                                                                     \
 282:Middlewares/FreeRTOS/queue.c ****             configASSERT( ( cTxLock ) != queueINT8_MAX );                     \
 283:Middlewares/FreeRTOS/queue.c ****             ( pxQueue )->cTxLock = ( int8_t ) ( ( cTxLock ) + ( int8_t ) 1 ); \
 284:Middlewares/FreeRTOS/queue.c ****         }                                                                     \
 285:Middlewares/FreeRTOS/queue.c ****     } while( 0 )
 286:Middlewares/FreeRTOS/queue.c **** 
 287:Middlewares/FreeRTOS/queue.c **** /*
 288:Middlewares/FreeRTOS/queue.c ****  * Macro to increment cRxLock member of the queue data structure. It is
 289:Middlewares/FreeRTOS/queue.c ****  * capped at the number of tasks in the system as we cannot unblock more
 290:Middlewares/FreeRTOS/queue.c ****  * tasks than the number of tasks in the system.
 291:Middlewares/FreeRTOS/queue.c ****  */
 292:Middlewares/FreeRTOS/queue.c **** #define prvIncrementQueueRxLock( pxQueue, cRxLock )                           \
 293:Middlewares/FreeRTOS/queue.c ****     do {                                                                      \
 294:Middlewares/FreeRTOS/queue.c ****         const UBaseType_t uxNumberOfTasks = uxTaskGetNumberOfTasks();         \
 295:Middlewares/FreeRTOS/queue.c ****         if( ( UBaseType_t ) ( cRxLock ) < uxNumberOfTasks )                   \
 296:Middlewares/FreeRTOS/queue.c ****         {                                                                     \
 297:Middlewares/FreeRTOS/queue.c ****             configASSERT( ( cRxLock ) != queueINT8_MAX );                     \
 298:Middlewares/FreeRTOS/queue.c ****             ( pxQueue )->cRxLock = ( int8_t ) ( ( cRxLock ) + ( int8_t ) 1 ); \
 299:Middlewares/FreeRTOS/queue.c ****         }                                                                     \
 300:Middlewares/FreeRTOS/queue.c ****     } while( 0 )
 301:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 302:Middlewares/FreeRTOS/queue.c **** 
 303:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueueGenericReset( QueueHandle_t xQueue,
 304:Middlewares/FreeRTOS/queue.c ****                                BaseType_t xNewQueue )
 305:Middlewares/FreeRTOS/queue.c **** {
  29              		.loc 1 305 1
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 16
  32              		@ frame_needed = 1, uses_anonymous_args = 0
  33 0000 80B5     		push	{r7, lr}
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 7, -8
  36              		.cfi_offset 14, -4
  37 0002 84B0     		sub	sp, sp, #16
  38              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/cczksE0f.s 			page 7


  39 0004 00AF     		add	r7, sp, #0
  40              		.cfi_def_cfa_register 7
  41 0006 7860     		str	r0, [r7, #4]
  42 0008 3960     		str	r1, [r7]
 306:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn = pdPASS;
  43              		.loc 1 306 16
  44 000a 0123     		movs	r3, #1
  45 000c FB60     		str	r3, [r7, #12]
 307:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
  46              		.loc 1 307 21
  47 000e 7B68     		ldr	r3, [r7, #4]
  48 0010 BB60     		str	r3, [r7, #8]
 308:Middlewares/FreeRTOS/queue.c **** 
 309:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueueGenericReset( xQueue, xNewQueue );
 310:Middlewares/FreeRTOS/queue.c **** 
 311:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
 312:Middlewares/FreeRTOS/queue.c **** 
 313:Middlewares/FreeRTOS/queue.c ****     if( ( pxQueue != NULL ) &&
  49              		.loc 1 313 7
  50 0012 BB68     		ldr	r3, [r7, #8]
  51 0014 002B     		cmp	r3, #0
  52 0016 5DD0     		beq	.L2
 314:Middlewares/FreeRTOS/queue.c ****         ( pxQueue->uxLength >= 1U ) &&
  53              		.loc 1 314 18
  54 0018 BB68     		ldr	r3, [r7, #8]
  55 001a DB6B     		ldr	r3, [r3, #60]
 313:Middlewares/FreeRTOS/queue.c ****         ( pxQueue->uxLength >= 1U ) &&
  56              		.loc 1 313 29 discriminator 1
  57 001c 002B     		cmp	r3, #0
  58 001e 59D0     		beq	.L2
 315:Middlewares/FreeRTOS/queue.c ****         /* Check for multiplication overflow. */
 316:Middlewares/FreeRTOS/queue.c ****         ( ( SIZE_MAX / pxQueue->uxLength ) >= pxQueue->uxItemSize ) )
  59              		.loc 1 316 54
  60 0020 BB68     		ldr	r3, [r7, #8]
  61 0022 1A6C     		ldr	r2, [r3, #64]
  62              		.loc 1 316 31
  63 0024 BB68     		ldr	r3, [r7, #8]
  64 0026 DB6B     		ldr	r3, [r3, #60]
  65              		.loc 1 316 44
  66 0028 0021     		movs	r1, #0
  67 002a A3FB0223 		umull	r2, r3, r3, r2
  68 002e 002B     		cmp	r3, #0
  69 0030 00D0     		beq	.L3
  70 0032 0121     		movs	r1, #1
  71              	.L3:
  72              		.loc 1 316 44 is_stmt 0 discriminator 1
  73 0034 0B46     		mov	r3, r1
 314:Middlewares/FreeRTOS/queue.c ****         /* Check for multiplication overflow. */
  74              		.loc 1 314 37 is_stmt 1
  75 0036 002B     		cmp	r3, #0
  76 0038 4CD1     		bne	.L2
 317:Middlewares/FreeRTOS/queue.c ****     {
 318:Middlewares/FreeRTOS/queue.c ****         taskENTER_CRITICAL();
  77              		.loc 1 318 9
  78 003a FFF7FEFF 		bl	vPortEnterCritical
 319:Middlewares/FreeRTOS/queue.c ****         {
 320:Middlewares/FreeRTOS/queue.c ****             pxQueue->u.xQueue.pcTail = pxQueue->pcHead + ( pxQueue->uxLength * pxQueue->uxItemSize 
ARM GAS  /tmp/cczksE0f.s 			page 8


  79              		.loc 1 320 47
  80 003e BB68     		ldr	r3, [r7, #8]
  81 0040 1A68     		ldr	r2, [r3]
  82              		.loc 1 320 67
  83 0042 BB68     		ldr	r3, [r7, #8]
  84 0044 DB6B     		ldr	r3, [r3, #60]
  85              		.loc 1 320 87
  86 0046 B968     		ldr	r1, [r7, #8]
  87 0048 096C     		ldr	r1, [r1, #64]
  88              		.loc 1 320 78
  89 004a 01FB03F3 		mul	r3, r1, r3
  90              		.loc 1 320 56
  91 004e 1A44     		add	r2, r2, r3
  92              		.loc 1 320 38
  93 0050 BB68     		ldr	r3, [r7, #8]
  94 0052 9A60     		str	r2, [r3, #8]
 321:Middlewares/FreeRTOS/queue.c ****             pxQueue->uxMessagesWaiting = ( UBaseType_t ) 0U;
  95              		.loc 1 321 40
  96 0054 BB68     		ldr	r3, [r7, #8]
  97 0056 0022     		movs	r2, #0
  98 0058 9A63     		str	r2, [r3, #56]
 322:Middlewares/FreeRTOS/queue.c ****             pxQueue->pcWriteTo = pxQueue->pcHead;
  99              		.loc 1 322 41
 100 005a BB68     		ldr	r3, [r7, #8]
 101 005c 1A68     		ldr	r2, [r3]
 102              		.loc 1 322 32
 103 005e BB68     		ldr	r3, [r7, #8]
 104 0060 5A60     		str	r2, [r3, #4]
 323:Middlewares/FreeRTOS/queue.c ****             pxQueue->u.xQueue.pcReadFrom = pxQueue->pcHead + ( ( pxQueue->uxLength - 1U ) * pxQueue
 105              		.loc 1 323 51
 106 0062 BB68     		ldr	r3, [r7, #8]
 107 0064 1A68     		ldr	r2, [r3]
 108              		.loc 1 323 73
 109 0066 BB68     		ldr	r3, [r7, #8]
 110 0068 DB6B     		ldr	r3, [r3, #60]
 111              		.loc 1 323 84
 112 006a 013B     		subs	r3, r3, #1
 113              		.loc 1 323 100
 114 006c B968     		ldr	r1, [r7, #8]
 115 006e 096C     		ldr	r1, [r1, #64]
 116              		.loc 1 323 91
 117 0070 01FB03F3 		mul	r3, r1, r3
 118              		.loc 1 323 60
 119 0074 1A44     		add	r2, r2, r3
 120              		.loc 1 323 42
 121 0076 BB68     		ldr	r3, [r7, #8]
 122 0078 DA60     		str	r2, [r3, #12]
 324:Middlewares/FreeRTOS/queue.c ****             pxQueue->cRxLock = queueUNLOCKED;
 123              		.loc 1 324 30
 124 007a BB68     		ldr	r3, [r7, #8]
 125 007c FF22     		movs	r2, #255
 126 007e 83F84420 		strb	r2, [r3, #68]
 325:Middlewares/FreeRTOS/queue.c ****             pxQueue->cTxLock = queueUNLOCKED;
 127              		.loc 1 325 30
 128 0082 BB68     		ldr	r3, [r7, #8]
 129 0084 FF22     		movs	r2, #255
 130 0086 83F84520 		strb	r2, [r3, #69]
ARM GAS  /tmp/cczksE0f.s 			page 9


 326:Middlewares/FreeRTOS/queue.c **** 
 327:Middlewares/FreeRTOS/queue.c ****             if( xNewQueue == pdFALSE )
 131              		.loc 1 327 15
 132 008a 3B68     		ldr	r3, [r7]
 133 008c 002B     		cmp	r3, #0
 134 008e 14D1     		bne	.L5
 328:Middlewares/FreeRTOS/queue.c ****             {
 329:Middlewares/FreeRTOS/queue.c ****                 /* If there are tasks blocked waiting to read from the queue, then
 330:Middlewares/FreeRTOS/queue.c ****                  * the tasks will remain blocked as after this function exits the queue
 331:Middlewares/FreeRTOS/queue.c ****                  * will still be empty.  If there are tasks blocked waiting to write to
 332:Middlewares/FreeRTOS/queue.c ****                  * the queue, then one should be unblocked as after this function exits
 333:Middlewares/FreeRTOS/queue.c ****                  * it will be possible to write to it. */
 334:Middlewares/FreeRTOS/queue.c ****                 if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToSend ) ) == pdFALSE )
 135              		.loc 1 334 21
 136 0090 BB68     		ldr	r3, [r7, #8]
 137 0092 1B69     		ldr	r3, [r3, #16]
 138              		.loc 1 334 19
 139 0094 002B     		cmp	r3, #0
 140 0096 1AD0     		beq	.L6
 335:Middlewares/FreeRTOS/queue.c ****                 {
 336:Middlewares/FreeRTOS/queue.c ****                     if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToSend ) ) != pdFALSE )
 141              		.loc 1 336 51
 142 0098 BB68     		ldr	r3, [r7, #8]
 143 009a 1033     		adds	r3, r3, #16
 144              		.loc 1 336 25
 145 009c 1846     		mov	r0, r3
 146 009e FFF7FEFF 		bl	xTaskRemoveFromEventList
 147 00a2 0346     		mov	r3, r0
 148              		.loc 1 336 23 discriminator 1
 149 00a4 002B     		cmp	r3, #0
 150 00a6 12D0     		beq	.L6
 337:Middlewares/FreeRTOS/queue.c ****                     {
 338:Middlewares/FreeRTOS/queue.c ****                         queueYIELD_IF_USING_PREEMPTION();
 151              		.loc 1 338 25
 152 00a8 0E4B     		ldr	r3, .L9
 153 00aa 4FF08052 		mov	r2, #268435456
 154 00ae 1A60     		str	r2, [r3]
 155              		.syntax unified
 156              	@ 338 "Middlewares/FreeRTOS/queue.c" 1
 157 00b0 BFF34F8F 		dsb
 158              	@ 0 "" 2
 159              	@ 338 "Middlewares/FreeRTOS/queue.c" 1
 160 00b4 BFF36F8F 		isb
 161              	@ 0 "" 2
 162              		.thumb
 163              		.syntax unified
 164 00b8 09E0     		b	.L6
 165              	.L5:
 339:Middlewares/FreeRTOS/queue.c ****                     }
 340:Middlewares/FreeRTOS/queue.c ****                     else
 341:Middlewares/FreeRTOS/queue.c ****                     {
 342:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
 343:Middlewares/FreeRTOS/queue.c ****                     }
 344:Middlewares/FreeRTOS/queue.c ****                 }
 345:Middlewares/FreeRTOS/queue.c ****                 else
 346:Middlewares/FreeRTOS/queue.c ****                 {
 347:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
ARM GAS  /tmp/cczksE0f.s 			page 10


 348:Middlewares/FreeRTOS/queue.c ****                 }
 349:Middlewares/FreeRTOS/queue.c ****             }
 350:Middlewares/FreeRTOS/queue.c ****             else
 351:Middlewares/FreeRTOS/queue.c ****             {
 352:Middlewares/FreeRTOS/queue.c ****                 /* Ensure the event queues start in the correct state. */
 353:Middlewares/FreeRTOS/queue.c ****                 vListInitialise( &( pxQueue->xTasksWaitingToSend ) );
 166              		.loc 1 353 17
 167 00ba BB68     		ldr	r3, [r7, #8]
 168 00bc 1033     		adds	r3, r3, #16
 169 00be 1846     		mov	r0, r3
 170 00c0 FFF7FEFF 		bl	vListInitialise
 354:Middlewares/FreeRTOS/queue.c ****                 vListInitialise( &( pxQueue->xTasksWaitingToReceive ) );
 171              		.loc 1 354 17
 172 00c4 BB68     		ldr	r3, [r7, #8]
 173 00c6 2433     		adds	r3, r3, #36
 174 00c8 1846     		mov	r0, r3
 175 00ca FFF7FEFF 		bl	vListInitialise
 176              	.L6:
 355:Middlewares/FreeRTOS/queue.c ****             }
 356:Middlewares/FreeRTOS/queue.c ****         }
 357:Middlewares/FreeRTOS/queue.c ****         taskEXIT_CRITICAL();
 177              		.loc 1 357 9
 178 00ce FFF7FEFF 		bl	vPortExitCritical
 179 00d2 01E0     		b	.L7
 180              	.L2:
 358:Middlewares/FreeRTOS/queue.c ****     }
 359:Middlewares/FreeRTOS/queue.c ****     else
 360:Middlewares/FreeRTOS/queue.c ****     {
 361:Middlewares/FreeRTOS/queue.c ****         xReturn = pdFAIL;
 181              		.loc 1 361 17
 182 00d4 0023     		movs	r3, #0
 183 00d6 FB60     		str	r3, [r7, #12]
 184              	.L7:
 362:Middlewares/FreeRTOS/queue.c ****     }
 363:Middlewares/FreeRTOS/queue.c **** 
 364:Middlewares/FreeRTOS/queue.c ****     configASSERT( xReturn != pdFAIL );
 365:Middlewares/FreeRTOS/queue.c **** 
 366:Middlewares/FreeRTOS/queue.c ****     /* A value is returned for calling semantic consistency with previous
 367:Middlewares/FreeRTOS/queue.c ****      * versions. */
 368:Middlewares/FreeRTOS/queue.c ****     traceRETURN_xQueueGenericReset( xReturn );
 369:Middlewares/FreeRTOS/queue.c **** 
 370:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 185              		.loc 1 370 12
 186 00d8 FB68     		ldr	r3, [r7, #12]
 371:Middlewares/FreeRTOS/queue.c **** }
 187              		.loc 1 371 1
 188 00da 1846     		mov	r0, r3
 189 00dc 1037     		adds	r7, r7, #16
 190              		.cfi_def_cfa_offset 8
 191 00de BD46     		mov	sp, r7
 192              		.cfi_def_cfa_register 13
 193              		@ sp needed
 194 00e0 80BD     		pop	{r7, pc}
 195              	.L10:
 196 00e2 00BF     		.align	2
 197              	.L9:
 198 00e4 04ED00E0 		.word	-536810236
ARM GAS  /tmp/cczksE0f.s 			page 11


 199              		.cfi_endproc
 200              	.LFE4:
 202              		.section	.text.xQueueGenericCreate,"ax",%progbits
 203              		.align	1
 204              		.global	xQueueGenericCreate
 205              		.syntax unified
 206              		.thumb
 207              		.thumb_func
 209              	xQueueGenericCreate:
 210              	.LFB5:
 372:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 373:Middlewares/FreeRTOS/queue.c **** 
 374:Middlewares/FreeRTOS/queue.c **** #if ( configSUPPORT_STATIC_ALLOCATION == 1 )
 375:Middlewares/FreeRTOS/queue.c **** 
 376:Middlewares/FreeRTOS/queue.c ****     QueueHandle_t xQueueGenericCreateStatic( const UBaseType_t uxQueueLength,
 377:Middlewares/FreeRTOS/queue.c ****                                              const UBaseType_t uxItemSize,
 378:Middlewares/FreeRTOS/queue.c ****                                              uint8_t * pucQueueStorage,
 379:Middlewares/FreeRTOS/queue.c ****                                              StaticQueue_t * pxStaticQueue,
 380:Middlewares/FreeRTOS/queue.c ****                                              const uint8_t ucQueueType )
 381:Middlewares/FreeRTOS/queue.c ****     {
 382:Middlewares/FreeRTOS/queue.c ****         Queue_t * pxNewQueue = NULL;
 383:Middlewares/FreeRTOS/queue.c **** 
 384:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueGenericCreateStatic( uxQueueLength, uxItemSize, pucQueueStorage, pxStaticQ
 385:Middlewares/FreeRTOS/queue.c **** 
 386:Middlewares/FreeRTOS/queue.c ****         /* The StaticQueue_t structure and the queue storage area must be
 387:Middlewares/FreeRTOS/queue.c ****          * supplied. */
 388:Middlewares/FreeRTOS/queue.c ****         configASSERT( pxStaticQueue );
 389:Middlewares/FreeRTOS/queue.c **** 
 390:Middlewares/FreeRTOS/queue.c ****         if( ( uxQueueLength > ( UBaseType_t ) 0 ) &&
 391:Middlewares/FreeRTOS/queue.c ****             ( pxStaticQueue != NULL ) &&
 392:Middlewares/FreeRTOS/queue.c **** 
 393:Middlewares/FreeRTOS/queue.c ****             /* A queue storage area should be provided if the item size is not 0, and
 394:Middlewares/FreeRTOS/queue.c ****              * should not be provided if the item size is 0. */
 395:Middlewares/FreeRTOS/queue.c ****             ( !( ( pucQueueStorage != NULL ) && ( uxItemSize == 0U ) ) ) &&
 396:Middlewares/FreeRTOS/queue.c ****             ( !( ( pucQueueStorage == NULL ) && ( uxItemSize != 0U ) ) ) )
 397:Middlewares/FreeRTOS/queue.c ****         {
 398:Middlewares/FreeRTOS/queue.c ****             #if ( configASSERT_DEFINED == 1 )
 399:Middlewares/FreeRTOS/queue.c ****             {
 400:Middlewares/FreeRTOS/queue.c ****                 /* Sanity check that the size of the structure used to declare a
 401:Middlewares/FreeRTOS/queue.c ****                  * variable of type StaticQueue_t or StaticSemaphore_t equals the size of
 402:Middlewares/FreeRTOS/queue.c ****                  * the real queue and semaphore structures. */
 403:Middlewares/FreeRTOS/queue.c ****                 volatile size_t xSize = sizeof( StaticQueue_t );
 404:Middlewares/FreeRTOS/queue.c **** 
 405:Middlewares/FreeRTOS/queue.c ****                 /* This assertion cannot be branch covered in unit tests */
 406:Middlewares/FreeRTOS/queue.c ****                 configASSERT( xSize == sizeof( Queue_t ) ); /* LCOV_EXCL_BR_LINE */
 407:Middlewares/FreeRTOS/queue.c ****                 ( void ) xSize;                             /* Prevent unused variable warning when
 408:Middlewares/FreeRTOS/queue.c ****             }
 409:Middlewares/FreeRTOS/queue.c ****             #endif /* configASSERT_DEFINED */
 410:Middlewares/FreeRTOS/queue.c **** 
 411:Middlewares/FreeRTOS/queue.c ****             /* The address of a statically allocated queue was passed in, use it.
 412:Middlewares/FreeRTOS/queue.c ****              * The address of a statically allocated storage area was also passed in
 413:Middlewares/FreeRTOS/queue.c ****              * but is already set. */
 414:Middlewares/FreeRTOS/queue.c ****             /* MISRA Ref 11.3.1 [Misaligned access] */
 415:Middlewares/FreeRTOS/queue.c ****             /* More details at: https://github.com/FreeRTOS/FreeRTOS-Kernel/blob/main/MISRA.md#rule
 416:Middlewares/FreeRTOS/queue.c ****             /* coverity[misra_c_2012_rule_11_3_violation] */
 417:Middlewares/FreeRTOS/queue.c ****             pxNewQueue = ( Queue_t * ) pxStaticQueue;
 418:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 12


 419:Middlewares/FreeRTOS/queue.c ****             #if ( configSUPPORT_DYNAMIC_ALLOCATION == 1 )
 420:Middlewares/FreeRTOS/queue.c ****             {
 421:Middlewares/FreeRTOS/queue.c ****                 /* Queues can be allocated wither statically or dynamically, so
 422:Middlewares/FreeRTOS/queue.c ****                  * note this queue was allocated statically in case the queue is
 423:Middlewares/FreeRTOS/queue.c ****                  * later deleted. */
 424:Middlewares/FreeRTOS/queue.c ****                 pxNewQueue->ucStaticallyAllocated = pdTRUE;
 425:Middlewares/FreeRTOS/queue.c ****             }
 426:Middlewares/FreeRTOS/queue.c ****             #endif /* configSUPPORT_DYNAMIC_ALLOCATION */
 427:Middlewares/FreeRTOS/queue.c **** 
 428:Middlewares/FreeRTOS/queue.c ****             prvInitialiseNewQueue( uxQueueLength, uxItemSize, pucQueueStorage, ucQueueType, pxNewQu
 429:Middlewares/FreeRTOS/queue.c ****         }
 430:Middlewares/FreeRTOS/queue.c ****         else
 431:Middlewares/FreeRTOS/queue.c ****         {
 432:Middlewares/FreeRTOS/queue.c ****             configASSERT( pxNewQueue );
 433:Middlewares/FreeRTOS/queue.c ****             mtCOVERAGE_TEST_MARKER();
 434:Middlewares/FreeRTOS/queue.c ****         }
 435:Middlewares/FreeRTOS/queue.c **** 
 436:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueGenericCreateStatic( pxNewQueue );
 437:Middlewares/FreeRTOS/queue.c **** 
 438:Middlewares/FreeRTOS/queue.c ****         return pxNewQueue;
 439:Middlewares/FreeRTOS/queue.c ****     }
 440:Middlewares/FreeRTOS/queue.c **** 
 441:Middlewares/FreeRTOS/queue.c **** #endif /* configSUPPORT_STATIC_ALLOCATION */
 442:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 443:Middlewares/FreeRTOS/queue.c **** 
 444:Middlewares/FreeRTOS/queue.c **** #if ( configSUPPORT_STATIC_ALLOCATION == 1 )
 445:Middlewares/FreeRTOS/queue.c **** 
 446:Middlewares/FreeRTOS/queue.c ****     BaseType_t xQueueGenericGetStaticBuffers( QueueHandle_t xQueue,
 447:Middlewares/FreeRTOS/queue.c ****                                               uint8_t ** ppucQueueStorage,
 448:Middlewares/FreeRTOS/queue.c ****                                               StaticQueue_t ** ppxStaticQueue )
 449:Middlewares/FreeRTOS/queue.c ****     {
 450:Middlewares/FreeRTOS/queue.c ****         BaseType_t xReturn;
 451:Middlewares/FreeRTOS/queue.c ****         Queue_t * const pxQueue = xQueue;
 452:Middlewares/FreeRTOS/queue.c **** 
 453:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueGenericGetStaticBuffers( xQueue, ppucQueueStorage, ppxStaticQueue );
 454:Middlewares/FreeRTOS/queue.c **** 
 455:Middlewares/FreeRTOS/queue.c ****         configASSERT( pxQueue );
 456:Middlewares/FreeRTOS/queue.c ****         configASSERT( ppxStaticQueue );
 457:Middlewares/FreeRTOS/queue.c **** 
 458:Middlewares/FreeRTOS/queue.c ****         #if ( configSUPPORT_DYNAMIC_ALLOCATION == 1 )
 459:Middlewares/FreeRTOS/queue.c ****         {
 460:Middlewares/FreeRTOS/queue.c ****             /* Check if the queue was statically allocated. */
 461:Middlewares/FreeRTOS/queue.c ****             if( pxQueue->ucStaticallyAllocated == ( uint8_t ) pdTRUE )
 462:Middlewares/FreeRTOS/queue.c ****             {
 463:Middlewares/FreeRTOS/queue.c ****                 if( ppucQueueStorage != NULL )
 464:Middlewares/FreeRTOS/queue.c ****                 {
 465:Middlewares/FreeRTOS/queue.c ****                     *ppucQueueStorage = ( uint8_t * ) pxQueue->pcHead;
 466:Middlewares/FreeRTOS/queue.c ****                 }
 467:Middlewares/FreeRTOS/queue.c **** 
 468:Middlewares/FreeRTOS/queue.c ****                 /* MISRA Ref 11.3.1 [Misaligned access] */
 469:Middlewares/FreeRTOS/queue.c ****                 /* More details at: https://github.com/FreeRTOS/FreeRTOS-Kernel/blob/main/MISRA.md#
 470:Middlewares/FreeRTOS/queue.c ****                 /* coverity[misra_c_2012_rule_11_3_violation] */
 471:Middlewares/FreeRTOS/queue.c ****                 *ppxStaticQueue = ( StaticQueue_t * ) pxQueue;
 472:Middlewares/FreeRTOS/queue.c ****                 xReturn = pdTRUE;
 473:Middlewares/FreeRTOS/queue.c ****             }
 474:Middlewares/FreeRTOS/queue.c ****             else
 475:Middlewares/FreeRTOS/queue.c ****             {
ARM GAS  /tmp/cczksE0f.s 			page 13


 476:Middlewares/FreeRTOS/queue.c ****                 xReturn = pdFALSE;
 477:Middlewares/FreeRTOS/queue.c ****             }
 478:Middlewares/FreeRTOS/queue.c ****         }
 479:Middlewares/FreeRTOS/queue.c ****         #else /* configSUPPORT_DYNAMIC_ALLOCATION */
 480:Middlewares/FreeRTOS/queue.c ****         {
 481:Middlewares/FreeRTOS/queue.c ****             /* Queue must have been statically allocated. */
 482:Middlewares/FreeRTOS/queue.c ****             if( ppucQueueStorage != NULL )
 483:Middlewares/FreeRTOS/queue.c ****             {
 484:Middlewares/FreeRTOS/queue.c ****                 *ppucQueueStorage = ( uint8_t * ) pxQueue->pcHead;
 485:Middlewares/FreeRTOS/queue.c ****             }
 486:Middlewares/FreeRTOS/queue.c **** 
 487:Middlewares/FreeRTOS/queue.c ****             *ppxStaticQueue = ( StaticQueue_t * ) pxQueue;
 488:Middlewares/FreeRTOS/queue.c ****             xReturn = pdTRUE;
 489:Middlewares/FreeRTOS/queue.c ****         }
 490:Middlewares/FreeRTOS/queue.c ****         #endif /* configSUPPORT_DYNAMIC_ALLOCATION */
 491:Middlewares/FreeRTOS/queue.c **** 
 492:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueGenericGetStaticBuffers( xReturn );
 493:Middlewares/FreeRTOS/queue.c **** 
 494:Middlewares/FreeRTOS/queue.c ****         return xReturn;
 495:Middlewares/FreeRTOS/queue.c ****     }
 496:Middlewares/FreeRTOS/queue.c **** 
 497:Middlewares/FreeRTOS/queue.c **** #endif /* configSUPPORT_STATIC_ALLOCATION */
 498:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 499:Middlewares/FreeRTOS/queue.c **** 
 500:Middlewares/FreeRTOS/queue.c **** #if ( configSUPPORT_DYNAMIC_ALLOCATION == 1 )
 501:Middlewares/FreeRTOS/queue.c **** 
 502:Middlewares/FreeRTOS/queue.c ****     QueueHandle_t xQueueGenericCreate( const UBaseType_t uxQueueLength,
 503:Middlewares/FreeRTOS/queue.c ****                                        const UBaseType_t uxItemSize,
 504:Middlewares/FreeRTOS/queue.c ****                                        const uint8_t ucQueueType )
 505:Middlewares/FreeRTOS/queue.c ****     {
 211              		.loc 1 505 5
 212              		.cfi_startproc
 213              		@ args = 0, pretend = 0, frame = 32
 214              		@ frame_needed = 1, uses_anonymous_args = 0
 215 0000 80B5     		push	{r7, lr}
 216              		.cfi_def_cfa_offset 8
 217              		.cfi_offset 7, -8
 218              		.cfi_offset 14, -4
 219 0002 8AB0     		sub	sp, sp, #40
 220              		.cfi_def_cfa_offset 48
 221 0004 02AF     		add	r7, sp, #8
 222              		.cfi_def_cfa 7, 40
 223 0006 F860     		str	r0, [r7, #12]
 224 0008 B960     		str	r1, [r7, #8]
 225 000a 1346     		mov	r3, r2
 226 000c FB71     		strb	r3, [r7, #7]
 506:Middlewares/FreeRTOS/queue.c ****         Queue_t * pxNewQueue = NULL;
 227              		.loc 1 506 19
 228 000e 0023     		movs	r3, #0
 229 0010 FB61     		str	r3, [r7, #28]
 507:Middlewares/FreeRTOS/queue.c ****         size_t xQueueSizeInBytes;
 508:Middlewares/FreeRTOS/queue.c ****         uint8_t * pucQueueStorage;
 509:Middlewares/FreeRTOS/queue.c **** 
 510:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueGenericCreate( uxQueueLength, uxItemSize, ucQueueType );
 511:Middlewares/FreeRTOS/queue.c **** 
 512:Middlewares/FreeRTOS/queue.c ****         if( ( uxQueueLength > ( UBaseType_t ) 0 ) &&
 230              		.loc 1 512 11
ARM GAS  /tmp/cczksE0f.s 			page 14


 231 0012 FB68     		ldr	r3, [r7, #12]
 232 0014 002B     		cmp	r3, #0
 233 0016 2DD0     		beq	.L12
 513:Middlewares/FreeRTOS/queue.c ****             /* Check for multiplication overflow. */
 514:Middlewares/FreeRTOS/queue.c ****             ( ( SIZE_MAX / uxQueueLength ) >= uxItemSize ) &&
 234              		.loc 1 514 44
 235 0018 0021     		movs	r1, #0
 236 001a BA68     		ldr	r2, [r7, #8]
 237 001c FB68     		ldr	r3, [r7, #12]
 238 001e A3FB0223 		umull	r2, r3, r3, r2
 239 0022 002B     		cmp	r3, #0
 240 0024 00D0     		beq	.L13
 241 0026 0121     		movs	r1, #1
 242              	.L13:
 243              		.loc 1 514 44 is_stmt 0 discriminator 1
 244 0028 0B46     		mov	r3, r1
 512:Middlewares/FreeRTOS/queue.c ****             /* Check for multiplication overflow. */
 245              		.loc 1 512 51 is_stmt 1 discriminator 1
 246 002a 002B     		cmp	r3, #0
 247 002c 22D1     		bne	.L12
 515:Middlewares/FreeRTOS/queue.c ****             /* Check for addition overflow. */
 516:Middlewares/FreeRTOS/queue.c ****             ( ( UBaseType_t ) ( SIZE_MAX - sizeof( Queue_t ) ) >= ( uxQueueLength * uxItemSize ) ) 
 248              		.loc 1 516 83
 249 002e FB68     		ldr	r3, [r7, #12]
 250 0030 BA68     		ldr	r2, [r7, #8]
 251 0032 02FB03F3 		mul	r3, r2, r3
 514:Middlewares/FreeRTOS/queue.c ****             /* Check for addition overflow. */
 252              		.loc 1 514 60
 253 0036 13F1510F 		cmn	r3, #81
 254 003a 1BD8     		bhi	.L12
 517:Middlewares/FreeRTOS/queue.c ****         {
 518:Middlewares/FreeRTOS/queue.c ****             /* Allocate enough space to hold the maximum number of items that
 519:Middlewares/FreeRTOS/queue.c ****              * can be in the queue at any time.  It is valid for uxItemSize to be
 520:Middlewares/FreeRTOS/queue.c ****              * zero in the case the queue is used as a semaphore. */
 521:Middlewares/FreeRTOS/queue.c ****             xQueueSizeInBytes = ( size_t ) ( ( size_t ) uxQueueLength * ( size_t ) uxItemSize );
 255              		.loc 1 521 31
 256 003c FB68     		ldr	r3, [r7, #12]
 257 003e BA68     		ldr	r2, [r7, #8]
 258 0040 02FB03F3 		mul	r3, r2, r3
 259 0044 BB61     		str	r3, [r7, #24]
 522:Middlewares/FreeRTOS/queue.c **** 
 523:Middlewares/FreeRTOS/queue.c ****             /* MISRA Ref 11.5.1 [Malloc memory assignment] */
 524:Middlewares/FreeRTOS/queue.c ****             /* More details at: https://github.com/FreeRTOS/FreeRTOS-Kernel/blob/main/MISRA.md#rule
 525:Middlewares/FreeRTOS/queue.c ****             /* coverity[misra_c_2012_rule_11_5_violation] */
 526:Middlewares/FreeRTOS/queue.c ****             pxNewQueue = ( Queue_t * ) pvPortMalloc( sizeof( Queue_t ) + xQueueSizeInBytes );
 260              		.loc 1 526 40
 261 0046 BB69     		ldr	r3, [r7, #24]
 262 0048 5033     		adds	r3, r3, #80
 263 004a 1846     		mov	r0, r3
 264 004c FFF7FEFF 		bl	pvPortMalloc
 265 0050 F861     		str	r0, [r7, #28]
 527:Middlewares/FreeRTOS/queue.c **** 
 528:Middlewares/FreeRTOS/queue.c ****             if( pxNewQueue != NULL )
 266              		.loc 1 528 15
 267 0052 FB69     		ldr	r3, [r7, #28]
 268 0054 002B     		cmp	r3, #0
 269 0056 0DD0     		beq	.L12
ARM GAS  /tmp/cczksE0f.s 			page 15


 529:Middlewares/FreeRTOS/queue.c ****             {
 530:Middlewares/FreeRTOS/queue.c ****                 /* Jump past the queue structure to find the location of the queue
 531:Middlewares/FreeRTOS/queue.c ****                  * storage area. */
 532:Middlewares/FreeRTOS/queue.c ****                 pucQueueStorage = ( uint8_t * ) pxNewQueue;
 270              		.loc 1 532 33
 271 0058 FB69     		ldr	r3, [r7, #28]
 272 005a 7B61     		str	r3, [r7, #20]
 533:Middlewares/FreeRTOS/queue.c ****                 pucQueueStorage += sizeof( Queue_t );
 273              		.loc 1 533 33
 274 005c 7B69     		ldr	r3, [r7, #20]
 275 005e 5033     		adds	r3, r3, #80
 276 0060 7B61     		str	r3, [r7, #20]
 534:Middlewares/FreeRTOS/queue.c **** 
 535:Middlewares/FreeRTOS/queue.c ****                 #if ( configSUPPORT_STATIC_ALLOCATION == 1 )
 536:Middlewares/FreeRTOS/queue.c ****                 {
 537:Middlewares/FreeRTOS/queue.c ****                     /* Queues can be created either statically or dynamically, so
 538:Middlewares/FreeRTOS/queue.c ****                      * note this task was created dynamically in case it is later
 539:Middlewares/FreeRTOS/queue.c ****                      * deleted. */
 540:Middlewares/FreeRTOS/queue.c ****                     pxNewQueue->ucStaticallyAllocated = pdFALSE;
 541:Middlewares/FreeRTOS/queue.c ****                 }
 542:Middlewares/FreeRTOS/queue.c ****                 #endif /* configSUPPORT_STATIC_ALLOCATION */
 543:Middlewares/FreeRTOS/queue.c **** 
 544:Middlewares/FreeRTOS/queue.c ****                 prvInitialiseNewQueue( uxQueueLength, uxItemSize, pucQueueStorage, ucQueueType, pxN
 277              		.loc 1 544 17
 278 0062 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 279 0064 FB69     		ldr	r3, [r7, #28]
 280 0066 0093     		str	r3, [sp]
 281 0068 1346     		mov	r3, r2
 282 006a 7A69     		ldr	r2, [r7, #20]
 283 006c B968     		ldr	r1, [r7, #8]
 284 006e F868     		ldr	r0, [r7, #12]
 285 0070 FFF7FEFF 		bl	prvInitialiseNewQueue
 286              	.L12:
 545:Middlewares/FreeRTOS/queue.c ****             }
 546:Middlewares/FreeRTOS/queue.c ****             else
 547:Middlewares/FreeRTOS/queue.c ****             {
 548:Middlewares/FreeRTOS/queue.c ****                 traceQUEUE_CREATE_FAILED( ucQueueType );
 549:Middlewares/FreeRTOS/queue.c ****                 mtCOVERAGE_TEST_MARKER();
 550:Middlewares/FreeRTOS/queue.c ****             }
 551:Middlewares/FreeRTOS/queue.c ****         }
 552:Middlewares/FreeRTOS/queue.c ****         else
 553:Middlewares/FreeRTOS/queue.c ****         {
 554:Middlewares/FreeRTOS/queue.c ****             configASSERT( pxNewQueue );
 555:Middlewares/FreeRTOS/queue.c ****             mtCOVERAGE_TEST_MARKER();
 556:Middlewares/FreeRTOS/queue.c ****         }
 557:Middlewares/FreeRTOS/queue.c **** 
 558:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueGenericCreate( pxNewQueue );
 559:Middlewares/FreeRTOS/queue.c **** 
 560:Middlewares/FreeRTOS/queue.c ****         return pxNewQueue;
 287              		.loc 1 560 16
 288 0074 FB69     		ldr	r3, [r7, #28]
 561:Middlewares/FreeRTOS/queue.c ****     }
 289              		.loc 1 561 5
 290 0076 1846     		mov	r0, r3
 291 0078 2037     		adds	r7, r7, #32
 292              		.cfi_def_cfa_offset 8
 293 007a BD46     		mov	sp, r7
ARM GAS  /tmp/cczksE0f.s 			page 16


 294              		.cfi_def_cfa_register 13
 295              		@ sp needed
 296 007c 80BD     		pop	{r7, pc}
 297              		.cfi_endproc
 298              	.LFE5:
 300              		.section	.text.prvInitialiseNewQueue,"ax",%progbits
 301              		.align	1
 302              		.syntax unified
 303              		.thumb
 304              		.thumb_func
 306              	prvInitialiseNewQueue:
 307              	.LFB6:
 562:Middlewares/FreeRTOS/queue.c **** 
 563:Middlewares/FreeRTOS/queue.c **** #endif /* configSUPPORT_STATIC_ALLOCATION */
 564:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 565:Middlewares/FreeRTOS/queue.c **** 
 566:Middlewares/FreeRTOS/queue.c **** static void prvInitialiseNewQueue( const UBaseType_t uxQueueLength,
 567:Middlewares/FreeRTOS/queue.c ****                                    const UBaseType_t uxItemSize,
 568:Middlewares/FreeRTOS/queue.c ****                                    uint8_t * pucQueueStorage,
 569:Middlewares/FreeRTOS/queue.c ****                                    const uint8_t ucQueueType,
 570:Middlewares/FreeRTOS/queue.c ****                                    Queue_t * pxNewQueue )
 571:Middlewares/FreeRTOS/queue.c **** {
 308              		.loc 1 571 1
 309              		.cfi_startproc
 310              		@ args = 4, pretend = 0, frame = 16
 311              		@ frame_needed = 1, uses_anonymous_args = 0
 312 0000 80B5     		push	{r7, lr}
 313              		.cfi_def_cfa_offset 8
 314              		.cfi_offset 7, -8
 315              		.cfi_offset 14, -4
 316 0002 84B0     		sub	sp, sp, #16
 317              		.cfi_def_cfa_offset 24
 318 0004 00AF     		add	r7, sp, #0
 319              		.cfi_def_cfa_register 7
 320 0006 F860     		str	r0, [r7, #12]
 321 0008 B960     		str	r1, [r7, #8]
 322 000a 7A60     		str	r2, [r7, #4]
 323 000c FB70     		strb	r3, [r7, #3]
 572:Middlewares/FreeRTOS/queue.c ****     /* Remove compiler warnings about unused parameters should
 573:Middlewares/FreeRTOS/queue.c ****      * configUSE_TRACE_FACILITY not be set to 1. */
 574:Middlewares/FreeRTOS/queue.c ****     ( void ) ucQueueType;
 575:Middlewares/FreeRTOS/queue.c **** 
 576:Middlewares/FreeRTOS/queue.c ****     if( uxItemSize == ( UBaseType_t ) 0 )
 324              		.loc 1 576 7
 325 000e BB68     		ldr	r3, [r7, #8]
 326 0010 002B     		cmp	r3, #0
 327 0012 03D1     		bne	.L17
 577:Middlewares/FreeRTOS/queue.c ****     {
 578:Middlewares/FreeRTOS/queue.c ****         /* No RAM was allocated for the queue storage area, but PC head cannot
 579:Middlewares/FreeRTOS/queue.c ****          * be set to NULL because NULL is used as a key to say the queue is used as
 580:Middlewares/FreeRTOS/queue.c ****          * a mutex.  Therefore just set pcHead to point to the queue as a benign
 581:Middlewares/FreeRTOS/queue.c ****          * value that is known to be within the memory map. */
 582:Middlewares/FreeRTOS/queue.c ****         pxNewQueue->pcHead = ( int8_t * ) pxNewQueue;
 328              		.loc 1 582 28
 329 0014 BB69     		ldr	r3, [r7, #24]
 330 0016 BA69     		ldr	r2, [r7, #24]
 331 0018 1A60     		str	r2, [r3]
ARM GAS  /tmp/cczksE0f.s 			page 17


 332 001a 02E0     		b	.L18
 333              	.L17:
 583:Middlewares/FreeRTOS/queue.c ****     }
 584:Middlewares/FreeRTOS/queue.c ****     else
 585:Middlewares/FreeRTOS/queue.c ****     {
 586:Middlewares/FreeRTOS/queue.c ****         /* Set the head to the start of the queue storage area. */
 587:Middlewares/FreeRTOS/queue.c ****         pxNewQueue->pcHead = ( int8_t * ) pucQueueStorage;
 334              		.loc 1 587 28
 335 001c BB69     		ldr	r3, [r7, #24]
 336 001e 7A68     		ldr	r2, [r7, #4]
 337 0020 1A60     		str	r2, [r3]
 338              	.L18:
 588:Middlewares/FreeRTOS/queue.c ****     }
 589:Middlewares/FreeRTOS/queue.c **** 
 590:Middlewares/FreeRTOS/queue.c ****     /* Initialise the queue members as described where the queue type is
 591:Middlewares/FreeRTOS/queue.c ****      * defined. */
 592:Middlewares/FreeRTOS/queue.c ****     pxNewQueue->uxLength = uxQueueLength;
 339              		.loc 1 592 26
 340 0022 BB69     		ldr	r3, [r7, #24]
 341 0024 FA68     		ldr	r2, [r7, #12]
 342 0026 DA63     		str	r2, [r3, #60]
 593:Middlewares/FreeRTOS/queue.c ****     pxNewQueue->uxItemSize = uxItemSize;
 343              		.loc 1 593 28
 344 0028 BB69     		ldr	r3, [r7, #24]
 345 002a BA68     		ldr	r2, [r7, #8]
 346 002c 1A64     		str	r2, [r3, #64]
 594:Middlewares/FreeRTOS/queue.c ****     ( void ) xQueueGenericReset( pxNewQueue, pdTRUE );
 347              		.loc 1 594 14
 348 002e 0121     		movs	r1, #1
 349 0030 B869     		ldr	r0, [r7, #24]
 350 0032 FFF7FEFF 		bl	xQueueGenericReset
 595:Middlewares/FreeRTOS/queue.c **** 
 596:Middlewares/FreeRTOS/queue.c ****     #if ( configUSE_TRACE_FACILITY == 1 )
 597:Middlewares/FreeRTOS/queue.c ****     {
 598:Middlewares/FreeRTOS/queue.c ****         pxNewQueue->ucQueueType = ucQueueType;
 351              		.loc 1 598 33
 352 0036 BB69     		ldr	r3, [r7, #24]
 353 0038 FA78     		ldrb	r2, [r7, #3]
 354 003a 83F84C20 		strb	r2, [r3, #76]
 599:Middlewares/FreeRTOS/queue.c ****     }
 600:Middlewares/FreeRTOS/queue.c ****     #endif /* configUSE_TRACE_FACILITY */
 601:Middlewares/FreeRTOS/queue.c **** 
 602:Middlewares/FreeRTOS/queue.c ****     #if ( configUSE_QUEUE_SETS == 1 )
 603:Middlewares/FreeRTOS/queue.c ****     {
 604:Middlewares/FreeRTOS/queue.c ****         pxNewQueue->pxQueueSetContainer = NULL;
 605:Middlewares/FreeRTOS/queue.c ****     }
 606:Middlewares/FreeRTOS/queue.c ****     #endif /* configUSE_QUEUE_SETS */
 607:Middlewares/FreeRTOS/queue.c **** 
 608:Middlewares/FreeRTOS/queue.c ****     traceQUEUE_CREATE( pxNewQueue );
 609:Middlewares/FreeRTOS/queue.c **** }
 355              		.loc 1 609 1
 356 003e 00BF     		nop
 357 0040 1037     		adds	r7, r7, #16
 358              		.cfi_def_cfa_offset 8
 359 0042 BD46     		mov	sp, r7
 360              		.cfi_def_cfa_register 13
 361              		@ sp needed
ARM GAS  /tmp/cczksE0f.s 			page 18


 362 0044 80BD     		pop	{r7, pc}
 363              		.cfi_endproc
 364              	.LFE6:
 366              		.section	.text.prvInitialiseMutex,"ax",%progbits
 367              		.align	1
 368              		.syntax unified
 369              		.thumb
 370              		.thumb_func
 372              	prvInitialiseMutex:
 373              	.LFB7:
 610:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 611:Middlewares/FreeRTOS/queue.c **** 
 612:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_MUTEXES == 1 )
 613:Middlewares/FreeRTOS/queue.c **** 
 614:Middlewares/FreeRTOS/queue.c ****     static void prvInitialiseMutex( Queue_t * pxNewQueue )
 615:Middlewares/FreeRTOS/queue.c ****     {
 374              		.loc 1 615 5
 375              		.cfi_startproc
 376              		@ args = 0, pretend = 0, frame = 8
 377              		@ frame_needed = 1, uses_anonymous_args = 0
 378 0000 80B5     		push	{r7, lr}
 379              		.cfi_def_cfa_offset 8
 380              		.cfi_offset 7, -8
 381              		.cfi_offset 14, -4
 382 0002 82B0     		sub	sp, sp, #8
 383              		.cfi_def_cfa_offset 16
 384 0004 00AF     		add	r7, sp, #0
 385              		.cfi_def_cfa_register 7
 386 0006 7860     		str	r0, [r7, #4]
 616:Middlewares/FreeRTOS/queue.c ****         if( pxNewQueue != NULL )
 387              		.loc 1 616 11
 388 0008 7B68     		ldr	r3, [r7, #4]
 389 000a 002B     		cmp	r3, #0
 390 000c 0ED0     		beq	.L21
 617:Middlewares/FreeRTOS/queue.c ****         {
 618:Middlewares/FreeRTOS/queue.c ****             /* The queue create function will set all the queue structure members
 619:Middlewares/FreeRTOS/queue.c ****             * correctly for a generic queue, but this function is creating a
 620:Middlewares/FreeRTOS/queue.c ****             * mutex.  Overwrite those members that need to be set differently -
 621:Middlewares/FreeRTOS/queue.c ****             * in particular the information required for priority inheritance. */
 622:Middlewares/FreeRTOS/queue.c ****             pxNewQueue->u.xSemaphore.xMutexHolder = NULL;
 391              		.loc 1 622 51
 392 000e 7B68     		ldr	r3, [r7, #4]
 393 0010 0022     		movs	r2, #0
 394 0012 9A60     		str	r2, [r3, #8]
 623:Middlewares/FreeRTOS/queue.c ****             pxNewQueue->uxQueueType = queueQUEUE_IS_MUTEX;
 395              		.loc 1 623 37
 396 0014 7B68     		ldr	r3, [r7, #4]
 397 0016 0022     		movs	r2, #0
 398 0018 1A60     		str	r2, [r3]
 624:Middlewares/FreeRTOS/queue.c **** 
 625:Middlewares/FreeRTOS/queue.c ****             /* In case this is a recursive mutex. */
 626:Middlewares/FreeRTOS/queue.c ****             pxNewQueue->u.xSemaphore.uxRecursiveCallCount = 0;
 399              		.loc 1 626 59
 400 001a 7B68     		ldr	r3, [r7, #4]
 401 001c 0022     		movs	r2, #0
 402 001e DA60     		str	r2, [r3, #12]
 627:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 19


 628:Middlewares/FreeRTOS/queue.c ****             traceCREATE_MUTEX( pxNewQueue );
 629:Middlewares/FreeRTOS/queue.c **** 
 630:Middlewares/FreeRTOS/queue.c ****             /* Start with the semaphore in the expected state. */
 631:Middlewares/FreeRTOS/queue.c ****             ( void ) xQueueGenericSend( pxNewQueue, NULL, ( TickType_t ) 0U, queueSEND_TO_BACK );
 403              		.loc 1 631 22
 404 0020 0023     		movs	r3, #0
 405 0022 0022     		movs	r2, #0
 406 0024 0021     		movs	r1, #0
 407 0026 7868     		ldr	r0, [r7, #4]
 408 0028 FFF7FEFF 		bl	xQueueGenericSend
 409              	.L21:
 632:Middlewares/FreeRTOS/queue.c ****         }
 633:Middlewares/FreeRTOS/queue.c ****         else
 634:Middlewares/FreeRTOS/queue.c ****         {
 635:Middlewares/FreeRTOS/queue.c ****             traceCREATE_MUTEX_FAILED();
 636:Middlewares/FreeRTOS/queue.c ****         }
 637:Middlewares/FreeRTOS/queue.c ****     }
 410              		.loc 1 637 5
 411 002c 00BF     		nop
 412 002e 0837     		adds	r7, r7, #8
 413              		.cfi_def_cfa_offset 8
 414 0030 BD46     		mov	sp, r7
 415              		.cfi_def_cfa_register 13
 416              		@ sp needed
 417 0032 80BD     		pop	{r7, pc}
 418              		.cfi_endproc
 419              	.LFE7:
 421              		.section	.text.xQueueCreateMutex,"ax",%progbits
 422              		.align	1
 423              		.global	xQueueCreateMutex
 424              		.syntax unified
 425              		.thumb
 426              		.thumb_func
 428              	xQueueCreateMutex:
 429              	.LFB8:
 638:Middlewares/FreeRTOS/queue.c **** 
 639:Middlewares/FreeRTOS/queue.c **** #endif /* configUSE_MUTEXES */
 640:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 641:Middlewares/FreeRTOS/queue.c **** 
 642:Middlewares/FreeRTOS/queue.c **** #if ( ( configUSE_MUTEXES == 1 ) && ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) )
 643:Middlewares/FreeRTOS/queue.c **** 
 644:Middlewares/FreeRTOS/queue.c ****     QueueHandle_t xQueueCreateMutex( const uint8_t ucQueueType )
 645:Middlewares/FreeRTOS/queue.c ****     {
 430              		.loc 1 645 5
 431              		.cfi_startproc
 432              		@ args = 0, pretend = 0, frame = 24
 433              		@ frame_needed = 1, uses_anonymous_args = 0
 434 0000 80B5     		push	{r7, lr}
 435              		.cfi_def_cfa_offset 8
 436              		.cfi_offset 7, -8
 437              		.cfi_offset 14, -4
 438 0002 86B0     		sub	sp, sp, #24
 439              		.cfi_def_cfa_offset 32
 440 0004 00AF     		add	r7, sp, #0
 441              		.cfi_def_cfa_register 7
 442 0006 0346     		mov	r3, r0
 443 0008 FB71     		strb	r3, [r7, #7]
ARM GAS  /tmp/cczksE0f.s 			page 20


 646:Middlewares/FreeRTOS/queue.c ****         QueueHandle_t xNewQueue;
 647:Middlewares/FreeRTOS/queue.c ****         const UBaseType_t uxMutexLength = ( UBaseType_t ) 1, uxMutexSize = ( UBaseType_t ) 0;
 444              		.loc 1 647 27
 445 000a 0123     		movs	r3, #1
 446 000c 7B61     		str	r3, [r7, #20]
 447              		.loc 1 647 62
 448 000e 0023     		movs	r3, #0
 449 0010 3B61     		str	r3, [r7, #16]
 648:Middlewares/FreeRTOS/queue.c **** 
 649:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueCreateMutex( ucQueueType );
 650:Middlewares/FreeRTOS/queue.c **** 
 651:Middlewares/FreeRTOS/queue.c ****         xNewQueue = xQueueGenericCreate( uxMutexLength, uxMutexSize, ucQueueType );
 450              		.loc 1 651 21
 451 0012 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 452 0014 1A46     		mov	r2, r3
 453 0016 3969     		ldr	r1, [r7, #16]
 454 0018 7869     		ldr	r0, [r7, #20]
 455 001a FFF7FEFF 		bl	xQueueGenericCreate
 456 001e F860     		str	r0, [r7, #12]
 652:Middlewares/FreeRTOS/queue.c ****         prvInitialiseMutex( ( Queue_t * ) xNewQueue );
 457              		.loc 1 652 9
 458 0020 F868     		ldr	r0, [r7, #12]
 459 0022 FFF7FEFF 		bl	prvInitialiseMutex
 653:Middlewares/FreeRTOS/queue.c **** 
 654:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueCreateMutex( xNewQueue );
 655:Middlewares/FreeRTOS/queue.c **** 
 656:Middlewares/FreeRTOS/queue.c ****         return xNewQueue;
 460              		.loc 1 656 16
 461 0026 FB68     		ldr	r3, [r7, #12]
 657:Middlewares/FreeRTOS/queue.c ****     }
 462              		.loc 1 657 5
 463 0028 1846     		mov	r0, r3
 464 002a 1837     		adds	r7, r7, #24
 465              		.cfi_def_cfa_offset 8
 466 002c BD46     		mov	sp, r7
 467              		.cfi_def_cfa_register 13
 468              		@ sp needed
 469 002e 80BD     		pop	{r7, pc}
 470              		.cfi_endproc
 471              	.LFE8:
 473              		.section	.text.xQueueGenericSend,"ax",%progbits
 474              		.align	1
 475              		.global	xQueueGenericSend
 476              		.syntax unified
 477              		.thumb
 478              		.thumb_func
 480              	xQueueGenericSend:
 481              	.LFB9:
 658:Middlewares/FreeRTOS/queue.c **** 
 659:Middlewares/FreeRTOS/queue.c **** #endif /* configUSE_MUTEXES */
 660:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 661:Middlewares/FreeRTOS/queue.c **** 
 662:Middlewares/FreeRTOS/queue.c **** #if ( ( configUSE_MUTEXES == 1 ) && ( configSUPPORT_STATIC_ALLOCATION == 1 ) )
 663:Middlewares/FreeRTOS/queue.c **** 
 664:Middlewares/FreeRTOS/queue.c ****     QueueHandle_t xQueueCreateMutexStatic( const uint8_t ucQueueType,
 665:Middlewares/FreeRTOS/queue.c ****                                            StaticQueue_t * pxStaticQueue )
 666:Middlewares/FreeRTOS/queue.c ****     {
ARM GAS  /tmp/cczksE0f.s 			page 21


 667:Middlewares/FreeRTOS/queue.c ****         QueueHandle_t xNewQueue;
 668:Middlewares/FreeRTOS/queue.c ****         const UBaseType_t uxMutexLength = ( UBaseType_t ) 1, uxMutexSize = ( UBaseType_t ) 0;
 669:Middlewares/FreeRTOS/queue.c **** 
 670:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueCreateMutexStatic( ucQueueType, pxStaticQueue );
 671:Middlewares/FreeRTOS/queue.c **** 
 672:Middlewares/FreeRTOS/queue.c ****         /* Prevent compiler warnings about unused parameters if
 673:Middlewares/FreeRTOS/queue.c ****          * configUSE_TRACE_FACILITY does not equal 1. */
 674:Middlewares/FreeRTOS/queue.c ****         ( void ) ucQueueType;
 675:Middlewares/FreeRTOS/queue.c **** 
 676:Middlewares/FreeRTOS/queue.c ****         xNewQueue = xQueueGenericCreateStatic( uxMutexLength, uxMutexSize, NULL, pxStaticQueue, ucQ
 677:Middlewares/FreeRTOS/queue.c ****         prvInitialiseMutex( ( Queue_t * ) xNewQueue );
 678:Middlewares/FreeRTOS/queue.c **** 
 679:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueCreateMutexStatic( xNewQueue );
 680:Middlewares/FreeRTOS/queue.c **** 
 681:Middlewares/FreeRTOS/queue.c ****         return xNewQueue;
 682:Middlewares/FreeRTOS/queue.c ****     }
 683:Middlewares/FreeRTOS/queue.c **** 
 684:Middlewares/FreeRTOS/queue.c **** #endif /* configUSE_MUTEXES */
 685:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 686:Middlewares/FreeRTOS/queue.c **** 
 687:Middlewares/FreeRTOS/queue.c **** #if ( ( configUSE_MUTEXES == 1 ) && ( INCLUDE_xSemaphoreGetMutexHolder == 1 ) )
 688:Middlewares/FreeRTOS/queue.c **** 
 689:Middlewares/FreeRTOS/queue.c ****     TaskHandle_t xQueueGetMutexHolder( QueueHandle_t xSemaphore )
 690:Middlewares/FreeRTOS/queue.c ****     {
 691:Middlewares/FreeRTOS/queue.c ****         TaskHandle_t pxReturn;
 692:Middlewares/FreeRTOS/queue.c ****         Queue_t * const pxSemaphore = ( Queue_t * ) xSemaphore;
 693:Middlewares/FreeRTOS/queue.c **** 
 694:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueGetMutexHolder( xSemaphore );
 695:Middlewares/FreeRTOS/queue.c **** 
 696:Middlewares/FreeRTOS/queue.c ****         configASSERT( xSemaphore );
 697:Middlewares/FreeRTOS/queue.c **** 
 698:Middlewares/FreeRTOS/queue.c ****         /* This function is called by xSemaphoreGetMutexHolder(), and should not
 699:Middlewares/FreeRTOS/queue.c ****          * be called directly.  Note:  This is a good way of determining if the
 700:Middlewares/FreeRTOS/queue.c ****          * calling task is the mutex holder, but not a good way of determining the
 701:Middlewares/FreeRTOS/queue.c ****          * identity of the mutex holder, as the holder may change between the
 702:Middlewares/FreeRTOS/queue.c ****          * following critical section exiting and the function returning. */
 703:Middlewares/FreeRTOS/queue.c ****         taskENTER_CRITICAL();
 704:Middlewares/FreeRTOS/queue.c ****         {
 705:Middlewares/FreeRTOS/queue.c ****             if( pxSemaphore->uxQueueType == queueQUEUE_IS_MUTEX )
 706:Middlewares/FreeRTOS/queue.c ****             {
 707:Middlewares/FreeRTOS/queue.c ****                 pxReturn = pxSemaphore->u.xSemaphore.xMutexHolder;
 708:Middlewares/FreeRTOS/queue.c ****             }
 709:Middlewares/FreeRTOS/queue.c ****             else
 710:Middlewares/FreeRTOS/queue.c ****             {
 711:Middlewares/FreeRTOS/queue.c ****                 pxReturn = NULL;
 712:Middlewares/FreeRTOS/queue.c ****             }
 713:Middlewares/FreeRTOS/queue.c ****         }
 714:Middlewares/FreeRTOS/queue.c ****         taskEXIT_CRITICAL();
 715:Middlewares/FreeRTOS/queue.c **** 
 716:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueGetMutexHolder( pxReturn );
 717:Middlewares/FreeRTOS/queue.c **** 
 718:Middlewares/FreeRTOS/queue.c ****         return pxReturn;
 719:Middlewares/FreeRTOS/queue.c ****     }
 720:Middlewares/FreeRTOS/queue.c **** 
 721:Middlewares/FreeRTOS/queue.c **** #endif /* if ( ( configUSE_MUTEXES == 1 ) && ( INCLUDE_xSemaphoreGetMutexHolder == 1 ) ) */
 722:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 723:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 22


 724:Middlewares/FreeRTOS/queue.c **** #if ( ( configUSE_MUTEXES == 1 ) && ( INCLUDE_xSemaphoreGetMutexHolder == 1 ) )
 725:Middlewares/FreeRTOS/queue.c **** 
 726:Middlewares/FreeRTOS/queue.c ****     TaskHandle_t xQueueGetMutexHolderFromISR( QueueHandle_t xSemaphore )
 727:Middlewares/FreeRTOS/queue.c ****     {
 728:Middlewares/FreeRTOS/queue.c ****         TaskHandle_t pxReturn;
 729:Middlewares/FreeRTOS/queue.c **** 
 730:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueGetMutexHolderFromISR( xSemaphore );
 731:Middlewares/FreeRTOS/queue.c **** 
 732:Middlewares/FreeRTOS/queue.c ****         configASSERT( xSemaphore );
 733:Middlewares/FreeRTOS/queue.c **** 
 734:Middlewares/FreeRTOS/queue.c ****         /* Mutexes cannot be used in interrupt service routines, so the mutex
 735:Middlewares/FreeRTOS/queue.c ****          * holder should not change in an ISR, and therefore a critical section is
 736:Middlewares/FreeRTOS/queue.c ****          * not required here. */
 737:Middlewares/FreeRTOS/queue.c ****         if( ( ( Queue_t * ) xSemaphore )->uxQueueType == queueQUEUE_IS_MUTEX )
 738:Middlewares/FreeRTOS/queue.c ****         {
 739:Middlewares/FreeRTOS/queue.c ****             pxReturn = ( ( Queue_t * ) xSemaphore )->u.xSemaphore.xMutexHolder;
 740:Middlewares/FreeRTOS/queue.c ****         }
 741:Middlewares/FreeRTOS/queue.c ****         else
 742:Middlewares/FreeRTOS/queue.c ****         {
 743:Middlewares/FreeRTOS/queue.c ****             pxReturn = NULL;
 744:Middlewares/FreeRTOS/queue.c ****         }
 745:Middlewares/FreeRTOS/queue.c **** 
 746:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueGetMutexHolderFromISR( pxReturn );
 747:Middlewares/FreeRTOS/queue.c **** 
 748:Middlewares/FreeRTOS/queue.c ****         return pxReturn;
 749:Middlewares/FreeRTOS/queue.c ****     }
 750:Middlewares/FreeRTOS/queue.c **** 
 751:Middlewares/FreeRTOS/queue.c **** #endif /* if ( ( configUSE_MUTEXES == 1 ) && ( INCLUDE_xSemaphoreGetMutexHolder == 1 ) ) */
 752:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 753:Middlewares/FreeRTOS/queue.c **** 
 754:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_RECURSIVE_MUTEXES == 1 )
 755:Middlewares/FreeRTOS/queue.c **** 
 756:Middlewares/FreeRTOS/queue.c ****     BaseType_t xQueueGiveMutexRecursive( QueueHandle_t xMutex )
 757:Middlewares/FreeRTOS/queue.c ****     {
 758:Middlewares/FreeRTOS/queue.c ****         BaseType_t xReturn;
 759:Middlewares/FreeRTOS/queue.c ****         Queue_t * const pxMutex = ( Queue_t * ) xMutex;
 760:Middlewares/FreeRTOS/queue.c **** 
 761:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueGiveMutexRecursive( xMutex );
 762:Middlewares/FreeRTOS/queue.c **** 
 763:Middlewares/FreeRTOS/queue.c ****         configASSERT( pxMutex );
 764:Middlewares/FreeRTOS/queue.c **** 
 765:Middlewares/FreeRTOS/queue.c ****         /* If this is the task that holds the mutex then xMutexHolder will not
 766:Middlewares/FreeRTOS/queue.c ****          * change outside of this task.  If this task does not hold the mutex then
 767:Middlewares/FreeRTOS/queue.c ****          * pxMutexHolder can never coincidentally equal the tasks handle, and as
 768:Middlewares/FreeRTOS/queue.c ****          * this is the only condition we are interested in it does not matter if
 769:Middlewares/FreeRTOS/queue.c ****          * pxMutexHolder is accessed simultaneously by another task.  Therefore no
 770:Middlewares/FreeRTOS/queue.c ****          * mutual exclusion is required to test the pxMutexHolder variable. */
 771:Middlewares/FreeRTOS/queue.c ****         if( pxMutex->u.xSemaphore.xMutexHolder == xTaskGetCurrentTaskHandle() )
 772:Middlewares/FreeRTOS/queue.c ****         {
 773:Middlewares/FreeRTOS/queue.c ****             traceGIVE_MUTEX_RECURSIVE( pxMutex );
 774:Middlewares/FreeRTOS/queue.c **** 
 775:Middlewares/FreeRTOS/queue.c ****             /* uxRecursiveCallCount cannot be zero if xMutexHolder is equal to
 776:Middlewares/FreeRTOS/queue.c ****              * the task handle, therefore no underflow check is required.  Also,
 777:Middlewares/FreeRTOS/queue.c ****              * uxRecursiveCallCount is only modified by the mutex holder, and as
 778:Middlewares/FreeRTOS/queue.c ****              * there can only be one, no mutual exclusion is required to modify the
 779:Middlewares/FreeRTOS/queue.c ****              * uxRecursiveCallCount member. */
 780:Middlewares/FreeRTOS/queue.c ****             ( pxMutex->u.xSemaphore.uxRecursiveCallCount )--;
ARM GAS  /tmp/cczksE0f.s 			page 23


 781:Middlewares/FreeRTOS/queue.c **** 
 782:Middlewares/FreeRTOS/queue.c ****             /* Has the recursive call count unwound to 0? */
 783:Middlewares/FreeRTOS/queue.c ****             if( pxMutex->u.xSemaphore.uxRecursiveCallCount == ( UBaseType_t ) 0 )
 784:Middlewares/FreeRTOS/queue.c ****             {
 785:Middlewares/FreeRTOS/queue.c ****                 /* Return the mutex.  This will automatically unblock any other
 786:Middlewares/FreeRTOS/queue.c ****                  * task that might be waiting to access the mutex. */
 787:Middlewares/FreeRTOS/queue.c ****                 ( void ) xQueueGenericSend( pxMutex, NULL, queueMUTEX_GIVE_BLOCK_TIME, queueSEND_TO
 788:Middlewares/FreeRTOS/queue.c ****             }
 789:Middlewares/FreeRTOS/queue.c ****             else
 790:Middlewares/FreeRTOS/queue.c ****             {
 791:Middlewares/FreeRTOS/queue.c ****                 mtCOVERAGE_TEST_MARKER();
 792:Middlewares/FreeRTOS/queue.c ****             }
 793:Middlewares/FreeRTOS/queue.c **** 
 794:Middlewares/FreeRTOS/queue.c ****             xReturn = pdPASS;
 795:Middlewares/FreeRTOS/queue.c ****         }
 796:Middlewares/FreeRTOS/queue.c ****         else
 797:Middlewares/FreeRTOS/queue.c ****         {
 798:Middlewares/FreeRTOS/queue.c ****             /* The mutex cannot be given because the calling task is not the
 799:Middlewares/FreeRTOS/queue.c ****              * holder. */
 800:Middlewares/FreeRTOS/queue.c ****             xReturn = pdFAIL;
 801:Middlewares/FreeRTOS/queue.c **** 
 802:Middlewares/FreeRTOS/queue.c ****             traceGIVE_MUTEX_RECURSIVE_FAILED( pxMutex );
 803:Middlewares/FreeRTOS/queue.c ****         }
 804:Middlewares/FreeRTOS/queue.c **** 
 805:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueGiveMutexRecursive( xReturn );
 806:Middlewares/FreeRTOS/queue.c **** 
 807:Middlewares/FreeRTOS/queue.c ****         return xReturn;
 808:Middlewares/FreeRTOS/queue.c ****     }
 809:Middlewares/FreeRTOS/queue.c **** 
 810:Middlewares/FreeRTOS/queue.c **** #endif /* configUSE_RECURSIVE_MUTEXES */
 811:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 812:Middlewares/FreeRTOS/queue.c **** 
 813:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_RECURSIVE_MUTEXES == 1 )
 814:Middlewares/FreeRTOS/queue.c **** 
 815:Middlewares/FreeRTOS/queue.c ****     BaseType_t xQueueTakeMutexRecursive( QueueHandle_t xMutex,
 816:Middlewares/FreeRTOS/queue.c ****                                          TickType_t xTicksToWait )
 817:Middlewares/FreeRTOS/queue.c ****     {
 818:Middlewares/FreeRTOS/queue.c ****         BaseType_t xReturn;
 819:Middlewares/FreeRTOS/queue.c ****         Queue_t * const pxMutex = ( Queue_t * ) xMutex;
 820:Middlewares/FreeRTOS/queue.c **** 
 821:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueTakeMutexRecursive( xMutex, xTicksToWait );
 822:Middlewares/FreeRTOS/queue.c **** 
 823:Middlewares/FreeRTOS/queue.c ****         configASSERT( pxMutex );
 824:Middlewares/FreeRTOS/queue.c **** 
 825:Middlewares/FreeRTOS/queue.c ****         /* Comments regarding mutual exclusion as per those within
 826:Middlewares/FreeRTOS/queue.c ****          * xQueueGiveMutexRecursive(). */
 827:Middlewares/FreeRTOS/queue.c **** 
 828:Middlewares/FreeRTOS/queue.c ****         traceTAKE_MUTEX_RECURSIVE( pxMutex );
 829:Middlewares/FreeRTOS/queue.c **** 
 830:Middlewares/FreeRTOS/queue.c ****         if( pxMutex->u.xSemaphore.xMutexHolder == xTaskGetCurrentTaskHandle() )
 831:Middlewares/FreeRTOS/queue.c ****         {
 832:Middlewares/FreeRTOS/queue.c ****             ( pxMutex->u.xSemaphore.uxRecursiveCallCount )++;
 833:Middlewares/FreeRTOS/queue.c ****             xReturn = pdPASS;
 834:Middlewares/FreeRTOS/queue.c ****         }
 835:Middlewares/FreeRTOS/queue.c ****         else
 836:Middlewares/FreeRTOS/queue.c ****         {
 837:Middlewares/FreeRTOS/queue.c ****             xReturn = xQueueSemaphoreTake( pxMutex, xTicksToWait );
ARM GAS  /tmp/cczksE0f.s 			page 24


 838:Middlewares/FreeRTOS/queue.c **** 
 839:Middlewares/FreeRTOS/queue.c ****             /* pdPASS will only be returned if the mutex was successfully
 840:Middlewares/FreeRTOS/queue.c ****              * obtained.  The calling task may have entered the Blocked state
 841:Middlewares/FreeRTOS/queue.c ****              * before reaching here. */
 842:Middlewares/FreeRTOS/queue.c ****             if( xReturn != pdFAIL )
 843:Middlewares/FreeRTOS/queue.c ****             {
 844:Middlewares/FreeRTOS/queue.c ****                 ( pxMutex->u.xSemaphore.uxRecursiveCallCount )++;
 845:Middlewares/FreeRTOS/queue.c ****             }
 846:Middlewares/FreeRTOS/queue.c ****             else
 847:Middlewares/FreeRTOS/queue.c ****             {
 848:Middlewares/FreeRTOS/queue.c ****                 traceTAKE_MUTEX_RECURSIVE_FAILED( pxMutex );
 849:Middlewares/FreeRTOS/queue.c ****             }
 850:Middlewares/FreeRTOS/queue.c ****         }
 851:Middlewares/FreeRTOS/queue.c **** 
 852:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueTakeMutexRecursive( xReturn );
 853:Middlewares/FreeRTOS/queue.c **** 
 854:Middlewares/FreeRTOS/queue.c ****         return xReturn;
 855:Middlewares/FreeRTOS/queue.c ****     }
 856:Middlewares/FreeRTOS/queue.c **** 
 857:Middlewares/FreeRTOS/queue.c **** #endif /* configUSE_RECURSIVE_MUTEXES */
 858:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 859:Middlewares/FreeRTOS/queue.c **** 
 860:Middlewares/FreeRTOS/queue.c **** #if ( ( configUSE_COUNTING_SEMAPHORES == 1 ) && ( configSUPPORT_STATIC_ALLOCATION == 1 ) )
 861:Middlewares/FreeRTOS/queue.c **** 
 862:Middlewares/FreeRTOS/queue.c ****     QueueHandle_t xQueueCreateCountingSemaphoreStatic( const UBaseType_t uxMaxCount,
 863:Middlewares/FreeRTOS/queue.c ****                                                        const UBaseType_t uxInitialCount,
 864:Middlewares/FreeRTOS/queue.c ****                                                        StaticQueue_t * pxStaticQueue )
 865:Middlewares/FreeRTOS/queue.c ****     {
 866:Middlewares/FreeRTOS/queue.c ****         QueueHandle_t xHandle = NULL;
 867:Middlewares/FreeRTOS/queue.c **** 
 868:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueCreateCountingSemaphoreStatic( uxMaxCount, uxInitialCount, pxStaticQueue )
 869:Middlewares/FreeRTOS/queue.c **** 
 870:Middlewares/FreeRTOS/queue.c ****         if( ( uxMaxCount != 0U ) &&
 871:Middlewares/FreeRTOS/queue.c ****             ( uxInitialCount <= uxMaxCount ) )
 872:Middlewares/FreeRTOS/queue.c ****         {
 873:Middlewares/FreeRTOS/queue.c ****             xHandle = xQueueGenericCreateStatic( uxMaxCount, queueSEMAPHORE_QUEUE_ITEM_LENGTH, NULL
 874:Middlewares/FreeRTOS/queue.c **** 
 875:Middlewares/FreeRTOS/queue.c ****             if( xHandle != NULL )
 876:Middlewares/FreeRTOS/queue.c ****             {
 877:Middlewares/FreeRTOS/queue.c ****                 ( ( Queue_t * ) xHandle )->uxMessagesWaiting = uxInitialCount;
 878:Middlewares/FreeRTOS/queue.c **** 
 879:Middlewares/FreeRTOS/queue.c ****                 traceCREATE_COUNTING_SEMAPHORE();
 880:Middlewares/FreeRTOS/queue.c ****             }
 881:Middlewares/FreeRTOS/queue.c ****             else
 882:Middlewares/FreeRTOS/queue.c ****             {
 883:Middlewares/FreeRTOS/queue.c ****                 traceCREATE_COUNTING_SEMAPHORE_FAILED();
 884:Middlewares/FreeRTOS/queue.c ****             }
 885:Middlewares/FreeRTOS/queue.c ****         }
 886:Middlewares/FreeRTOS/queue.c ****         else
 887:Middlewares/FreeRTOS/queue.c ****         {
 888:Middlewares/FreeRTOS/queue.c ****             configASSERT( xHandle );
 889:Middlewares/FreeRTOS/queue.c ****             mtCOVERAGE_TEST_MARKER();
 890:Middlewares/FreeRTOS/queue.c ****         }
 891:Middlewares/FreeRTOS/queue.c **** 
 892:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueCreateCountingSemaphoreStatic( xHandle );
 893:Middlewares/FreeRTOS/queue.c **** 
 894:Middlewares/FreeRTOS/queue.c ****         return xHandle;
ARM GAS  /tmp/cczksE0f.s 			page 25


 895:Middlewares/FreeRTOS/queue.c ****     }
 896:Middlewares/FreeRTOS/queue.c **** 
 897:Middlewares/FreeRTOS/queue.c **** #endif /* ( ( configUSE_COUNTING_SEMAPHORES == 1 ) && ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) ) *
 898:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 899:Middlewares/FreeRTOS/queue.c **** 
 900:Middlewares/FreeRTOS/queue.c **** #if ( ( configUSE_COUNTING_SEMAPHORES == 1 ) && ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) )
 901:Middlewares/FreeRTOS/queue.c **** 
 902:Middlewares/FreeRTOS/queue.c ****     QueueHandle_t xQueueCreateCountingSemaphore( const UBaseType_t uxMaxCount,
 903:Middlewares/FreeRTOS/queue.c ****                                                  const UBaseType_t uxInitialCount )
 904:Middlewares/FreeRTOS/queue.c ****     {
 905:Middlewares/FreeRTOS/queue.c ****         QueueHandle_t xHandle = NULL;
 906:Middlewares/FreeRTOS/queue.c **** 
 907:Middlewares/FreeRTOS/queue.c ****         traceENTER_xQueueCreateCountingSemaphore( uxMaxCount, uxInitialCount );
 908:Middlewares/FreeRTOS/queue.c **** 
 909:Middlewares/FreeRTOS/queue.c ****         if( ( uxMaxCount != 0U ) &&
 910:Middlewares/FreeRTOS/queue.c ****             ( uxInitialCount <= uxMaxCount ) )
 911:Middlewares/FreeRTOS/queue.c ****         {
 912:Middlewares/FreeRTOS/queue.c ****             xHandle = xQueueGenericCreate( uxMaxCount, queueSEMAPHORE_QUEUE_ITEM_LENGTH, queueQUEUE
 913:Middlewares/FreeRTOS/queue.c **** 
 914:Middlewares/FreeRTOS/queue.c ****             if( xHandle != NULL )
 915:Middlewares/FreeRTOS/queue.c ****             {
 916:Middlewares/FreeRTOS/queue.c ****                 ( ( Queue_t * ) xHandle )->uxMessagesWaiting = uxInitialCount;
 917:Middlewares/FreeRTOS/queue.c **** 
 918:Middlewares/FreeRTOS/queue.c ****                 traceCREATE_COUNTING_SEMAPHORE();
 919:Middlewares/FreeRTOS/queue.c ****             }
 920:Middlewares/FreeRTOS/queue.c ****             else
 921:Middlewares/FreeRTOS/queue.c ****             {
 922:Middlewares/FreeRTOS/queue.c ****                 traceCREATE_COUNTING_SEMAPHORE_FAILED();
 923:Middlewares/FreeRTOS/queue.c ****             }
 924:Middlewares/FreeRTOS/queue.c ****         }
 925:Middlewares/FreeRTOS/queue.c ****         else
 926:Middlewares/FreeRTOS/queue.c ****         {
 927:Middlewares/FreeRTOS/queue.c ****             configASSERT( xHandle );
 928:Middlewares/FreeRTOS/queue.c ****             mtCOVERAGE_TEST_MARKER();
 929:Middlewares/FreeRTOS/queue.c ****         }
 930:Middlewares/FreeRTOS/queue.c **** 
 931:Middlewares/FreeRTOS/queue.c ****         traceRETURN_xQueueCreateCountingSemaphore( xHandle );
 932:Middlewares/FreeRTOS/queue.c **** 
 933:Middlewares/FreeRTOS/queue.c ****         return xHandle;
 934:Middlewares/FreeRTOS/queue.c ****     }
 935:Middlewares/FreeRTOS/queue.c **** 
 936:Middlewares/FreeRTOS/queue.c **** #endif /* ( ( configUSE_COUNTING_SEMAPHORES == 1 ) && ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) ) *
 937:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
 938:Middlewares/FreeRTOS/queue.c **** 
 939:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueueGenericSend( QueueHandle_t xQueue,
 940:Middlewares/FreeRTOS/queue.c ****                               const void * const pvItemToQueue,
 941:Middlewares/FreeRTOS/queue.c ****                               TickType_t xTicksToWait,
 942:Middlewares/FreeRTOS/queue.c ****                               const BaseType_t xCopyPosition )
 943:Middlewares/FreeRTOS/queue.c **** {
 482              		.loc 1 943 1
 483              		.cfi_startproc
 484              		@ args = 0, pretend = 0, frame = 40
 485              		@ frame_needed = 1, uses_anonymous_args = 0
 486 0000 80B5     		push	{r7, lr}
 487              		.cfi_def_cfa_offset 8
 488              		.cfi_offset 7, -8
 489              		.cfi_offset 14, -4
ARM GAS  /tmp/cczksE0f.s 			page 26


 490 0002 8AB0     		sub	sp, sp, #40
 491              		.cfi_def_cfa_offset 48
 492 0004 00AF     		add	r7, sp, #0
 493              		.cfi_def_cfa_register 7
 494 0006 F860     		str	r0, [r7, #12]
 495 0008 B960     		str	r1, [r7, #8]
 496 000a 7A60     		str	r2, [r7, #4]
 497 000c 3B60     		str	r3, [r7]
 944:Middlewares/FreeRTOS/queue.c ****     BaseType_t xEntryTimeSet = pdFALSE, xYieldRequired;
 498              		.loc 1 944 16
 499 000e 0023     		movs	r3, #0
 500 0010 7B62     		str	r3, [r7, #36]
 945:Middlewares/FreeRTOS/queue.c ****     TimeOut_t xTimeOut;
 946:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 501              		.loc 1 946 21
 502 0012 FB68     		ldr	r3, [r7, #12]
 503 0014 3B62     		str	r3, [r7, #32]
 504              	.L37:
 947:Middlewares/FreeRTOS/queue.c **** 
 948:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueueGenericSend( xQueue, pvItemToQueue, xTicksToWait, xCopyPosition );
 949:Middlewares/FreeRTOS/queue.c **** 
 950:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
 951:Middlewares/FreeRTOS/queue.c ****     configASSERT( !( ( pvItemToQueue == NULL ) && ( pxQueue->uxItemSize != ( UBaseType_t ) 0U ) ) )
 952:Middlewares/FreeRTOS/queue.c ****     configASSERT( !( ( xCopyPosition == queueOVERWRITE ) && ( pxQueue->uxLength != 1 ) ) );
 953:Middlewares/FreeRTOS/queue.c ****     #if ( ( INCLUDE_xTaskGetSchedulerState == 1 ) || ( configUSE_TIMERS == 1 ) )
 954:Middlewares/FreeRTOS/queue.c ****     {
 955:Middlewares/FreeRTOS/queue.c ****         configASSERT( !( ( xTaskGetSchedulerState() == taskSCHEDULER_SUSPENDED ) && ( xTicksToWait 
 956:Middlewares/FreeRTOS/queue.c ****     }
 957:Middlewares/FreeRTOS/queue.c ****     #endif
 958:Middlewares/FreeRTOS/queue.c **** 
 959:Middlewares/FreeRTOS/queue.c ****     for( ; ; )
 960:Middlewares/FreeRTOS/queue.c ****     {
 961:Middlewares/FreeRTOS/queue.c ****         taskENTER_CRITICAL();
 505              		.loc 1 961 9
 506 0016 FFF7FEFF 		bl	vPortEnterCritical
 962:Middlewares/FreeRTOS/queue.c ****         {
 963:Middlewares/FreeRTOS/queue.c ****             /* Is there room on the queue now?  The running task must be the
 964:Middlewares/FreeRTOS/queue.c ****              * highest priority task wanting to access the queue.  If the head item
 965:Middlewares/FreeRTOS/queue.c ****              * in the queue is to be overwritten then it does not matter if the
 966:Middlewares/FreeRTOS/queue.c ****              * queue is full. */
 967:Middlewares/FreeRTOS/queue.c ****             if( ( pxQueue->uxMessagesWaiting < pxQueue->uxLength ) || ( xCopyPosition == queueOVERW
 507              		.loc 1 967 26
 508 001a 3B6A     		ldr	r3, [r7, #32]
 509 001c 9A6B     		ldr	r2, [r3, #56]
 510              		.loc 1 967 55
 511 001e 3B6A     		ldr	r3, [r7, #32]
 512 0020 DB6B     		ldr	r3, [r3, #60]
 513              		.loc 1 967 15
 514 0022 9A42     		cmp	r2, r3
 515 0024 02D3     		bcc	.L25
 516              		.loc 1 967 68 discriminator 1
 517 0026 3B68     		ldr	r3, [r7]
 518 0028 022B     		cmp	r3, #2
 519 002a 29D1     		bne	.L26
 520              	.L25:
 968:Middlewares/FreeRTOS/queue.c ****             {
 969:Middlewares/FreeRTOS/queue.c ****                 traceQUEUE_SEND( pxQueue );
ARM GAS  /tmp/cczksE0f.s 			page 27


 970:Middlewares/FreeRTOS/queue.c **** 
 971:Middlewares/FreeRTOS/queue.c ****                 #if ( configUSE_QUEUE_SETS == 1 )
 972:Middlewares/FreeRTOS/queue.c ****                 {
 973:Middlewares/FreeRTOS/queue.c ****                     const UBaseType_t uxPreviousMessagesWaiting = pxQueue->uxMessagesWaiting;
 974:Middlewares/FreeRTOS/queue.c **** 
 975:Middlewares/FreeRTOS/queue.c ****                     xYieldRequired = prvCopyDataToQueue( pxQueue, pvItemToQueue, xCopyPosition );
 976:Middlewares/FreeRTOS/queue.c **** 
 977:Middlewares/FreeRTOS/queue.c ****                     if( pxQueue->pxQueueSetContainer != NULL )
 978:Middlewares/FreeRTOS/queue.c ****                     {
 979:Middlewares/FreeRTOS/queue.c ****                         if( ( xCopyPosition == queueOVERWRITE ) && ( uxPreviousMessagesWaiting != (
 980:Middlewares/FreeRTOS/queue.c ****                         {
 981:Middlewares/FreeRTOS/queue.c ****                             /* Do not notify the queue set as an existing item
 982:Middlewares/FreeRTOS/queue.c ****                              * was overwritten in the queue so the number of items
 983:Middlewares/FreeRTOS/queue.c ****                              * in the queue has not changed. */
 984:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
 985:Middlewares/FreeRTOS/queue.c ****                         }
 986:Middlewares/FreeRTOS/queue.c ****                         else if( prvNotifyQueueSetContainer( pxQueue ) != pdFALSE )
 987:Middlewares/FreeRTOS/queue.c ****                         {
 988:Middlewares/FreeRTOS/queue.c ****                             /* The queue is a member of a queue set, and posting
 989:Middlewares/FreeRTOS/queue.c ****                              * to the queue set caused a higher priority task to
 990:Middlewares/FreeRTOS/queue.c ****                              * unblock. A context switch is required. */
 991:Middlewares/FreeRTOS/queue.c ****                             queueYIELD_IF_USING_PREEMPTION();
 992:Middlewares/FreeRTOS/queue.c ****                         }
 993:Middlewares/FreeRTOS/queue.c ****                         else
 994:Middlewares/FreeRTOS/queue.c ****                         {
 995:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
 996:Middlewares/FreeRTOS/queue.c ****                         }
 997:Middlewares/FreeRTOS/queue.c ****                     }
 998:Middlewares/FreeRTOS/queue.c ****                     else
 999:Middlewares/FreeRTOS/queue.c ****                     {
1000:Middlewares/FreeRTOS/queue.c ****                         /* If there was a task waiting for data to arrive on the
1001:Middlewares/FreeRTOS/queue.c ****                          * queue then unblock it now. */
1002:Middlewares/FreeRTOS/queue.c ****                         if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToReceive ) ) == pdFALSE )
1003:Middlewares/FreeRTOS/queue.c ****                         {
1004:Middlewares/FreeRTOS/queue.c ****                             if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToReceive ) ) !=
1005:Middlewares/FreeRTOS/queue.c ****                             {
1006:Middlewares/FreeRTOS/queue.c ****                                 /* The unblocked task has a priority higher than
1007:Middlewares/FreeRTOS/queue.c ****                                  * our own so yield immediately.  Yes it is ok to
1008:Middlewares/FreeRTOS/queue.c ****                                  * do this from within the critical section - the
1009:Middlewares/FreeRTOS/queue.c ****                                  * kernel takes care of that. */
1010:Middlewares/FreeRTOS/queue.c ****                                 queueYIELD_IF_USING_PREEMPTION();
1011:Middlewares/FreeRTOS/queue.c ****                             }
1012:Middlewares/FreeRTOS/queue.c ****                             else
1013:Middlewares/FreeRTOS/queue.c ****                             {
1014:Middlewares/FreeRTOS/queue.c ****                                 mtCOVERAGE_TEST_MARKER();
1015:Middlewares/FreeRTOS/queue.c ****                             }
1016:Middlewares/FreeRTOS/queue.c ****                         }
1017:Middlewares/FreeRTOS/queue.c ****                         else if( xYieldRequired != pdFALSE )
1018:Middlewares/FreeRTOS/queue.c ****                         {
1019:Middlewares/FreeRTOS/queue.c ****                             /* This path is a special case that will only get
1020:Middlewares/FreeRTOS/queue.c ****                              * executed if the task was holding multiple mutexes
1021:Middlewares/FreeRTOS/queue.c ****                              * and the mutexes were given back in an order that is
1022:Middlewares/FreeRTOS/queue.c ****                              * different to that in which they were taken. */
1023:Middlewares/FreeRTOS/queue.c ****                             queueYIELD_IF_USING_PREEMPTION();
1024:Middlewares/FreeRTOS/queue.c ****                         }
1025:Middlewares/FreeRTOS/queue.c ****                         else
1026:Middlewares/FreeRTOS/queue.c ****                         {
ARM GAS  /tmp/cczksE0f.s 			page 28


1027:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
1028:Middlewares/FreeRTOS/queue.c ****                         }
1029:Middlewares/FreeRTOS/queue.c ****                     }
1030:Middlewares/FreeRTOS/queue.c ****                 }
1031:Middlewares/FreeRTOS/queue.c ****                 #else /* configUSE_QUEUE_SETS */
1032:Middlewares/FreeRTOS/queue.c ****                 {
1033:Middlewares/FreeRTOS/queue.c ****                     xYieldRequired = prvCopyDataToQueue( pxQueue, pvItemToQueue, xCopyPosition );
 521              		.loc 1 1033 38
 522 002c 3A68     		ldr	r2, [r7]
 523 002e B968     		ldr	r1, [r7, #8]
 524 0030 386A     		ldr	r0, [r7, #32]
 525 0032 FFF7FEFF 		bl	prvCopyDataToQueue
 526 0036 F861     		str	r0, [r7, #28]
1034:Middlewares/FreeRTOS/queue.c **** 
1035:Middlewares/FreeRTOS/queue.c ****                     /* If there was a task waiting for data to arrive on the
1036:Middlewares/FreeRTOS/queue.c ****                      * queue then unblock it now. */
1037:Middlewares/FreeRTOS/queue.c ****                     if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToReceive ) ) == pdFALSE )
 527              		.loc 1 1037 25
 528 0038 3B6A     		ldr	r3, [r7, #32]
 529 003a 5B6A     		ldr	r3, [r3, #36]
 530              		.loc 1 1037 23
 531 003c 002B     		cmp	r3, #0
 532 003e 10D0     		beq	.L27
1038:Middlewares/FreeRTOS/queue.c ****                     {
1039:Middlewares/FreeRTOS/queue.c ****                         if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToReceive ) ) != pdF
 533              		.loc 1 1039 55
 534 0040 3B6A     		ldr	r3, [r7, #32]
 535 0042 2433     		adds	r3, r3, #36
 536              		.loc 1 1039 29
 537 0044 1846     		mov	r0, r3
 538 0046 FFF7FEFF 		bl	xTaskRemoveFromEventList
 539 004a 0346     		mov	r3, r0
 540              		.loc 1 1039 27 discriminator 1
 541 004c 002B     		cmp	r3, #0
 542 004e 13D0     		beq	.L28
1040:Middlewares/FreeRTOS/queue.c ****                         {
1041:Middlewares/FreeRTOS/queue.c ****                             /* The unblocked task has a priority higher than
1042:Middlewares/FreeRTOS/queue.c ****                              * our own so yield immediately.  Yes it is ok to do
1043:Middlewares/FreeRTOS/queue.c ****                              * this from within the critical section - the kernel
1044:Middlewares/FreeRTOS/queue.c ****                              * takes care of that. */
1045:Middlewares/FreeRTOS/queue.c ****                             queueYIELD_IF_USING_PREEMPTION();
 543              		.loc 1 1045 29
 544 0050 3F4B     		ldr	r3, .L39
 545 0052 4FF08052 		mov	r2, #268435456
 546 0056 1A60     		str	r2, [r3]
 547              		.syntax unified
 548              	@ 1045 "Middlewares/FreeRTOS/queue.c" 1
 549 0058 BFF34F8F 		dsb
 550              	@ 0 "" 2
 551              	@ 1045 "Middlewares/FreeRTOS/queue.c" 1
 552 005c BFF36F8F 		isb
 553              	@ 0 "" 2
 554              		.thumb
 555              		.syntax unified
 556 0060 0AE0     		b	.L28
 557              	.L27:
1046:Middlewares/FreeRTOS/queue.c ****                         }
ARM GAS  /tmp/cczksE0f.s 			page 29


1047:Middlewares/FreeRTOS/queue.c ****                         else
1048:Middlewares/FreeRTOS/queue.c ****                         {
1049:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
1050:Middlewares/FreeRTOS/queue.c ****                         }
1051:Middlewares/FreeRTOS/queue.c ****                     }
1052:Middlewares/FreeRTOS/queue.c ****                     else if( xYieldRequired != pdFALSE )
 558              		.loc 1 1052 28
 559 0062 FB69     		ldr	r3, [r7, #28]
 560 0064 002B     		cmp	r3, #0
 561 0066 07D0     		beq	.L28
1053:Middlewares/FreeRTOS/queue.c ****                     {
1054:Middlewares/FreeRTOS/queue.c ****                         /* This path is a special case that will only get
1055:Middlewares/FreeRTOS/queue.c ****                          * executed if the task was holding multiple mutexes and
1056:Middlewares/FreeRTOS/queue.c ****                          * the mutexes were given back in an order that is
1057:Middlewares/FreeRTOS/queue.c ****                          * different to that in which they were taken. */
1058:Middlewares/FreeRTOS/queue.c ****                         queueYIELD_IF_USING_PREEMPTION();
 562              		.loc 1 1058 25
 563 0068 394B     		ldr	r3, .L39
 564 006a 4FF08052 		mov	r2, #268435456
 565 006e 1A60     		str	r2, [r3]
 566              		.syntax unified
 567              	@ 1058 "Middlewares/FreeRTOS/queue.c" 1
 568 0070 BFF34F8F 		dsb
 569              	@ 0 "" 2
 570              	@ 1058 "Middlewares/FreeRTOS/queue.c" 1
 571 0074 BFF36F8F 		isb
 572              	@ 0 "" 2
 573              		.thumb
 574              		.syntax unified
 575              	.L28:
1059:Middlewares/FreeRTOS/queue.c ****                     }
1060:Middlewares/FreeRTOS/queue.c ****                     else
1061:Middlewares/FreeRTOS/queue.c ****                     {
1062:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
1063:Middlewares/FreeRTOS/queue.c ****                     }
1064:Middlewares/FreeRTOS/queue.c ****                 }
1065:Middlewares/FreeRTOS/queue.c ****                 #endif /* configUSE_QUEUE_SETS */
1066:Middlewares/FreeRTOS/queue.c **** 
1067:Middlewares/FreeRTOS/queue.c ****                 taskEXIT_CRITICAL();
 576              		.loc 1 1067 17
 577 0078 FFF7FEFF 		bl	vPortExitCritical
1068:Middlewares/FreeRTOS/queue.c **** 
1069:Middlewares/FreeRTOS/queue.c ****                 traceRETURN_xQueueGenericSend( pdPASS );
1070:Middlewares/FreeRTOS/queue.c **** 
1071:Middlewares/FreeRTOS/queue.c ****                 return pdPASS;
 578              		.loc 1 1071 24
 579 007c 0123     		movs	r3, #1
 580 007e 63E0     		b	.L38
 581              	.L26:
1072:Middlewares/FreeRTOS/queue.c ****             }
1073:Middlewares/FreeRTOS/queue.c ****             else
1074:Middlewares/FreeRTOS/queue.c ****             {
1075:Middlewares/FreeRTOS/queue.c ****                 if( xTicksToWait == ( TickType_t ) 0 )
 582              		.loc 1 1075 34
 583 0080 7B68     		ldr	r3, [r7, #4]
 584              		.loc 1 1075 19
 585 0082 002B     		cmp	r3, #0
ARM GAS  /tmp/cczksE0f.s 			page 30


 586 0084 03D1     		bne	.L30
1076:Middlewares/FreeRTOS/queue.c ****                 {
1077:Middlewares/FreeRTOS/queue.c ****                     /* The queue was full and no block time is specified (or
1078:Middlewares/FreeRTOS/queue.c ****                      * the block time has expired) so leave now. */
1079:Middlewares/FreeRTOS/queue.c ****                     taskEXIT_CRITICAL();
 587              		.loc 1 1079 21
 588 0086 FFF7FEFF 		bl	vPortExitCritical
1080:Middlewares/FreeRTOS/queue.c **** 
1081:Middlewares/FreeRTOS/queue.c ****                     /* Return to the original privilege level before exiting
1082:Middlewares/FreeRTOS/queue.c ****                      * the function. */
1083:Middlewares/FreeRTOS/queue.c ****                     traceQUEUE_SEND_FAILED( pxQueue );
1084:Middlewares/FreeRTOS/queue.c ****                     traceRETURN_xQueueGenericSend( errQUEUE_FULL );
1085:Middlewares/FreeRTOS/queue.c **** 
1086:Middlewares/FreeRTOS/queue.c ****                     return errQUEUE_FULL;
 589              		.loc 1 1086 28
 590 008a 0023     		movs	r3, #0
 591 008c 5CE0     		b	.L38
 592              	.L30:
1087:Middlewares/FreeRTOS/queue.c ****                 }
1088:Middlewares/FreeRTOS/queue.c ****                 else if( xEntryTimeSet == pdFALSE )
 593              		.loc 1 1088 24
 594 008e 7B6A     		ldr	r3, [r7, #36]
 595 0090 002B     		cmp	r3, #0
 596 0092 06D1     		bne	.L31
1089:Middlewares/FreeRTOS/queue.c ****                 {
1090:Middlewares/FreeRTOS/queue.c ****                     /* The queue was full and a block time was specified so
1091:Middlewares/FreeRTOS/queue.c ****                      * configure the timeout structure. */
1092:Middlewares/FreeRTOS/queue.c ****                     vTaskInternalSetTimeOutState( &xTimeOut );
 597              		.loc 1 1092 21
 598 0094 07F11403 		add	r3, r7, #20
 599 0098 1846     		mov	r0, r3
 600 009a FFF7FEFF 		bl	vTaskInternalSetTimeOutState
1093:Middlewares/FreeRTOS/queue.c ****                     xEntryTimeSet = pdTRUE;
 601              		.loc 1 1093 35
 602 009e 0123     		movs	r3, #1
 603 00a0 7B62     		str	r3, [r7, #36]
 604              	.L31:
1094:Middlewares/FreeRTOS/queue.c ****                 }
1095:Middlewares/FreeRTOS/queue.c ****                 else
1096:Middlewares/FreeRTOS/queue.c ****                 {
1097:Middlewares/FreeRTOS/queue.c ****                     /* Entry time was already set. */
1098:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
1099:Middlewares/FreeRTOS/queue.c ****                 }
1100:Middlewares/FreeRTOS/queue.c ****             }
1101:Middlewares/FreeRTOS/queue.c ****         }
1102:Middlewares/FreeRTOS/queue.c ****         taskEXIT_CRITICAL();
 605              		.loc 1 1102 9
 606 00a2 FFF7FEFF 		bl	vPortExitCritical
1103:Middlewares/FreeRTOS/queue.c **** 
1104:Middlewares/FreeRTOS/queue.c ****         /* Interrupts and other tasks can send to and receive from the queue
1105:Middlewares/FreeRTOS/queue.c ****          * now the critical section has been exited. */
1106:Middlewares/FreeRTOS/queue.c **** 
1107:Middlewares/FreeRTOS/queue.c ****         vTaskSuspendAll();
 607              		.loc 1 1107 9
 608 00a6 FFF7FEFF 		bl	vTaskSuspendAll
1108:Middlewares/FreeRTOS/queue.c ****         prvLockQueue( pxQueue );
 609              		.loc 1 1108 9
ARM GAS  /tmp/cczksE0f.s 			page 31


 610 00aa FFF7FEFF 		bl	vPortEnterCritical
 611              		.loc 1 1108 9 is_stmt 0 discriminator 1
 612 00ae 3B6A     		ldr	r3, [r7, #32]
 613 00b0 93F84430 		ldrb	r3, [r3, #68]
 614 00b4 5BB2     		sxtb	r3, r3
 615 00b6 B3F1FF3F 		cmp	r3, #-1
 616 00ba 03D1     		bne	.L32
 617 00bc 3B6A     		ldr	r3, [r7, #32]
 618 00be 0022     		movs	r2, #0
 619 00c0 83F84420 		strb	r2, [r3, #68]
 620              	.L32:
 621              		.loc 1 1108 9 discriminator 3
 622 00c4 3B6A     		ldr	r3, [r7, #32]
 623 00c6 93F84530 		ldrb	r3, [r3, #69]
 624 00ca 5BB2     		sxtb	r3, r3
 625 00cc B3F1FF3F 		cmp	r3, #-1
 626 00d0 03D1     		bne	.L33
 627              		.loc 1 1108 9 discriminator 4
 628 00d2 3B6A     		ldr	r3, [r7, #32]
 629 00d4 0022     		movs	r2, #0
 630 00d6 83F84520 		strb	r2, [r3, #69]
 631              	.L33:
 632              		.loc 1 1108 9 discriminator 6
 633 00da FFF7FEFF 		bl	vPortExitCritical
1109:Middlewares/FreeRTOS/queue.c **** 
1110:Middlewares/FreeRTOS/queue.c ****         /* Update the timeout state to see if it has expired yet. */
1111:Middlewares/FreeRTOS/queue.c ****         if( xTaskCheckForTimeOut( &xTimeOut, &xTicksToWait ) == pdFALSE )
 634              		.loc 1 1111 13 is_stmt 1
 635 00de 3A1D     		adds	r2, r7, #4
 636 00e0 07F11403 		add	r3, r7, #20
 637 00e4 1146     		mov	r1, r2
 638 00e6 1846     		mov	r0, r3
 639 00e8 FFF7FEFF 		bl	xTaskCheckForTimeOut
 640 00ec 0346     		mov	r3, r0
 641              		.loc 1 1111 11 discriminator 1
 642 00ee 002B     		cmp	r3, #0
 643 00f0 24D1     		bne	.L34
1112:Middlewares/FreeRTOS/queue.c ****         {
1113:Middlewares/FreeRTOS/queue.c ****             if( prvIsQueueFull( pxQueue ) != pdFALSE )
 644              		.loc 1 1113 17
 645 00f2 386A     		ldr	r0, [r7, #32]
 646 00f4 FFF7FEFF 		bl	prvIsQueueFull
 647 00f8 0346     		mov	r3, r0
 648              		.loc 1 1113 15 discriminator 1
 649 00fa 002B     		cmp	r3, #0
 650 00fc 18D0     		beq	.L35
1114:Middlewares/FreeRTOS/queue.c ****             {
1115:Middlewares/FreeRTOS/queue.c ****                 traceBLOCKING_ON_QUEUE_SEND( pxQueue );
1116:Middlewares/FreeRTOS/queue.c ****                 vTaskPlaceOnEventList( &( pxQueue->xTasksWaitingToSend ), xTicksToWait );
 651              		.loc 1 1116 17
 652 00fe 3B6A     		ldr	r3, [r7, #32]
 653 0100 1033     		adds	r3, r3, #16
 654 0102 7A68     		ldr	r2, [r7, #4]
 655 0104 1146     		mov	r1, r2
 656 0106 1846     		mov	r0, r3
 657 0108 FFF7FEFF 		bl	vTaskPlaceOnEventList
1117:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 32


1118:Middlewares/FreeRTOS/queue.c ****                 /* Unlocking the queue means queue events can effect the
1119:Middlewares/FreeRTOS/queue.c ****                  * event list. It is possible that interrupts occurring now
1120:Middlewares/FreeRTOS/queue.c ****                  * remove this task from the event list again - but as the
1121:Middlewares/FreeRTOS/queue.c ****                  * scheduler is suspended the task will go onto the pending
1122:Middlewares/FreeRTOS/queue.c ****                  * ready list instead of the actual ready list. */
1123:Middlewares/FreeRTOS/queue.c ****                 prvUnlockQueue( pxQueue );
 658              		.loc 1 1123 17
 659 010c 386A     		ldr	r0, [r7, #32]
 660 010e FFF7FEFF 		bl	prvUnlockQueue
1124:Middlewares/FreeRTOS/queue.c **** 
1125:Middlewares/FreeRTOS/queue.c ****                 /* Resuming the scheduler will move tasks from the pending
1126:Middlewares/FreeRTOS/queue.c ****                  * ready list into the ready list - so it is feasible that this
1127:Middlewares/FreeRTOS/queue.c ****                  * task is already in the ready list before it yields - in which
1128:Middlewares/FreeRTOS/queue.c ****                  * case the yield will not cause a context switch unless there
1129:Middlewares/FreeRTOS/queue.c ****                  * is also a higher priority task in the pending ready list. */
1130:Middlewares/FreeRTOS/queue.c ****                 if( xTaskResumeAll() == pdFALSE )
 661              		.loc 1 1130 21
 662 0112 FFF7FEFF 		bl	xTaskResumeAll
 663 0116 0346     		mov	r3, r0
 664              		.loc 1 1130 19 discriminator 1
 665 0118 002B     		cmp	r3, #0
 666 011a 7FF47CAF 		bne	.L37
1131:Middlewares/FreeRTOS/queue.c ****                 {
1132:Middlewares/FreeRTOS/queue.c ****                     taskYIELD_WITHIN_API();
 667              		.loc 1 1132 21
 668 011e 0C4B     		ldr	r3, .L39
 669 0120 4FF08052 		mov	r2, #268435456
 670 0124 1A60     		str	r2, [r3]
 671              		.syntax unified
 672              	@ 1132 "Middlewares/FreeRTOS/queue.c" 1
 673 0126 BFF34F8F 		dsb
 674              	@ 0 "" 2
 675              	@ 1132 "Middlewares/FreeRTOS/queue.c" 1
 676 012a BFF36F8F 		isb
 677              	@ 0 "" 2
 678              		.thumb
 679              		.syntax unified
 680 012e 72E7     		b	.L37
 681              	.L35:
1133:Middlewares/FreeRTOS/queue.c ****                 }
1134:Middlewares/FreeRTOS/queue.c ****             }
1135:Middlewares/FreeRTOS/queue.c ****             else
1136:Middlewares/FreeRTOS/queue.c ****             {
1137:Middlewares/FreeRTOS/queue.c ****                 /* Try again. */
1138:Middlewares/FreeRTOS/queue.c ****                 prvUnlockQueue( pxQueue );
 682              		.loc 1 1138 17
 683 0130 386A     		ldr	r0, [r7, #32]
 684 0132 FFF7FEFF 		bl	prvUnlockQueue
1139:Middlewares/FreeRTOS/queue.c ****                 ( void ) xTaskResumeAll();
 685              		.loc 1 1139 26
 686 0136 FFF7FEFF 		bl	xTaskResumeAll
 687 013a 6CE7     		b	.L37
 688              	.L34:
1140:Middlewares/FreeRTOS/queue.c ****             }
1141:Middlewares/FreeRTOS/queue.c ****         }
1142:Middlewares/FreeRTOS/queue.c ****         else
1143:Middlewares/FreeRTOS/queue.c ****         {
ARM GAS  /tmp/cczksE0f.s 			page 33


1144:Middlewares/FreeRTOS/queue.c ****             /* The timeout has expired. */
1145:Middlewares/FreeRTOS/queue.c ****             prvUnlockQueue( pxQueue );
 689              		.loc 1 1145 13
 690 013c 386A     		ldr	r0, [r7, #32]
 691 013e FFF7FEFF 		bl	prvUnlockQueue
1146:Middlewares/FreeRTOS/queue.c ****             ( void ) xTaskResumeAll();
 692              		.loc 1 1146 22
 693 0142 FFF7FEFF 		bl	xTaskResumeAll
1147:Middlewares/FreeRTOS/queue.c **** 
1148:Middlewares/FreeRTOS/queue.c ****             traceQUEUE_SEND_FAILED( pxQueue );
1149:Middlewares/FreeRTOS/queue.c ****             traceRETURN_xQueueGenericSend( errQUEUE_FULL );
1150:Middlewares/FreeRTOS/queue.c **** 
1151:Middlewares/FreeRTOS/queue.c ****             return errQUEUE_FULL;
 694              		.loc 1 1151 20
 695 0146 0023     		movs	r3, #0
 696              	.L38:
1152:Middlewares/FreeRTOS/queue.c ****         }
1153:Middlewares/FreeRTOS/queue.c ****     }
1154:Middlewares/FreeRTOS/queue.c **** }
 697              		.loc 1 1154 1
 698 0148 1846     		mov	r0, r3
 699 014a 2837     		adds	r7, r7, #40
 700              		.cfi_def_cfa_offset 8
 701 014c BD46     		mov	sp, r7
 702              		.cfi_def_cfa_register 13
 703              		@ sp needed
 704 014e 80BD     		pop	{r7, pc}
 705              	.L40:
 706              		.align	2
 707              	.L39:
 708 0150 04ED00E0 		.word	-536810236
 709              		.cfi_endproc
 710              	.LFE9:
 712              		.section	.text.xQueueGenericSendFromISR,"ax",%progbits
 713              		.align	1
 714              		.global	xQueueGenericSendFromISR
 715              		.syntax unified
 716              		.thumb
 717              		.thumb_func
 719              	xQueueGenericSendFromISR:
 720              	.LFB10:
1155:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
1156:Middlewares/FreeRTOS/queue.c **** 
1157:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueueGenericSendFromISR( QueueHandle_t xQueue,
1158:Middlewares/FreeRTOS/queue.c ****                                      const void * const pvItemToQueue,
1159:Middlewares/FreeRTOS/queue.c ****                                      BaseType_t * const pxHigherPriorityTaskWoken,
1160:Middlewares/FreeRTOS/queue.c ****                                      const BaseType_t xCopyPosition )
1161:Middlewares/FreeRTOS/queue.c **** {
 721              		.loc 1 1161 1
 722              		.cfi_startproc
 723              		@ args = 0, pretend = 0, frame = 56
 724              		@ frame_needed = 1, uses_anonymous_args = 0
 725 0000 80B5     		push	{r7, lr}
 726              		.cfi_def_cfa_offset 8
 727              		.cfi_offset 7, -8
 728              		.cfi_offset 14, -4
 729 0002 8EB0     		sub	sp, sp, #56
ARM GAS  /tmp/cczksE0f.s 			page 34


 730              		.cfi_def_cfa_offset 64
 731 0004 00AF     		add	r7, sp, #0
 732              		.cfi_def_cfa_register 7
 733 0006 F860     		str	r0, [r7, #12]
 734 0008 B960     		str	r1, [r7, #8]
 735 000a 7A60     		str	r2, [r7, #4]
 736 000c 3B60     		str	r3, [r7]
1162:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn;
1163:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxSavedInterruptStatus;
1164:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 737              		.loc 1 1164 21
 738 000e FB68     		ldr	r3, [r7, #12]
 739 0010 3B63     		str	r3, [r7, #48]
 740              	.LBB26:
 741              	.LBB27:
 742              		.file 2 "Middlewares/FreeRTOS/portable/portmacro.h"
   1:Middlewares/FreeRTOS/portable/portmacro.h **** /*
   2:Middlewares/FreeRTOS/portable/portmacro.h ****  * FreeRTOS Kernel V11.1.0
   3:Middlewares/FreeRTOS/portable/portmacro.h ****  * Copyright (C) 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.
   4:Middlewares/FreeRTOS/portable/portmacro.h ****  *
   5:Middlewares/FreeRTOS/portable/portmacro.h ****  * SPDX-License-Identifier: MIT
   6:Middlewares/FreeRTOS/portable/portmacro.h ****  *
   7:Middlewares/FreeRTOS/portable/portmacro.h ****  * Permission is hereby granted, free of charge, to any person obtaining a copy of
   8:Middlewares/FreeRTOS/portable/portmacro.h ****  * this software and associated documentation files (the "Software"), to deal in
   9:Middlewares/FreeRTOS/portable/portmacro.h ****  * the Software without restriction, including without limitation the rights to
  10:Middlewares/FreeRTOS/portable/portmacro.h ****  * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
  11:Middlewares/FreeRTOS/portable/portmacro.h ****  * the Software, and to permit persons to whom the Software is furnished to do so,
  12:Middlewares/FreeRTOS/portable/portmacro.h ****  * subject to the following conditions:
  13:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  14:Middlewares/FreeRTOS/portable/portmacro.h ****  * The above copyright notice and this permission notice shall be included in all
  15:Middlewares/FreeRTOS/portable/portmacro.h ****  * copies or substantial portions of the Software.
  16:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  17:Middlewares/FreeRTOS/portable/portmacro.h ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  18:Middlewares/FreeRTOS/portable/portmacro.h ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
  19:Middlewares/FreeRTOS/portable/portmacro.h ****  * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
  20:Middlewares/FreeRTOS/portable/portmacro.h ****  * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
  21:Middlewares/FreeRTOS/portable/portmacro.h ****  * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
  22:Middlewares/FreeRTOS/portable/portmacro.h ****  * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  23:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  24:Middlewares/FreeRTOS/portable/portmacro.h ****  * https://www.FreeRTOS.org
  25:Middlewares/FreeRTOS/portable/portmacro.h ****  * https://github.com/FreeRTOS
  26:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  27:Middlewares/FreeRTOS/portable/portmacro.h ****  */
  28:Middlewares/FreeRTOS/portable/portmacro.h **** 
  29:Middlewares/FreeRTOS/portable/portmacro.h **** 
  30:Middlewares/FreeRTOS/portable/portmacro.h **** #ifndef PORTMACRO_H
  31:Middlewares/FreeRTOS/portable/portmacro.h **** #define PORTMACRO_H
  32:Middlewares/FreeRTOS/portable/portmacro.h **** 
  33:Middlewares/FreeRTOS/portable/portmacro.h **** /* *INDENT-OFF* */
  34:Middlewares/FreeRTOS/portable/portmacro.h **** #ifdef __cplusplus
  35:Middlewares/FreeRTOS/portable/portmacro.h ****     extern "C" {
  36:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
  37:Middlewares/FreeRTOS/portable/portmacro.h **** /* *INDENT-ON* */
  38:Middlewares/FreeRTOS/portable/portmacro.h **** 
  39:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------
  40:Middlewares/FreeRTOS/portable/portmacro.h ****  * Port specific definitions.
  41:Middlewares/FreeRTOS/portable/portmacro.h ****  *
ARM GAS  /tmp/cczksE0f.s 			page 35


  42:Middlewares/FreeRTOS/portable/portmacro.h ****  * The settings in this file configure FreeRTOS correctly for the
  43:Middlewares/FreeRTOS/portable/portmacro.h ****  * given hardware and compiler.
  44:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  45:Middlewares/FreeRTOS/portable/portmacro.h ****  * These settings should not be altered.
  46:Middlewares/FreeRTOS/portable/portmacro.h ****  *-----------------------------------------------------------
  47:Middlewares/FreeRTOS/portable/portmacro.h ****  */
  48:Middlewares/FreeRTOS/portable/portmacro.h **** 
  49:Middlewares/FreeRTOS/portable/portmacro.h **** /* Type definitions. */
  50:Middlewares/FreeRTOS/portable/portmacro.h **** #define portCHAR          char
  51:Middlewares/FreeRTOS/portable/portmacro.h **** #define portFLOAT         float
  52:Middlewares/FreeRTOS/portable/portmacro.h **** #define portDOUBLE        double
  53:Middlewares/FreeRTOS/portable/portmacro.h **** #define portLONG          long
  54:Middlewares/FreeRTOS/portable/portmacro.h **** #define portSHORT         short
  55:Middlewares/FreeRTOS/portable/portmacro.h **** #define portSTACK_TYPE    uint32_t
  56:Middlewares/FreeRTOS/portable/portmacro.h **** #define portBASE_TYPE     long
  57:Middlewares/FreeRTOS/portable/portmacro.h **** 
  58:Middlewares/FreeRTOS/portable/portmacro.h **** typedef portSTACK_TYPE   StackType_t;
  59:Middlewares/FreeRTOS/portable/portmacro.h **** typedef long             BaseType_t;
  60:Middlewares/FreeRTOS/portable/portmacro.h **** typedef unsigned long    UBaseType_t;
  61:Middlewares/FreeRTOS/portable/portmacro.h **** 
  62:Middlewares/FreeRTOS/portable/portmacro.h **** #if ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_16_BITS )
  63:Middlewares/FreeRTOS/portable/portmacro.h ****     typedef uint16_t     TickType_t;
  64:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portMAX_DELAY              ( TickType_t ) 0xffff
  65:Middlewares/FreeRTOS/portable/portmacro.h **** #elif ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_32_BITS )
  66:Middlewares/FreeRTOS/portable/portmacro.h ****     typedef uint32_t     TickType_t;
  67:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portMAX_DELAY              ( TickType_t ) 0xffffffffUL
  68:Middlewares/FreeRTOS/portable/portmacro.h **** 
  69:Middlewares/FreeRTOS/portable/portmacro.h **** /* 32-bit tick type on a 32-bit architecture, so reads of the tick count do
  70:Middlewares/FreeRTOS/portable/portmacro.h ****  * not need to be guarded with a critical section. */
  71:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portTICK_TYPE_IS_ATOMIC    1
  72:Middlewares/FreeRTOS/portable/portmacro.h **** #elif ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_64_BITS )
  73:Middlewares/FreeRTOS/portable/portmacro.h ****     typedef uint64_t TickType_t;
  74:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portMAX_DELAY              ( TickType_t ) 0xffffffffffffffffULL
  75:Middlewares/FreeRTOS/portable/portmacro.h **** #else /* if ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_16_BITS ) */
  76:Middlewares/FreeRTOS/portable/portmacro.h ****     #error configTICK_TYPE_WIDTH_IN_BITS set to unsupported tick type width.
  77:Middlewares/FreeRTOS/portable/portmacro.h **** #endif /* if ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_16_BITS ) */
  78:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
  79:Middlewares/FreeRTOS/portable/portmacro.h **** 
  80:Middlewares/FreeRTOS/portable/portmacro.h **** /* Architecture specifics. */
  81:Middlewares/FreeRTOS/portable/portmacro.h **** #define portSTACK_GROWTH      ( -1 )
  82:Middlewares/FreeRTOS/portable/portmacro.h **** #define portTICK_PERIOD_MS    ( ( TickType_t ) 1000 / configTICK_RATE_HZ )
  83:Middlewares/FreeRTOS/portable/portmacro.h **** #define portBYTE_ALIGNMENT    8
  84:Middlewares/FreeRTOS/portable/portmacro.h **** #define portDONT_DISCARD      __attribute__( ( used ) )
  85:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
  86:Middlewares/FreeRTOS/portable/portmacro.h **** 
  87:Middlewares/FreeRTOS/portable/portmacro.h **** /* Scheduler utilities. */
  88:Middlewares/FreeRTOS/portable/portmacro.h **** #define portYIELD()                                     \
  89:Middlewares/FreeRTOS/portable/portmacro.h ****     {                                                   \
  90:Middlewares/FreeRTOS/portable/portmacro.h ****         /* Set a PendSV to request a context switch. */ \
  91:Middlewares/FreeRTOS/portable/portmacro.h ****         portNVIC_INT_CTRL_REG = portNVIC_PENDSVSET_BIT; \
  92:Middlewares/FreeRTOS/portable/portmacro.h ****                                                         \
  93:Middlewares/FreeRTOS/portable/portmacro.h ****         /* Barriers are normally not required but do ensure the code is completely \
  94:Middlewares/FreeRTOS/portable/portmacro.h ****          * within the specified behaviour for the architecture. */ \
  95:Middlewares/FreeRTOS/portable/portmacro.h ****         __asm volatile ( "dsb" ::: "memory" );                     \
  96:Middlewares/FreeRTOS/portable/portmacro.h ****         __asm volatile ( "isb" );                                  \
  97:Middlewares/FreeRTOS/portable/portmacro.h ****     }
  98:Middlewares/FreeRTOS/portable/portmacro.h **** 
ARM GAS  /tmp/cczksE0f.s 			page 36


  99:Middlewares/FreeRTOS/portable/portmacro.h **** #define portNVIC_INT_CTRL_REG     ( *( ( volatile uint32_t * ) 0xe000ed04 ) )
 100:Middlewares/FreeRTOS/portable/portmacro.h **** #define portNVIC_PENDSVSET_BIT    ( 1UL << 28UL )
 101:Middlewares/FreeRTOS/portable/portmacro.h **** #define portEND_SWITCHING_ISR( xSwitchRequired ) \
 102:Middlewares/FreeRTOS/portable/portmacro.h ****     do                                           \
 103:Middlewares/FreeRTOS/portable/portmacro.h ****     {                                            \
 104:Middlewares/FreeRTOS/portable/portmacro.h ****         if( xSwitchRequired != pdFALSE )         \
 105:Middlewares/FreeRTOS/portable/portmacro.h ****         {                                        \
 106:Middlewares/FreeRTOS/portable/portmacro.h ****             traceISR_EXIT_TO_SCHEDULER();        \
 107:Middlewares/FreeRTOS/portable/portmacro.h ****             portYIELD();                         \
 108:Middlewares/FreeRTOS/portable/portmacro.h ****         }                                        \
 109:Middlewares/FreeRTOS/portable/portmacro.h ****         else                                     \
 110:Middlewares/FreeRTOS/portable/portmacro.h ****         {                                        \
 111:Middlewares/FreeRTOS/portable/portmacro.h ****             traceISR_EXIT();                     \
 112:Middlewares/FreeRTOS/portable/portmacro.h ****         }                                        \
 113:Middlewares/FreeRTOS/portable/portmacro.h ****     } while( 0 )
 114:Middlewares/FreeRTOS/portable/portmacro.h **** #define portYIELD_FROM_ISR( x )    portEND_SWITCHING_ISR( x )
 115:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 116:Middlewares/FreeRTOS/portable/portmacro.h **** 
 117:Middlewares/FreeRTOS/portable/portmacro.h **** /* Critical section management. */
 118:Middlewares/FreeRTOS/portable/portmacro.h **** extern void vPortEnterCritical( void );
 119:Middlewares/FreeRTOS/portable/portmacro.h **** extern void vPortExitCritical( void );
 120:Middlewares/FreeRTOS/portable/portmacro.h **** #define portSET_INTERRUPT_MASK_FROM_ISR()         ulPortRaiseBASEPRI()
 121:Middlewares/FreeRTOS/portable/portmacro.h **** #define portCLEAR_INTERRUPT_MASK_FROM_ISR( x )    vPortSetBASEPRI( x )
 122:Middlewares/FreeRTOS/portable/portmacro.h **** #define portDISABLE_INTERRUPTS()                  vPortRaiseBASEPRI()
 123:Middlewares/FreeRTOS/portable/portmacro.h **** #define portENABLE_INTERRUPTS()                   vPortSetBASEPRI( 0 )
 124:Middlewares/FreeRTOS/portable/portmacro.h **** #define portENTER_CRITICAL()                      vPortEnterCritical()
 125:Middlewares/FreeRTOS/portable/portmacro.h **** #define portEXIT_CRITICAL()                       vPortExitCritical()
 126:Middlewares/FreeRTOS/portable/portmacro.h **** 
 127:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 128:Middlewares/FreeRTOS/portable/portmacro.h **** 
 129:Middlewares/FreeRTOS/portable/portmacro.h **** /* Task function macros as described on the FreeRTOS.org WEB site.  These are
 130:Middlewares/FreeRTOS/portable/portmacro.h ****  * not necessary for to use this port.  They are defined so the common demo files
 131:Middlewares/FreeRTOS/portable/portmacro.h ****  * (which build with all the ports) will build. */
 132:Middlewares/FreeRTOS/portable/portmacro.h **** #define portTASK_FUNCTION_PROTO( vFunction, pvParameters )    void vFunction( void * pvParameters )
 133:Middlewares/FreeRTOS/portable/portmacro.h **** #define portTASK_FUNCTION( vFunction, pvParameters )          void vFunction( void * pvParameters )
 134:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 135:Middlewares/FreeRTOS/portable/portmacro.h **** 
 136:Middlewares/FreeRTOS/portable/portmacro.h **** /* Tickless idle/low power functionality. */
 137:Middlewares/FreeRTOS/portable/portmacro.h **** #ifndef portSUPPRESS_TICKS_AND_SLEEP
 138:Middlewares/FreeRTOS/portable/portmacro.h ****     extern void vPortSuppressTicksAndSleep( TickType_t xExpectedIdleTime );
 139:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portSUPPRESS_TICKS_AND_SLEEP( xExpectedIdleTime )    vPortSuppressTicksAndSleep( xExpec
 140:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
 141:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 142:Middlewares/FreeRTOS/portable/portmacro.h **** 
 143:Middlewares/FreeRTOS/portable/portmacro.h **** /* Architecture specific optimisations. */
 144:Middlewares/FreeRTOS/portable/portmacro.h **** #ifndef configUSE_PORT_OPTIMISED_TASK_SELECTION
 145:Middlewares/FreeRTOS/portable/portmacro.h ****     #define configUSE_PORT_OPTIMISED_TASK_SELECTION    1
 146:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
 147:Middlewares/FreeRTOS/portable/portmacro.h **** 
 148:Middlewares/FreeRTOS/portable/portmacro.h **** #if configUSE_PORT_OPTIMISED_TASK_SELECTION == 1
 149:Middlewares/FreeRTOS/portable/portmacro.h **** 
 150:Middlewares/FreeRTOS/portable/portmacro.h **** /* Generic helper function. */
 151:Middlewares/FreeRTOS/portable/portmacro.h ****     __attribute__( ( always_inline ) ) static inline uint8_t ucPortCountLeadingZeros( uint32_t ulBi
 152:Middlewares/FreeRTOS/portable/portmacro.h ****     {
 153:Middlewares/FreeRTOS/portable/portmacro.h ****         uint8_t ucReturn;
 154:Middlewares/FreeRTOS/portable/portmacro.h **** 
 155:Middlewares/FreeRTOS/portable/portmacro.h ****         __asm volatile ( "clz %0, %1" : "=r" ( ucReturn ) : "r" ( ulBitmap ) : "memory" );
ARM GAS  /tmp/cczksE0f.s 			page 37


 156:Middlewares/FreeRTOS/portable/portmacro.h **** 
 157:Middlewares/FreeRTOS/portable/portmacro.h ****         return ucReturn;
 158:Middlewares/FreeRTOS/portable/portmacro.h ****     }
 159:Middlewares/FreeRTOS/portable/portmacro.h **** 
 160:Middlewares/FreeRTOS/portable/portmacro.h **** /* Check the configuration. */
 161:Middlewares/FreeRTOS/portable/portmacro.h ****     #if ( configMAX_PRIORITIES > 32 )
 162:Middlewares/FreeRTOS/portable/portmacro.h ****         #error configUSE_PORT_OPTIMISED_TASK_SELECTION can only be set to 1 when configMAX_PRIORITI
 163:Middlewares/FreeRTOS/portable/portmacro.h ****     #endif
 164:Middlewares/FreeRTOS/portable/portmacro.h **** 
 165:Middlewares/FreeRTOS/portable/portmacro.h **** /* Store/clear the ready priorities in a bit map. */
 166:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portRECORD_READY_PRIORITY( uxPriority, uxReadyPriorities )    ( uxReadyPriorities ) |= 
 167:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portRESET_READY_PRIORITY( uxPriority, uxReadyPriorities )     ( uxReadyPriorities ) &= 
 168:Middlewares/FreeRTOS/portable/portmacro.h **** 
 169:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 170:Middlewares/FreeRTOS/portable/portmacro.h **** 
 171:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portGET_HIGHEST_PRIORITY( uxTopPriority, uxReadyPriorities )    uxTopPriority = ( 31UL 
 172:Middlewares/FreeRTOS/portable/portmacro.h **** 
 173:Middlewares/FreeRTOS/portable/portmacro.h **** #endif /* configUSE_PORT_OPTIMISED_TASK_SELECTION */
 174:Middlewares/FreeRTOS/portable/portmacro.h **** 
 175:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 176:Middlewares/FreeRTOS/portable/portmacro.h **** 
 177:Middlewares/FreeRTOS/portable/portmacro.h **** #ifdef configASSERT
 178:Middlewares/FreeRTOS/portable/portmacro.h ****     void vPortValidateInterruptPriority( void );
 179:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portASSERT_IF_INTERRUPT_PRIORITY_INVALID()    vPortValidateInterruptPriority()
 180:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
 181:Middlewares/FreeRTOS/portable/portmacro.h **** 
 182:Middlewares/FreeRTOS/portable/portmacro.h **** /* portNOP() is not required by this port. */
 183:Middlewares/FreeRTOS/portable/portmacro.h **** #define portNOP()
 184:Middlewares/FreeRTOS/portable/portmacro.h **** 
 185:Middlewares/FreeRTOS/portable/portmacro.h **** #define portINLINE              __inline
 186:Middlewares/FreeRTOS/portable/portmacro.h **** 
 187:Middlewares/FreeRTOS/portable/portmacro.h **** #ifndef portFORCE_INLINE
 188:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portFORCE_INLINE    inline __attribute__( ( always_inline ) )
 189:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
 190:Middlewares/FreeRTOS/portable/portmacro.h **** 
 191:Middlewares/FreeRTOS/portable/portmacro.h **** portFORCE_INLINE static BaseType_t xPortIsInsideInterrupt( void )
 192:Middlewares/FreeRTOS/portable/portmacro.h **** {
 193:Middlewares/FreeRTOS/portable/portmacro.h ****     uint32_t ulCurrentInterrupt;
 194:Middlewares/FreeRTOS/portable/portmacro.h ****     BaseType_t xReturn;
 195:Middlewares/FreeRTOS/portable/portmacro.h **** 
 196:Middlewares/FreeRTOS/portable/portmacro.h ****     /* Obtain the number of the currently executing interrupt. */
 197:Middlewares/FreeRTOS/portable/portmacro.h ****     __asm volatile ( "mrs %0, ipsr" : "=r" ( ulCurrentInterrupt )::"memory" );
 198:Middlewares/FreeRTOS/portable/portmacro.h **** 
 199:Middlewares/FreeRTOS/portable/portmacro.h ****     if( ulCurrentInterrupt == 0 )
 200:Middlewares/FreeRTOS/portable/portmacro.h ****     {
 201:Middlewares/FreeRTOS/portable/portmacro.h ****         xReturn = pdFALSE;
 202:Middlewares/FreeRTOS/portable/portmacro.h ****     }
 203:Middlewares/FreeRTOS/portable/portmacro.h ****     else
 204:Middlewares/FreeRTOS/portable/portmacro.h ****     {
 205:Middlewares/FreeRTOS/portable/portmacro.h ****         xReturn = pdTRUE;
 206:Middlewares/FreeRTOS/portable/portmacro.h ****     }
 207:Middlewares/FreeRTOS/portable/portmacro.h **** 
 208:Middlewares/FreeRTOS/portable/portmacro.h ****     return xReturn;
 209:Middlewares/FreeRTOS/portable/portmacro.h **** }
 210:Middlewares/FreeRTOS/portable/portmacro.h **** 
 211:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 212:Middlewares/FreeRTOS/portable/portmacro.h **** 
ARM GAS  /tmp/cczksE0f.s 			page 38


 213:Middlewares/FreeRTOS/portable/portmacro.h **** portFORCE_INLINE static void vPortRaiseBASEPRI( void )
 214:Middlewares/FreeRTOS/portable/portmacro.h **** {
 215:Middlewares/FreeRTOS/portable/portmacro.h ****     uint32_t ulNewBASEPRI;
 216:Middlewares/FreeRTOS/portable/portmacro.h **** 
 217:Middlewares/FreeRTOS/portable/portmacro.h ****     __asm volatile
 218:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 219:Middlewares/FreeRTOS/portable/portmacro.h ****         "   mov %0, %1                                              \n" \
 220:Middlewares/FreeRTOS/portable/portmacro.h ****         "   msr basepri, %0                                         \n" \
 221:Middlewares/FreeRTOS/portable/portmacro.h ****         "   isb                                                     \n" \
 222:Middlewares/FreeRTOS/portable/portmacro.h ****         "   dsb                                                     \n" \
 223:Middlewares/FreeRTOS/portable/portmacro.h ****         : "=r" ( ulNewBASEPRI ) : "i" ( configMAX_SYSCALL_INTERRUPT_PRIORITY ) : "memory"
 224:Middlewares/FreeRTOS/portable/portmacro.h ****     );
 225:Middlewares/FreeRTOS/portable/portmacro.h **** }
 226:Middlewares/FreeRTOS/portable/portmacro.h **** 
 227:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 228:Middlewares/FreeRTOS/portable/portmacro.h **** 
 229:Middlewares/FreeRTOS/portable/portmacro.h **** portFORCE_INLINE static uint32_t ulPortRaiseBASEPRI( void )
 230:Middlewares/FreeRTOS/portable/portmacro.h **** {
 231:Middlewares/FreeRTOS/portable/portmacro.h ****     uint32_t ulOriginalBASEPRI, ulNewBASEPRI;
 232:Middlewares/FreeRTOS/portable/portmacro.h **** 
 233:Middlewares/FreeRTOS/portable/portmacro.h ****     __asm volatile
 743              		.loc 2 233 5
 744              		.syntax unified
 745              	@ 233 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 746 0012 EFF31182 		   mrs r2, basepri                                         
 747 0016 4FF05003 	   mov r3, #80                                              
 748 001a 83F31188 	   msr basepri, r3                                         
 749 001e BFF36F8F 	   isb                                                     
 750 0022 BFF34F8F 	   dsb                                                     
 751              	
 752              	@ 0 "" 2
 753              		.thumb
 754              		.syntax unified
 755 0026 FA61     		str	r2, [r7, #28]
 756 0028 BB61     		str	r3, [r7, #24]
 234:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 235:Middlewares/FreeRTOS/portable/portmacro.h ****         "   mrs %0, basepri                                         \n" \
 236:Middlewares/FreeRTOS/portable/portmacro.h ****         "   mov %1, %2                                              \n" \
 237:Middlewares/FreeRTOS/portable/portmacro.h ****         "   msr basepri, %1                                         \n" \
 238:Middlewares/FreeRTOS/portable/portmacro.h ****         "   isb                                                     \n" \
 239:Middlewares/FreeRTOS/portable/portmacro.h ****         "   dsb                                                     \n" \
 240:Middlewares/FreeRTOS/portable/portmacro.h ****         : "=r" ( ulOriginalBASEPRI ), "=r" ( ulNewBASEPRI ) : "i" ( configMAX_SYSCALL_INTERRUPT_PRI
 241:Middlewares/FreeRTOS/portable/portmacro.h ****     );
 242:Middlewares/FreeRTOS/portable/portmacro.h **** 
 243:Middlewares/FreeRTOS/portable/portmacro.h ****     /* This return will not be reached but is necessary to prevent compiler
 244:Middlewares/FreeRTOS/portable/portmacro.h ****      * warnings. */
 245:Middlewares/FreeRTOS/portable/portmacro.h ****     return ulOriginalBASEPRI;
 757              		.loc 2 245 12
 758 002a FB69     		ldr	r3, [r7, #28]
 759              	.LBE27:
 760              	.LBE26:
1165:Middlewares/FreeRTOS/queue.c **** 
1166:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueueGenericSendFromISR( xQueue, pvItemToQueue, pxHigherPriorityTaskWoken, xCopyPos
1167:Middlewares/FreeRTOS/queue.c **** 
1168:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
1169:Middlewares/FreeRTOS/queue.c ****     configASSERT( !( ( pvItemToQueue == NULL ) && ( pxQueue->uxItemSize != ( UBaseType_t ) 0U ) ) )
1170:Middlewares/FreeRTOS/queue.c ****     configASSERT( !( ( xCopyPosition == queueOVERWRITE ) && ( pxQueue->uxLength != 1 ) ) );
ARM GAS  /tmp/cczksE0f.s 			page 39


1171:Middlewares/FreeRTOS/queue.c **** 
1172:Middlewares/FreeRTOS/queue.c ****     /* RTOS ports that support interrupt nesting have the concept of a maximum
1173:Middlewares/FreeRTOS/queue.c ****      * system call (or maximum API call) interrupt priority.  Interrupts that are
1174:Middlewares/FreeRTOS/queue.c ****      * above the maximum system call priority are kept permanently enabled, even
1175:Middlewares/FreeRTOS/queue.c ****      * when the RTOS kernel is in a critical section, but cannot make any calls to
1176:Middlewares/FreeRTOS/queue.c ****      * FreeRTOS API functions.  If configASSERT() is defined in FreeRTOSConfig.h
1177:Middlewares/FreeRTOS/queue.c ****      * then portASSERT_IF_INTERRUPT_PRIORITY_INVALID() will result in an assertion
1178:Middlewares/FreeRTOS/queue.c ****      * failure if a FreeRTOS API function is called from an interrupt that has been
1179:Middlewares/FreeRTOS/queue.c ****      * assigned a priority above the configured maximum system call priority.
1180:Middlewares/FreeRTOS/queue.c ****      * Only FreeRTOS functions that end in FromISR can be called from interrupts
1181:Middlewares/FreeRTOS/queue.c ****      * that have been assigned a priority at or (logically) below the maximum
1182:Middlewares/FreeRTOS/queue.c ****      * system call interrupt priority.  FreeRTOS maintains a separate interrupt
1183:Middlewares/FreeRTOS/queue.c ****      * safe API to ensure interrupt entry is as fast and as simple as possible.
1184:Middlewares/FreeRTOS/queue.c ****      * More information (albeit Cortex-M specific) is provided on the following
1185:Middlewares/FreeRTOS/queue.c ****      * link: https://www.FreeRTOS.org/RTOS-Cortex-M3-M4.html */
1186:Middlewares/FreeRTOS/queue.c ****     portASSERT_IF_INTERRUPT_PRIORITY_INVALID();
1187:Middlewares/FreeRTOS/queue.c **** 
1188:Middlewares/FreeRTOS/queue.c ****     /* Similar to xQueueGenericSend, except without blocking if there is no room
1189:Middlewares/FreeRTOS/queue.c ****      * in the queue.  Also don't directly wake a task that was blocked on a queue
1190:Middlewares/FreeRTOS/queue.c ****      * read, instead return a flag to say whether a context switch is required or
1191:Middlewares/FreeRTOS/queue.c ****      * not (i.e. has a task with a higher priority than us been woken by this
1192:Middlewares/FreeRTOS/queue.c ****      * post). */
1193:Middlewares/FreeRTOS/queue.c ****     /* MISRA Ref 4.7.1 [Return value shall be checked] */
1194:Middlewares/FreeRTOS/queue.c ****     /* More details at: https://github.com/FreeRTOS/FreeRTOS-Kernel/blob/main/MISRA.md#dir-47 */
1195:Middlewares/FreeRTOS/queue.c ****     /* coverity[misra_c_2012_directive_4_7_violation] */
1196:Middlewares/FreeRTOS/queue.c ****     uxSavedInterruptStatus = ( UBaseType_t ) taskENTER_CRITICAL_FROM_ISR();
 761              		.loc 1 1196 46
 762 002c FB62     		str	r3, [r7, #44]
1197:Middlewares/FreeRTOS/queue.c ****     {
1198:Middlewares/FreeRTOS/queue.c ****         if( ( pxQueue->uxMessagesWaiting < pxQueue->uxLength ) || ( xCopyPosition == queueOVERWRITE
 763              		.loc 1 1198 22
 764 002e 3B6B     		ldr	r3, [r7, #48]
 765 0030 9A6B     		ldr	r2, [r3, #56]
 766              		.loc 1 1198 51
 767 0032 3B6B     		ldr	r3, [r7, #48]
 768 0034 DB6B     		ldr	r3, [r3, #60]
 769              		.loc 1 1198 11
 770 0036 9A42     		cmp	r2, r3
 771 0038 02D3     		bcc	.L43
 772              		.loc 1 1198 64 discriminator 1
 773 003a 3B68     		ldr	r3, [r7]
 774 003c 022B     		cmp	r3, #2
 775 003e 37D1     		bne	.L44
 776              	.L43:
 777              	.LBB28:
1199:Middlewares/FreeRTOS/queue.c ****         {
1200:Middlewares/FreeRTOS/queue.c ****             const int8_t cTxLock = pxQueue->cTxLock;
 778              		.loc 1 1200 26
 779 0040 3B6B     		ldr	r3, [r7, #48]
 780 0042 93F84530 		ldrb	r3, [r3, #69]
 781 0046 87F82B30 		strb	r3, [r7, #43]
1201:Middlewares/FreeRTOS/queue.c ****             const UBaseType_t uxPreviousMessagesWaiting = pxQueue->uxMessagesWaiting;
 782              		.loc 1 1201 31
 783 004a 3B6B     		ldr	r3, [r7, #48]
 784 004c 9B6B     		ldr	r3, [r3, #56]
 785 004e 7B62     		str	r3, [r7, #36]
1202:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 40


1203:Middlewares/FreeRTOS/queue.c ****             traceQUEUE_SEND_FROM_ISR( pxQueue );
1204:Middlewares/FreeRTOS/queue.c **** 
1205:Middlewares/FreeRTOS/queue.c ****             /* Semaphores use xQueueGiveFromISR(), so pxQueue will not be a
1206:Middlewares/FreeRTOS/queue.c ****              *  semaphore or mutex.  That means prvCopyDataToQueue() cannot result
1207:Middlewares/FreeRTOS/queue.c ****              *  in a task disinheriting a priority and prvCopyDataToQueue() can be
1208:Middlewares/FreeRTOS/queue.c ****              *  called here even though the disinherit function does not check if
1209:Middlewares/FreeRTOS/queue.c ****              *  the scheduler is suspended before accessing the ready lists. */
1210:Middlewares/FreeRTOS/queue.c ****             ( void ) prvCopyDataToQueue( pxQueue, pvItemToQueue, xCopyPosition );
 786              		.loc 1 1210 22
 787 0050 3A68     		ldr	r2, [r7]
 788 0052 B968     		ldr	r1, [r7, #8]
 789 0054 386B     		ldr	r0, [r7, #48]
 790 0056 FFF7FEFF 		bl	prvCopyDataToQueue
1211:Middlewares/FreeRTOS/queue.c **** 
1212:Middlewares/FreeRTOS/queue.c ****             /* The event list is not altered if the queue is locked.  This will
1213:Middlewares/FreeRTOS/queue.c ****              * be done when the queue is unlocked later. */
1214:Middlewares/FreeRTOS/queue.c ****             if( cTxLock == queueUNLOCKED )
 791              		.loc 1 1214 15
 792 005a 97F92B30 		ldrsb	r3, [r7, #43]
 793 005e B3F1FF3F 		cmp	r3, #-1
 794 0062 12D1     		bne	.L45
1215:Middlewares/FreeRTOS/queue.c ****             {
1216:Middlewares/FreeRTOS/queue.c ****                 #if ( configUSE_QUEUE_SETS == 1 )
1217:Middlewares/FreeRTOS/queue.c ****                 {
1218:Middlewares/FreeRTOS/queue.c ****                     if( pxQueue->pxQueueSetContainer != NULL )
1219:Middlewares/FreeRTOS/queue.c ****                     {
1220:Middlewares/FreeRTOS/queue.c ****                         if( ( xCopyPosition == queueOVERWRITE ) && ( uxPreviousMessagesWaiting != (
1221:Middlewares/FreeRTOS/queue.c ****                         {
1222:Middlewares/FreeRTOS/queue.c ****                             /* Do not notify the queue set as an existing item
1223:Middlewares/FreeRTOS/queue.c ****                              * was overwritten in the queue so the number of items
1224:Middlewares/FreeRTOS/queue.c ****                              * in the queue has not changed. */
1225:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
1226:Middlewares/FreeRTOS/queue.c ****                         }
1227:Middlewares/FreeRTOS/queue.c ****                         else if( prvNotifyQueueSetContainer( pxQueue ) != pdFALSE )
1228:Middlewares/FreeRTOS/queue.c ****                         {
1229:Middlewares/FreeRTOS/queue.c ****                             /* The queue is a member of a queue set, and posting
1230:Middlewares/FreeRTOS/queue.c ****                              * to the queue set caused a higher priority task to
1231:Middlewares/FreeRTOS/queue.c ****                              * unblock.  A context switch is required. */
1232:Middlewares/FreeRTOS/queue.c ****                             if( pxHigherPriorityTaskWoken != NULL )
1233:Middlewares/FreeRTOS/queue.c ****                             {
1234:Middlewares/FreeRTOS/queue.c ****                                 *pxHigherPriorityTaskWoken = pdTRUE;
1235:Middlewares/FreeRTOS/queue.c ****                             }
1236:Middlewares/FreeRTOS/queue.c ****                             else
1237:Middlewares/FreeRTOS/queue.c ****                             {
1238:Middlewares/FreeRTOS/queue.c ****                                 mtCOVERAGE_TEST_MARKER();
1239:Middlewares/FreeRTOS/queue.c ****                             }
1240:Middlewares/FreeRTOS/queue.c ****                         }
1241:Middlewares/FreeRTOS/queue.c ****                         else
1242:Middlewares/FreeRTOS/queue.c ****                         {
1243:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
1244:Middlewares/FreeRTOS/queue.c ****                         }
1245:Middlewares/FreeRTOS/queue.c ****                     }
1246:Middlewares/FreeRTOS/queue.c ****                     else
1247:Middlewares/FreeRTOS/queue.c ****                     {
1248:Middlewares/FreeRTOS/queue.c ****                         if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToReceive ) ) == pdFALSE )
1249:Middlewares/FreeRTOS/queue.c ****                         {
1250:Middlewares/FreeRTOS/queue.c ****                             if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToReceive ) ) !=
ARM GAS  /tmp/cczksE0f.s 			page 41


1251:Middlewares/FreeRTOS/queue.c ****                             {
1252:Middlewares/FreeRTOS/queue.c ****                                 /* The task waiting has a higher priority so
1253:Middlewares/FreeRTOS/queue.c ****                                  *  record that a context switch is required. */
1254:Middlewares/FreeRTOS/queue.c ****                                 if( pxHigherPriorityTaskWoken != NULL )
1255:Middlewares/FreeRTOS/queue.c ****                                 {
1256:Middlewares/FreeRTOS/queue.c ****                                     *pxHigherPriorityTaskWoken = pdTRUE;
1257:Middlewares/FreeRTOS/queue.c ****                                 }
1258:Middlewares/FreeRTOS/queue.c ****                                 else
1259:Middlewares/FreeRTOS/queue.c ****                                 {
1260:Middlewares/FreeRTOS/queue.c ****                                     mtCOVERAGE_TEST_MARKER();
1261:Middlewares/FreeRTOS/queue.c ****                                 }
1262:Middlewares/FreeRTOS/queue.c ****                             }
1263:Middlewares/FreeRTOS/queue.c ****                             else
1264:Middlewares/FreeRTOS/queue.c ****                             {
1265:Middlewares/FreeRTOS/queue.c ****                                 mtCOVERAGE_TEST_MARKER();
1266:Middlewares/FreeRTOS/queue.c ****                             }
1267:Middlewares/FreeRTOS/queue.c ****                         }
1268:Middlewares/FreeRTOS/queue.c ****                         else
1269:Middlewares/FreeRTOS/queue.c ****                         {
1270:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
1271:Middlewares/FreeRTOS/queue.c ****                         }
1272:Middlewares/FreeRTOS/queue.c ****                     }
1273:Middlewares/FreeRTOS/queue.c ****                 }
1274:Middlewares/FreeRTOS/queue.c ****                 #else /* configUSE_QUEUE_SETS */
1275:Middlewares/FreeRTOS/queue.c ****                 {
1276:Middlewares/FreeRTOS/queue.c ****                     if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToReceive ) ) == pdFALSE )
 795              		.loc 1 1276 25
 796 0064 3B6B     		ldr	r3, [r7, #48]
 797 0066 5B6A     		ldr	r3, [r3, #36]
 798              		.loc 1 1276 23
 799 0068 002B     		cmp	r3, #0
 800 006a 1ED0     		beq	.L46
1277:Middlewares/FreeRTOS/queue.c ****                     {
1278:Middlewares/FreeRTOS/queue.c ****                         if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToReceive ) ) != pdF
 801              		.loc 1 1278 55
 802 006c 3B6B     		ldr	r3, [r7, #48]
 803 006e 2433     		adds	r3, r3, #36
 804              		.loc 1 1278 29
 805 0070 1846     		mov	r0, r3
 806 0072 FFF7FEFF 		bl	xTaskRemoveFromEventList
 807 0076 0346     		mov	r3, r0
 808              		.loc 1 1278 27 discriminator 1
 809 0078 002B     		cmp	r3, #0
 810 007a 16D0     		beq	.L46
1279:Middlewares/FreeRTOS/queue.c ****                         {
1280:Middlewares/FreeRTOS/queue.c ****                             /* The task waiting has a higher priority so record that a
1281:Middlewares/FreeRTOS/queue.c ****                              * context switch is required. */
1282:Middlewares/FreeRTOS/queue.c ****                             if( pxHigherPriorityTaskWoken != NULL )
 811              		.loc 1 1282 31
 812 007c 7B68     		ldr	r3, [r7, #4]
 813 007e 002B     		cmp	r3, #0
 814 0080 13D0     		beq	.L46
1283:Middlewares/FreeRTOS/queue.c ****                             {
1284:Middlewares/FreeRTOS/queue.c ****                                 *pxHigherPriorityTaskWoken = pdTRUE;
 815              		.loc 1 1284 60
 816 0082 7B68     		ldr	r3, [r7, #4]
 817 0084 0122     		movs	r2, #1
ARM GAS  /tmp/cczksE0f.s 			page 42


 818 0086 1A60     		str	r2, [r3]
 819 0088 0FE0     		b	.L46
 820              	.L45:
 821              	.LBB29:
1285:Middlewares/FreeRTOS/queue.c ****                             }
1286:Middlewares/FreeRTOS/queue.c ****                             else
1287:Middlewares/FreeRTOS/queue.c ****                             {
1288:Middlewares/FreeRTOS/queue.c ****                                 mtCOVERAGE_TEST_MARKER();
1289:Middlewares/FreeRTOS/queue.c ****                             }
1290:Middlewares/FreeRTOS/queue.c ****                         }
1291:Middlewares/FreeRTOS/queue.c ****                         else
1292:Middlewares/FreeRTOS/queue.c ****                         {
1293:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
1294:Middlewares/FreeRTOS/queue.c ****                         }
1295:Middlewares/FreeRTOS/queue.c ****                     }
1296:Middlewares/FreeRTOS/queue.c ****                     else
1297:Middlewares/FreeRTOS/queue.c ****                     {
1298:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
1299:Middlewares/FreeRTOS/queue.c ****                     }
1300:Middlewares/FreeRTOS/queue.c **** 
1301:Middlewares/FreeRTOS/queue.c ****                     /* Not used in this path. */
1302:Middlewares/FreeRTOS/queue.c ****                     ( void ) uxPreviousMessagesWaiting;
1303:Middlewares/FreeRTOS/queue.c ****                 }
1304:Middlewares/FreeRTOS/queue.c ****                 #endif /* configUSE_QUEUE_SETS */
1305:Middlewares/FreeRTOS/queue.c ****             }
1306:Middlewares/FreeRTOS/queue.c ****             else
1307:Middlewares/FreeRTOS/queue.c ****             {
1308:Middlewares/FreeRTOS/queue.c ****                 /* Increment the lock count so the task that unlocks the queue
1309:Middlewares/FreeRTOS/queue.c ****                  * knows that data was posted while it was locked. */
1310:Middlewares/FreeRTOS/queue.c ****                 prvIncrementQueueTxLock( pxQueue, cTxLock );
 822              		.loc 1 1310 17
 823 008a FFF7FEFF 		bl	uxTaskGetNumberOfTasks
 824 008e 3862     		str	r0, [r7, #32]
 825              		.loc 1 1310 17 is_stmt 0 discriminator 1
 826 0090 97F92B30 		ldrsb	r3, [r7, #43]
 827 0094 3A6A     		ldr	r2, [r7, #32]
 828 0096 9A42     		cmp	r2, r3
 829 0098 07D9     		bls	.L46
 830 009a 97F82B30 		ldrb	r3, [r7, #43]	@ zero_extendqisi2
 831 009e 0133     		adds	r3, r3, #1
 832 00a0 DBB2     		uxtb	r3, r3
 833 00a2 5AB2     		sxtb	r2, r3
 834 00a4 3B6B     		ldr	r3, [r7, #48]
 835 00a6 83F84520 		strb	r2, [r3, #69]
 836              	.L46:
 837              	.LBE29:
1311:Middlewares/FreeRTOS/queue.c ****             }
1312:Middlewares/FreeRTOS/queue.c **** 
1313:Middlewares/FreeRTOS/queue.c ****             xReturn = pdPASS;
 838              		.loc 1 1313 21 is_stmt 1
 839 00aa 0123     		movs	r3, #1
 840 00ac 7B63     		str	r3, [r7, #52]
 841              	.LBE28:
1199:Middlewares/FreeRTOS/queue.c ****             const int8_t cTxLock = pxQueue->cTxLock;
 842              		.loc 1 1199 9
 843 00ae 01E0     		b	.L47
 844              	.L44:
ARM GAS  /tmp/cczksE0f.s 			page 43


1314:Middlewares/FreeRTOS/queue.c ****         }
1315:Middlewares/FreeRTOS/queue.c ****         else
1316:Middlewares/FreeRTOS/queue.c ****         {
1317:Middlewares/FreeRTOS/queue.c ****             traceQUEUE_SEND_FROM_ISR_FAILED( pxQueue );
1318:Middlewares/FreeRTOS/queue.c ****             xReturn = errQUEUE_FULL;
 845              		.loc 1 1318 21
 846 00b0 0023     		movs	r3, #0
 847 00b2 7B63     		str	r3, [r7, #52]
 848              	.L47:
 849 00b4 FB6A     		ldr	r3, [r7, #44]
 850 00b6 7B61     		str	r3, [r7, #20]
 851              	.LBB30:
 852              	.LBB31:
 246:Middlewares/FreeRTOS/portable/portmacro.h **** }
 247:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 248:Middlewares/FreeRTOS/portable/portmacro.h **** 
 249:Middlewares/FreeRTOS/portable/portmacro.h **** portFORCE_INLINE static void vPortSetBASEPRI( uint32_t ulNewMaskValue )
 250:Middlewares/FreeRTOS/portable/portmacro.h **** {
 251:Middlewares/FreeRTOS/portable/portmacro.h ****     __asm volatile
 853              		.loc 2 251 5
 854 00b8 7B69     		ldr	r3, [r7, #20]
 855              		.syntax unified
 856              	@ 251 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 857 00ba 83F31188 		   msr basepri, r3 
 858              	@ 0 "" 2
 252:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 253:Middlewares/FreeRTOS/portable/portmacro.h ****         "   msr basepri, %0 " ::"r" ( ulNewMaskValue ) : "memory"
 254:Middlewares/FreeRTOS/portable/portmacro.h ****     );
 255:Middlewares/FreeRTOS/portable/portmacro.h **** }
 859              		.loc 2 255 1
 860              		.thumb
 861              		.syntax unified
 862 00be 00BF     		nop
 863              	.LBE31:
 864              	.LBE30:
1319:Middlewares/FreeRTOS/queue.c ****         }
1320:Middlewares/FreeRTOS/queue.c ****     }
1321:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL_FROM_ISR( uxSavedInterruptStatus );
1322:Middlewares/FreeRTOS/queue.c **** 
1323:Middlewares/FreeRTOS/queue.c ****     traceRETURN_xQueueGenericSendFromISR( xReturn );
1324:Middlewares/FreeRTOS/queue.c **** 
1325:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 865              		.loc 1 1325 12
 866 00c0 7B6B     		ldr	r3, [r7, #52]
1326:Middlewares/FreeRTOS/queue.c **** }
 867              		.loc 1 1326 1
 868 00c2 1846     		mov	r0, r3
 869 00c4 3837     		adds	r7, r7, #56
 870              		.cfi_def_cfa_offset 8
 871 00c6 BD46     		mov	sp, r7
 872              		.cfi_def_cfa_register 13
 873              		@ sp needed
 874 00c8 80BD     		pop	{r7, pc}
 875              		.cfi_endproc
 876              	.LFE10:
 878              		.section	.text.xQueueGiveFromISR,"ax",%progbits
 879              		.align	1
ARM GAS  /tmp/cczksE0f.s 			page 44


 880              		.global	xQueueGiveFromISR
 881              		.syntax unified
 882              		.thumb
 883              		.thumb_func
 885              	xQueueGiveFromISR:
 886              	.LFB11:
1327:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
1328:Middlewares/FreeRTOS/queue.c **** 
1329:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueueGiveFromISR( QueueHandle_t xQueue,
1330:Middlewares/FreeRTOS/queue.c ****                               BaseType_t * const pxHigherPriorityTaskWoken )
1331:Middlewares/FreeRTOS/queue.c **** {
 887              		.loc 1 1331 1
 888              		.cfi_startproc
 889              		@ args = 0, pretend = 0, frame = 48
 890              		@ frame_needed = 1, uses_anonymous_args = 0
 891 0000 80B5     		push	{r7, lr}
 892              		.cfi_def_cfa_offset 8
 893              		.cfi_offset 7, -8
 894              		.cfi_offset 14, -4
 895 0002 8CB0     		sub	sp, sp, #48
 896              		.cfi_def_cfa_offset 56
 897 0004 00AF     		add	r7, sp, #0
 898              		.cfi_def_cfa_register 7
 899 0006 7860     		str	r0, [r7, #4]
 900 0008 3960     		str	r1, [r7]
1332:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn;
1333:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxSavedInterruptStatus;
1334:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 901              		.loc 1 1334 21
 902 000a 7B68     		ldr	r3, [r7, #4]
 903 000c BB62     		str	r3, [r7, #40]
 904              	.LBB32:
 905              	.LBB33:
 233:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 906              		.loc 2 233 5
 907              		.syntax unified
 908              	@ 233 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 909 000e EFF31182 		   mrs r2, basepri                                         
 910 0012 4FF05003 	   mov r3, #80                                              
 911 0016 83F31188 	   msr basepri, r3                                         
 912 001a BFF36F8F 	   isb                                                     
 913 001e BFF34F8F 	   dsb                                                     
 914              	
 915              	@ 0 "" 2
 916              		.thumb
 917              		.syntax unified
 918 0022 7A61     		str	r2, [r7, #20]
 919 0024 3B61     		str	r3, [r7, #16]
 245:Middlewares/FreeRTOS/portable/portmacro.h **** }
 920              		.loc 2 245 12
 921 0026 7B69     		ldr	r3, [r7, #20]
 922              	.LBE33:
 923              	.LBE32:
1335:Middlewares/FreeRTOS/queue.c **** 
1336:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueueGiveFromISR( xQueue, pxHigherPriorityTaskWoken );
1337:Middlewares/FreeRTOS/queue.c **** 
1338:Middlewares/FreeRTOS/queue.c ****     /* Similar to xQueueGenericSendFromISR() but used with semaphores where the
ARM GAS  /tmp/cczksE0f.s 			page 45


1339:Middlewares/FreeRTOS/queue.c ****      * item size is 0.  Don't directly wake a task that was blocked on a queue
1340:Middlewares/FreeRTOS/queue.c ****      * read, instead return a flag to say whether a context switch is required or
1341:Middlewares/FreeRTOS/queue.c ****      * not (i.e. has a task with a higher priority than us been woken by this
1342:Middlewares/FreeRTOS/queue.c ****      * post). */
1343:Middlewares/FreeRTOS/queue.c **** 
1344:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
1345:Middlewares/FreeRTOS/queue.c **** 
1346:Middlewares/FreeRTOS/queue.c ****     /* xQueueGenericSendFromISR() should be used instead of xQueueGiveFromISR()
1347:Middlewares/FreeRTOS/queue.c ****      * if the item size is not 0. */
1348:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue->uxItemSize == 0 );
1349:Middlewares/FreeRTOS/queue.c **** 
1350:Middlewares/FreeRTOS/queue.c ****     /* Normally a mutex would not be given from an interrupt, especially if
1351:Middlewares/FreeRTOS/queue.c ****      * there is a mutex holder, as priority inheritance makes no sense for an
1352:Middlewares/FreeRTOS/queue.c ****      * interrupts, only tasks. */
1353:Middlewares/FreeRTOS/queue.c ****     configASSERT( !( ( pxQueue->uxQueueType == queueQUEUE_IS_MUTEX ) && ( pxQueue->u.xSemaphore.xMu
1354:Middlewares/FreeRTOS/queue.c **** 
1355:Middlewares/FreeRTOS/queue.c ****     /* RTOS ports that support interrupt nesting have the concept of a maximum
1356:Middlewares/FreeRTOS/queue.c ****      * system call (or maximum API call) interrupt priority.  Interrupts that are
1357:Middlewares/FreeRTOS/queue.c ****      * above the maximum system call priority are kept permanently enabled, even
1358:Middlewares/FreeRTOS/queue.c ****      * when the RTOS kernel is in a critical section, but cannot make any calls to
1359:Middlewares/FreeRTOS/queue.c ****      * FreeRTOS API functions.  If configASSERT() is defined in FreeRTOSConfig.h
1360:Middlewares/FreeRTOS/queue.c ****      * then portASSERT_IF_INTERRUPT_PRIORITY_INVALID() will result in an assertion
1361:Middlewares/FreeRTOS/queue.c ****      * failure if a FreeRTOS API function is called from an interrupt that has been
1362:Middlewares/FreeRTOS/queue.c ****      * assigned a priority above the configured maximum system call priority.
1363:Middlewares/FreeRTOS/queue.c ****      * Only FreeRTOS functions that end in FromISR can be called from interrupts
1364:Middlewares/FreeRTOS/queue.c ****      * that have been assigned a priority at or (logically) below the maximum
1365:Middlewares/FreeRTOS/queue.c ****      * system call interrupt priority.  FreeRTOS maintains a separate interrupt
1366:Middlewares/FreeRTOS/queue.c ****      * safe API to ensure interrupt entry is as fast and as simple as possible.
1367:Middlewares/FreeRTOS/queue.c ****      * More information (albeit Cortex-M specific) is provided on the following
1368:Middlewares/FreeRTOS/queue.c ****      * link: https://www.FreeRTOS.org/RTOS-Cortex-M3-M4.html */
1369:Middlewares/FreeRTOS/queue.c ****     portASSERT_IF_INTERRUPT_PRIORITY_INVALID();
1370:Middlewares/FreeRTOS/queue.c **** 
1371:Middlewares/FreeRTOS/queue.c ****     /* MISRA Ref 4.7.1 [Return value shall be checked] */
1372:Middlewares/FreeRTOS/queue.c ****     /* More details at: https://github.com/FreeRTOS/FreeRTOS-Kernel/blob/main/MISRA.md#dir-47 */
1373:Middlewares/FreeRTOS/queue.c ****     /* coverity[misra_c_2012_directive_4_7_violation] */
1374:Middlewares/FreeRTOS/queue.c ****     uxSavedInterruptStatus = ( UBaseType_t ) taskENTER_CRITICAL_FROM_ISR();
 924              		.loc 1 1374 46
 925 0028 7B62     		str	r3, [r7, #36]
 926              	.LBB34:
1375:Middlewares/FreeRTOS/queue.c ****     {
1376:Middlewares/FreeRTOS/queue.c ****         const UBaseType_t uxMessagesWaiting = pxQueue->uxMessagesWaiting;
 927              		.loc 1 1376 27
 928 002a BB6A     		ldr	r3, [r7, #40]
 929 002c 9B6B     		ldr	r3, [r3, #56]
 930 002e 3B62     		str	r3, [r7, #32]
1377:Middlewares/FreeRTOS/queue.c **** 
1378:Middlewares/FreeRTOS/queue.c ****         /* When the queue is used to implement a semaphore no data is ever
1379:Middlewares/FreeRTOS/queue.c ****          * moved through the queue but it is still valid to see if the queue 'has
1380:Middlewares/FreeRTOS/queue.c ****          * space'. */
1381:Middlewares/FreeRTOS/queue.c ****         if( uxMessagesWaiting < pxQueue->uxLength )
 931              		.loc 1 1381 40
 932 0030 BB6A     		ldr	r3, [r7, #40]
 933 0032 DB6B     		ldr	r3, [r3, #60]
 934              		.loc 1 1381 11
 935 0034 3A6A     		ldr	r2, [r7, #32]
 936 0036 9A42     		cmp	r2, r3
 937 0038 31D2     		bcs	.L51
ARM GAS  /tmp/cczksE0f.s 			page 46


 938              	.LBB35:
1382:Middlewares/FreeRTOS/queue.c ****         {
1383:Middlewares/FreeRTOS/queue.c ****             const int8_t cTxLock = pxQueue->cTxLock;
 939              		.loc 1 1383 26
 940 003a BB6A     		ldr	r3, [r7, #40]
 941 003c 93F84530 		ldrb	r3, [r3, #69]
 942 0040 FB77     		strb	r3, [r7, #31]
1384:Middlewares/FreeRTOS/queue.c **** 
1385:Middlewares/FreeRTOS/queue.c ****             traceQUEUE_SEND_FROM_ISR( pxQueue );
1386:Middlewares/FreeRTOS/queue.c **** 
1387:Middlewares/FreeRTOS/queue.c ****             /* A task can only have an inherited priority if it is a mutex
1388:Middlewares/FreeRTOS/queue.c ****              * holder - and if there is a mutex holder then the mutex cannot be
1389:Middlewares/FreeRTOS/queue.c ****              * given from an ISR.  As this is the ISR version of the function it
1390:Middlewares/FreeRTOS/queue.c ****              * can be assumed there is no mutex holder and no need to determine if
1391:Middlewares/FreeRTOS/queue.c ****              * priority disinheritance is needed.  Simply increase the count of
1392:Middlewares/FreeRTOS/queue.c ****              * messages (semaphores) available. */
1393:Middlewares/FreeRTOS/queue.c ****             pxQueue->uxMessagesWaiting = ( UBaseType_t ) ( uxMessagesWaiting + ( UBaseType_t ) 1 );
 943              		.loc 1 1393 42
 944 0042 3B6A     		ldr	r3, [r7, #32]
 945 0044 5A1C     		adds	r2, r3, #1
 946              		.loc 1 1393 40
 947 0046 BB6A     		ldr	r3, [r7, #40]
 948 0048 9A63     		str	r2, [r3, #56]
1394:Middlewares/FreeRTOS/queue.c **** 
1395:Middlewares/FreeRTOS/queue.c ****             /* The event list is not altered if the queue is locked.  This will
1396:Middlewares/FreeRTOS/queue.c ****              * be done when the queue is unlocked later. */
1397:Middlewares/FreeRTOS/queue.c ****             if( cTxLock == queueUNLOCKED )
 949              		.loc 1 1397 15
 950 004a 97F91F30 		ldrsb	r3, [r7, #31]
 951 004e B3F1FF3F 		cmp	r3, #-1
 952 0052 12D1     		bne	.L52
1398:Middlewares/FreeRTOS/queue.c ****             {
1399:Middlewares/FreeRTOS/queue.c ****                 #if ( configUSE_QUEUE_SETS == 1 )
1400:Middlewares/FreeRTOS/queue.c ****                 {
1401:Middlewares/FreeRTOS/queue.c ****                     if( pxQueue->pxQueueSetContainer != NULL )
1402:Middlewares/FreeRTOS/queue.c ****                     {
1403:Middlewares/FreeRTOS/queue.c ****                         if( prvNotifyQueueSetContainer( pxQueue ) != pdFALSE )
1404:Middlewares/FreeRTOS/queue.c ****                         {
1405:Middlewares/FreeRTOS/queue.c ****                             /* The semaphore is a member of a queue set, and
1406:Middlewares/FreeRTOS/queue.c ****                              * posting to the queue set caused a higher priority
1407:Middlewares/FreeRTOS/queue.c ****                              * task to unblock.  A context switch is required. */
1408:Middlewares/FreeRTOS/queue.c ****                             if( pxHigherPriorityTaskWoken != NULL )
1409:Middlewares/FreeRTOS/queue.c ****                             {
1410:Middlewares/FreeRTOS/queue.c ****                                 *pxHigherPriorityTaskWoken = pdTRUE;
1411:Middlewares/FreeRTOS/queue.c ****                             }
1412:Middlewares/FreeRTOS/queue.c ****                             else
1413:Middlewares/FreeRTOS/queue.c ****                             {
1414:Middlewares/FreeRTOS/queue.c ****                                 mtCOVERAGE_TEST_MARKER();
1415:Middlewares/FreeRTOS/queue.c ****                             }
1416:Middlewares/FreeRTOS/queue.c ****                         }
1417:Middlewares/FreeRTOS/queue.c ****                         else
1418:Middlewares/FreeRTOS/queue.c ****                         {
1419:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
1420:Middlewares/FreeRTOS/queue.c ****                         }
1421:Middlewares/FreeRTOS/queue.c ****                     }
1422:Middlewares/FreeRTOS/queue.c ****                     else
1423:Middlewares/FreeRTOS/queue.c ****                     {
ARM GAS  /tmp/cczksE0f.s 			page 47


1424:Middlewares/FreeRTOS/queue.c ****                         if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToReceive ) ) == pdFALSE )
1425:Middlewares/FreeRTOS/queue.c ****                         {
1426:Middlewares/FreeRTOS/queue.c ****                             if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToReceive ) ) !=
1427:Middlewares/FreeRTOS/queue.c ****                             {
1428:Middlewares/FreeRTOS/queue.c ****                                 /* The task waiting has a higher priority so
1429:Middlewares/FreeRTOS/queue.c ****                                  *  record that a context switch is required. */
1430:Middlewares/FreeRTOS/queue.c ****                                 if( pxHigherPriorityTaskWoken != NULL )
1431:Middlewares/FreeRTOS/queue.c ****                                 {
1432:Middlewares/FreeRTOS/queue.c ****                                     *pxHigherPriorityTaskWoken = pdTRUE;
1433:Middlewares/FreeRTOS/queue.c ****                                 }
1434:Middlewares/FreeRTOS/queue.c ****                                 else
1435:Middlewares/FreeRTOS/queue.c ****                                 {
1436:Middlewares/FreeRTOS/queue.c ****                                     mtCOVERAGE_TEST_MARKER();
1437:Middlewares/FreeRTOS/queue.c ****                                 }
1438:Middlewares/FreeRTOS/queue.c ****                             }
1439:Middlewares/FreeRTOS/queue.c ****                             else
1440:Middlewares/FreeRTOS/queue.c ****                             {
1441:Middlewares/FreeRTOS/queue.c ****                                 mtCOVERAGE_TEST_MARKER();
1442:Middlewares/FreeRTOS/queue.c ****                             }
1443:Middlewares/FreeRTOS/queue.c ****                         }
1444:Middlewares/FreeRTOS/queue.c ****                         else
1445:Middlewares/FreeRTOS/queue.c ****                         {
1446:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
1447:Middlewares/FreeRTOS/queue.c ****                         }
1448:Middlewares/FreeRTOS/queue.c ****                     }
1449:Middlewares/FreeRTOS/queue.c ****                 }
1450:Middlewares/FreeRTOS/queue.c ****                 #else /* configUSE_QUEUE_SETS */
1451:Middlewares/FreeRTOS/queue.c ****                 {
1452:Middlewares/FreeRTOS/queue.c ****                     if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToReceive ) ) == pdFALSE )
 953              		.loc 1 1452 25
 954 0054 BB6A     		ldr	r3, [r7, #40]
 955 0056 5B6A     		ldr	r3, [r3, #36]
 956              		.loc 1 1452 23
 957 0058 002B     		cmp	r3, #0
 958 005a 1DD0     		beq	.L53
1453:Middlewares/FreeRTOS/queue.c ****                     {
1454:Middlewares/FreeRTOS/queue.c ****                         if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToReceive ) ) != pdF
 959              		.loc 1 1454 55
 960 005c BB6A     		ldr	r3, [r7, #40]
 961 005e 2433     		adds	r3, r3, #36
 962              		.loc 1 1454 29
 963 0060 1846     		mov	r0, r3
 964 0062 FFF7FEFF 		bl	xTaskRemoveFromEventList
 965 0066 0346     		mov	r3, r0
 966              		.loc 1 1454 27 discriminator 1
 967 0068 002B     		cmp	r3, #0
 968 006a 15D0     		beq	.L53
1455:Middlewares/FreeRTOS/queue.c ****                         {
1456:Middlewares/FreeRTOS/queue.c ****                             /* The task waiting has a higher priority so record that a
1457:Middlewares/FreeRTOS/queue.c ****                              * context switch is required. */
1458:Middlewares/FreeRTOS/queue.c ****                             if( pxHigherPriorityTaskWoken != NULL )
 969              		.loc 1 1458 31
 970 006c 3B68     		ldr	r3, [r7]
 971 006e 002B     		cmp	r3, #0
 972 0070 12D0     		beq	.L53
1459:Middlewares/FreeRTOS/queue.c ****                             {
1460:Middlewares/FreeRTOS/queue.c ****                                 *pxHigherPriorityTaskWoken = pdTRUE;
ARM GAS  /tmp/cczksE0f.s 			page 48


 973              		.loc 1 1460 60
 974 0072 3B68     		ldr	r3, [r7]
 975 0074 0122     		movs	r2, #1
 976 0076 1A60     		str	r2, [r3]
 977 0078 0EE0     		b	.L53
 978              	.L52:
 979              	.LBB36:
1461:Middlewares/FreeRTOS/queue.c ****                             }
1462:Middlewares/FreeRTOS/queue.c ****                             else
1463:Middlewares/FreeRTOS/queue.c ****                             {
1464:Middlewares/FreeRTOS/queue.c ****                                 mtCOVERAGE_TEST_MARKER();
1465:Middlewares/FreeRTOS/queue.c ****                             }
1466:Middlewares/FreeRTOS/queue.c ****                         }
1467:Middlewares/FreeRTOS/queue.c ****                         else
1468:Middlewares/FreeRTOS/queue.c ****                         {
1469:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
1470:Middlewares/FreeRTOS/queue.c ****                         }
1471:Middlewares/FreeRTOS/queue.c ****                     }
1472:Middlewares/FreeRTOS/queue.c ****                     else
1473:Middlewares/FreeRTOS/queue.c ****                     {
1474:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
1475:Middlewares/FreeRTOS/queue.c ****                     }
1476:Middlewares/FreeRTOS/queue.c ****                 }
1477:Middlewares/FreeRTOS/queue.c ****                 #endif /* configUSE_QUEUE_SETS */
1478:Middlewares/FreeRTOS/queue.c ****             }
1479:Middlewares/FreeRTOS/queue.c ****             else
1480:Middlewares/FreeRTOS/queue.c ****             {
1481:Middlewares/FreeRTOS/queue.c ****                 /* Increment the lock count so the task that unlocks the queue
1482:Middlewares/FreeRTOS/queue.c ****                  * knows that data was posted while it was locked. */
1483:Middlewares/FreeRTOS/queue.c ****                 prvIncrementQueueTxLock( pxQueue, cTxLock );
 980              		.loc 1 1483 17
 981 007a FFF7FEFF 		bl	uxTaskGetNumberOfTasks
 982 007e B861     		str	r0, [r7, #24]
 983              		.loc 1 1483 17 is_stmt 0 discriminator 1
 984 0080 97F91F30 		ldrsb	r3, [r7, #31]
 985 0084 BA69     		ldr	r2, [r7, #24]
 986 0086 9A42     		cmp	r2, r3
 987 0088 06D9     		bls	.L53
 988 008a FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 989 008c 0133     		adds	r3, r3, #1
 990 008e DBB2     		uxtb	r3, r3
 991 0090 5AB2     		sxtb	r2, r3
 992 0092 BB6A     		ldr	r3, [r7, #40]
 993 0094 83F84520 		strb	r2, [r3, #69]
 994              	.L53:
 995              	.LBE36:
1484:Middlewares/FreeRTOS/queue.c ****             }
1485:Middlewares/FreeRTOS/queue.c **** 
1486:Middlewares/FreeRTOS/queue.c ****             xReturn = pdPASS;
 996              		.loc 1 1486 21 is_stmt 1
 997 0098 0123     		movs	r3, #1
 998 009a FB62     		str	r3, [r7, #44]
 999              	.LBE35:
 1000 009c 01E0     		b	.L54
 1001              	.L51:
1487:Middlewares/FreeRTOS/queue.c ****         }
1488:Middlewares/FreeRTOS/queue.c ****         else
ARM GAS  /tmp/cczksE0f.s 			page 49


1489:Middlewares/FreeRTOS/queue.c ****         {
1490:Middlewares/FreeRTOS/queue.c ****             traceQUEUE_SEND_FROM_ISR_FAILED( pxQueue );
1491:Middlewares/FreeRTOS/queue.c ****             xReturn = errQUEUE_FULL;
 1002              		.loc 1 1491 21
 1003 009e 0023     		movs	r3, #0
 1004 00a0 FB62     		str	r3, [r7, #44]
 1005              	.L54:
 1006 00a2 7B6A     		ldr	r3, [r7, #36]
 1007 00a4 FB60     		str	r3, [r7, #12]
 1008              	.LBE34:
 1009              	.LBB37:
 1010              	.LBB38:
 251:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 1011              		.loc 2 251 5
 1012 00a6 FB68     		ldr	r3, [r7, #12]
 1013              		.syntax unified
 1014              	@ 251 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 1015 00a8 83F31188 		   msr basepri, r3 
 1016              	@ 0 "" 2
 1017              		.loc 2 255 1
 1018              		.thumb
 1019              		.syntax unified
 1020 00ac 00BF     		nop
 1021              	.LBE38:
 1022              	.LBE37:
1492:Middlewares/FreeRTOS/queue.c ****         }
1493:Middlewares/FreeRTOS/queue.c ****     }
1494:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL_FROM_ISR( uxSavedInterruptStatus );
1495:Middlewares/FreeRTOS/queue.c **** 
1496:Middlewares/FreeRTOS/queue.c ****     traceRETURN_xQueueGiveFromISR( xReturn );
1497:Middlewares/FreeRTOS/queue.c **** 
1498:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 1023              		.loc 1 1498 12
 1024 00ae FB6A     		ldr	r3, [r7, #44]
1499:Middlewares/FreeRTOS/queue.c **** }
 1025              		.loc 1 1499 1
 1026 00b0 1846     		mov	r0, r3
 1027 00b2 3037     		adds	r7, r7, #48
 1028              		.cfi_def_cfa_offset 8
 1029 00b4 BD46     		mov	sp, r7
 1030              		.cfi_def_cfa_register 13
 1031              		@ sp needed
 1032 00b6 80BD     		pop	{r7, pc}
 1033              		.cfi_endproc
 1034              	.LFE11:
 1036              		.section	.text.xQueueReceive,"ax",%progbits
 1037              		.align	1
 1038              		.global	xQueueReceive
 1039              		.syntax unified
 1040              		.thumb
 1041              		.thumb_func
 1043              	xQueueReceive:
 1044              	.LFB12:
1500:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
1501:Middlewares/FreeRTOS/queue.c **** 
1502:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueueReceive( QueueHandle_t xQueue,
1503:Middlewares/FreeRTOS/queue.c ****                           void * const pvBuffer,
ARM GAS  /tmp/cczksE0f.s 			page 50


1504:Middlewares/FreeRTOS/queue.c ****                           TickType_t xTicksToWait )
1505:Middlewares/FreeRTOS/queue.c **** {
 1045              		.loc 1 1505 1
 1046              		.cfi_startproc
 1047              		@ args = 0, pretend = 0, frame = 40
 1048              		@ frame_needed = 1, uses_anonymous_args = 0
 1049 0000 80B5     		push	{r7, lr}
 1050              		.cfi_def_cfa_offset 8
 1051              		.cfi_offset 7, -8
 1052              		.cfi_offset 14, -4
 1053 0002 8AB0     		sub	sp, sp, #40
 1054              		.cfi_def_cfa_offset 48
 1055 0004 00AF     		add	r7, sp, #0
 1056              		.cfi_def_cfa_register 7
 1057 0006 F860     		str	r0, [r7, #12]
 1058 0008 B960     		str	r1, [r7, #8]
 1059 000a 7A60     		str	r2, [r7, #4]
1506:Middlewares/FreeRTOS/queue.c ****     BaseType_t xEntryTimeSet = pdFALSE;
 1060              		.loc 1 1506 16
 1061 000c 0023     		movs	r3, #0
 1062 000e 7B62     		str	r3, [r7, #36]
1507:Middlewares/FreeRTOS/queue.c ****     TimeOut_t xTimeOut;
1508:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 1063              		.loc 1 1508 21
 1064 0010 FB68     		ldr	r3, [r7, #12]
 1065 0012 3B62     		str	r3, [r7, #32]
 1066              	.L67:
1509:Middlewares/FreeRTOS/queue.c **** 
1510:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueueReceive( xQueue, pvBuffer, xTicksToWait );
1511:Middlewares/FreeRTOS/queue.c **** 
1512:Middlewares/FreeRTOS/queue.c ****     /* Check the pointer is not NULL. */
1513:Middlewares/FreeRTOS/queue.c ****     configASSERT( ( pxQueue ) );
1514:Middlewares/FreeRTOS/queue.c **** 
1515:Middlewares/FreeRTOS/queue.c ****     /* The buffer into which data is received can only be NULL if the data size
1516:Middlewares/FreeRTOS/queue.c ****      * is zero (so no data is copied into the buffer). */
1517:Middlewares/FreeRTOS/queue.c ****     configASSERT( !( ( ( pvBuffer ) == NULL ) && ( ( pxQueue )->uxItemSize != ( UBaseType_t ) 0U ) 
1518:Middlewares/FreeRTOS/queue.c **** 
1519:Middlewares/FreeRTOS/queue.c ****     /* Cannot block if the scheduler is suspended. */
1520:Middlewares/FreeRTOS/queue.c ****     #if ( ( INCLUDE_xTaskGetSchedulerState == 1 ) || ( configUSE_TIMERS == 1 ) )
1521:Middlewares/FreeRTOS/queue.c ****     {
1522:Middlewares/FreeRTOS/queue.c ****         configASSERT( !( ( xTaskGetSchedulerState() == taskSCHEDULER_SUSPENDED ) && ( xTicksToWait 
1523:Middlewares/FreeRTOS/queue.c ****     }
1524:Middlewares/FreeRTOS/queue.c ****     #endif
1525:Middlewares/FreeRTOS/queue.c **** 
1526:Middlewares/FreeRTOS/queue.c ****     for( ; ; )
1527:Middlewares/FreeRTOS/queue.c ****     {
1528:Middlewares/FreeRTOS/queue.c ****         taskENTER_CRITICAL();
 1067              		.loc 1 1528 9
 1068 0014 FFF7FEFF 		bl	vPortEnterCritical
 1069              	.LBB39:
1529:Middlewares/FreeRTOS/queue.c ****         {
1530:Middlewares/FreeRTOS/queue.c ****             const UBaseType_t uxMessagesWaiting = pxQueue->uxMessagesWaiting;
 1070              		.loc 1 1530 31
 1071 0018 3B6A     		ldr	r3, [r7, #32]
 1072 001a 9B6B     		ldr	r3, [r3, #56]
 1073 001c FB61     		str	r3, [r7, #28]
1531:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 51


1532:Middlewares/FreeRTOS/queue.c ****             /* Is there data in the queue now?  To be running the calling task
1533:Middlewares/FreeRTOS/queue.c ****              * must be the highest priority task wanting to access the queue. */
1534:Middlewares/FreeRTOS/queue.c ****             if( uxMessagesWaiting > ( UBaseType_t ) 0 )
 1074              		.loc 1 1534 15
 1075 001e FB69     		ldr	r3, [r7, #28]
 1076 0020 002B     		cmp	r3, #0
 1077 0022 1FD0     		beq	.L57
1535:Middlewares/FreeRTOS/queue.c ****             {
1536:Middlewares/FreeRTOS/queue.c ****                 /* Data available, remove one item. */
1537:Middlewares/FreeRTOS/queue.c ****                 prvCopyDataFromQueue( pxQueue, pvBuffer );
 1078              		.loc 1 1537 17
 1079 0024 B968     		ldr	r1, [r7, #8]
 1080 0026 386A     		ldr	r0, [r7, #32]
 1081 0028 FFF7FEFF 		bl	prvCopyDataFromQueue
1538:Middlewares/FreeRTOS/queue.c ****                 traceQUEUE_RECEIVE( pxQueue );
1539:Middlewares/FreeRTOS/queue.c ****                 pxQueue->uxMessagesWaiting = ( UBaseType_t ) ( uxMessagesWaiting - ( UBaseType_t ) 
 1082              		.loc 1 1539 46
 1083 002c FB69     		ldr	r3, [r7, #28]
 1084 002e 5A1E     		subs	r2, r3, #1
 1085              		.loc 1 1539 44
 1086 0030 3B6A     		ldr	r3, [r7, #32]
 1087 0032 9A63     		str	r2, [r3, #56]
1540:Middlewares/FreeRTOS/queue.c **** 
1541:Middlewares/FreeRTOS/queue.c ****                 /* There is now space in the queue, were any tasks waiting to
1542:Middlewares/FreeRTOS/queue.c ****                  * post to the queue?  If so, unblock the highest priority waiting
1543:Middlewares/FreeRTOS/queue.c ****                  * task. */
1544:Middlewares/FreeRTOS/queue.c ****                 if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToSend ) ) == pdFALSE )
 1088              		.loc 1 1544 21
 1089 0034 3B6A     		ldr	r3, [r7, #32]
 1090 0036 1B69     		ldr	r3, [r3, #16]
 1091              		.loc 1 1544 19
 1092 0038 002B     		cmp	r3, #0
 1093 003a 0FD0     		beq	.L58
1545:Middlewares/FreeRTOS/queue.c ****                 {
1546:Middlewares/FreeRTOS/queue.c ****                     if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToSend ) ) != pdFALSE )
 1094              		.loc 1 1546 51
 1095 003c 3B6A     		ldr	r3, [r7, #32]
 1096 003e 1033     		adds	r3, r3, #16
 1097              		.loc 1 1546 25
 1098 0040 1846     		mov	r0, r3
 1099 0042 FFF7FEFF 		bl	xTaskRemoveFromEventList
 1100 0046 0346     		mov	r3, r0
 1101              		.loc 1 1546 23 discriminator 1
 1102 0048 002B     		cmp	r3, #0
 1103 004a 07D0     		beq	.L58
1547:Middlewares/FreeRTOS/queue.c ****                     {
1548:Middlewares/FreeRTOS/queue.c ****                         queueYIELD_IF_USING_PREEMPTION();
 1104              		.loc 1 1548 25
 1105 004c 3C4B     		ldr	r3, .L69
 1106 004e 4FF08052 		mov	r2, #268435456
 1107 0052 1A60     		str	r2, [r3]
 1108              		.syntax unified
 1109              	@ 1548 "Middlewares/FreeRTOS/queue.c" 1
 1110 0054 BFF34F8F 		dsb
 1111              	@ 0 "" 2
 1112              	@ 1548 "Middlewares/FreeRTOS/queue.c" 1
 1113 0058 BFF36F8F 		isb
ARM GAS  /tmp/cczksE0f.s 			page 52


 1114              	@ 0 "" 2
 1115              		.thumb
 1116              		.syntax unified
 1117              	.L58:
1549:Middlewares/FreeRTOS/queue.c ****                     }
1550:Middlewares/FreeRTOS/queue.c ****                     else
1551:Middlewares/FreeRTOS/queue.c ****                     {
1552:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
1553:Middlewares/FreeRTOS/queue.c ****                     }
1554:Middlewares/FreeRTOS/queue.c ****                 }
1555:Middlewares/FreeRTOS/queue.c ****                 else
1556:Middlewares/FreeRTOS/queue.c ****                 {
1557:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
1558:Middlewares/FreeRTOS/queue.c ****                 }
1559:Middlewares/FreeRTOS/queue.c **** 
1560:Middlewares/FreeRTOS/queue.c ****                 taskEXIT_CRITICAL();
 1118              		.loc 1 1560 17
 1119 005c FFF7FEFF 		bl	vPortExitCritical
1561:Middlewares/FreeRTOS/queue.c **** 
1562:Middlewares/FreeRTOS/queue.c ****                 traceRETURN_xQueueReceive( pdPASS );
1563:Middlewares/FreeRTOS/queue.c **** 
1564:Middlewares/FreeRTOS/queue.c ****                 return pdPASS;
 1120              		.loc 1 1564 24
 1121 0060 0123     		movs	r3, #1
 1122 0062 69E0     		b	.L68
 1123              	.L57:
1565:Middlewares/FreeRTOS/queue.c ****             }
1566:Middlewares/FreeRTOS/queue.c ****             else
1567:Middlewares/FreeRTOS/queue.c ****             {
1568:Middlewares/FreeRTOS/queue.c ****                 if( xTicksToWait == ( TickType_t ) 0 )
 1124              		.loc 1 1568 34
 1125 0064 7B68     		ldr	r3, [r7, #4]
 1126              		.loc 1 1568 19
 1127 0066 002B     		cmp	r3, #0
 1128 0068 03D1     		bne	.L60
1569:Middlewares/FreeRTOS/queue.c ****                 {
1570:Middlewares/FreeRTOS/queue.c ****                     /* The queue was empty and no block time is specified (or
1571:Middlewares/FreeRTOS/queue.c ****                      * the block time has expired) so leave now. */
1572:Middlewares/FreeRTOS/queue.c ****                     taskEXIT_CRITICAL();
 1129              		.loc 1 1572 21
 1130 006a FFF7FEFF 		bl	vPortExitCritical
1573:Middlewares/FreeRTOS/queue.c **** 
1574:Middlewares/FreeRTOS/queue.c ****                     traceQUEUE_RECEIVE_FAILED( pxQueue );
1575:Middlewares/FreeRTOS/queue.c ****                     traceRETURN_xQueueReceive( errQUEUE_EMPTY );
1576:Middlewares/FreeRTOS/queue.c **** 
1577:Middlewares/FreeRTOS/queue.c ****                     return errQUEUE_EMPTY;
 1131              		.loc 1 1577 28
 1132 006e 0023     		movs	r3, #0
 1133 0070 62E0     		b	.L68
 1134              	.L60:
1578:Middlewares/FreeRTOS/queue.c ****                 }
1579:Middlewares/FreeRTOS/queue.c ****                 else if( xEntryTimeSet == pdFALSE )
 1135              		.loc 1 1579 24
 1136 0072 7B6A     		ldr	r3, [r7, #36]
 1137 0074 002B     		cmp	r3, #0
 1138 0076 06D1     		bne	.L61
1580:Middlewares/FreeRTOS/queue.c ****                 {
ARM GAS  /tmp/cczksE0f.s 			page 53


1581:Middlewares/FreeRTOS/queue.c ****                     /* The queue was empty and a block time was specified so
1582:Middlewares/FreeRTOS/queue.c ****                      * configure the timeout structure. */
1583:Middlewares/FreeRTOS/queue.c ****                     vTaskInternalSetTimeOutState( &xTimeOut );
 1139              		.loc 1 1583 21
 1140 0078 07F11403 		add	r3, r7, #20
 1141 007c 1846     		mov	r0, r3
 1142 007e FFF7FEFF 		bl	vTaskInternalSetTimeOutState
1584:Middlewares/FreeRTOS/queue.c ****                     xEntryTimeSet = pdTRUE;
 1143              		.loc 1 1584 35
 1144 0082 0123     		movs	r3, #1
 1145 0084 7B62     		str	r3, [r7, #36]
 1146              	.L61:
 1147              	.LBE39:
1585:Middlewares/FreeRTOS/queue.c ****                 }
1586:Middlewares/FreeRTOS/queue.c ****                 else
1587:Middlewares/FreeRTOS/queue.c ****                 {
1588:Middlewares/FreeRTOS/queue.c ****                     /* Entry time was already set. */
1589:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
1590:Middlewares/FreeRTOS/queue.c ****                 }
1591:Middlewares/FreeRTOS/queue.c ****             }
1592:Middlewares/FreeRTOS/queue.c ****         }
1593:Middlewares/FreeRTOS/queue.c ****         taskEXIT_CRITICAL();
 1148              		.loc 1 1593 9
 1149 0086 FFF7FEFF 		bl	vPortExitCritical
1594:Middlewares/FreeRTOS/queue.c **** 
1595:Middlewares/FreeRTOS/queue.c ****         /* Interrupts and other tasks can send to and receive from the queue
1596:Middlewares/FreeRTOS/queue.c ****          * now the critical section has been exited. */
1597:Middlewares/FreeRTOS/queue.c **** 
1598:Middlewares/FreeRTOS/queue.c ****         vTaskSuspendAll();
 1150              		.loc 1 1598 9
 1151 008a FFF7FEFF 		bl	vTaskSuspendAll
1599:Middlewares/FreeRTOS/queue.c ****         prvLockQueue( pxQueue );
 1152              		.loc 1 1599 9
 1153 008e FFF7FEFF 		bl	vPortEnterCritical
 1154              		.loc 1 1599 9 is_stmt 0 discriminator 1
 1155 0092 3B6A     		ldr	r3, [r7, #32]
 1156 0094 93F84430 		ldrb	r3, [r3, #68]
 1157 0098 5BB2     		sxtb	r3, r3
 1158 009a B3F1FF3F 		cmp	r3, #-1
 1159 009e 03D1     		bne	.L62
 1160 00a0 3B6A     		ldr	r3, [r7, #32]
 1161 00a2 0022     		movs	r2, #0
 1162 00a4 83F84420 		strb	r2, [r3, #68]
 1163              	.L62:
 1164              		.loc 1 1599 9 discriminator 3
 1165 00a8 3B6A     		ldr	r3, [r7, #32]
 1166 00aa 93F84530 		ldrb	r3, [r3, #69]
 1167 00ae 5BB2     		sxtb	r3, r3
 1168 00b0 B3F1FF3F 		cmp	r3, #-1
 1169 00b4 03D1     		bne	.L63
 1170              		.loc 1 1599 9 discriminator 4
 1171 00b6 3B6A     		ldr	r3, [r7, #32]
 1172 00b8 0022     		movs	r2, #0
 1173 00ba 83F84520 		strb	r2, [r3, #69]
 1174              	.L63:
 1175              		.loc 1 1599 9 discriminator 6
 1176 00be FFF7FEFF 		bl	vPortExitCritical
ARM GAS  /tmp/cczksE0f.s 			page 54


1600:Middlewares/FreeRTOS/queue.c **** 
1601:Middlewares/FreeRTOS/queue.c ****         /* Update the timeout state to see if it has expired yet. */
1602:Middlewares/FreeRTOS/queue.c ****         if( xTaskCheckForTimeOut( &xTimeOut, &xTicksToWait ) == pdFALSE )
 1177              		.loc 1 1602 13 is_stmt 1
 1178 00c2 3A1D     		adds	r2, r7, #4
 1179 00c4 07F11403 		add	r3, r7, #20
 1180 00c8 1146     		mov	r1, r2
 1181 00ca 1846     		mov	r0, r3
 1182 00cc FFF7FEFF 		bl	xTaskCheckForTimeOut
 1183 00d0 0346     		mov	r3, r0
 1184              		.loc 1 1602 11 discriminator 1
 1185 00d2 002B     		cmp	r3, #0
 1186 00d4 23D1     		bne	.L64
1603:Middlewares/FreeRTOS/queue.c ****         {
1604:Middlewares/FreeRTOS/queue.c ****             /* The timeout has not expired.  If the queue is still empty place
1605:Middlewares/FreeRTOS/queue.c ****              * the task on the list of tasks waiting to receive from the queue. */
1606:Middlewares/FreeRTOS/queue.c ****             if( prvIsQueueEmpty( pxQueue ) != pdFALSE )
 1187              		.loc 1 1606 17
 1188 00d6 386A     		ldr	r0, [r7, #32]
 1189 00d8 FFF7FEFF 		bl	prvIsQueueEmpty
 1190 00dc 0346     		mov	r3, r0
 1191              		.loc 1 1606 15 discriminator 1
 1192 00de 002B     		cmp	r3, #0
 1193 00e0 17D0     		beq	.L65
1607:Middlewares/FreeRTOS/queue.c ****             {
1608:Middlewares/FreeRTOS/queue.c ****                 traceBLOCKING_ON_QUEUE_RECEIVE( pxQueue );
1609:Middlewares/FreeRTOS/queue.c ****                 vTaskPlaceOnEventList( &( pxQueue->xTasksWaitingToReceive ), xTicksToWait );
 1194              		.loc 1 1609 17
 1195 00e2 3B6A     		ldr	r3, [r7, #32]
 1196 00e4 2433     		adds	r3, r3, #36
 1197 00e6 7A68     		ldr	r2, [r7, #4]
 1198 00e8 1146     		mov	r1, r2
 1199 00ea 1846     		mov	r0, r3
 1200 00ec FFF7FEFF 		bl	vTaskPlaceOnEventList
1610:Middlewares/FreeRTOS/queue.c ****                 prvUnlockQueue( pxQueue );
 1201              		.loc 1 1610 17
 1202 00f0 386A     		ldr	r0, [r7, #32]
 1203 00f2 FFF7FEFF 		bl	prvUnlockQueue
1611:Middlewares/FreeRTOS/queue.c **** 
1612:Middlewares/FreeRTOS/queue.c ****                 if( xTaskResumeAll() == pdFALSE )
 1204              		.loc 1 1612 21
 1205 00f6 FFF7FEFF 		bl	xTaskResumeAll
 1206 00fa 0346     		mov	r3, r0
 1207              		.loc 1 1612 19 discriminator 1
 1208 00fc 002B     		cmp	r3, #0
 1209 00fe 89D1     		bne	.L67
1613:Middlewares/FreeRTOS/queue.c ****                 {
1614:Middlewares/FreeRTOS/queue.c ****                     taskYIELD_WITHIN_API();
 1210              		.loc 1 1614 21
 1211 0100 0F4B     		ldr	r3, .L69
 1212 0102 4FF08052 		mov	r2, #268435456
 1213 0106 1A60     		str	r2, [r3]
 1214              		.syntax unified
 1215              	@ 1614 "Middlewares/FreeRTOS/queue.c" 1
 1216 0108 BFF34F8F 		dsb
 1217              	@ 0 "" 2
 1218              	@ 1614 "Middlewares/FreeRTOS/queue.c" 1
ARM GAS  /tmp/cczksE0f.s 			page 55


 1219 010c BFF36F8F 		isb
 1220              	@ 0 "" 2
 1221              		.thumb
 1222              		.syntax unified
 1223 0110 80E7     		b	.L67
 1224              	.L65:
1615:Middlewares/FreeRTOS/queue.c ****                 }
1616:Middlewares/FreeRTOS/queue.c ****                 else
1617:Middlewares/FreeRTOS/queue.c ****                 {
1618:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
1619:Middlewares/FreeRTOS/queue.c ****                 }
1620:Middlewares/FreeRTOS/queue.c ****             }
1621:Middlewares/FreeRTOS/queue.c ****             else
1622:Middlewares/FreeRTOS/queue.c ****             {
1623:Middlewares/FreeRTOS/queue.c ****                 /* The queue contains data again.  Loop back to try and read the
1624:Middlewares/FreeRTOS/queue.c ****                  * data. */
1625:Middlewares/FreeRTOS/queue.c ****                 prvUnlockQueue( pxQueue );
 1225              		.loc 1 1625 17
 1226 0112 386A     		ldr	r0, [r7, #32]
 1227 0114 FFF7FEFF 		bl	prvUnlockQueue
1626:Middlewares/FreeRTOS/queue.c ****                 ( void ) xTaskResumeAll();
 1228              		.loc 1 1626 26
 1229 0118 FFF7FEFF 		bl	xTaskResumeAll
 1230 011c 7AE7     		b	.L67
 1231              	.L64:
1627:Middlewares/FreeRTOS/queue.c ****             }
1628:Middlewares/FreeRTOS/queue.c ****         }
1629:Middlewares/FreeRTOS/queue.c ****         else
1630:Middlewares/FreeRTOS/queue.c ****         {
1631:Middlewares/FreeRTOS/queue.c ****             /* Timed out.  If there is no data in the queue exit, otherwise loop
1632:Middlewares/FreeRTOS/queue.c ****              * back and attempt to read the data. */
1633:Middlewares/FreeRTOS/queue.c ****             prvUnlockQueue( pxQueue );
 1232              		.loc 1 1633 13
 1233 011e 386A     		ldr	r0, [r7, #32]
 1234 0120 FFF7FEFF 		bl	prvUnlockQueue
1634:Middlewares/FreeRTOS/queue.c ****             ( void ) xTaskResumeAll();
 1235              		.loc 1 1634 22
 1236 0124 FFF7FEFF 		bl	xTaskResumeAll
1635:Middlewares/FreeRTOS/queue.c **** 
1636:Middlewares/FreeRTOS/queue.c ****             if( prvIsQueueEmpty( pxQueue ) != pdFALSE )
 1237              		.loc 1 1636 17
 1238 0128 386A     		ldr	r0, [r7, #32]
 1239 012a FFF7FEFF 		bl	prvIsQueueEmpty
 1240 012e 0346     		mov	r3, r0
 1241              		.loc 1 1636 15 discriminator 1
 1242 0130 002B     		cmp	r3, #0
 1243 0132 3FF46FAF 		beq	.L67
1637:Middlewares/FreeRTOS/queue.c ****             {
1638:Middlewares/FreeRTOS/queue.c ****                 traceQUEUE_RECEIVE_FAILED( pxQueue );
1639:Middlewares/FreeRTOS/queue.c ****                 traceRETURN_xQueueReceive( errQUEUE_EMPTY );
1640:Middlewares/FreeRTOS/queue.c **** 
1641:Middlewares/FreeRTOS/queue.c ****                 return errQUEUE_EMPTY;
 1244              		.loc 1 1641 24
 1245 0136 0023     		movs	r3, #0
 1246              	.L68:
1642:Middlewares/FreeRTOS/queue.c ****             }
1643:Middlewares/FreeRTOS/queue.c ****             else
ARM GAS  /tmp/cczksE0f.s 			page 56


1644:Middlewares/FreeRTOS/queue.c ****             {
1645:Middlewares/FreeRTOS/queue.c ****                 mtCOVERAGE_TEST_MARKER();
1646:Middlewares/FreeRTOS/queue.c ****             }
1647:Middlewares/FreeRTOS/queue.c ****         }
1648:Middlewares/FreeRTOS/queue.c ****     }
1649:Middlewares/FreeRTOS/queue.c **** }
 1247              		.loc 1 1649 1
 1248 0138 1846     		mov	r0, r3
 1249 013a 2837     		adds	r7, r7, #40
 1250              		.cfi_def_cfa_offset 8
 1251 013c BD46     		mov	sp, r7
 1252              		.cfi_def_cfa_register 13
 1253              		@ sp needed
 1254 013e 80BD     		pop	{r7, pc}
 1255              	.L70:
 1256              		.align	2
 1257              	.L69:
 1258 0140 04ED00E0 		.word	-536810236
 1259              		.cfi_endproc
 1260              	.LFE12:
 1262              		.section	.text.xQueueSemaphoreTake,"ax",%progbits
 1263              		.align	1
 1264              		.global	xQueueSemaphoreTake
 1265              		.syntax unified
 1266              		.thumb
 1267              		.thumb_func
 1269              	xQueueSemaphoreTake:
 1270              	.LFB13:
1650:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
1651:Middlewares/FreeRTOS/queue.c **** 
1652:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueueSemaphoreTake( QueueHandle_t xQueue,
1653:Middlewares/FreeRTOS/queue.c ****                                 TickType_t xTicksToWait )
1654:Middlewares/FreeRTOS/queue.c **** {
 1271              		.loc 1 1654 1
 1272              		.cfi_startproc
 1273              		@ args = 0, pretend = 0, frame = 40
 1274              		@ frame_needed = 1, uses_anonymous_args = 0
 1275 0000 80B5     		push	{r7, lr}
 1276              		.cfi_def_cfa_offset 8
 1277              		.cfi_offset 7, -8
 1278              		.cfi_offset 14, -4
 1279 0002 8AB0     		sub	sp, sp, #40
 1280              		.cfi_def_cfa_offset 48
 1281 0004 00AF     		add	r7, sp, #0
 1282              		.cfi_def_cfa_register 7
 1283 0006 7860     		str	r0, [r7, #4]
 1284 0008 3960     		str	r1, [r7]
1655:Middlewares/FreeRTOS/queue.c ****     BaseType_t xEntryTimeSet = pdFALSE;
 1285              		.loc 1 1655 16
 1286 000a 0023     		movs	r3, #0
 1287 000c 7B62     		str	r3, [r7, #36]
1656:Middlewares/FreeRTOS/queue.c ****     TimeOut_t xTimeOut;
1657:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 1288              		.loc 1 1657 21
 1289 000e 7B68     		ldr	r3, [r7, #4]
 1290 0010 FB61     		str	r3, [r7, #28]
1658:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 57


1659:Middlewares/FreeRTOS/queue.c ****     #if ( configUSE_MUTEXES == 1 )
1660:Middlewares/FreeRTOS/queue.c ****         BaseType_t xInheritanceOccurred = pdFALSE;
 1291              		.loc 1 1660 20
 1292 0012 0023     		movs	r3, #0
 1293 0014 3B62     		str	r3, [r7, #32]
 1294              	.L85:
1661:Middlewares/FreeRTOS/queue.c ****     #endif
1662:Middlewares/FreeRTOS/queue.c **** 
1663:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueueSemaphoreTake( xQueue, xTicksToWait );
1664:Middlewares/FreeRTOS/queue.c **** 
1665:Middlewares/FreeRTOS/queue.c ****     /* Check the queue pointer is not NULL. */
1666:Middlewares/FreeRTOS/queue.c ****     configASSERT( ( pxQueue ) );
1667:Middlewares/FreeRTOS/queue.c **** 
1668:Middlewares/FreeRTOS/queue.c ****     /* Check this really is a semaphore, in which case the item size will be
1669:Middlewares/FreeRTOS/queue.c ****      * 0. */
1670:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue->uxItemSize == 0 );
1671:Middlewares/FreeRTOS/queue.c **** 
1672:Middlewares/FreeRTOS/queue.c ****     /* Cannot block if the scheduler is suspended. */
1673:Middlewares/FreeRTOS/queue.c ****     #if ( ( INCLUDE_xTaskGetSchedulerState == 1 ) || ( configUSE_TIMERS == 1 ) )
1674:Middlewares/FreeRTOS/queue.c ****     {
1675:Middlewares/FreeRTOS/queue.c ****         configASSERT( !( ( xTaskGetSchedulerState() == taskSCHEDULER_SUSPENDED ) && ( xTicksToWait 
1676:Middlewares/FreeRTOS/queue.c ****     }
1677:Middlewares/FreeRTOS/queue.c ****     #endif
1678:Middlewares/FreeRTOS/queue.c **** 
1679:Middlewares/FreeRTOS/queue.c ****     for( ; ; )
1680:Middlewares/FreeRTOS/queue.c ****     {
1681:Middlewares/FreeRTOS/queue.c ****         taskENTER_CRITICAL();
 1295              		.loc 1 1681 9
 1296 0016 FFF7FEFF 		bl	vPortEnterCritical
 1297              	.LBB40:
1682:Middlewares/FreeRTOS/queue.c ****         {
1683:Middlewares/FreeRTOS/queue.c ****             /* Semaphores are queues with an item size of 0, and where the
1684:Middlewares/FreeRTOS/queue.c ****              * number of messages in the queue is the semaphore's count value. */
1685:Middlewares/FreeRTOS/queue.c ****             const UBaseType_t uxSemaphoreCount = pxQueue->uxMessagesWaiting;
 1298              		.loc 1 1685 31
 1299 001a FB69     		ldr	r3, [r7, #28]
 1300 001c 9B6B     		ldr	r3, [r3, #56]
 1301 001e BB61     		str	r3, [r7, #24]
1686:Middlewares/FreeRTOS/queue.c **** 
1687:Middlewares/FreeRTOS/queue.c ****             /* Is there data in the queue now?  To be running the calling task
1688:Middlewares/FreeRTOS/queue.c ****              * must be the highest priority task wanting to access the queue. */
1689:Middlewares/FreeRTOS/queue.c ****             if( uxSemaphoreCount > ( UBaseType_t ) 0 )
 1302              		.loc 1 1689 15
 1303 0020 BB69     		ldr	r3, [r7, #24]
 1304 0022 002B     		cmp	r3, #0
 1305 0024 24D0     		beq	.L72
1690:Middlewares/FreeRTOS/queue.c ****             {
1691:Middlewares/FreeRTOS/queue.c ****                 traceQUEUE_RECEIVE( pxQueue );
1692:Middlewares/FreeRTOS/queue.c **** 
1693:Middlewares/FreeRTOS/queue.c ****                 /* Semaphores are queues with a data size of zero and where the
1694:Middlewares/FreeRTOS/queue.c ****                  * messages waiting is the semaphore's count.  Reduce the count. */
1695:Middlewares/FreeRTOS/queue.c ****                 pxQueue->uxMessagesWaiting = ( UBaseType_t ) ( uxSemaphoreCount - ( UBaseType_t ) 1
 1306              		.loc 1 1695 46
 1307 0026 BB69     		ldr	r3, [r7, #24]
 1308 0028 5A1E     		subs	r2, r3, #1
 1309              		.loc 1 1695 44
 1310 002a FB69     		ldr	r3, [r7, #28]
ARM GAS  /tmp/cczksE0f.s 			page 58


 1311 002c 9A63     		str	r2, [r3, #56]
1696:Middlewares/FreeRTOS/queue.c **** 
1697:Middlewares/FreeRTOS/queue.c ****                 #if ( configUSE_MUTEXES == 1 )
1698:Middlewares/FreeRTOS/queue.c ****                 {
1699:Middlewares/FreeRTOS/queue.c ****                     if( pxQueue->uxQueueType == queueQUEUE_IS_MUTEX )
 1312              		.loc 1 1699 32
 1313 002e FB69     		ldr	r3, [r7, #28]
 1314 0030 1B68     		ldr	r3, [r3]
 1315              		.loc 1 1699 23
 1316 0032 002B     		cmp	r3, #0
 1317 0034 04D1     		bne	.L73
1700:Middlewares/FreeRTOS/queue.c ****                     {
1701:Middlewares/FreeRTOS/queue.c ****                         /* Record the information required to implement
1702:Middlewares/FreeRTOS/queue.c ****                          * priority inheritance should it become necessary. */
1703:Middlewares/FreeRTOS/queue.c ****                         pxQueue->u.xSemaphore.xMutexHolder = pvTaskIncrementMutexHeldCount();
 1318              		.loc 1 1703 62
 1319 0036 FFF7FEFF 		bl	pvTaskIncrementMutexHeldCount
 1320 003a 0246     		mov	r2, r0
 1321              		.loc 1 1703 60 discriminator 1
 1322 003c FB69     		ldr	r3, [r7, #28]
 1323 003e 9A60     		str	r2, [r3, #8]
 1324              	.L73:
1704:Middlewares/FreeRTOS/queue.c ****                     }
1705:Middlewares/FreeRTOS/queue.c ****                     else
1706:Middlewares/FreeRTOS/queue.c ****                     {
1707:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
1708:Middlewares/FreeRTOS/queue.c ****                     }
1709:Middlewares/FreeRTOS/queue.c ****                 }
1710:Middlewares/FreeRTOS/queue.c ****                 #endif /* configUSE_MUTEXES */
1711:Middlewares/FreeRTOS/queue.c **** 
1712:Middlewares/FreeRTOS/queue.c ****                 /* Check to see if other tasks are blocked waiting to give the
1713:Middlewares/FreeRTOS/queue.c ****                  * semaphore, and if so, unblock the highest priority such task. */
1714:Middlewares/FreeRTOS/queue.c ****                 if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToSend ) ) == pdFALSE )
 1325              		.loc 1 1714 21
 1326 0040 FB69     		ldr	r3, [r7, #28]
 1327 0042 1B69     		ldr	r3, [r3, #16]
 1328              		.loc 1 1714 19
 1329 0044 002B     		cmp	r3, #0
 1330 0046 0FD0     		beq	.L74
1715:Middlewares/FreeRTOS/queue.c ****                 {
1716:Middlewares/FreeRTOS/queue.c ****                     if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToSend ) ) != pdFALSE )
 1331              		.loc 1 1716 51
 1332 0048 FB69     		ldr	r3, [r7, #28]
 1333 004a 1033     		adds	r3, r3, #16
 1334              		.loc 1 1716 25
 1335 004c 1846     		mov	r0, r3
 1336 004e FFF7FEFF 		bl	xTaskRemoveFromEventList
 1337 0052 0346     		mov	r3, r0
 1338              		.loc 1 1716 23 discriminator 1
 1339 0054 002B     		cmp	r3, #0
 1340 0056 07D0     		beq	.L74
1717:Middlewares/FreeRTOS/queue.c ****                     {
1718:Middlewares/FreeRTOS/queue.c ****                         queueYIELD_IF_USING_PREEMPTION();
 1341              		.loc 1 1718 25
 1342 0058 4C4B     		ldr	r3, .L87
 1343 005a 4FF08052 		mov	r2, #268435456
 1344 005e 1A60     		str	r2, [r3]
ARM GAS  /tmp/cczksE0f.s 			page 59


 1345              		.syntax unified
 1346              	@ 1718 "Middlewares/FreeRTOS/queue.c" 1
 1347 0060 BFF34F8F 		dsb
 1348              	@ 0 "" 2
 1349              	@ 1718 "Middlewares/FreeRTOS/queue.c" 1
 1350 0064 BFF36F8F 		isb
 1351              	@ 0 "" 2
 1352              		.thumb
 1353              		.syntax unified
 1354              	.L74:
1719:Middlewares/FreeRTOS/queue.c ****                     }
1720:Middlewares/FreeRTOS/queue.c ****                     else
1721:Middlewares/FreeRTOS/queue.c ****                     {
1722:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
1723:Middlewares/FreeRTOS/queue.c ****                     }
1724:Middlewares/FreeRTOS/queue.c ****                 }
1725:Middlewares/FreeRTOS/queue.c ****                 else
1726:Middlewares/FreeRTOS/queue.c ****                 {
1727:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
1728:Middlewares/FreeRTOS/queue.c ****                 }
1729:Middlewares/FreeRTOS/queue.c **** 
1730:Middlewares/FreeRTOS/queue.c ****                 taskEXIT_CRITICAL();
 1355              		.loc 1 1730 17
 1356 0068 FFF7FEFF 		bl	vPortExitCritical
1731:Middlewares/FreeRTOS/queue.c **** 
1732:Middlewares/FreeRTOS/queue.c ****                 traceRETURN_xQueueSemaphoreTake( pdPASS );
1733:Middlewares/FreeRTOS/queue.c **** 
1734:Middlewares/FreeRTOS/queue.c ****                 return pdPASS;
 1357              		.loc 1 1734 24
 1358 006c 0123     		movs	r3, #1
 1359 006e 89E0     		b	.L86
 1360              	.L72:
1735:Middlewares/FreeRTOS/queue.c ****             }
1736:Middlewares/FreeRTOS/queue.c ****             else
1737:Middlewares/FreeRTOS/queue.c ****             {
1738:Middlewares/FreeRTOS/queue.c ****                 if( xTicksToWait == ( TickType_t ) 0 )
 1361              		.loc 1 1738 34
 1362 0070 3B68     		ldr	r3, [r7]
 1363              		.loc 1 1738 19
 1364 0072 002B     		cmp	r3, #0
 1365 0074 03D1     		bne	.L76
1739:Middlewares/FreeRTOS/queue.c ****                 {
1740:Middlewares/FreeRTOS/queue.c ****                     /* The semaphore count was 0 and no block time is specified
1741:Middlewares/FreeRTOS/queue.c ****                      * (or the block time has expired) so exit now. */
1742:Middlewares/FreeRTOS/queue.c ****                     taskEXIT_CRITICAL();
 1366              		.loc 1 1742 21
 1367 0076 FFF7FEFF 		bl	vPortExitCritical
1743:Middlewares/FreeRTOS/queue.c **** 
1744:Middlewares/FreeRTOS/queue.c ****                     traceQUEUE_RECEIVE_FAILED( pxQueue );
1745:Middlewares/FreeRTOS/queue.c ****                     traceRETURN_xQueueSemaphoreTake( errQUEUE_EMPTY );
1746:Middlewares/FreeRTOS/queue.c **** 
1747:Middlewares/FreeRTOS/queue.c ****                     return errQUEUE_EMPTY;
 1368              		.loc 1 1747 28
 1369 007a 0023     		movs	r3, #0
 1370 007c 82E0     		b	.L86
 1371              	.L76:
1748:Middlewares/FreeRTOS/queue.c ****                 }
ARM GAS  /tmp/cczksE0f.s 			page 60


1749:Middlewares/FreeRTOS/queue.c ****                 else if( xEntryTimeSet == pdFALSE )
 1372              		.loc 1 1749 24
 1373 007e 7B6A     		ldr	r3, [r7, #36]
 1374 0080 002B     		cmp	r3, #0
 1375 0082 06D1     		bne	.L77
1750:Middlewares/FreeRTOS/queue.c ****                 {
1751:Middlewares/FreeRTOS/queue.c ****                     /* The semaphore count was 0 and a block time was specified
1752:Middlewares/FreeRTOS/queue.c ****                      * so configure the timeout structure ready to block. */
1753:Middlewares/FreeRTOS/queue.c ****                     vTaskInternalSetTimeOutState( &xTimeOut );
 1376              		.loc 1 1753 21
 1377 0084 07F10C03 		add	r3, r7, #12
 1378 0088 1846     		mov	r0, r3
 1379 008a FFF7FEFF 		bl	vTaskInternalSetTimeOutState
1754:Middlewares/FreeRTOS/queue.c ****                     xEntryTimeSet = pdTRUE;
 1380              		.loc 1 1754 35
 1381 008e 0123     		movs	r3, #1
 1382 0090 7B62     		str	r3, [r7, #36]
 1383              	.L77:
 1384              	.LBE40:
1755:Middlewares/FreeRTOS/queue.c ****                 }
1756:Middlewares/FreeRTOS/queue.c ****                 else
1757:Middlewares/FreeRTOS/queue.c ****                 {
1758:Middlewares/FreeRTOS/queue.c ****                     /* Entry time was already set. */
1759:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
1760:Middlewares/FreeRTOS/queue.c ****                 }
1761:Middlewares/FreeRTOS/queue.c ****             }
1762:Middlewares/FreeRTOS/queue.c ****         }
1763:Middlewares/FreeRTOS/queue.c ****         taskEXIT_CRITICAL();
 1385              		.loc 1 1763 9
 1386 0092 FFF7FEFF 		bl	vPortExitCritical
1764:Middlewares/FreeRTOS/queue.c **** 
1765:Middlewares/FreeRTOS/queue.c ****         /* Interrupts and other tasks can give to and take from the semaphore
1766:Middlewares/FreeRTOS/queue.c ****          * now the critical section has been exited. */
1767:Middlewares/FreeRTOS/queue.c **** 
1768:Middlewares/FreeRTOS/queue.c ****         vTaskSuspendAll();
 1387              		.loc 1 1768 9
 1388 0096 FFF7FEFF 		bl	vTaskSuspendAll
1769:Middlewares/FreeRTOS/queue.c ****         prvLockQueue( pxQueue );
 1389              		.loc 1 1769 9
 1390 009a FFF7FEFF 		bl	vPortEnterCritical
 1391              		.loc 1 1769 9 is_stmt 0 discriminator 1
 1392 009e FB69     		ldr	r3, [r7, #28]
 1393 00a0 93F84430 		ldrb	r3, [r3, #68]
 1394 00a4 5BB2     		sxtb	r3, r3
 1395 00a6 B3F1FF3F 		cmp	r3, #-1
 1396 00aa 03D1     		bne	.L78
 1397 00ac FB69     		ldr	r3, [r7, #28]
 1398 00ae 0022     		movs	r2, #0
 1399 00b0 83F84420 		strb	r2, [r3, #68]
 1400              	.L78:
 1401              		.loc 1 1769 9 discriminator 3
 1402 00b4 FB69     		ldr	r3, [r7, #28]
 1403 00b6 93F84530 		ldrb	r3, [r3, #69]
 1404 00ba 5BB2     		sxtb	r3, r3
 1405 00bc B3F1FF3F 		cmp	r3, #-1
 1406 00c0 03D1     		bne	.L79
 1407              		.loc 1 1769 9 discriminator 4
ARM GAS  /tmp/cczksE0f.s 			page 61


 1408 00c2 FB69     		ldr	r3, [r7, #28]
 1409 00c4 0022     		movs	r2, #0
 1410 00c6 83F84520 		strb	r2, [r3, #69]
 1411              	.L79:
 1412              		.loc 1 1769 9 discriminator 6
 1413 00ca FFF7FEFF 		bl	vPortExitCritical
1770:Middlewares/FreeRTOS/queue.c **** 
1771:Middlewares/FreeRTOS/queue.c ****         /* Update the timeout state to see if it has expired yet. */
1772:Middlewares/FreeRTOS/queue.c ****         if( xTaskCheckForTimeOut( &xTimeOut, &xTicksToWait ) == pdFALSE )
 1414              		.loc 1 1772 13 is_stmt 1
 1415 00ce 3A46     		mov	r2, r7
 1416 00d0 07F10C03 		add	r3, r7, #12
 1417 00d4 1146     		mov	r1, r2
 1418 00d6 1846     		mov	r0, r3
 1419 00d8 FFF7FEFF 		bl	xTaskCheckForTimeOut
 1420 00dc 0346     		mov	r3, r0
 1421              		.loc 1 1772 11 discriminator 1
 1422 00de 002B     		cmp	r3, #0
 1423 00e0 32D1     		bne	.L80
1773:Middlewares/FreeRTOS/queue.c ****         {
1774:Middlewares/FreeRTOS/queue.c ****             /* A block time is specified and not expired.  If the semaphore
1775:Middlewares/FreeRTOS/queue.c ****              * count is 0 then enter the Blocked state to wait for a semaphore to
1776:Middlewares/FreeRTOS/queue.c ****              * become available.  As semaphores are implemented with queues the
1777:Middlewares/FreeRTOS/queue.c ****              * queue being empty is equivalent to the semaphore count being 0. */
1778:Middlewares/FreeRTOS/queue.c ****             if( prvIsQueueEmpty( pxQueue ) != pdFALSE )
 1424              		.loc 1 1778 17
 1425 00e2 F869     		ldr	r0, [r7, #28]
 1426 00e4 FFF7FEFF 		bl	prvIsQueueEmpty
 1427 00e8 0346     		mov	r3, r0
 1428              		.loc 1 1778 15 discriminator 1
 1429 00ea 002B     		cmp	r3, #0
 1430 00ec 26D0     		beq	.L81
1779:Middlewares/FreeRTOS/queue.c ****             {
1780:Middlewares/FreeRTOS/queue.c ****                 traceBLOCKING_ON_QUEUE_RECEIVE( pxQueue );
1781:Middlewares/FreeRTOS/queue.c **** 
1782:Middlewares/FreeRTOS/queue.c ****                 #if ( configUSE_MUTEXES == 1 )
1783:Middlewares/FreeRTOS/queue.c ****                 {
1784:Middlewares/FreeRTOS/queue.c ****                     if( pxQueue->uxQueueType == queueQUEUE_IS_MUTEX )
 1431              		.loc 1 1784 32
 1432 00ee FB69     		ldr	r3, [r7, #28]
 1433 00f0 1B68     		ldr	r3, [r3]
 1434              		.loc 1 1784 23
 1435 00f2 002B     		cmp	r3, #0
 1436 00f4 09D1     		bne	.L82
1785:Middlewares/FreeRTOS/queue.c ****                     {
1786:Middlewares/FreeRTOS/queue.c ****                         taskENTER_CRITICAL();
 1437              		.loc 1 1786 25
 1438 00f6 FFF7FEFF 		bl	vPortEnterCritical
1787:Middlewares/FreeRTOS/queue.c ****                         {
1788:Middlewares/FreeRTOS/queue.c ****                             xInheritanceOccurred = xTaskPriorityInherit( pxQueue->u.xSemaphore.xMut
 1439              		.loc 1 1788 52
 1440 00fa FB69     		ldr	r3, [r7, #28]
 1441 00fc 9B68     		ldr	r3, [r3, #8]
 1442 00fe 1846     		mov	r0, r3
 1443 0100 FFF7FEFF 		bl	xTaskPriorityInherit
 1444 0104 3862     		str	r0, [r7, #32]
1789:Middlewares/FreeRTOS/queue.c ****                         }
ARM GAS  /tmp/cczksE0f.s 			page 62


1790:Middlewares/FreeRTOS/queue.c ****                         taskEXIT_CRITICAL();
 1445              		.loc 1 1790 25
 1446 0106 FFF7FEFF 		bl	vPortExitCritical
 1447              	.L82:
1791:Middlewares/FreeRTOS/queue.c ****                     }
1792:Middlewares/FreeRTOS/queue.c ****                     else
1793:Middlewares/FreeRTOS/queue.c ****                     {
1794:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
1795:Middlewares/FreeRTOS/queue.c ****                     }
1796:Middlewares/FreeRTOS/queue.c ****                 }
1797:Middlewares/FreeRTOS/queue.c ****                 #endif /* if ( configUSE_MUTEXES == 1 ) */
1798:Middlewares/FreeRTOS/queue.c **** 
1799:Middlewares/FreeRTOS/queue.c ****                 vTaskPlaceOnEventList( &( pxQueue->xTasksWaitingToReceive ), xTicksToWait );
 1448              		.loc 1 1799 17
 1449 010a FB69     		ldr	r3, [r7, #28]
 1450 010c 2433     		adds	r3, r3, #36
 1451 010e 3A68     		ldr	r2, [r7]
 1452 0110 1146     		mov	r1, r2
 1453 0112 1846     		mov	r0, r3
 1454 0114 FFF7FEFF 		bl	vTaskPlaceOnEventList
1800:Middlewares/FreeRTOS/queue.c ****                 prvUnlockQueue( pxQueue );
 1455              		.loc 1 1800 17
 1456 0118 F869     		ldr	r0, [r7, #28]
 1457 011a FFF7FEFF 		bl	prvUnlockQueue
1801:Middlewares/FreeRTOS/queue.c **** 
1802:Middlewares/FreeRTOS/queue.c ****                 if( xTaskResumeAll() == pdFALSE )
 1458              		.loc 1 1802 21
 1459 011e FFF7FEFF 		bl	xTaskResumeAll
 1460 0122 0346     		mov	r3, r0
 1461              		.loc 1 1802 19 discriminator 1
 1462 0124 002B     		cmp	r3, #0
 1463 0126 7FF476AF 		bne	.L85
1803:Middlewares/FreeRTOS/queue.c ****                 {
1804:Middlewares/FreeRTOS/queue.c ****                     taskYIELD_WITHIN_API();
 1464              		.loc 1 1804 21
 1465 012a 184B     		ldr	r3, .L87
 1466 012c 4FF08052 		mov	r2, #268435456
 1467 0130 1A60     		str	r2, [r3]
 1468              		.syntax unified
 1469              	@ 1804 "Middlewares/FreeRTOS/queue.c" 1
 1470 0132 BFF34F8F 		dsb
 1471              	@ 0 "" 2
 1472              	@ 1804 "Middlewares/FreeRTOS/queue.c" 1
 1473 0136 BFF36F8F 		isb
 1474              	@ 0 "" 2
 1475              		.thumb
 1476              		.syntax unified
 1477 013a 6CE7     		b	.L85
 1478              	.L81:
1805:Middlewares/FreeRTOS/queue.c ****                 }
1806:Middlewares/FreeRTOS/queue.c ****                 else
1807:Middlewares/FreeRTOS/queue.c ****                 {
1808:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
1809:Middlewares/FreeRTOS/queue.c ****                 }
1810:Middlewares/FreeRTOS/queue.c ****             }
1811:Middlewares/FreeRTOS/queue.c ****             else
1812:Middlewares/FreeRTOS/queue.c ****             {
ARM GAS  /tmp/cczksE0f.s 			page 63


1813:Middlewares/FreeRTOS/queue.c ****                 /* There was no timeout and the semaphore count was not 0, so
1814:Middlewares/FreeRTOS/queue.c ****                  * attempt to take the semaphore again. */
1815:Middlewares/FreeRTOS/queue.c ****                 prvUnlockQueue( pxQueue );
 1479              		.loc 1 1815 17
 1480 013c F869     		ldr	r0, [r7, #28]
 1481 013e FFF7FEFF 		bl	prvUnlockQueue
1816:Middlewares/FreeRTOS/queue.c ****                 ( void ) xTaskResumeAll();
 1482              		.loc 1 1816 26
 1483 0142 FFF7FEFF 		bl	xTaskResumeAll
 1484 0146 66E7     		b	.L85
 1485              	.L80:
1817:Middlewares/FreeRTOS/queue.c ****             }
1818:Middlewares/FreeRTOS/queue.c ****         }
1819:Middlewares/FreeRTOS/queue.c ****         else
1820:Middlewares/FreeRTOS/queue.c ****         {
1821:Middlewares/FreeRTOS/queue.c ****             /* Timed out. */
1822:Middlewares/FreeRTOS/queue.c ****             prvUnlockQueue( pxQueue );
 1486              		.loc 1 1822 13
 1487 0148 F869     		ldr	r0, [r7, #28]
 1488 014a FFF7FEFF 		bl	prvUnlockQueue
1823:Middlewares/FreeRTOS/queue.c ****             ( void ) xTaskResumeAll();
 1489              		.loc 1 1823 22
 1490 014e FFF7FEFF 		bl	xTaskResumeAll
1824:Middlewares/FreeRTOS/queue.c **** 
1825:Middlewares/FreeRTOS/queue.c ****             /* If the semaphore count is 0 exit now as the timeout has
1826:Middlewares/FreeRTOS/queue.c ****              * expired.  Otherwise return to attempt to take the semaphore that is
1827:Middlewares/FreeRTOS/queue.c ****              * known to be available.  As semaphores are implemented by queues the
1828:Middlewares/FreeRTOS/queue.c ****              * queue being empty is equivalent to the semaphore count being 0. */
1829:Middlewares/FreeRTOS/queue.c ****             if( prvIsQueueEmpty( pxQueue ) != pdFALSE )
 1491              		.loc 1 1829 17
 1492 0152 F869     		ldr	r0, [r7, #28]
 1493 0154 FFF7FEFF 		bl	prvIsQueueEmpty
 1494 0158 0346     		mov	r3, r0
 1495              		.loc 1 1829 15 discriminator 1
 1496 015a 002B     		cmp	r3, #0
 1497 015c 3FF45BAF 		beq	.L85
1830:Middlewares/FreeRTOS/queue.c ****             {
1831:Middlewares/FreeRTOS/queue.c ****                 #if ( configUSE_MUTEXES == 1 )
1832:Middlewares/FreeRTOS/queue.c ****                 {
1833:Middlewares/FreeRTOS/queue.c ****                     /* xInheritanceOccurred could only have be set if
1834:Middlewares/FreeRTOS/queue.c ****                      * pxQueue->uxQueueType == queueQUEUE_IS_MUTEX so no need to
1835:Middlewares/FreeRTOS/queue.c ****                      * test the mutex type again to check it is actually a mutex. */
1836:Middlewares/FreeRTOS/queue.c ****                     if( xInheritanceOccurred != pdFALSE )
 1498              		.loc 1 1836 23
 1499 0160 3B6A     		ldr	r3, [r7, #32]
 1500 0162 002B     		cmp	r3, #0
 1501 0164 0DD0     		beq	.L84
1837:Middlewares/FreeRTOS/queue.c ****                     {
1838:Middlewares/FreeRTOS/queue.c ****                         taskENTER_CRITICAL();
 1502              		.loc 1 1838 25
 1503 0166 FFF7FEFF 		bl	vPortEnterCritical
 1504              	.LBB41:
1839:Middlewares/FreeRTOS/queue.c ****                         {
1840:Middlewares/FreeRTOS/queue.c ****                             UBaseType_t uxHighestWaitingPriority;
1841:Middlewares/FreeRTOS/queue.c **** 
1842:Middlewares/FreeRTOS/queue.c ****                             /* This task blocking on the mutex caused another
1843:Middlewares/FreeRTOS/queue.c ****                              * task to inherit this task's priority.  Now this task
ARM GAS  /tmp/cczksE0f.s 			page 64


1844:Middlewares/FreeRTOS/queue.c ****                              * has timed out the priority should be disinherited
1845:Middlewares/FreeRTOS/queue.c ****                              * again, but only as low as the next highest priority
1846:Middlewares/FreeRTOS/queue.c ****                              * task that is waiting for the same mutex. */
1847:Middlewares/FreeRTOS/queue.c ****                             uxHighestWaitingPriority = prvGetDisinheritPriorityAfterTimeout( pxQueu
 1505              		.loc 1 1847 56
 1506 016a F869     		ldr	r0, [r7, #28]
 1507 016c FFF7FEFF 		bl	prvGetDisinheritPriorityAfterTimeout
 1508 0170 7861     		str	r0, [r7, #20]
1848:Middlewares/FreeRTOS/queue.c **** 
1849:Middlewares/FreeRTOS/queue.c ****                             /* vTaskPriorityDisinheritAfterTimeout uses the uxHighestWaitingPriorit
1850:Middlewares/FreeRTOS/queue.c ****                              * parameter to index pxReadyTasksLists when adding the task holding
1851:Middlewares/FreeRTOS/queue.c ****                              * mutex to the ready list for its new priority. Coverity thinks that
1852:Middlewares/FreeRTOS/queue.c ****                              * it can result in out-of-bounds access which is not true because
1853:Middlewares/FreeRTOS/queue.c ****                              * uxHighestWaitingPriority, as returned by prvGetDisinheritPriorityAft
1854:Middlewares/FreeRTOS/queue.c ****                              * is capped at ( configMAX_PRIORITIES - 1 ). */
1855:Middlewares/FreeRTOS/queue.c ****                             /* coverity[overrun] */
1856:Middlewares/FreeRTOS/queue.c ****                             vTaskPriorityDisinheritAfterTimeout( pxQueue->u.xSemaphore.xMutexHolder
 1509              		.loc 1 1856 29
 1510 0172 FB69     		ldr	r3, [r7, #28]
 1511 0174 9B68     		ldr	r3, [r3, #8]
 1512 0176 7969     		ldr	r1, [r7, #20]
 1513 0178 1846     		mov	r0, r3
 1514 017a FFF7FEFF 		bl	vTaskPriorityDisinheritAfterTimeout
 1515              	.LBE41:
1857:Middlewares/FreeRTOS/queue.c ****                         }
1858:Middlewares/FreeRTOS/queue.c ****                         taskEXIT_CRITICAL();
 1516              		.loc 1 1858 25
 1517 017e FFF7FEFF 		bl	vPortExitCritical
 1518              	.L84:
1859:Middlewares/FreeRTOS/queue.c ****                     }
1860:Middlewares/FreeRTOS/queue.c ****                 }
1861:Middlewares/FreeRTOS/queue.c ****                 #endif /* configUSE_MUTEXES */
1862:Middlewares/FreeRTOS/queue.c **** 
1863:Middlewares/FreeRTOS/queue.c ****                 traceQUEUE_RECEIVE_FAILED( pxQueue );
1864:Middlewares/FreeRTOS/queue.c ****                 traceRETURN_xQueueSemaphoreTake( errQUEUE_EMPTY );
1865:Middlewares/FreeRTOS/queue.c **** 
1866:Middlewares/FreeRTOS/queue.c ****                 return errQUEUE_EMPTY;
 1519              		.loc 1 1866 24
 1520 0182 0023     		movs	r3, #0
 1521              	.L86:
1867:Middlewares/FreeRTOS/queue.c ****             }
1868:Middlewares/FreeRTOS/queue.c ****             else
1869:Middlewares/FreeRTOS/queue.c ****             {
1870:Middlewares/FreeRTOS/queue.c ****                 mtCOVERAGE_TEST_MARKER();
1871:Middlewares/FreeRTOS/queue.c ****             }
1872:Middlewares/FreeRTOS/queue.c ****         }
1873:Middlewares/FreeRTOS/queue.c ****     }
1874:Middlewares/FreeRTOS/queue.c **** }
 1522              		.loc 1 1874 1
 1523 0184 1846     		mov	r0, r3
 1524 0186 2837     		adds	r7, r7, #40
 1525              		.cfi_def_cfa_offset 8
 1526 0188 BD46     		mov	sp, r7
 1527              		.cfi_def_cfa_register 13
 1528              		@ sp needed
 1529 018a 80BD     		pop	{r7, pc}
 1530              	.L88:
ARM GAS  /tmp/cczksE0f.s 			page 65


 1531              		.align	2
 1532              	.L87:
 1533 018c 04ED00E0 		.word	-536810236
 1534              		.cfi_endproc
 1535              	.LFE13:
 1537              		.section	.text.xQueuePeek,"ax",%progbits
 1538              		.align	1
 1539              		.global	xQueuePeek
 1540              		.syntax unified
 1541              		.thumb
 1542              		.thumb_func
 1544              	xQueuePeek:
 1545              	.LFB14:
1875:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
1876:Middlewares/FreeRTOS/queue.c **** 
1877:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueuePeek( QueueHandle_t xQueue,
1878:Middlewares/FreeRTOS/queue.c ****                        void * const pvBuffer,
1879:Middlewares/FreeRTOS/queue.c ****                        TickType_t xTicksToWait )
1880:Middlewares/FreeRTOS/queue.c **** {
 1546              		.loc 1 1880 1
 1547              		.cfi_startproc
 1548              		@ args = 0, pretend = 0, frame = 40
 1549              		@ frame_needed = 1, uses_anonymous_args = 0
 1550 0000 80B5     		push	{r7, lr}
 1551              		.cfi_def_cfa_offset 8
 1552              		.cfi_offset 7, -8
 1553              		.cfi_offset 14, -4
 1554 0002 8AB0     		sub	sp, sp, #40
 1555              		.cfi_def_cfa_offset 48
 1556 0004 00AF     		add	r7, sp, #0
 1557              		.cfi_def_cfa_register 7
 1558 0006 F860     		str	r0, [r7, #12]
 1559 0008 B960     		str	r1, [r7, #8]
 1560 000a 7A60     		str	r2, [r7, #4]
1881:Middlewares/FreeRTOS/queue.c ****     BaseType_t xEntryTimeSet = pdFALSE;
 1561              		.loc 1 1881 16
 1562 000c 0023     		movs	r3, #0
 1563 000e 7B62     		str	r3, [r7, #36]
1882:Middlewares/FreeRTOS/queue.c ****     TimeOut_t xTimeOut;
1883:Middlewares/FreeRTOS/queue.c ****     int8_t * pcOriginalReadPosition;
1884:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 1564              		.loc 1 1884 21
 1565 0010 FB68     		ldr	r3, [r7, #12]
 1566 0012 3B62     		str	r3, [r7, #32]
 1567              	.L100:
1885:Middlewares/FreeRTOS/queue.c **** 
1886:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueuePeek( xQueue, pvBuffer, xTicksToWait );
1887:Middlewares/FreeRTOS/queue.c **** 
1888:Middlewares/FreeRTOS/queue.c ****     /* Check the pointer is not NULL. */
1889:Middlewares/FreeRTOS/queue.c ****     configASSERT( ( pxQueue ) );
1890:Middlewares/FreeRTOS/queue.c **** 
1891:Middlewares/FreeRTOS/queue.c ****     /* The buffer into which data is received can only be NULL if the data size
1892:Middlewares/FreeRTOS/queue.c ****      * is zero (so no data is copied into the buffer. */
1893:Middlewares/FreeRTOS/queue.c ****     configASSERT( !( ( ( pvBuffer ) == NULL ) && ( ( pxQueue )->uxItemSize != ( UBaseType_t ) 0U ) 
1894:Middlewares/FreeRTOS/queue.c **** 
1895:Middlewares/FreeRTOS/queue.c ****     /* Cannot block if the scheduler is suspended. */
1896:Middlewares/FreeRTOS/queue.c ****     #if ( ( INCLUDE_xTaskGetSchedulerState == 1 ) || ( configUSE_TIMERS == 1 ) )
ARM GAS  /tmp/cczksE0f.s 			page 66


1897:Middlewares/FreeRTOS/queue.c ****     {
1898:Middlewares/FreeRTOS/queue.c ****         configASSERT( !( ( xTaskGetSchedulerState() == taskSCHEDULER_SUSPENDED ) && ( xTicksToWait 
1899:Middlewares/FreeRTOS/queue.c ****     }
1900:Middlewares/FreeRTOS/queue.c ****     #endif
1901:Middlewares/FreeRTOS/queue.c **** 
1902:Middlewares/FreeRTOS/queue.c ****     for( ; ; )
1903:Middlewares/FreeRTOS/queue.c ****     {
1904:Middlewares/FreeRTOS/queue.c ****         taskENTER_CRITICAL();
 1568              		.loc 1 1904 9
 1569 0014 FFF7FEFF 		bl	vPortEnterCritical
 1570              	.LBB42:
1905:Middlewares/FreeRTOS/queue.c ****         {
1906:Middlewares/FreeRTOS/queue.c ****             const UBaseType_t uxMessagesWaiting = pxQueue->uxMessagesWaiting;
 1571              		.loc 1 1906 31
 1572 0018 3B6A     		ldr	r3, [r7, #32]
 1573 001a 9B6B     		ldr	r3, [r3, #56]
 1574 001c FB61     		str	r3, [r7, #28]
1907:Middlewares/FreeRTOS/queue.c **** 
1908:Middlewares/FreeRTOS/queue.c ****             /* Is there data in the queue now?  To be running the calling task
1909:Middlewares/FreeRTOS/queue.c ****              * must be the highest priority task wanting to access the queue. */
1910:Middlewares/FreeRTOS/queue.c ****             if( uxMessagesWaiting > ( UBaseType_t ) 0 )
 1575              		.loc 1 1910 15
 1576 001e FB69     		ldr	r3, [r7, #28]
 1577 0020 002B     		cmp	r3, #0
 1578 0022 21D0     		beq	.L90
1911:Middlewares/FreeRTOS/queue.c ****             {
1912:Middlewares/FreeRTOS/queue.c ****                 /* Remember the read position so it can be reset after the data
1913:Middlewares/FreeRTOS/queue.c ****                  * is read from the queue as this function is only peeking the
1914:Middlewares/FreeRTOS/queue.c ****                  * data, not removing it. */
1915:Middlewares/FreeRTOS/queue.c ****                 pcOriginalReadPosition = pxQueue->u.xQueue.pcReadFrom;
 1579              		.loc 1 1915 40
 1580 0024 3B6A     		ldr	r3, [r7, #32]
 1581 0026 DB68     		ldr	r3, [r3, #12]
 1582 0028 BB61     		str	r3, [r7, #24]
1916:Middlewares/FreeRTOS/queue.c **** 
1917:Middlewares/FreeRTOS/queue.c ****                 prvCopyDataFromQueue( pxQueue, pvBuffer );
 1583              		.loc 1 1917 17
 1584 002a B968     		ldr	r1, [r7, #8]
 1585 002c 386A     		ldr	r0, [r7, #32]
 1586 002e FFF7FEFF 		bl	prvCopyDataFromQueue
1918:Middlewares/FreeRTOS/queue.c ****                 traceQUEUE_PEEK( pxQueue );
1919:Middlewares/FreeRTOS/queue.c **** 
1920:Middlewares/FreeRTOS/queue.c ****                 /* The data is not being removed, so reset the read pointer. */
1921:Middlewares/FreeRTOS/queue.c ****                 pxQueue->u.xQueue.pcReadFrom = pcOriginalReadPosition;
 1587              		.loc 1 1921 46
 1588 0032 3B6A     		ldr	r3, [r7, #32]
 1589 0034 BA69     		ldr	r2, [r7, #24]
 1590 0036 DA60     		str	r2, [r3, #12]
1922:Middlewares/FreeRTOS/queue.c **** 
1923:Middlewares/FreeRTOS/queue.c ****                 /* The data is being left in the queue, so see if there are
1924:Middlewares/FreeRTOS/queue.c ****                  * any other tasks waiting for the data. */
1925:Middlewares/FreeRTOS/queue.c ****                 if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToReceive ) ) == pdFALSE )
 1591              		.loc 1 1925 21
 1592 0038 3B6A     		ldr	r3, [r7, #32]
 1593 003a 5B6A     		ldr	r3, [r3, #36]
 1594              		.loc 1 1925 19
 1595 003c 002B     		cmp	r3, #0
ARM GAS  /tmp/cczksE0f.s 			page 67


 1596 003e 0FD0     		beq	.L91
1926:Middlewares/FreeRTOS/queue.c ****                 {
1927:Middlewares/FreeRTOS/queue.c ****                     if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToReceive ) ) != pdFALSE
 1597              		.loc 1 1927 51
 1598 0040 3B6A     		ldr	r3, [r7, #32]
 1599 0042 2433     		adds	r3, r3, #36
 1600              		.loc 1 1927 25
 1601 0044 1846     		mov	r0, r3
 1602 0046 FFF7FEFF 		bl	xTaskRemoveFromEventList
 1603 004a 0346     		mov	r3, r0
 1604              		.loc 1 1927 23 discriminator 1
 1605 004c 002B     		cmp	r3, #0
 1606 004e 07D0     		beq	.L91
1928:Middlewares/FreeRTOS/queue.c ****                     {
1929:Middlewares/FreeRTOS/queue.c ****                         /* The task waiting has a higher priority than this task. */
1930:Middlewares/FreeRTOS/queue.c ****                         queueYIELD_IF_USING_PREEMPTION();
 1607              		.loc 1 1930 25
 1608 0050 3C4B     		ldr	r3, .L102
 1609 0052 4FF08052 		mov	r2, #268435456
 1610 0056 1A60     		str	r2, [r3]
 1611              		.syntax unified
 1612              	@ 1930 "Middlewares/FreeRTOS/queue.c" 1
 1613 0058 BFF34F8F 		dsb
 1614              	@ 0 "" 2
 1615              	@ 1930 "Middlewares/FreeRTOS/queue.c" 1
 1616 005c BFF36F8F 		isb
 1617              	@ 0 "" 2
 1618              		.thumb
 1619              		.syntax unified
 1620              	.L91:
1931:Middlewares/FreeRTOS/queue.c ****                     }
1932:Middlewares/FreeRTOS/queue.c ****                     else
1933:Middlewares/FreeRTOS/queue.c ****                     {
1934:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
1935:Middlewares/FreeRTOS/queue.c ****                     }
1936:Middlewares/FreeRTOS/queue.c ****                 }
1937:Middlewares/FreeRTOS/queue.c ****                 else
1938:Middlewares/FreeRTOS/queue.c ****                 {
1939:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
1940:Middlewares/FreeRTOS/queue.c ****                 }
1941:Middlewares/FreeRTOS/queue.c **** 
1942:Middlewares/FreeRTOS/queue.c ****                 taskEXIT_CRITICAL();
 1621              		.loc 1 1942 17
 1622 0060 FFF7FEFF 		bl	vPortExitCritical
1943:Middlewares/FreeRTOS/queue.c **** 
1944:Middlewares/FreeRTOS/queue.c ****                 traceRETURN_xQueuePeek( pdPASS );
1945:Middlewares/FreeRTOS/queue.c **** 
1946:Middlewares/FreeRTOS/queue.c ****                 return pdPASS;
 1623              		.loc 1 1946 24
 1624 0064 0123     		movs	r3, #1
 1625 0066 69E0     		b	.L101
 1626              	.L90:
1947:Middlewares/FreeRTOS/queue.c ****             }
1948:Middlewares/FreeRTOS/queue.c ****             else
1949:Middlewares/FreeRTOS/queue.c ****             {
1950:Middlewares/FreeRTOS/queue.c ****                 if( xTicksToWait == ( TickType_t ) 0 )
 1627              		.loc 1 1950 34
ARM GAS  /tmp/cczksE0f.s 			page 68


 1628 0068 7B68     		ldr	r3, [r7, #4]
 1629              		.loc 1 1950 19
 1630 006a 002B     		cmp	r3, #0
 1631 006c 03D1     		bne	.L93
1951:Middlewares/FreeRTOS/queue.c ****                 {
1952:Middlewares/FreeRTOS/queue.c ****                     /* The queue was empty and no block time is specified (or
1953:Middlewares/FreeRTOS/queue.c ****                      * the block time has expired) so leave now. */
1954:Middlewares/FreeRTOS/queue.c ****                     taskEXIT_CRITICAL();
 1632              		.loc 1 1954 21
 1633 006e FFF7FEFF 		bl	vPortExitCritical
1955:Middlewares/FreeRTOS/queue.c **** 
1956:Middlewares/FreeRTOS/queue.c ****                     traceQUEUE_PEEK_FAILED( pxQueue );
1957:Middlewares/FreeRTOS/queue.c ****                     traceRETURN_xQueuePeek( errQUEUE_EMPTY );
1958:Middlewares/FreeRTOS/queue.c **** 
1959:Middlewares/FreeRTOS/queue.c ****                     return errQUEUE_EMPTY;
 1634              		.loc 1 1959 28
 1635 0072 0023     		movs	r3, #0
 1636 0074 62E0     		b	.L101
 1637              	.L93:
1960:Middlewares/FreeRTOS/queue.c ****                 }
1961:Middlewares/FreeRTOS/queue.c ****                 else if( xEntryTimeSet == pdFALSE )
 1638              		.loc 1 1961 24
 1639 0076 7B6A     		ldr	r3, [r7, #36]
 1640 0078 002B     		cmp	r3, #0
 1641 007a 06D1     		bne	.L94
1962:Middlewares/FreeRTOS/queue.c ****                 {
1963:Middlewares/FreeRTOS/queue.c ****                     /* The queue was empty and a block time was specified so
1964:Middlewares/FreeRTOS/queue.c ****                      * configure the timeout structure ready to enter the blocked
1965:Middlewares/FreeRTOS/queue.c ****                      * state. */
1966:Middlewares/FreeRTOS/queue.c ****                     vTaskInternalSetTimeOutState( &xTimeOut );
 1642              		.loc 1 1966 21
 1643 007c 07F11003 		add	r3, r7, #16
 1644 0080 1846     		mov	r0, r3
 1645 0082 FFF7FEFF 		bl	vTaskInternalSetTimeOutState
1967:Middlewares/FreeRTOS/queue.c ****                     xEntryTimeSet = pdTRUE;
 1646              		.loc 1 1967 35
 1647 0086 0123     		movs	r3, #1
 1648 0088 7B62     		str	r3, [r7, #36]
 1649              	.L94:
 1650              	.LBE42:
1968:Middlewares/FreeRTOS/queue.c ****                 }
1969:Middlewares/FreeRTOS/queue.c ****                 else
1970:Middlewares/FreeRTOS/queue.c ****                 {
1971:Middlewares/FreeRTOS/queue.c ****                     /* Entry time was already set. */
1972:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
1973:Middlewares/FreeRTOS/queue.c ****                 }
1974:Middlewares/FreeRTOS/queue.c ****             }
1975:Middlewares/FreeRTOS/queue.c ****         }
1976:Middlewares/FreeRTOS/queue.c ****         taskEXIT_CRITICAL();
 1651              		.loc 1 1976 9
 1652 008a FFF7FEFF 		bl	vPortExitCritical
1977:Middlewares/FreeRTOS/queue.c **** 
1978:Middlewares/FreeRTOS/queue.c ****         /* Interrupts and other tasks can send to and receive from the queue
1979:Middlewares/FreeRTOS/queue.c ****          * now that the critical section has been exited. */
1980:Middlewares/FreeRTOS/queue.c **** 
1981:Middlewares/FreeRTOS/queue.c ****         vTaskSuspendAll();
 1653              		.loc 1 1981 9
ARM GAS  /tmp/cczksE0f.s 			page 69


 1654 008e FFF7FEFF 		bl	vTaskSuspendAll
1982:Middlewares/FreeRTOS/queue.c ****         prvLockQueue( pxQueue );
 1655              		.loc 1 1982 9
 1656 0092 FFF7FEFF 		bl	vPortEnterCritical
 1657              		.loc 1 1982 9 is_stmt 0 discriminator 1
 1658 0096 3B6A     		ldr	r3, [r7, #32]
 1659 0098 93F84430 		ldrb	r3, [r3, #68]
 1660 009c 5BB2     		sxtb	r3, r3
 1661 009e B3F1FF3F 		cmp	r3, #-1
 1662 00a2 03D1     		bne	.L95
 1663 00a4 3B6A     		ldr	r3, [r7, #32]
 1664 00a6 0022     		movs	r2, #0
 1665 00a8 83F84420 		strb	r2, [r3, #68]
 1666              	.L95:
 1667              		.loc 1 1982 9 discriminator 3
 1668 00ac 3B6A     		ldr	r3, [r7, #32]
 1669 00ae 93F84530 		ldrb	r3, [r3, #69]
 1670 00b2 5BB2     		sxtb	r3, r3
 1671 00b4 B3F1FF3F 		cmp	r3, #-1
 1672 00b8 03D1     		bne	.L96
 1673              		.loc 1 1982 9 discriminator 4
 1674 00ba 3B6A     		ldr	r3, [r7, #32]
 1675 00bc 0022     		movs	r2, #0
 1676 00be 83F84520 		strb	r2, [r3, #69]
 1677              	.L96:
 1678              		.loc 1 1982 9 discriminator 6
 1679 00c2 FFF7FEFF 		bl	vPortExitCritical
1983:Middlewares/FreeRTOS/queue.c **** 
1984:Middlewares/FreeRTOS/queue.c ****         /* Update the timeout state to see if it has expired yet. */
1985:Middlewares/FreeRTOS/queue.c ****         if( xTaskCheckForTimeOut( &xTimeOut, &xTicksToWait ) == pdFALSE )
 1680              		.loc 1 1985 13 is_stmt 1
 1681 00c6 3A1D     		adds	r2, r7, #4
 1682 00c8 07F11003 		add	r3, r7, #16
 1683 00cc 1146     		mov	r1, r2
 1684 00ce 1846     		mov	r0, r3
 1685 00d0 FFF7FEFF 		bl	xTaskCheckForTimeOut
 1686 00d4 0346     		mov	r3, r0
 1687              		.loc 1 1985 11 discriminator 1
 1688 00d6 002B     		cmp	r3, #0
 1689 00d8 23D1     		bne	.L97
1986:Middlewares/FreeRTOS/queue.c ****         {
1987:Middlewares/FreeRTOS/queue.c ****             /* Timeout has not expired yet, check to see if there is data in the
1988:Middlewares/FreeRTOS/queue.c ****             * queue now, and if not enter the Blocked state to wait for data. */
1989:Middlewares/FreeRTOS/queue.c ****             if( prvIsQueueEmpty( pxQueue ) != pdFALSE )
 1690              		.loc 1 1989 17
 1691 00da 386A     		ldr	r0, [r7, #32]
 1692 00dc FFF7FEFF 		bl	prvIsQueueEmpty
 1693 00e0 0346     		mov	r3, r0
 1694              		.loc 1 1989 15 discriminator 1
 1695 00e2 002B     		cmp	r3, #0
 1696 00e4 17D0     		beq	.L98
1990:Middlewares/FreeRTOS/queue.c ****             {
1991:Middlewares/FreeRTOS/queue.c ****                 traceBLOCKING_ON_QUEUE_PEEK( pxQueue );
1992:Middlewares/FreeRTOS/queue.c ****                 vTaskPlaceOnEventList( &( pxQueue->xTasksWaitingToReceive ), xTicksToWait );
 1697              		.loc 1 1992 17
 1698 00e6 3B6A     		ldr	r3, [r7, #32]
 1699 00e8 2433     		adds	r3, r3, #36
ARM GAS  /tmp/cczksE0f.s 			page 70


 1700 00ea 7A68     		ldr	r2, [r7, #4]
 1701 00ec 1146     		mov	r1, r2
 1702 00ee 1846     		mov	r0, r3
 1703 00f0 FFF7FEFF 		bl	vTaskPlaceOnEventList
1993:Middlewares/FreeRTOS/queue.c ****                 prvUnlockQueue( pxQueue );
 1704              		.loc 1 1993 17
 1705 00f4 386A     		ldr	r0, [r7, #32]
 1706 00f6 FFF7FEFF 		bl	prvUnlockQueue
1994:Middlewares/FreeRTOS/queue.c **** 
1995:Middlewares/FreeRTOS/queue.c ****                 if( xTaskResumeAll() == pdFALSE )
 1707              		.loc 1 1995 21
 1708 00fa FFF7FEFF 		bl	xTaskResumeAll
 1709 00fe 0346     		mov	r3, r0
 1710              		.loc 1 1995 19 discriminator 1
 1711 0100 002B     		cmp	r3, #0
 1712 0102 87D1     		bne	.L100
1996:Middlewares/FreeRTOS/queue.c ****                 {
1997:Middlewares/FreeRTOS/queue.c ****                     taskYIELD_WITHIN_API();
 1713              		.loc 1 1997 21
 1714 0104 0F4B     		ldr	r3, .L102
 1715 0106 4FF08052 		mov	r2, #268435456
 1716 010a 1A60     		str	r2, [r3]
 1717              		.syntax unified
 1718              	@ 1997 "Middlewares/FreeRTOS/queue.c" 1
 1719 010c BFF34F8F 		dsb
 1720              	@ 0 "" 2
 1721              	@ 1997 "Middlewares/FreeRTOS/queue.c" 1
 1722 0110 BFF36F8F 		isb
 1723              	@ 0 "" 2
 1724              		.thumb
 1725              		.syntax unified
 1726 0114 7EE7     		b	.L100
 1727              	.L98:
1998:Middlewares/FreeRTOS/queue.c ****                 }
1999:Middlewares/FreeRTOS/queue.c ****                 else
2000:Middlewares/FreeRTOS/queue.c ****                 {
2001:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
2002:Middlewares/FreeRTOS/queue.c ****                 }
2003:Middlewares/FreeRTOS/queue.c ****             }
2004:Middlewares/FreeRTOS/queue.c ****             else
2005:Middlewares/FreeRTOS/queue.c ****             {
2006:Middlewares/FreeRTOS/queue.c ****                 /* There is data in the queue now, so don't enter the blocked
2007:Middlewares/FreeRTOS/queue.c ****                  * state, instead return to try and obtain the data. */
2008:Middlewares/FreeRTOS/queue.c ****                 prvUnlockQueue( pxQueue );
 1728              		.loc 1 2008 17
 1729 0116 386A     		ldr	r0, [r7, #32]
 1730 0118 FFF7FEFF 		bl	prvUnlockQueue
2009:Middlewares/FreeRTOS/queue.c ****                 ( void ) xTaskResumeAll();
 1731              		.loc 1 2009 26
 1732 011c FFF7FEFF 		bl	xTaskResumeAll
 1733 0120 78E7     		b	.L100
 1734              	.L97:
2010:Middlewares/FreeRTOS/queue.c ****             }
2011:Middlewares/FreeRTOS/queue.c ****         }
2012:Middlewares/FreeRTOS/queue.c ****         else
2013:Middlewares/FreeRTOS/queue.c ****         {
2014:Middlewares/FreeRTOS/queue.c ****             /* The timeout has expired.  If there is still no data in the queue
ARM GAS  /tmp/cczksE0f.s 			page 71


2015:Middlewares/FreeRTOS/queue.c ****              * exit, otherwise go back and try to read the data again. */
2016:Middlewares/FreeRTOS/queue.c ****             prvUnlockQueue( pxQueue );
 1735              		.loc 1 2016 13
 1736 0122 386A     		ldr	r0, [r7, #32]
 1737 0124 FFF7FEFF 		bl	prvUnlockQueue
2017:Middlewares/FreeRTOS/queue.c ****             ( void ) xTaskResumeAll();
 1738              		.loc 1 2017 22
 1739 0128 FFF7FEFF 		bl	xTaskResumeAll
2018:Middlewares/FreeRTOS/queue.c **** 
2019:Middlewares/FreeRTOS/queue.c ****             if( prvIsQueueEmpty( pxQueue ) != pdFALSE )
 1740              		.loc 1 2019 17
 1741 012c 386A     		ldr	r0, [r7, #32]
 1742 012e FFF7FEFF 		bl	prvIsQueueEmpty
 1743 0132 0346     		mov	r3, r0
 1744              		.loc 1 2019 15 discriminator 1
 1745 0134 002B     		cmp	r3, #0
 1746 0136 3FF46DAF 		beq	.L100
2020:Middlewares/FreeRTOS/queue.c ****             {
2021:Middlewares/FreeRTOS/queue.c ****                 traceQUEUE_PEEK_FAILED( pxQueue );
2022:Middlewares/FreeRTOS/queue.c ****                 traceRETURN_xQueuePeek( errQUEUE_EMPTY );
2023:Middlewares/FreeRTOS/queue.c **** 
2024:Middlewares/FreeRTOS/queue.c ****                 return errQUEUE_EMPTY;
 1747              		.loc 1 2024 24
 1748 013a 0023     		movs	r3, #0
 1749              	.L101:
2025:Middlewares/FreeRTOS/queue.c ****             }
2026:Middlewares/FreeRTOS/queue.c ****             else
2027:Middlewares/FreeRTOS/queue.c ****             {
2028:Middlewares/FreeRTOS/queue.c ****                 mtCOVERAGE_TEST_MARKER();
2029:Middlewares/FreeRTOS/queue.c ****             }
2030:Middlewares/FreeRTOS/queue.c ****         }
2031:Middlewares/FreeRTOS/queue.c ****     }
2032:Middlewares/FreeRTOS/queue.c **** }
 1750              		.loc 1 2032 1
 1751 013c 1846     		mov	r0, r3
 1752 013e 2837     		adds	r7, r7, #40
 1753              		.cfi_def_cfa_offset 8
 1754 0140 BD46     		mov	sp, r7
 1755              		.cfi_def_cfa_register 13
 1756              		@ sp needed
 1757 0142 80BD     		pop	{r7, pc}
 1758              	.L103:
 1759              		.align	2
 1760              	.L102:
 1761 0144 04ED00E0 		.word	-536810236
 1762              		.cfi_endproc
 1763              	.LFE14:
 1765              		.section	.text.xQueueReceiveFromISR,"ax",%progbits
 1766              		.align	1
 1767              		.global	xQueueReceiveFromISR
 1768              		.syntax unified
 1769              		.thumb
 1770              		.thumb_func
 1772              	xQueueReceiveFromISR:
 1773              	.LFB15:
2033:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2034:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 72


2035:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueueReceiveFromISR( QueueHandle_t xQueue,
2036:Middlewares/FreeRTOS/queue.c ****                                  void * const pvBuffer,
2037:Middlewares/FreeRTOS/queue.c ****                                  BaseType_t * const pxHigherPriorityTaskWoken )
2038:Middlewares/FreeRTOS/queue.c **** {
 1774              		.loc 1 2038 1
 1775              		.cfi_startproc
 1776              		@ args = 0, pretend = 0, frame = 56
 1777              		@ frame_needed = 1, uses_anonymous_args = 0
 1778 0000 80B5     		push	{r7, lr}
 1779              		.cfi_def_cfa_offset 8
 1780              		.cfi_offset 7, -8
 1781              		.cfi_offset 14, -4
 1782 0002 8EB0     		sub	sp, sp, #56
 1783              		.cfi_def_cfa_offset 64
 1784 0004 00AF     		add	r7, sp, #0
 1785              		.cfi_def_cfa_register 7
 1786 0006 F860     		str	r0, [r7, #12]
 1787 0008 B960     		str	r1, [r7, #8]
 1788 000a 7A60     		str	r2, [r7, #4]
2039:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn;
2040:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxSavedInterruptStatus;
2041:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 1789              		.loc 1 2041 21
 1790 000c FB68     		ldr	r3, [r7, #12]
 1791 000e 3B63     		str	r3, [r7, #48]
 1792              	.LBB43:
 1793              	.LBB44:
 233:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 1794              		.loc 2 233 5
 1795              		.syntax unified
 1796              	@ 233 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 1797 0010 EFF31182 		   mrs r2, basepri                                         
 1798 0014 4FF05003 	   mov r3, #80                                              
 1799 0018 83F31188 	   msr basepri, r3                                         
 1800 001c BFF36F8F 	   isb                                                     
 1801 0020 BFF34F8F 	   dsb                                                     
 1802              	
 1803              	@ 0 "" 2
 1804              		.thumb
 1805              		.syntax unified
 1806 0024 FA61     		str	r2, [r7, #28]
 1807 0026 BB61     		str	r3, [r7, #24]
 245:Middlewares/FreeRTOS/portable/portmacro.h **** }
 1808              		.loc 2 245 12
 1809 0028 FB69     		ldr	r3, [r7, #28]
 1810              	.LBE44:
 1811              	.LBE43:
2042:Middlewares/FreeRTOS/queue.c **** 
2043:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueueReceiveFromISR( xQueue, pvBuffer, pxHigherPriorityTaskWoken );
2044:Middlewares/FreeRTOS/queue.c **** 
2045:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
2046:Middlewares/FreeRTOS/queue.c ****     configASSERT( !( ( pvBuffer == NULL ) && ( pxQueue->uxItemSize != ( UBaseType_t ) 0U ) ) );
2047:Middlewares/FreeRTOS/queue.c **** 
2048:Middlewares/FreeRTOS/queue.c ****     /* RTOS ports that support interrupt nesting have the concept of a maximum
2049:Middlewares/FreeRTOS/queue.c ****      * system call (or maximum API call) interrupt priority.  Interrupts that are
2050:Middlewares/FreeRTOS/queue.c ****      * above the maximum system call priority are kept permanently enabled, even
2051:Middlewares/FreeRTOS/queue.c ****      * when the RTOS kernel is in a critical section, but cannot make any calls to
ARM GAS  /tmp/cczksE0f.s 			page 73


2052:Middlewares/FreeRTOS/queue.c ****      * FreeRTOS API functions.  If configASSERT() is defined in FreeRTOSConfig.h
2053:Middlewares/FreeRTOS/queue.c ****      * then portASSERT_IF_INTERRUPT_PRIORITY_INVALID() will result in an assertion
2054:Middlewares/FreeRTOS/queue.c ****      * failure if a FreeRTOS API function is called from an interrupt that has been
2055:Middlewares/FreeRTOS/queue.c ****      * assigned a priority above the configured maximum system call priority.
2056:Middlewares/FreeRTOS/queue.c ****      * Only FreeRTOS functions that end in FromISR can be called from interrupts
2057:Middlewares/FreeRTOS/queue.c ****      * that have been assigned a priority at or (logically) below the maximum
2058:Middlewares/FreeRTOS/queue.c ****      * system call interrupt priority.  FreeRTOS maintains a separate interrupt
2059:Middlewares/FreeRTOS/queue.c ****      * safe API to ensure interrupt entry is as fast and as simple as possible.
2060:Middlewares/FreeRTOS/queue.c ****      * More information (albeit Cortex-M specific) is provided on the following
2061:Middlewares/FreeRTOS/queue.c ****      * link: https://www.FreeRTOS.org/RTOS-Cortex-M3-M4.html */
2062:Middlewares/FreeRTOS/queue.c ****     portASSERT_IF_INTERRUPT_PRIORITY_INVALID();
2063:Middlewares/FreeRTOS/queue.c **** 
2064:Middlewares/FreeRTOS/queue.c ****     /* MISRA Ref 4.7.1 [Return value shall be checked] */
2065:Middlewares/FreeRTOS/queue.c ****     /* More details at: https://github.com/FreeRTOS/FreeRTOS-Kernel/blob/main/MISRA.md#dir-47 */
2066:Middlewares/FreeRTOS/queue.c ****     /* coverity[misra_c_2012_directive_4_7_violation] */
2067:Middlewares/FreeRTOS/queue.c ****     uxSavedInterruptStatus = ( UBaseType_t ) taskENTER_CRITICAL_FROM_ISR();
 1812              		.loc 1 2067 46
 1813 002a FB62     		str	r3, [r7, #44]
 1814              	.LBB45:
2068:Middlewares/FreeRTOS/queue.c ****     {
2069:Middlewares/FreeRTOS/queue.c ****         const UBaseType_t uxMessagesWaiting = pxQueue->uxMessagesWaiting;
 1815              		.loc 1 2069 27
 1816 002c 3B6B     		ldr	r3, [r7, #48]
 1817 002e 9B6B     		ldr	r3, [r3, #56]
 1818 0030 BB62     		str	r3, [r7, #40]
2070:Middlewares/FreeRTOS/queue.c **** 
2071:Middlewares/FreeRTOS/queue.c ****         /* Cannot block in an ISR, so check there is data available. */
2072:Middlewares/FreeRTOS/queue.c ****         if( uxMessagesWaiting > ( UBaseType_t ) 0 )
 1819              		.loc 1 2072 11
 1820 0032 BB6A     		ldr	r3, [r7, #40]
 1821 0034 002B     		cmp	r3, #0
 1822 0036 37D0     		beq	.L106
 1823              	.LBB46:
2073:Middlewares/FreeRTOS/queue.c ****         {
2074:Middlewares/FreeRTOS/queue.c ****             const int8_t cRxLock = pxQueue->cRxLock;
 1824              		.loc 1 2074 26
 1825 0038 3B6B     		ldr	r3, [r7, #48]
 1826 003a 93F84430 		ldrb	r3, [r3, #68]
 1827 003e 87F82730 		strb	r3, [r7, #39]
2075:Middlewares/FreeRTOS/queue.c **** 
2076:Middlewares/FreeRTOS/queue.c ****             traceQUEUE_RECEIVE_FROM_ISR( pxQueue );
2077:Middlewares/FreeRTOS/queue.c **** 
2078:Middlewares/FreeRTOS/queue.c ****             prvCopyDataFromQueue( pxQueue, pvBuffer );
 1828              		.loc 1 2078 13
 1829 0042 B968     		ldr	r1, [r7, #8]
 1830 0044 386B     		ldr	r0, [r7, #48]
 1831 0046 FFF7FEFF 		bl	prvCopyDataFromQueue
2079:Middlewares/FreeRTOS/queue.c ****             pxQueue->uxMessagesWaiting = ( UBaseType_t ) ( uxMessagesWaiting - ( UBaseType_t ) 1 );
 1832              		.loc 1 2079 42
 1833 004a BB6A     		ldr	r3, [r7, #40]
 1834 004c 5A1E     		subs	r2, r3, #1
 1835              		.loc 1 2079 40
 1836 004e 3B6B     		ldr	r3, [r7, #48]
 1837 0050 9A63     		str	r2, [r3, #56]
2080:Middlewares/FreeRTOS/queue.c **** 
2081:Middlewares/FreeRTOS/queue.c ****             /* If the queue is locked the event list will not be modified.
2082:Middlewares/FreeRTOS/queue.c ****              * Instead update the lock count so the task that unlocks the queue
ARM GAS  /tmp/cczksE0f.s 			page 74


2083:Middlewares/FreeRTOS/queue.c ****              * will know that an ISR has removed data while the queue was
2084:Middlewares/FreeRTOS/queue.c ****              * locked. */
2085:Middlewares/FreeRTOS/queue.c ****             if( cRxLock == queueUNLOCKED )
 1838              		.loc 1 2085 15
 1839 0052 97F92730 		ldrsb	r3, [r7, #39]
 1840 0056 B3F1FF3F 		cmp	r3, #-1
 1841 005a 12D1     		bne	.L107
2086:Middlewares/FreeRTOS/queue.c ****             {
2087:Middlewares/FreeRTOS/queue.c ****                 if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToSend ) ) == pdFALSE )
 1842              		.loc 1 2087 21
 1843 005c 3B6B     		ldr	r3, [r7, #48]
 1844 005e 1B69     		ldr	r3, [r3, #16]
 1845              		.loc 1 2087 19
 1846 0060 002B     		cmp	r3, #0
 1847 0062 1ED0     		beq	.L108
2088:Middlewares/FreeRTOS/queue.c ****                 {
2089:Middlewares/FreeRTOS/queue.c ****                     if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToSend ) ) != pdFALSE )
 1848              		.loc 1 2089 51
 1849 0064 3B6B     		ldr	r3, [r7, #48]
 1850 0066 1033     		adds	r3, r3, #16
 1851              		.loc 1 2089 25
 1852 0068 1846     		mov	r0, r3
 1853 006a FFF7FEFF 		bl	xTaskRemoveFromEventList
 1854 006e 0346     		mov	r3, r0
 1855              		.loc 1 2089 23 discriminator 1
 1856 0070 002B     		cmp	r3, #0
 1857 0072 16D0     		beq	.L108
2090:Middlewares/FreeRTOS/queue.c ****                     {
2091:Middlewares/FreeRTOS/queue.c ****                         /* The task waiting has a higher priority than us so
2092:Middlewares/FreeRTOS/queue.c ****                          * force a context switch. */
2093:Middlewares/FreeRTOS/queue.c ****                         if( pxHigherPriorityTaskWoken != NULL )
 1858              		.loc 1 2093 27
 1859 0074 7B68     		ldr	r3, [r7, #4]
 1860 0076 002B     		cmp	r3, #0
 1861 0078 13D0     		beq	.L108
2094:Middlewares/FreeRTOS/queue.c ****                         {
2095:Middlewares/FreeRTOS/queue.c ****                             *pxHigherPriorityTaskWoken = pdTRUE;
 1862              		.loc 1 2095 56
 1863 007a 7B68     		ldr	r3, [r7, #4]
 1864 007c 0122     		movs	r2, #1
 1865 007e 1A60     		str	r2, [r3]
 1866 0080 0FE0     		b	.L108
 1867              	.L107:
 1868              	.LBB47:
2096:Middlewares/FreeRTOS/queue.c ****                         }
2097:Middlewares/FreeRTOS/queue.c ****                         else
2098:Middlewares/FreeRTOS/queue.c ****                         {
2099:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
2100:Middlewares/FreeRTOS/queue.c ****                         }
2101:Middlewares/FreeRTOS/queue.c ****                     }
2102:Middlewares/FreeRTOS/queue.c ****                     else
2103:Middlewares/FreeRTOS/queue.c ****                     {
2104:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
2105:Middlewares/FreeRTOS/queue.c ****                     }
2106:Middlewares/FreeRTOS/queue.c ****                 }
2107:Middlewares/FreeRTOS/queue.c ****                 else
2108:Middlewares/FreeRTOS/queue.c ****                 {
ARM GAS  /tmp/cczksE0f.s 			page 75


2109:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
2110:Middlewares/FreeRTOS/queue.c ****                 }
2111:Middlewares/FreeRTOS/queue.c ****             }
2112:Middlewares/FreeRTOS/queue.c ****             else
2113:Middlewares/FreeRTOS/queue.c ****             {
2114:Middlewares/FreeRTOS/queue.c ****                 /* Increment the lock count so the task that unlocks the queue
2115:Middlewares/FreeRTOS/queue.c ****                  * knows that data was removed while it was locked. */
2116:Middlewares/FreeRTOS/queue.c ****                 prvIncrementQueueRxLock( pxQueue, cRxLock );
 1869              		.loc 1 2116 17
 1870 0082 FFF7FEFF 		bl	uxTaskGetNumberOfTasks
 1871 0086 3862     		str	r0, [r7, #32]
 1872              		.loc 1 2116 17 is_stmt 0 discriminator 1
 1873 0088 97F92730 		ldrsb	r3, [r7, #39]
 1874 008c 3A6A     		ldr	r2, [r7, #32]
 1875 008e 9A42     		cmp	r2, r3
 1876 0090 07D9     		bls	.L108
 1877 0092 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 1878 0096 0133     		adds	r3, r3, #1
 1879 0098 DBB2     		uxtb	r3, r3
 1880 009a 5AB2     		sxtb	r2, r3
 1881 009c 3B6B     		ldr	r3, [r7, #48]
 1882 009e 83F84420 		strb	r2, [r3, #68]
 1883              	.L108:
 1884              	.LBE47:
2117:Middlewares/FreeRTOS/queue.c ****             }
2118:Middlewares/FreeRTOS/queue.c **** 
2119:Middlewares/FreeRTOS/queue.c ****             xReturn = pdPASS;
 1885              		.loc 1 2119 21 is_stmt 1
 1886 00a2 0123     		movs	r3, #1
 1887 00a4 7B63     		str	r3, [r7, #52]
 1888              	.LBE46:
 1889 00a6 01E0     		b	.L109
 1890              	.L106:
2120:Middlewares/FreeRTOS/queue.c ****         }
2121:Middlewares/FreeRTOS/queue.c ****         else
2122:Middlewares/FreeRTOS/queue.c ****         {
2123:Middlewares/FreeRTOS/queue.c ****             xReturn = pdFAIL;
 1891              		.loc 1 2123 21
 1892 00a8 0023     		movs	r3, #0
 1893 00aa 7B63     		str	r3, [r7, #52]
 1894              	.L109:
 1895 00ac FB6A     		ldr	r3, [r7, #44]
 1896 00ae 7B61     		str	r3, [r7, #20]
 1897              	.LBE45:
 1898              	.LBB48:
 1899              	.LBB49:
 251:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 1900              		.loc 2 251 5
 1901 00b0 7B69     		ldr	r3, [r7, #20]
 1902              		.syntax unified
 1903              	@ 251 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 1904 00b2 83F31188 		   msr basepri, r3 
 1905              	@ 0 "" 2
 1906              		.loc 2 255 1
 1907              		.thumb
 1908              		.syntax unified
 1909 00b6 00BF     		nop
ARM GAS  /tmp/cczksE0f.s 			page 76


 1910              	.LBE49:
 1911              	.LBE48:
2124:Middlewares/FreeRTOS/queue.c ****             traceQUEUE_RECEIVE_FROM_ISR_FAILED( pxQueue );
2125:Middlewares/FreeRTOS/queue.c ****         }
2126:Middlewares/FreeRTOS/queue.c ****     }
2127:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL_FROM_ISR( uxSavedInterruptStatus );
2128:Middlewares/FreeRTOS/queue.c **** 
2129:Middlewares/FreeRTOS/queue.c ****     traceRETURN_xQueueReceiveFromISR( xReturn );
2130:Middlewares/FreeRTOS/queue.c **** 
2131:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 1912              		.loc 1 2131 12
 1913 00b8 7B6B     		ldr	r3, [r7, #52]
2132:Middlewares/FreeRTOS/queue.c **** }
 1914              		.loc 1 2132 1
 1915 00ba 1846     		mov	r0, r3
 1916 00bc 3837     		adds	r7, r7, #56
 1917              		.cfi_def_cfa_offset 8
 1918 00be BD46     		mov	sp, r7
 1919              		.cfi_def_cfa_register 13
 1920              		@ sp needed
 1921 00c0 80BD     		pop	{r7, pc}
 1922              		.cfi_endproc
 1923              	.LFE15:
 1925              		.section	.text.xQueuePeekFromISR,"ax",%progbits
 1926              		.align	1
 1927              		.global	xQueuePeekFromISR
 1928              		.syntax unified
 1929              		.thumb
 1930              		.thumb_func
 1932              	xQueuePeekFromISR:
 1933              	.LFB16:
2133:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2134:Middlewares/FreeRTOS/queue.c **** 
2135:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueuePeekFromISR( QueueHandle_t xQueue,
2136:Middlewares/FreeRTOS/queue.c ****                               void * const pvBuffer )
2137:Middlewares/FreeRTOS/queue.c **** {
 1934              		.loc 1 2137 1
 1935              		.cfi_startproc
 1936              		@ args = 0, pretend = 0, frame = 40
 1937              		@ frame_needed = 1, uses_anonymous_args = 0
 1938 0000 80B5     		push	{r7, lr}
 1939              		.cfi_def_cfa_offset 8
 1940              		.cfi_offset 7, -8
 1941              		.cfi_offset 14, -4
 1942 0002 8AB0     		sub	sp, sp, #40
 1943              		.cfi_def_cfa_offset 48
 1944 0004 00AF     		add	r7, sp, #0
 1945              		.cfi_def_cfa_register 7
 1946 0006 7860     		str	r0, [r7, #4]
 1947 0008 3960     		str	r1, [r7]
2138:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn;
2139:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxSavedInterruptStatus;
2140:Middlewares/FreeRTOS/queue.c ****     int8_t * pcOriginalReadPosition;
2141:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 1948              		.loc 1 2141 21
 1949 000a 7B68     		ldr	r3, [r7, #4]
 1950 000c 3B62     		str	r3, [r7, #32]
ARM GAS  /tmp/cczksE0f.s 			page 77


 1951              	.LBB50:
 1952              	.LBB51:
 233:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 1953              		.loc 2 233 5
 1954              		.syntax unified
 1955              	@ 233 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 1956 000e EFF31182 		   mrs r2, basepri                                         
 1957 0012 4FF05003 	   mov r3, #80                                              
 1958 0016 83F31188 	   msr basepri, r3                                         
 1959 001a BFF36F8F 	   isb                                                     
 1960 001e BFF34F8F 	   dsb                                                     
 1961              	
 1962              	@ 0 "" 2
 1963              		.thumb
 1964              		.syntax unified
 1965 0022 7A61     		str	r2, [r7, #20]
 1966 0024 3B61     		str	r3, [r7, #16]
 245:Middlewares/FreeRTOS/portable/portmacro.h **** }
 1967              		.loc 2 245 12
 1968 0026 7B69     		ldr	r3, [r7, #20]
 1969              	.LBE51:
 1970              	.LBE50:
2142:Middlewares/FreeRTOS/queue.c **** 
2143:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueuePeekFromISR( xQueue, pvBuffer );
2144:Middlewares/FreeRTOS/queue.c **** 
2145:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
2146:Middlewares/FreeRTOS/queue.c ****     configASSERT( !( ( pvBuffer == NULL ) && ( pxQueue->uxItemSize != ( UBaseType_t ) 0U ) ) );
2147:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue->uxItemSize != 0 ); /* Can't peek a semaphore. */
2148:Middlewares/FreeRTOS/queue.c **** 
2149:Middlewares/FreeRTOS/queue.c ****     /* RTOS ports that support interrupt nesting have the concept of a maximum
2150:Middlewares/FreeRTOS/queue.c ****      * system call (or maximum API call) interrupt priority.  Interrupts that are
2151:Middlewares/FreeRTOS/queue.c ****      * above the maximum system call priority are kept permanently enabled, even
2152:Middlewares/FreeRTOS/queue.c ****      * when the RTOS kernel is in a critical section, but cannot make any calls to
2153:Middlewares/FreeRTOS/queue.c ****      * FreeRTOS API functions.  If configASSERT() is defined in FreeRTOSConfig.h
2154:Middlewares/FreeRTOS/queue.c ****      * then portASSERT_IF_INTERRUPT_PRIORITY_INVALID() will result in an assertion
2155:Middlewares/FreeRTOS/queue.c ****      * failure if a FreeRTOS API function is called from an interrupt that has been
2156:Middlewares/FreeRTOS/queue.c ****      * assigned a priority above the configured maximum system call priority.
2157:Middlewares/FreeRTOS/queue.c ****      * Only FreeRTOS functions that end in FromISR can be called from interrupts
2158:Middlewares/FreeRTOS/queue.c ****      * that have been assigned a priority at or (logically) below the maximum
2159:Middlewares/FreeRTOS/queue.c ****      * system call interrupt priority.  FreeRTOS maintains a separate interrupt
2160:Middlewares/FreeRTOS/queue.c ****      * safe API to ensure interrupt entry is as fast and as simple as possible.
2161:Middlewares/FreeRTOS/queue.c ****      * More information (albeit Cortex-M specific) is provided on the following
2162:Middlewares/FreeRTOS/queue.c ****      * link: https://www.FreeRTOS.org/RTOS-Cortex-M3-M4.html */
2163:Middlewares/FreeRTOS/queue.c ****     portASSERT_IF_INTERRUPT_PRIORITY_INVALID();
2164:Middlewares/FreeRTOS/queue.c **** 
2165:Middlewares/FreeRTOS/queue.c ****     /* MISRA Ref 4.7.1 [Return value shall be checked] */
2166:Middlewares/FreeRTOS/queue.c ****     /* More details at: https://github.com/FreeRTOS/FreeRTOS-Kernel/blob/main/MISRA.md#dir-47 */
2167:Middlewares/FreeRTOS/queue.c ****     /* coverity[misra_c_2012_directive_4_7_violation] */
2168:Middlewares/FreeRTOS/queue.c ****     uxSavedInterruptStatus = ( UBaseType_t ) taskENTER_CRITICAL_FROM_ISR();
 1971              		.loc 1 2168 46
 1972 0028 FB61     		str	r3, [r7, #28]
2169:Middlewares/FreeRTOS/queue.c ****     {
2170:Middlewares/FreeRTOS/queue.c ****         /* Cannot block in an ISR, so check there is data available. */
2171:Middlewares/FreeRTOS/queue.c ****         if( pxQueue->uxMessagesWaiting > ( UBaseType_t ) 0 )
 1973              		.loc 1 2171 20
 1974 002a 3B6A     		ldr	r3, [r7, #32]
 1975 002c 9B6B     		ldr	r3, [r3, #56]
ARM GAS  /tmp/cczksE0f.s 			page 78


 1976              		.loc 1 2171 11
 1977 002e 002B     		cmp	r3, #0
 1978 0030 0CD0     		beq	.L113
2172:Middlewares/FreeRTOS/queue.c ****         {
2173:Middlewares/FreeRTOS/queue.c ****             traceQUEUE_PEEK_FROM_ISR( pxQueue );
2174:Middlewares/FreeRTOS/queue.c **** 
2175:Middlewares/FreeRTOS/queue.c ****             /* Remember the read position so it can be reset as nothing is
2176:Middlewares/FreeRTOS/queue.c ****              * actually being removed from the queue. */
2177:Middlewares/FreeRTOS/queue.c ****             pcOriginalReadPosition = pxQueue->u.xQueue.pcReadFrom;
 1979              		.loc 1 2177 36
 1980 0032 3B6A     		ldr	r3, [r7, #32]
 1981 0034 DB68     		ldr	r3, [r3, #12]
 1982 0036 BB61     		str	r3, [r7, #24]
2178:Middlewares/FreeRTOS/queue.c ****             prvCopyDataFromQueue( pxQueue, pvBuffer );
 1983              		.loc 1 2178 13
 1984 0038 3968     		ldr	r1, [r7]
 1985 003a 386A     		ldr	r0, [r7, #32]
 1986 003c FFF7FEFF 		bl	prvCopyDataFromQueue
2179:Middlewares/FreeRTOS/queue.c ****             pxQueue->u.xQueue.pcReadFrom = pcOriginalReadPosition;
 1987              		.loc 1 2179 42
 1988 0040 3B6A     		ldr	r3, [r7, #32]
 1989 0042 BA69     		ldr	r2, [r7, #24]
 1990 0044 DA60     		str	r2, [r3, #12]
2180:Middlewares/FreeRTOS/queue.c **** 
2181:Middlewares/FreeRTOS/queue.c ****             xReturn = pdPASS;
 1991              		.loc 1 2181 21
 1992 0046 0123     		movs	r3, #1
 1993 0048 7B62     		str	r3, [r7, #36]
 1994 004a 01E0     		b	.L114
 1995              	.L113:
2182:Middlewares/FreeRTOS/queue.c ****         }
2183:Middlewares/FreeRTOS/queue.c ****         else
2184:Middlewares/FreeRTOS/queue.c ****         {
2185:Middlewares/FreeRTOS/queue.c ****             xReturn = pdFAIL;
 1996              		.loc 1 2185 21
 1997 004c 0023     		movs	r3, #0
 1998 004e 7B62     		str	r3, [r7, #36]
 1999              	.L114:
 2000 0050 FB69     		ldr	r3, [r7, #28]
 2001 0052 FB60     		str	r3, [r7, #12]
 2002              	.LBB52:
 2003              	.LBB53:
 251:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 2004              		.loc 2 251 5
 2005 0054 FB68     		ldr	r3, [r7, #12]
 2006              		.syntax unified
 2007              	@ 251 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 2008 0056 83F31188 		   msr basepri, r3 
 2009              	@ 0 "" 2
 2010              		.loc 2 255 1
 2011              		.thumb
 2012              		.syntax unified
 2013 005a 00BF     		nop
 2014              	.LBE53:
 2015              	.LBE52:
2186:Middlewares/FreeRTOS/queue.c ****             traceQUEUE_PEEK_FROM_ISR_FAILED( pxQueue );
2187:Middlewares/FreeRTOS/queue.c ****         }
ARM GAS  /tmp/cczksE0f.s 			page 79


2188:Middlewares/FreeRTOS/queue.c ****     }
2189:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL_FROM_ISR( uxSavedInterruptStatus );
2190:Middlewares/FreeRTOS/queue.c **** 
2191:Middlewares/FreeRTOS/queue.c ****     traceRETURN_xQueuePeekFromISR( xReturn );
2192:Middlewares/FreeRTOS/queue.c **** 
2193:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 2016              		.loc 1 2193 12
 2017 005c 7B6A     		ldr	r3, [r7, #36]
2194:Middlewares/FreeRTOS/queue.c **** }
 2018              		.loc 1 2194 1
 2019 005e 1846     		mov	r0, r3
 2020 0060 2837     		adds	r7, r7, #40
 2021              		.cfi_def_cfa_offset 8
 2022 0062 BD46     		mov	sp, r7
 2023              		.cfi_def_cfa_register 13
 2024              		@ sp needed
 2025 0064 80BD     		pop	{r7, pc}
 2026              		.cfi_endproc
 2027              	.LFE16:
 2029              		.section	.text.uxQueueMessagesWaiting,"ax",%progbits
 2030              		.align	1
 2031              		.global	uxQueueMessagesWaiting
 2032              		.syntax unified
 2033              		.thumb
 2034              		.thumb_func
 2036              	uxQueueMessagesWaiting:
 2037              	.LFB17:
2195:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2196:Middlewares/FreeRTOS/queue.c **** 
2197:Middlewares/FreeRTOS/queue.c **** UBaseType_t uxQueueMessagesWaiting( const QueueHandle_t xQueue )
2198:Middlewares/FreeRTOS/queue.c **** {
 2038              		.loc 1 2198 1
 2039              		.cfi_startproc
 2040              		@ args = 0, pretend = 0, frame = 16
 2041              		@ frame_needed = 1, uses_anonymous_args = 0
 2042 0000 80B5     		push	{r7, lr}
 2043              		.cfi_def_cfa_offset 8
 2044              		.cfi_offset 7, -8
 2045              		.cfi_offset 14, -4
 2046 0002 84B0     		sub	sp, sp, #16
 2047              		.cfi_def_cfa_offset 24
 2048 0004 00AF     		add	r7, sp, #0
 2049              		.cfi_def_cfa_register 7
 2050 0006 7860     		str	r0, [r7, #4]
2199:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxReturn;
2200:Middlewares/FreeRTOS/queue.c **** 
2201:Middlewares/FreeRTOS/queue.c ****     traceENTER_uxQueueMessagesWaiting( xQueue );
2202:Middlewares/FreeRTOS/queue.c **** 
2203:Middlewares/FreeRTOS/queue.c ****     configASSERT( xQueue );
2204:Middlewares/FreeRTOS/queue.c **** 
2205:Middlewares/FreeRTOS/queue.c ****     taskENTER_CRITICAL();
 2051              		.loc 1 2205 5
 2052 0008 FFF7FEFF 		bl	vPortEnterCritical
2206:Middlewares/FreeRTOS/queue.c ****     {
2207:Middlewares/FreeRTOS/queue.c ****         uxReturn = ( ( Queue_t * ) xQueue )->uxMessagesWaiting;
 2053              		.loc 1 2207 18
 2054 000c 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cczksE0f.s 			page 80


 2055 000e 9B6B     		ldr	r3, [r3, #56]
 2056 0010 FB60     		str	r3, [r7, #12]
2208:Middlewares/FreeRTOS/queue.c ****     }
2209:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL();
 2057              		.loc 1 2209 5
 2058 0012 FFF7FEFF 		bl	vPortExitCritical
2210:Middlewares/FreeRTOS/queue.c **** 
2211:Middlewares/FreeRTOS/queue.c ****     traceRETURN_uxQueueMessagesWaiting( uxReturn );
2212:Middlewares/FreeRTOS/queue.c **** 
2213:Middlewares/FreeRTOS/queue.c ****     return uxReturn;
 2059              		.loc 1 2213 12
 2060 0016 FB68     		ldr	r3, [r7, #12]
2214:Middlewares/FreeRTOS/queue.c **** }
 2061              		.loc 1 2214 1
 2062 0018 1846     		mov	r0, r3
 2063 001a 1037     		adds	r7, r7, #16
 2064              		.cfi_def_cfa_offset 8
 2065 001c BD46     		mov	sp, r7
 2066              		.cfi_def_cfa_register 13
 2067              		@ sp needed
 2068 001e 80BD     		pop	{r7, pc}
 2069              		.cfi_endproc
 2070              	.LFE17:
 2072              		.section	.text.uxQueueSpacesAvailable,"ax",%progbits
 2073              		.align	1
 2074              		.global	uxQueueSpacesAvailable
 2075              		.syntax unified
 2076              		.thumb
 2077              		.thumb_func
 2079              	uxQueueSpacesAvailable:
 2080              	.LFB18:
2215:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2216:Middlewares/FreeRTOS/queue.c **** 
2217:Middlewares/FreeRTOS/queue.c **** UBaseType_t uxQueueSpacesAvailable( const QueueHandle_t xQueue )
2218:Middlewares/FreeRTOS/queue.c **** {
 2081              		.loc 1 2218 1
 2082              		.cfi_startproc
 2083              		@ args = 0, pretend = 0, frame = 16
 2084              		@ frame_needed = 1, uses_anonymous_args = 0
 2085 0000 80B5     		push	{r7, lr}
 2086              		.cfi_def_cfa_offset 8
 2087              		.cfi_offset 7, -8
 2088              		.cfi_offset 14, -4
 2089 0002 84B0     		sub	sp, sp, #16
 2090              		.cfi_def_cfa_offset 24
 2091 0004 00AF     		add	r7, sp, #0
 2092              		.cfi_def_cfa_register 7
 2093 0006 7860     		str	r0, [r7, #4]
2219:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxReturn;
2220:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 2094              		.loc 1 2220 21
 2095 0008 7B68     		ldr	r3, [r7, #4]
 2096 000a FB60     		str	r3, [r7, #12]
2221:Middlewares/FreeRTOS/queue.c **** 
2222:Middlewares/FreeRTOS/queue.c ****     traceENTER_uxQueueSpacesAvailable( xQueue );
2223:Middlewares/FreeRTOS/queue.c **** 
2224:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
ARM GAS  /tmp/cczksE0f.s 			page 81


2225:Middlewares/FreeRTOS/queue.c **** 
2226:Middlewares/FreeRTOS/queue.c ****     taskENTER_CRITICAL();
 2097              		.loc 1 2226 5
 2098 000c FFF7FEFF 		bl	vPortEnterCritical
2227:Middlewares/FreeRTOS/queue.c ****     {
2228:Middlewares/FreeRTOS/queue.c ****         uxReturn = ( UBaseType_t ) ( pxQueue->uxLength - pxQueue->uxMessagesWaiting );
 2099              		.loc 1 2228 45
 2100 0010 FB68     		ldr	r3, [r7, #12]
 2101 0012 DA6B     		ldr	r2, [r3, #60]
 2102              		.loc 1 2228 65
 2103 0014 FB68     		ldr	r3, [r7, #12]
 2104 0016 9B6B     		ldr	r3, [r3, #56]
 2105              		.loc 1 2228 18
 2106 0018 D31A     		subs	r3, r2, r3
 2107 001a BB60     		str	r3, [r7, #8]
2229:Middlewares/FreeRTOS/queue.c ****     }
2230:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL();
 2108              		.loc 1 2230 5
 2109 001c FFF7FEFF 		bl	vPortExitCritical
2231:Middlewares/FreeRTOS/queue.c **** 
2232:Middlewares/FreeRTOS/queue.c ****     traceRETURN_uxQueueSpacesAvailable( uxReturn );
2233:Middlewares/FreeRTOS/queue.c **** 
2234:Middlewares/FreeRTOS/queue.c ****     return uxReturn;
 2110              		.loc 1 2234 12
 2111 0020 BB68     		ldr	r3, [r7, #8]
2235:Middlewares/FreeRTOS/queue.c **** }
 2112              		.loc 1 2235 1
 2113 0022 1846     		mov	r0, r3
 2114 0024 1037     		adds	r7, r7, #16
 2115              		.cfi_def_cfa_offset 8
 2116 0026 BD46     		mov	sp, r7
 2117              		.cfi_def_cfa_register 13
 2118              		@ sp needed
 2119 0028 80BD     		pop	{r7, pc}
 2120              		.cfi_endproc
 2121              	.LFE18:
 2123              		.section	.text.uxQueueMessagesWaitingFromISR,"ax",%progbits
 2124              		.align	1
 2125              		.global	uxQueueMessagesWaitingFromISR
 2126              		.syntax unified
 2127              		.thumb
 2128              		.thumb_func
 2130              	uxQueueMessagesWaitingFromISR:
 2131              	.LFB19:
2236:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2237:Middlewares/FreeRTOS/queue.c **** 
2238:Middlewares/FreeRTOS/queue.c **** UBaseType_t uxQueueMessagesWaitingFromISR( const QueueHandle_t xQueue )
2239:Middlewares/FreeRTOS/queue.c **** {
 2132              		.loc 1 2239 1
 2133              		.cfi_startproc
 2134              		@ args = 0, pretend = 0, frame = 16
 2135              		@ frame_needed = 1, uses_anonymous_args = 0
 2136              		@ link register save eliminated.
 2137 0000 80B4     		push	{r7}
 2138              		.cfi_def_cfa_offset 4
 2139              		.cfi_offset 7, -4
 2140 0002 85B0     		sub	sp, sp, #20
ARM GAS  /tmp/cczksE0f.s 			page 82


 2141              		.cfi_def_cfa_offset 24
 2142 0004 00AF     		add	r7, sp, #0
 2143              		.cfi_def_cfa_register 7
 2144 0006 7860     		str	r0, [r7, #4]
2240:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxReturn;
2241:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 2145              		.loc 1 2241 21
 2146 0008 7B68     		ldr	r3, [r7, #4]
 2147 000a FB60     		str	r3, [r7, #12]
2242:Middlewares/FreeRTOS/queue.c **** 
2243:Middlewares/FreeRTOS/queue.c ****     traceENTER_uxQueueMessagesWaitingFromISR( xQueue );
2244:Middlewares/FreeRTOS/queue.c **** 
2245:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
2246:Middlewares/FreeRTOS/queue.c ****     uxReturn = pxQueue->uxMessagesWaiting;
 2148              		.loc 1 2246 14
 2149 000c FB68     		ldr	r3, [r7, #12]
 2150 000e 9B6B     		ldr	r3, [r3, #56]
 2151 0010 BB60     		str	r3, [r7, #8]
2247:Middlewares/FreeRTOS/queue.c **** 
2248:Middlewares/FreeRTOS/queue.c ****     traceRETURN_uxQueueMessagesWaitingFromISR( uxReturn );
2249:Middlewares/FreeRTOS/queue.c **** 
2250:Middlewares/FreeRTOS/queue.c ****     return uxReturn;
 2152              		.loc 1 2250 12
 2153 0012 BB68     		ldr	r3, [r7, #8]
2251:Middlewares/FreeRTOS/queue.c **** }
 2154              		.loc 1 2251 1
 2155 0014 1846     		mov	r0, r3
 2156 0016 1437     		adds	r7, r7, #20
 2157              		.cfi_def_cfa_offset 4
 2158 0018 BD46     		mov	sp, r7
 2159              		.cfi_def_cfa_register 13
 2160              		@ sp needed
 2161 001a 5DF8047B 		ldr	r7, [sp], #4
 2162              		.cfi_restore 7
 2163              		.cfi_def_cfa_offset 0
 2164 001e 7047     		bx	lr
 2165              		.cfi_endproc
 2166              	.LFE19:
 2168              		.section	.text.vQueueDelete,"ax",%progbits
 2169              		.align	1
 2170              		.global	vQueueDelete
 2171              		.syntax unified
 2172              		.thumb
 2173              		.thumb_func
 2175              	vQueueDelete:
 2176              	.LFB20:
2252:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2253:Middlewares/FreeRTOS/queue.c **** 
2254:Middlewares/FreeRTOS/queue.c **** void vQueueDelete( QueueHandle_t xQueue )
2255:Middlewares/FreeRTOS/queue.c **** {
 2177              		.loc 1 2255 1
 2178              		.cfi_startproc
 2179              		@ args = 0, pretend = 0, frame = 16
 2180              		@ frame_needed = 1, uses_anonymous_args = 0
 2181 0000 80B5     		push	{r7, lr}
 2182              		.cfi_def_cfa_offset 8
 2183              		.cfi_offset 7, -8
ARM GAS  /tmp/cczksE0f.s 			page 83


 2184              		.cfi_offset 14, -4
 2185 0002 84B0     		sub	sp, sp, #16
 2186              		.cfi_def_cfa_offset 24
 2187 0004 00AF     		add	r7, sp, #0
 2188              		.cfi_def_cfa_register 7
 2189 0006 7860     		str	r0, [r7, #4]
2256:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 2190              		.loc 1 2256 21
 2191 0008 7B68     		ldr	r3, [r7, #4]
 2192 000a FB60     		str	r3, [r7, #12]
2257:Middlewares/FreeRTOS/queue.c **** 
2258:Middlewares/FreeRTOS/queue.c ****     traceENTER_vQueueDelete( xQueue );
2259:Middlewares/FreeRTOS/queue.c **** 
2260:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
2261:Middlewares/FreeRTOS/queue.c ****     traceQUEUE_DELETE( pxQueue );
2262:Middlewares/FreeRTOS/queue.c **** 
2263:Middlewares/FreeRTOS/queue.c ****     #if ( configQUEUE_REGISTRY_SIZE > 0 )
2264:Middlewares/FreeRTOS/queue.c ****     {
2265:Middlewares/FreeRTOS/queue.c ****         vQueueUnregisterQueue( pxQueue );
2266:Middlewares/FreeRTOS/queue.c ****     }
2267:Middlewares/FreeRTOS/queue.c ****     #endif
2268:Middlewares/FreeRTOS/queue.c **** 
2269:Middlewares/FreeRTOS/queue.c ****     #if ( ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) && ( configSUPPORT_STATIC_ALLOCATION == 0 ) )
2270:Middlewares/FreeRTOS/queue.c ****     {
2271:Middlewares/FreeRTOS/queue.c ****         /* The queue can only have been allocated dynamically - free it
2272:Middlewares/FreeRTOS/queue.c ****          * again. */
2273:Middlewares/FreeRTOS/queue.c ****         vPortFree( pxQueue );
 2193              		.loc 1 2273 9
 2194 000c F868     		ldr	r0, [r7, #12]
 2195 000e FFF7FEFF 		bl	vPortFree
2274:Middlewares/FreeRTOS/queue.c ****     }
2275:Middlewares/FreeRTOS/queue.c ****     #elif ( ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) && ( configSUPPORT_STATIC_ALLOCATION == 1 ) )
2276:Middlewares/FreeRTOS/queue.c ****     {
2277:Middlewares/FreeRTOS/queue.c ****         /* The queue could have been allocated statically or dynamically, so
2278:Middlewares/FreeRTOS/queue.c ****          * check before attempting to free the memory. */
2279:Middlewares/FreeRTOS/queue.c ****         if( pxQueue->ucStaticallyAllocated == ( uint8_t ) pdFALSE )
2280:Middlewares/FreeRTOS/queue.c ****         {
2281:Middlewares/FreeRTOS/queue.c ****             vPortFree( pxQueue );
2282:Middlewares/FreeRTOS/queue.c ****         }
2283:Middlewares/FreeRTOS/queue.c ****         else
2284:Middlewares/FreeRTOS/queue.c ****         {
2285:Middlewares/FreeRTOS/queue.c ****             mtCOVERAGE_TEST_MARKER();
2286:Middlewares/FreeRTOS/queue.c ****         }
2287:Middlewares/FreeRTOS/queue.c ****     }
2288:Middlewares/FreeRTOS/queue.c ****     #else /* if ( ( configSUPPORT_DYNAMIC_ALLOCATION == 1 ) && ( configSUPPORT_STATIC_ALLOCATION ==
2289:Middlewares/FreeRTOS/queue.c ****     {
2290:Middlewares/FreeRTOS/queue.c ****         /* The queue must have been statically allocated, so is not going to be
2291:Middlewares/FreeRTOS/queue.c ****          * deleted.  Avoid compiler warnings about the unused parameter. */
2292:Middlewares/FreeRTOS/queue.c ****         ( void ) pxQueue;
2293:Middlewares/FreeRTOS/queue.c ****     }
2294:Middlewares/FreeRTOS/queue.c ****     #endif /* configSUPPORT_DYNAMIC_ALLOCATION */
2295:Middlewares/FreeRTOS/queue.c **** 
2296:Middlewares/FreeRTOS/queue.c ****     traceRETURN_vQueueDelete();
2297:Middlewares/FreeRTOS/queue.c **** }
 2196              		.loc 1 2297 1
 2197 0012 00BF     		nop
 2198 0014 1037     		adds	r7, r7, #16
ARM GAS  /tmp/cczksE0f.s 			page 84


 2199              		.cfi_def_cfa_offset 8
 2200 0016 BD46     		mov	sp, r7
 2201              		.cfi_def_cfa_register 13
 2202              		@ sp needed
 2203 0018 80BD     		pop	{r7, pc}
 2204              		.cfi_endproc
 2205              	.LFE20:
 2207              		.section	.text.uxQueueGetQueueNumber,"ax",%progbits
 2208              		.align	1
 2209              		.global	uxQueueGetQueueNumber
 2210              		.syntax unified
 2211              		.thumb
 2212              		.thumb_func
 2214              	uxQueueGetQueueNumber:
 2215              	.LFB21:
2298:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2299:Middlewares/FreeRTOS/queue.c **** 
2300:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_TRACE_FACILITY == 1 )
2301:Middlewares/FreeRTOS/queue.c **** 
2302:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxQueueGetQueueNumber( QueueHandle_t xQueue )
2303:Middlewares/FreeRTOS/queue.c ****     {
 2216              		.loc 1 2303 5
 2217              		.cfi_startproc
 2218              		@ args = 0, pretend = 0, frame = 8
 2219              		@ frame_needed = 1, uses_anonymous_args = 0
 2220              		@ link register save eliminated.
 2221 0000 80B4     		push	{r7}
 2222              		.cfi_def_cfa_offset 4
 2223              		.cfi_offset 7, -4
 2224 0002 83B0     		sub	sp, sp, #12
 2225              		.cfi_def_cfa_offset 16
 2226 0004 00AF     		add	r7, sp, #0
 2227              		.cfi_def_cfa_register 7
 2228 0006 7860     		str	r0, [r7, #4]
2304:Middlewares/FreeRTOS/queue.c ****         traceENTER_uxQueueGetQueueNumber( xQueue );
2305:Middlewares/FreeRTOS/queue.c **** 
2306:Middlewares/FreeRTOS/queue.c ****         traceRETURN_uxQueueGetQueueNumber( ( ( Queue_t * ) xQueue )->uxQueueNumber );
2307:Middlewares/FreeRTOS/queue.c **** 
2308:Middlewares/FreeRTOS/queue.c ****         return ( ( Queue_t * ) xQueue )->uxQueueNumber;
 2229              		.loc 1 2308 40
 2230 0008 7B68     		ldr	r3, [r7, #4]
 2231 000a 9B6C     		ldr	r3, [r3, #72]
2309:Middlewares/FreeRTOS/queue.c ****     }
 2232              		.loc 1 2309 5
 2233 000c 1846     		mov	r0, r3
 2234 000e 0C37     		adds	r7, r7, #12
 2235              		.cfi_def_cfa_offset 4
 2236 0010 BD46     		mov	sp, r7
 2237              		.cfi_def_cfa_register 13
 2238              		@ sp needed
 2239 0012 5DF8047B 		ldr	r7, [sp], #4
 2240              		.cfi_restore 7
 2241              		.cfi_def_cfa_offset 0
 2242 0016 7047     		bx	lr
 2243              		.cfi_endproc
 2244              	.LFE21:
 2246              		.section	.text.vQueueSetQueueNumber,"ax",%progbits
ARM GAS  /tmp/cczksE0f.s 			page 85


 2247              		.align	1
 2248              		.global	vQueueSetQueueNumber
 2249              		.syntax unified
 2250              		.thumb
 2251              		.thumb_func
 2253              	vQueueSetQueueNumber:
 2254              	.LFB22:
2310:Middlewares/FreeRTOS/queue.c **** 
2311:Middlewares/FreeRTOS/queue.c **** #endif /* configUSE_TRACE_FACILITY */
2312:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2313:Middlewares/FreeRTOS/queue.c **** 
2314:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_TRACE_FACILITY == 1 )
2315:Middlewares/FreeRTOS/queue.c **** 
2316:Middlewares/FreeRTOS/queue.c ****     void vQueueSetQueueNumber( QueueHandle_t xQueue,
2317:Middlewares/FreeRTOS/queue.c ****                                UBaseType_t uxQueueNumber )
2318:Middlewares/FreeRTOS/queue.c ****     {
 2255              		.loc 1 2318 5
 2256              		.cfi_startproc
 2257              		@ args = 0, pretend = 0, frame = 8
 2258              		@ frame_needed = 1, uses_anonymous_args = 0
 2259              		@ link register save eliminated.
 2260 0000 80B4     		push	{r7}
 2261              		.cfi_def_cfa_offset 4
 2262              		.cfi_offset 7, -4
 2263 0002 83B0     		sub	sp, sp, #12
 2264              		.cfi_def_cfa_offset 16
 2265 0004 00AF     		add	r7, sp, #0
 2266              		.cfi_def_cfa_register 7
 2267 0006 7860     		str	r0, [r7, #4]
 2268 0008 3960     		str	r1, [r7]
2319:Middlewares/FreeRTOS/queue.c ****         traceENTER_vQueueSetQueueNumber( xQueue, uxQueueNumber );
2320:Middlewares/FreeRTOS/queue.c **** 
2321:Middlewares/FreeRTOS/queue.c ****         ( ( Queue_t * ) xQueue )->uxQueueNumber = uxQueueNumber;
 2269              		.loc 1 2321 49
 2270 000a 7B68     		ldr	r3, [r7, #4]
 2271 000c 3A68     		ldr	r2, [r7]
 2272 000e 9A64     		str	r2, [r3, #72]
2322:Middlewares/FreeRTOS/queue.c **** 
2323:Middlewares/FreeRTOS/queue.c ****         traceRETURN_vQueueSetQueueNumber();
2324:Middlewares/FreeRTOS/queue.c ****     }
 2273              		.loc 1 2324 5
 2274 0010 00BF     		nop
 2275 0012 0C37     		adds	r7, r7, #12
 2276              		.cfi_def_cfa_offset 4
 2277 0014 BD46     		mov	sp, r7
 2278              		.cfi_def_cfa_register 13
 2279              		@ sp needed
 2280 0016 5DF8047B 		ldr	r7, [sp], #4
 2281              		.cfi_restore 7
 2282              		.cfi_def_cfa_offset 0
 2283 001a 7047     		bx	lr
 2284              		.cfi_endproc
 2285              	.LFE22:
 2287              		.section	.text.ucQueueGetQueueType,"ax",%progbits
 2288              		.align	1
 2289              		.global	ucQueueGetQueueType
 2290              		.syntax unified
ARM GAS  /tmp/cczksE0f.s 			page 86


 2291              		.thumb
 2292              		.thumb_func
 2294              	ucQueueGetQueueType:
 2295              	.LFB23:
2325:Middlewares/FreeRTOS/queue.c **** 
2326:Middlewares/FreeRTOS/queue.c **** #endif /* configUSE_TRACE_FACILITY */
2327:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2328:Middlewares/FreeRTOS/queue.c **** 
2329:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_TRACE_FACILITY == 1 )
2330:Middlewares/FreeRTOS/queue.c **** 
2331:Middlewares/FreeRTOS/queue.c ****     uint8_t ucQueueGetQueueType( QueueHandle_t xQueue )
2332:Middlewares/FreeRTOS/queue.c ****     {
 2296              		.loc 1 2332 5
 2297              		.cfi_startproc
 2298              		@ args = 0, pretend = 0, frame = 8
 2299              		@ frame_needed = 1, uses_anonymous_args = 0
 2300              		@ link register save eliminated.
 2301 0000 80B4     		push	{r7}
 2302              		.cfi_def_cfa_offset 4
 2303              		.cfi_offset 7, -4
 2304 0002 83B0     		sub	sp, sp, #12
 2305              		.cfi_def_cfa_offset 16
 2306 0004 00AF     		add	r7, sp, #0
 2307              		.cfi_def_cfa_register 7
 2308 0006 7860     		str	r0, [r7, #4]
2333:Middlewares/FreeRTOS/queue.c ****         traceENTER_ucQueueGetQueueType( xQueue );
2334:Middlewares/FreeRTOS/queue.c **** 
2335:Middlewares/FreeRTOS/queue.c ****         traceRETURN_ucQueueGetQueueType( ( ( Queue_t * ) xQueue )->ucQueueType );
2336:Middlewares/FreeRTOS/queue.c **** 
2337:Middlewares/FreeRTOS/queue.c ****         return ( ( Queue_t * ) xQueue )->ucQueueType;
 2309              		.loc 1 2337 40
 2310 0008 7B68     		ldr	r3, [r7, #4]
 2311 000a 93F84C30 		ldrb	r3, [r3, #76]	@ zero_extendqisi2
2338:Middlewares/FreeRTOS/queue.c ****     }
 2312              		.loc 1 2338 5
 2313 000e 1846     		mov	r0, r3
 2314 0010 0C37     		adds	r7, r7, #12
 2315              		.cfi_def_cfa_offset 4
 2316 0012 BD46     		mov	sp, r7
 2317              		.cfi_def_cfa_register 13
 2318              		@ sp needed
 2319 0014 5DF8047B 		ldr	r7, [sp], #4
 2320              		.cfi_restore 7
 2321              		.cfi_def_cfa_offset 0
 2322 0018 7047     		bx	lr
 2323              		.cfi_endproc
 2324              	.LFE23:
 2326              		.section	.text.uxQueueGetQueueItemSize,"ax",%progbits
 2327              		.align	1
 2328              		.global	uxQueueGetQueueItemSize
 2329              		.syntax unified
 2330              		.thumb
 2331              		.thumb_func
 2333              	uxQueueGetQueueItemSize:
 2334              	.LFB24:
2339:Middlewares/FreeRTOS/queue.c **** 
2340:Middlewares/FreeRTOS/queue.c **** #endif /* configUSE_TRACE_FACILITY */
ARM GAS  /tmp/cczksE0f.s 			page 87


2341:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2342:Middlewares/FreeRTOS/queue.c **** 
2343:Middlewares/FreeRTOS/queue.c **** UBaseType_t uxQueueGetQueueItemSize( QueueHandle_t xQueue ) /* PRIVILEGED_FUNCTION */
2344:Middlewares/FreeRTOS/queue.c **** {
 2335              		.loc 1 2344 1
 2336              		.cfi_startproc
 2337              		@ args = 0, pretend = 0, frame = 8
 2338              		@ frame_needed = 1, uses_anonymous_args = 0
 2339              		@ link register save eliminated.
 2340 0000 80B4     		push	{r7}
 2341              		.cfi_def_cfa_offset 4
 2342              		.cfi_offset 7, -4
 2343 0002 83B0     		sub	sp, sp, #12
 2344              		.cfi_def_cfa_offset 16
 2345 0004 00AF     		add	r7, sp, #0
 2346              		.cfi_def_cfa_register 7
 2347 0006 7860     		str	r0, [r7, #4]
2345:Middlewares/FreeRTOS/queue.c ****     traceENTER_uxQueueGetQueueItemSize( xQueue );
2346:Middlewares/FreeRTOS/queue.c **** 
2347:Middlewares/FreeRTOS/queue.c ****     traceRETURN_uxQueueGetQueueItemSize( ( ( Queue_t * ) xQueue )->uxItemSize );
2348:Middlewares/FreeRTOS/queue.c **** 
2349:Middlewares/FreeRTOS/queue.c ****     return ( ( Queue_t * ) xQueue )->uxItemSize;
 2348              		.loc 1 2349 36
 2349 0008 7B68     		ldr	r3, [r7, #4]
 2350 000a 1B6C     		ldr	r3, [r3, #64]
2350:Middlewares/FreeRTOS/queue.c **** }
 2351              		.loc 1 2350 1
 2352 000c 1846     		mov	r0, r3
 2353 000e 0C37     		adds	r7, r7, #12
 2354              		.cfi_def_cfa_offset 4
 2355 0010 BD46     		mov	sp, r7
 2356              		.cfi_def_cfa_register 13
 2357              		@ sp needed
 2358 0012 5DF8047B 		ldr	r7, [sp], #4
 2359              		.cfi_restore 7
 2360              		.cfi_def_cfa_offset 0
 2361 0016 7047     		bx	lr
 2362              		.cfi_endproc
 2363              	.LFE24:
 2365              		.section	.text.uxQueueGetQueueLength,"ax",%progbits
 2366              		.align	1
 2367              		.global	uxQueueGetQueueLength
 2368              		.syntax unified
 2369              		.thumb
 2370              		.thumb_func
 2372              	uxQueueGetQueueLength:
 2373              	.LFB25:
2351:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2352:Middlewares/FreeRTOS/queue.c **** 
2353:Middlewares/FreeRTOS/queue.c **** UBaseType_t uxQueueGetQueueLength( QueueHandle_t xQueue ) /* PRIVILEGED_FUNCTION */
2354:Middlewares/FreeRTOS/queue.c **** {
 2374              		.loc 1 2354 1
 2375              		.cfi_startproc
 2376              		@ args = 0, pretend = 0, frame = 8
 2377              		@ frame_needed = 1, uses_anonymous_args = 0
 2378              		@ link register save eliminated.
 2379 0000 80B4     		push	{r7}
ARM GAS  /tmp/cczksE0f.s 			page 88


 2380              		.cfi_def_cfa_offset 4
 2381              		.cfi_offset 7, -4
 2382 0002 83B0     		sub	sp, sp, #12
 2383              		.cfi_def_cfa_offset 16
 2384 0004 00AF     		add	r7, sp, #0
 2385              		.cfi_def_cfa_register 7
 2386 0006 7860     		str	r0, [r7, #4]
2355:Middlewares/FreeRTOS/queue.c ****     traceENTER_uxQueueGetQueueLength( xQueue );
2356:Middlewares/FreeRTOS/queue.c **** 
2357:Middlewares/FreeRTOS/queue.c ****     traceRETURN_uxQueueGetQueueLength( ( ( Queue_t * ) xQueue )->uxLength );
2358:Middlewares/FreeRTOS/queue.c **** 
2359:Middlewares/FreeRTOS/queue.c ****     return ( ( Queue_t * ) xQueue )->uxLength;
 2387              		.loc 1 2359 36
 2388 0008 7B68     		ldr	r3, [r7, #4]
 2389 000a DB6B     		ldr	r3, [r3, #60]
2360:Middlewares/FreeRTOS/queue.c **** }
 2390              		.loc 1 2360 1
 2391 000c 1846     		mov	r0, r3
 2392 000e 0C37     		adds	r7, r7, #12
 2393              		.cfi_def_cfa_offset 4
 2394 0010 BD46     		mov	sp, r7
 2395              		.cfi_def_cfa_register 13
 2396              		@ sp needed
 2397 0012 5DF8047B 		ldr	r7, [sp], #4
 2398              		.cfi_restore 7
 2399              		.cfi_def_cfa_offset 0
 2400 0016 7047     		bx	lr
 2401              		.cfi_endproc
 2402              	.LFE25:
 2404              		.section	.text.prvGetDisinheritPriorityAfterTimeout,"ax",%progbits
 2405              		.align	1
 2406              		.syntax unified
 2407              		.thumb
 2408              		.thumb_func
 2410              	prvGetDisinheritPriorityAfterTimeout:
 2411              	.LFB26:
2361:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2362:Middlewares/FreeRTOS/queue.c **** 
2363:Middlewares/FreeRTOS/queue.c **** #if ( configUSE_MUTEXES == 1 )
2364:Middlewares/FreeRTOS/queue.c **** 
2365:Middlewares/FreeRTOS/queue.c ****     static UBaseType_t prvGetDisinheritPriorityAfterTimeout( const Queue_t * const pxQueue )
2366:Middlewares/FreeRTOS/queue.c ****     {
 2412              		.loc 1 2366 5
 2413              		.cfi_startproc
 2414              		@ args = 0, pretend = 0, frame = 16
 2415              		@ frame_needed = 1, uses_anonymous_args = 0
 2416              		@ link register save eliminated.
 2417 0000 80B4     		push	{r7}
 2418              		.cfi_def_cfa_offset 4
 2419              		.cfi_offset 7, -4
 2420 0002 85B0     		sub	sp, sp, #20
 2421              		.cfi_def_cfa_offset 24
 2422 0004 00AF     		add	r7, sp, #0
 2423              		.cfi_def_cfa_register 7
 2424 0006 7860     		str	r0, [r7, #4]
2367:Middlewares/FreeRTOS/queue.c ****         UBaseType_t uxHighestPriorityOfWaitingTasks;
2368:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 89


2369:Middlewares/FreeRTOS/queue.c ****         /* If a task waiting for a mutex causes the mutex holder to inherit a
2370:Middlewares/FreeRTOS/queue.c ****          * priority, but the waiting task times out, then the holder should
2371:Middlewares/FreeRTOS/queue.c ****          * disinherit the priority - but only down to the highest priority of any
2372:Middlewares/FreeRTOS/queue.c ****          * other tasks that are waiting for the same mutex.  For this purpose,
2373:Middlewares/FreeRTOS/queue.c ****          * return the priority of the highest priority task that is waiting for the
2374:Middlewares/FreeRTOS/queue.c ****          * mutex. */
2375:Middlewares/FreeRTOS/queue.c ****         if( listCURRENT_LIST_LENGTH( &( pxQueue->xTasksWaitingToReceive ) ) > 0U )
 2425              		.loc 1 2375 13
 2426 0008 7B68     		ldr	r3, [r7, #4]
 2427 000a 5B6A     		ldr	r3, [r3, #36]
 2428              		.loc 1 2375 11
 2429 000c 002B     		cmp	r3, #0
 2430 000e 06D0     		beq	.L133
2376:Middlewares/FreeRTOS/queue.c ****         {
2377:Middlewares/FreeRTOS/queue.c ****             uxHighestPriorityOfWaitingTasks = ( UBaseType_t ) ( ( UBaseType_t ) configMAX_PRIORITIE
 2431              		.loc 1 2377 120
 2432 0010 7B68     		ldr	r3, [r7, #4]
 2433 0012 1B6B     		ldr	r3, [r3, #48]
 2434 0014 1B68     		ldr	r3, [r3]
 2435              		.loc 1 2377 45
 2436 0016 C3F10503 		rsb	r3, r3, #5
 2437 001a FB60     		str	r3, [r7, #12]
 2438 001c 01E0     		b	.L134
 2439              	.L133:
2378:Middlewares/FreeRTOS/queue.c ****         }
2379:Middlewares/FreeRTOS/queue.c ****         else
2380:Middlewares/FreeRTOS/queue.c ****         {
2381:Middlewares/FreeRTOS/queue.c ****             uxHighestPriorityOfWaitingTasks = tskIDLE_PRIORITY;
 2440              		.loc 1 2381 45
 2441 001e 0023     		movs	r3, #0
 2442 0020 FB60     		str	r3, [r7, #12]
 2443              	.L134:
2382:Middlewares/FreeRTOS/queue.c ****         }
2383:Middlewares/FreeRTOS/queue.c **** 
2384:Middlewares/FreeRTOS/queue.c ****         return uxHighestPriorityOfWaitingTasks;
 2444              		.loc 1 2384 16
 2445 0022 FB68     		ldr	r3, [r7, #12]
2385:Middlewares/FreeRTOS/queue.c ****     }
 2446              		.loc 1 2385 5
 2447 0024 1846     		mov	r0, r3
 2448 0026 1437     		adds	r7, r7, #20
 2449              		.cfi_def_cfa_offset 4
 2450 0028 BD46     		mov	sp, r7
 2451              		.cfi_def_cfa_register 13
 2452              		@ sp needed
 2453 002a 5DF8047B 		ldr	r7, [sp], #4
 2454              		.cfi_restore 7
 2455              		.cfi_def_cfa_offset 0
 2456 002e 7047     		bx	lr
 2457              		.cfi_endproc
 2458              	.LFE26:
 2460              		.section	.text.prvCopyDataToQueue,"ax",%progbits
 2461              		.align	1
 2462              		.syntax unified
 2463              		.thumb
 2464              		.thumb_func
 2466              	prvCopyDataToQueue:
ARM GAS  /tmp/cczksE0f.s 			page 90


 2467              	.LFB27:
2386:Middlewares/FreeRTOS/queue.c **** 
2387:Middlewares/FreeRTOS/queue.c **** #endif /* configUSE_MUTEXES */
2388:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2389:Middlewares/FreeRTOS/queue.c **** 
2390:Middlewares/FreeRTOS/queue.c **** static BaseType_t prvCopyDataToQueue( Queue_t * const pxQueue,
2391:Middlewares/FreeRTOS/queue.c ****                                       const void * pvItemToQueue,
2392:Middlewares/FreeRTOS/queue.c ****                                       const BaseType_t xPosition )
2393:Middlewares/FreeRTOS/queue.c **** {
 2468              		.loc 1 2393 1
 2469              		.cfi_startproc
 2470              		@ args = 0, pretend = 0, frame = 24
 2471              		@ frame_needed = 1, uses_anonymous_args = 0
 2472 0000 80B5     		push	{r7, lr}
 2473              		.cfi_def_cfa_offset 8
 2474              		.cfi_offset 7, -8
 2475              		.cfi_offset 14, -4
 2476 0002 86B0     		sub	sp, sp, #24
 2477              		.cfi_def_cfa_offset 32
 2478 0004 00AF     		add	r7, sp, #0
 2479              		.cfi_def_cfa_register 7
 2480 0006 F860     		str	r0, [r7, #12]
 2481 0008 B960     		str	r1, [r7, #8]
 2482 000a 7A60     		str	r2, [r7, #4]
2394:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn = pdFALSE;
 2483              		.loc 1 2394 16
 2484 000c 0023     		movs	r3, #0
 2485 000e 7B61     		str	r3, [r7, #20]
2395:Middlewares/FreeRTOS/queue.c ****     UBaseType_t uxMessagesWaiting;
2396:Middlewares/FreeRTOS/queue.c **** 
2397:Middlewares/FreeRTOS/queue.c ****     /* This function is called from a critical section. */
2398:Middlewares/FreeRTOS/queue.c **** 
2399:Middlewares/FreeRTOS/queue.c ****     uxMessagesWaiting = pxQueue->uxMessagesWaiting;
 2486              		.loc 1 2399 23
 2487 0010 FB68     		ldr	r3, [r7, #12]
 2488 0012 9B6B     		ldr	r3, [r3, #56]
 2489 0014 3B61     		str	r3, [r7, #16]
2400:Middlewares/FreeRTOS/queue.c **** 
2401:Middlewares/FreeRTOS/queue.c ****     if( pxQueue->uxItemSize == ( UBaseType_t ) 0 )
 2490              		.loc 1 2401 16
 2491 0016 FB68     		ldr	r3, [r7, #12]
 2492 0018 1B6C     		ldr	r3, [r3, #64]
 2493              		.loc 1 2401 7
 2494 001a 002B     		cmp	r3, #0
 2495 001c 0DD1     		bne	.L137
2402:Middlewares/FreeRTOS/queue.c ****     {
2403:Middlewares/FreeRTOS/queue.c ****         #if ( configUSE_MUTEXES == 1 )
2404:Middlewares/FreeRTOS/queue.c ****         {
2405:Middlewares/FreeRTOS/queue.c ****             if( pxQueue->uxQueueType == queueQUEUE_IS_MUTEX )
 2496              		.loc 1 2405 24
 2497 001e FB68     		ldr	r3, [r7, #12]
 2498 0020 1B68     		ldr	r3, [r3]
 2499              		.loc 1 2405 15
 2500 0022 002B     		cmp	r3, #0
 2501 0024 4DD1     		bne	.L138
2406:Middlewares/FreeRTOS/queue.c ****             {
2407:Middlewares/FreeRTOS/queue.c ****                 /* The mutex is no longer being held. */
ARM GAS  /tmp/cczksE0f.s 			page 91


2408:Middlewares/FreeRTOS/queue.c ****                 xReturn = xTaskPriorityDisinherit( pxQueue->u.xSemaphore.xMutexHolder );
 2502              		.loc 1 2408 27
 2503 0026 FB68     		ldr	r3, [r7, #12]
 2504 0028 9B68     		ldr	r3, [r3, #8]
 2505 002a 1846     		mov	r0, r3
 2506 002c FFF7FEFF 		bl	xTaskPriorityDisinherit
 2507 0030 7861     		str	r0, [r7, #20]
2409:Middlewares/FreeRTOS/queue.c ****                 pxQueue->u.xSemaphore.xMutexHolder = NULL;
 2508              		.loc 1 2409 52
 2509 0032 FB68     		ldr	r3, [r7, #12]
 2510 0034 0022     		movs	r2, #0
 2511 0036 9A60     		str	r2, [r3, #8]
 2512 0038 43E0     		b	.L138
 2513              	.L137:
2410:Middlewares/FreeRTOS/queue.c ****             }
2411:Middlewares/FreeRTOS/queue.c ****             else
2412:Middlewares/FreeRTOS/queue.c ****             {
2413:Middlewares/FreeRTOS/queue.c ****                 mtCOVERAGE_TEST_MARKER();
2414:Middlewares/FreeRTOS/queue.c ****             }
2415:Middlewares/FreeRTOS/queue.c ****         }
2416:Middlewares/FreeRTOS/queue.c ****         #endif /* configUSE_MUTEXES */
2417:Middlewares/FreeRTOS/queue.c ****     }
2418:Middlewares/FreeRTOS/queue.c ****     else if( xPosition == queueSEND_TO_BACK )
 2514              		.loc 1 2418 12
 2515 003a 7B68     		ldr	r3, [r7, #4]
 2516 003c 002B     		cmp	r3, #0
 2517 003e 19D1     		bne	.L139
2419:Middlewares/FreeRTOS/queue.c ****     {
2420:Middlewares/FreeRTOS/queue.c ****         ( void ) memcpy( ( void * ) pxQueue->pcWriteTo, pvItemToQueue, ( size_t ) pxQueue->uxItemSi
 2518              		.loc 1 2420 44
 2519 0040 FB68     		ldr	r3, [r7, #12]
 2520 0042 5868     		ldr	r0, [r3, #4]
 2521              		.loc 1 2420 90
 2522 0044 FB68     		ldr	r3, [r7, #12]
 2523 0046 1B6C     		ldr	r3, [r3, #64]
 2524              		.loc 1 2420 18
 2525 0048 1A46     		mov	r2, r3
 2526 004a B968     		ldr	r1, [r7, #8]
 2527 004c FFF7FEFF 		bl	memcpy
2421:Middlewares/FreeRTOS/queue.c ****         pxQueue->pcWriteTo += pxQueue->uxItemSize;
 2528              		.loc 1 2421 16
 2529 0050 FB68     		ldr	r3, [r7, #12]
 2530 0052 5A68     		ldr	r2, [r3, #4]
 2531              		.loc 1 2421 38
 2532 0054 FB68     		ldr	r3, [r7, #12]
 2533 0056 1B6C     		ldr	r3, [r3, #64]
 2534              		.loc 1 2421 28
 2535 0058 1A44     		add	r2, r2, r3
 2536 005a FB68     		ldr	r3, [r7, #12]
 2537 005c 5A60     		str	r2, [r3, #4]
2422:Middlewares/FreeRTOS/queue.c **** 
2423:Middlewares/FreeRTOS/queue.c ****         if( pxQueue->pcWriteTo >= pxQueue->u.xQueue.pcTail )
 2538              		.loc 1 2423 20
 2539 005e FB68     		ldr	r3, [r7, #12]
 2540 0060 5A68     		ldr	r2, [r3, #4]
 2541              		.loc 1 2423 52
 2542 0062 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/cczksE0f.s 			page 92


 2543 0064 9B68     		ldr	r3, [r3, #8]
 2544              		.loc 1 2423 11
 2545 0066 9A42     		cmp	r2, r3
 2546 0068 2BD3     		bcc	.L138
2424:Middlewares/FreeRTOS/queue.c ****         {
2425:Middlewares/FreeRTOS/queue.c ****             pxQueue->pcWriteTo = pxQueue->pcHead;
 2547              		.loc 1 2425 41
 2548 006a FB68     		ldr	r3, [r7, #12]
 2549 006c 1A68     		ldr	r2, [r3]
 2550              		.loc 1 2425 32
 2551 006e FB68     		ldr	r3, [r7, #12]
 2552 0070 5A60     		str	r2, [r3, #4]
 2553 0072 26E0     		b	.L138
 2554              	.L139:
2426:Middlewares/FreeRTOS/queue.c ****         }
2427:Middlewares/FreeRTOS/queue.c ****         else
2428:Middlewares/FreeRTOS/queue.c ****         {
2429:Middlewares/FreeRTOS/queue.c ****             mtCOVERAGE_TEST_MARKER();
2430:Middlewares/FreeRTOS/queue.c ****         }
2431:Middlewares/FreeRTOS/queue.c ****     }
2432:Middlewares/FreeRTOS/queue.c ****     else
2433:Middlewares/FreeRTOS/queue.c ****     {
2434:Middlewares/FreeRTOS/queue.c ****         ( void ) memcpy( ( void * ) pxQueue->u.xQueue.pcReadFrom, pvItemToQueue, ( size_t ) pxQueue
 2555              		.loc 1 2434 54
 2556 0074 FB68     		ldr	r3, [r7, #12]
 2557 0076 D868     		ldr	r0, [r3, #12]
 2558              		.loc 1 2434 100
 2559 0078 FB68     		ldr	r3, [r7, #12]
 2560 007a 1B6C     		ldr	r3, [r3, #64]
 2561              		.loc 1 2434 18
 2562 007c 1A46     		mov	r2, r3
 2563 007e B968     		ldr	r1, [r7, #8]
 2564 0080 FFF7FEFF 		bl	memcpy
2435:Middlewares/FreeRTOS/queue.c ****         pxQueue->u.xQueue.pcReadFrom -= pxQueue->uxItemSize;
 2565              		.loc 1 2435 26
 2566 0084 FB68     		ldr	r3, [r7, #12]
 2567 0086 DA68     		ldr	r2, [r3, #12]
 2568              		.loc 1 2435 48
 2569 0088 FB68     		ldr	r3, [r7, #12]
 2570 008a 1B6C     		ldr	r3, [r3, #64]
 2571              		.loc 1 2435 38
 2572 008c 5B42     		rsbs	r3, r3, #0
 2573 008e 1A44     		add	r2, r2, r3
 2574 0090 FB68     		ldr	r3, [r7, #12]
 2575 0092 DA60     		str	r2, [r3, #12]
2436:Middlewares/FreeRTOS/queue.c **** 
2437:Middlewares/FreeRTOS/queue.c ****         if( pxQueue->u.xQueue.pcReadFrom < pxQueue->pcHead )
 2576              		.loc 1 2437 30
 2577 0094 FB68     		ldr	r3, [r7, #12]
 2578 0096 DA68     		ldr	r2, [r3, #12]
 2579              		.loc 1 2437 51
 2580 0098 FB68     		ldr	r3, [r7, #12]
 2581 009a 1B68     		ldr	r3, [r3]
 2582              		.loc 1 2437 11
 2583 009c 9A42     		cmp	r2, r3
 2584 009e 07D2     		bcs	.L140
2438:Middlewares/FreeRTOS/queue.c ****         {
ARM GAS  /tmp/cczksE0f.s 			page 93


2439:Middlewares/FreeRTOS/queue.c ****             pxQueue->u.xQueue.pcReadFrom = ( pxQueue->u.xQueue.pcTail - pxQueue->uxItemSize );
 2585              		.loc 1 2439 63
 2586 00a0 FB68     		ldr	r3, [r7, #12]
 2587 00a2 9A68     		ldr	r2, [r3, #8]
 2588              		.loc 1 2439 80
 2589 00a4 FB68     		ldr	r3, [r7, #12]
 2590 00a6 1B6C     		ldr	r3, [r3, #64]
 2591              		.loc 1 2439 71
 2592 00a8 5B42     		rsbs	r3, r3, #0
 2593 00aa 1A44     		add	r2, r2, r3
 2594              		.loc 1 2439 42
 2595 00ac FB68     		ldr	r3, [r7, #12]
 2596 00ae DA60     		str	r2, [r3, #12]
 2597              	.L140:
2440:Middlewares/FreeRTOS/queue.c ****         }
2441:Middlewares/FreeRTOS/queue.c ****         else
2442:Middlewares/FreeRTOS/queue.c ****         {
2443:Middlewares/FreeRTOS/queue.c ****             mtCOVERAGE_TEST_MARKER();
2444:Middlewares/FreeRTOS/queue.c ****         }
2445:Middlewares/FreeRTOS/queue.c **** 
2446:Middlewares/FreeRTOS/queue.c ****         if( xPosition == queueOVERWRITE )
 2598              		.loc 1 2446 11
 2599 00b0 7B68     		ldr	r3, [r7, #4]
 2600 00b2 022B     		cmp	r3, #2
 2601 00b4 05D1     		bne	.L138
2447:Middlewares/FreeRTOS/queue.c ****         {
2448:Middlewares/FreeRTOS/queue.c ****             if( uxMessagesWaiting > ( UBaseType_t ) 0 )
 2602              		.loc 1 2448 15
 2603 00b6 3B69     		ldr	r3, [r7, #16]
 2604 00b8 002B     		cmp	r3, #0
 2605 00ba 02D0     		beq	.L138
2449:Middlewares/FreeRTOS/queue.c ****             {
2450:Middlewares/FreeRTOS/queue.c ****                 /* An item is not being added but overwritten, so subtract
2451:Middlewares/FreeRTOS/queue.c ****                  * one from the recorded number of items in the queue so when
2452:Middlewares/FreeRTOS/queue.c ****                  * one is added again below the number of recorded items remains
2453:Middlewares/FreeRTOS/queue.c ****                  * correct. */
2454:Middlewares/FreeRTOS/queue.c ****                 --uxMessagesWaiting;
 2606              		.loc 1 2454 17
 2607 00bc 3B69     		ldr	r3, [r7, #16]
 2608 00be 013B     		subs	r3, r3, #1
 2609 00c0 3B61     		str	r3, [r7, #16]
 2610              	.L138:
2455:Middlewares/FreeRTOS/queue.c ****             }
2456:Middlewares/FreeRTOS/queue.c ****             else
2457:Middlewares/FreeRTOS/queue.c ****             {
2458:Middlewares/FreeRTOS/queue.c ****                 mtCOVERAGE_TEST_MARKER();
2459:Middlewares/FreeRTOS/queue.c ****             }
2460:Middlewares/FreeRTOS/queue.c ****         }
2461:Middlewares/FreeRTOS/queue.c ****         else
2462:Middlewares/FreeRTOS/queue.c ****         {
2463:Middlewares/FreeRTOS/queue.c ****             mtCOVERAGE_TEST_MARKER();
2464:Middlewares/FreeRTOS/queue.c ****         }
2465:Middlewares/FreeRTOS/queue.c ****     }
2466:Middlewares/FreeRTOS/queue.c **** 
2467:Middlewares/FreeRTOS/queue.c ****     pxQueue->uxMessagesWaiting = ( UBaseType_t ) ( uxMessagesWaiting + ( UBaseType_t ) 1 );
 2611              		.loc 1 2467 34
 2612 00c2 3B69     		ldr	r3, [r7, #16]
ARM GAS  /tmp/cczksE0f.s 			page 94


 2613 00c4 5A1C     		adds	r2, r3, #1
 2614              		.loc 1 2467 32
 2615 00c6 FB68     		ldr	r3, [r7, #12]
 2616 00c8 9A63     		str	r2, [r3, #56]
2468:Middlewares/FreeRTOS/queue.c **** 
2469:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 2617              		.loc 1 2469 12
 2618 00ca 7B69     		ldr	r3, [r7, #20]
2470:Middlewares/FreeRTOS/queue.c **** }
 2619              		.loc 1 2470 1
 2620 00cc 1846     		mov	r0, r3
 2621 00ce 1837     		adds	r7, r7, #24
 2622              		.cfi_def_cfa_offset 8
 2623 00d0 BD46     		mov	sp, r7
 2624              		.cfi_def_cfa_register 13
 2625              		@ sp needed
 2626 00d2 80BD     		pop	{r7, pc}
 2627              		.cfi_endproc
 2628              	.LFE27:
 2630              		.section	.text.prvCopyDataFromQueue,"ax",%progbits
 2631              		.align	1
 2632              		.syntax unified
 2633              		.thumb
 2634              		.thumb_func
 2636              	prvCopyDataFromQueue:
 2637              	.LFB28:
2471:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2472:Middlewares/FreeRTOS/queue.c **** 
2473:Middlewares/FreeRTOS/queue.c **** static void prvCopyDataFromQueue( Queue_t * const pxQueue,
2474:Middlewares/FreeRTOS/queue.c ****                                   void * const pvBuffer )
2475:Middlewares/FreeRTOS/queue.c **** {
 2638              		.loc 1 2475 1
 2639              		.cfi_startproc
 2640              		@ args = 0, pretend = 0, frame = 8
 2641              		@ frame_needed = 1, uses_anonymous_args = 0
 2642 0000 80B5     		push	{r7, lr}
 2643              		.cfi_def_cfa_offset 8
 2644              		.cfi_offset 7, -8
 2645              		.cfi_offset 14, -4
 2646 0002 82B0     		sub	sp, sp, #8
 2647              		.cfi_def_cfa_offset 16
 2648 0004 00AF     		add	r7, sp, #0
 2649              		.cfi_def_cfa_register 7
 2650 0006 7860     		str	r0, [r7, #4]
 2651 0008 3960     		str	r1, [r7]
2476:Middlewares/FreeRTOS/queue.c ****     if( pxQueue->uxItemSize != ( UBaseType_t ) 0 )
 2652              		.loc 1 2476 16
 2653 000a 7B68     		ldr	r3, [r7, #4]
 2654 000c 1B6C     		ldr	r3, [r3, #64]
 2655              		.loc 1 2476 7
 2656 000e 002B     		cmp	r3, #0
 2657 0010 18D0     		beq	.L145
2477:Middlewares/FreeRTOS/queue.c ****     {
2478:Middlewares/FreeRTOS/queue.c ****         pxQueue->u.xQueue.pcReadFrom += pxQueue->uxItemSize;
 2658              		.loc 1 2478 26
 2659 0012 7B68     		ldr	r3, [r7, #4]
 2660 0014 DA68     		ldr	r2, [r3, #12]
ARM GAS  /tmp/cczksE0f.s 			page 95


 2661              		.loc 1 2478 48
 2662 0016 7B68     		ldr	r3, [r7, #4]
 2663 0018 1B6C     		ldr	r3, [r3, #64]
 2664              		.loc 1 2478 38
 2665 001a 1A44     		add	r2, r2, r3
 2666 001c 7B68     		ldr	r3, [r7, #4]
 2667 001e DA60     		str	r2, [r3, #12]
2479:Middlewares/FreeRTOS/queue.c **** 
2480:Middlewares/FreeRTOS/queue.c ****         if( pxQueue->u.xQueue.pcReadFrom >= pxQueue->u.xQueue.pcTail )
 2668              		.loc 1 2480 30
 2669 0020 7B68     		ldr	r3, [r7, #4]
 2670 0022 DA68     		ldr	r2, [r3, #12]
 2671              		.loc 1 2480 62
 2672 0024 7B68     		ldr	r3, [r7, #4]
 2673 0026 9B68     		ldr	r3, [r3, #8]
 2674              		.loc 1 2480 11
 2675 0028 9A42     		cmp	r2, r3
 2676 002a 03D3     		bcc	.L144
2481:Middlewares/FreeRTOS/queue.c ****         {
2482:Middlewares/FreeRTOS/queue.c ****             pxQueue->u.xQueue.pcReadFrom = pxQueue->pcHead;
 2677              		.loc 1 2482 51
 2678 002c 7B68     		ldr	r3, [r7, #4]
 2679 002e 1A68     		ldr	r2, [r3]
 2680              		.loc 1 2482 42
 2681 0030 7B68     		ldr	r3, [r7, #4]
 2682 0032 DA60     		str	r2, [r3, #12]
 2683              	.L144:
2483:Middlewares/FreeRTOS/queue.c ****         }
2484:Middlewares/FreeRTOS/queue.c ****         else
2485:Middlewares/FreeRTOS/queue.c ****         {
2486:Middlewares/FreeRTOS/queue.c ****             mtCOVERAGE_TEST_MARKER();
2487:Middlewares/FreeRTOS/queue.c ****         }
2488:Middlewares/FreeRTOS/queue.c **** 
2489:Middlewares/FreeRTOS/queue.c ****         ( void ) memcpy( ( void * ) pvBuffer, ( void * ) pxQueue->u.xQueue.pcReadFrom, ( size_t ) p
 2684              		.loc 1 2489 75
 2685 0034 7B68     		ldr	r3, [r7, #4]
 2686 0036 D968     		ldr	r1, [r3, #12]
 2687              		.loc 1 2489 106
 2688 0038 7B68     		ldr	r3, [r7, #4]
 2689 003a 1B6C     		ldr	r3, [r3, #64]
 2690              		.loc 1 2489 18
 2691 003c 1A46     		mov	r2, r3
 2692 003e 3868     		ldr	r0, [r7]
 2693 0040 FFF7FEFF 		bl	memcpy
 2694              	.L145:
2490:Middlewares/FreeRTOS/queue.c ****     }
2491:Middlewares/FreeRTOS/queue.c **** }
 2695              		.loc 1 2491 1
 2696 0044 00BF     		nop
 2697 0046 0837     		adds	r7, r7, #8
 2698              		.cfi_def_cfa_offset 8
 2699 0048 BD46     		mov	sp, r7
 2700              		.cfi_def_cfa_register 13
 2701              		@ sp needed
 2702 004a 80BD     		pop	{r7, pc}
 2703              		.cfi_endproc
 2704              	.LFE28:
ARM GAS  /tmp/cczksE0f.s 			page 96


 2706              		.section	.text.prvUnlockQueue,"ax",%progbits
 2707              		.align	1
 2708              		.syntax unified
 2709              		.thumb
 2710              		.thumb_func
 2712              	prvUnlockQueue:
 2713              	.LFB29:
2492:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2493:Middlewares/FreeRTOS/queue.c **** 
2494:Middlewares/FreeRTOS/queue.c **** static void prvUnlockQueue( Queue_t * const pxQueue )
2495:Middlewares/FreeRTOS/queue.c **** {
 2714              		.loc 1 2495 1
 2715              		.cfi_startproc
 2716              		@ args = 0, pretend = 0, frame = 16
 2717              		@ frame_needed = 1, uses_anonymous_args = 0
 2718 0000 80B5     		push	{r7, lr}
 2719              		.cfi_def_cfa_offset 8
 2720              		.cfi_offset 7, -8
 2721              		.cfi_offset 14, -4
 2722 0002 84B0     		sub	sp, sp, #16
 2723              		.cfi_def_cfa_offset 24
 2724 0004 00AF     		add	r7, sp, #0
 2725              		.cfi_def_cfa_register 7
 2726 0006 7860     		str	r0, [r7, #4]
2496:Middlewares/FreeRTOS/queue.c ****     /* THIS FUNCTION MUST BE CALLED WITH THE SCHEDULER SUSPENDED. */
2497:Middlewares/FreeRTOS/queue.c **** 
2498:Middlewares/FreeRTOS/queue.c ****     /* The lock counts contains the number of extra data items placed or
2499:Middlewares/FreeRTOS/queue.c ****      * removed from the queue while the queue was locked.  When a queue is
2500:Middlewares/FreeRTOS/queue.c ****      * locked items can be added or removed, but the event lists cannot be
2501:Middlewares/FreeRTOS/queue.c ****      * updated. */
2502:Middlewares/FreeRTOS/queue.c ****     taskENTER_CRITICAL();
 2727              		.loc 1 2502 5
 2728 0008 FFF7FEFF 		bl	vPortEnterCritical
 2729              	.LBB54:
2503:Middlewares/FreeRTOS/queue.c ****     {
2504:Middlewares/FreeRTOS/queue.c ****         int8_t cTxLock = pxQueue->cTxLock;
 2730              		.loc 1 2504 16
 2731 000c 7B68     		ldr	r3, [r7, #4]
 2732 000e 93F84530 		ldrb	r3, [r3, #69]
 2733 0012 FB73     		strb	r3, [r7, #15]
2505:Middlewares/FreeRTOS/queue.c **** 
2506:Middlewares/FreeRTOS/queue.c ****         /* See if data was added to the queue while it was locked. */
2507:Middlewares/FreeRTOS/queue.c ****         while( cTxLock > queueLOCKED_UNMODIFIED )
 2734              		.loc 1 2507 14
 2735 0014 11E0     		b	.L147
 2736              	.L151:
2508:Middlewares/FreeRTOS/queue.c ****         {
2509:Middlewares/FreeRTOS/queue.c ****             /* Data was posted while the queue was locked.  Are any tasks
2510:Middlewares/FreeRTOS/queue.c ****              * blocked waiting for data to become available? */
2511:Middlewares/FreeRTOS/queue.c ****             #if ( configUSE_QUEUE_SETS == 1 )
2512:Middlewares/FreeRTOS/queue.c ****             {
2513:Middlewares/FreeRTOS/queue.c ****                 if( pxQueue->pxQueueSetContainer != NULL )
2514:Middlewares/FreeRTOS/queue.c ****                 {
2515:Middlewares/FreeRTOS/queue.c ****                     if( prvNotifyQueueSetContainer( pxQueue ) != pdFALSE )
2516:Middlewares/FreeRTOS/queue.c ****                     {
2517:Middlewares/FreeRTOS/queue.c ****                         /* The queue is a member of a queue set, and posting to
2518:Middlewares/FreeRTOS/queue.c ****                          * the queue set caused a higher priority task to unblock.
ARM GAS  /tmp/cczksE0f.s 			page 97


2519:Middlewares/FreeRTOS/queue.c ****                          * A context switch is required. */
2520:Middlewares/FreeRTOS/queue.c ****                         vTaskMissedYield();
2521:Middlewares/FreeRTOS/queue.c ****                     }
2522:Middlewares/FreeRTOS/queue.c ****                     else
2523:Middlewares/FreeRTOS/queue.c ****                     {
2524:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
2525:Middlewares/FreeRTOS/queue.c ****                     }
2526:Middlewares/FreeRTOS/queue.c ****                 }
2527:Middlewares/FreeRTOS/queue.c ****                 else
2528:Middlewares/FreeRTOS/queue.c ****                 {
2529:Middlewares/FreeRTOS/queue.c ****                     /* Tasks that are removed from the event list will get
2530:Middlewares/FreeRTOS/queue.c ****                      * added to the pending ready list as the scheduler is still
2531:Middlewares/FreeRTOS/queue.c ****                      * suspended. */
2532:Middlewares/FreeRTOS/queue.c ****                     if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToReceive ) ) == pdFALSE )
2533:Middlewares/FreeRTOS/queue.c ****                     {
2534:Middlewares/FreeRTOS/queue.c ****                         if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToReceive ) ) != pdF
2535:Middlewares/FreeRTOS/queue.c ****                         {
2536:Middlewares/FreeRTOS/queue.c ****                             /* The task waiting has a higher priority so record that a
2537:Middlewares/FreeRTOS/queue.c ****                              * context switch is required. */
2538:Middlewares/FreeRTOS/queue.c ****                             vTaskMissedYield();
2539:Middlewares/FreeRTOS/queue.c ****                         }
2540:Middlewares/FreeRTOS/queue.c ****                         else
2541:Middlewares/FreeRTOS/queue.c ****                         {
2542:Middlewares/FreeRTOS/queue.c ****                             mtCOVERAGE_TEST_MARKER();
2543:Middlewares/FreeRTOS/queue.c ****                         }
2544:Middlewares/FreeRTOS/queue.c ****                     }
2545:Middlewares/FreeRTOS/queue.c ****                     else
2546:Middlewares/FreeRTOS/queue.c ****                     {
2547:Middlewares/FreeRTOS/queue.c ****                         break;
2548:Middlewares/FreeRTOS/queue.c ****                     }
2549:Middlewares/FreeRTOS/queue.c ****                 }
2550:Middlewares/FreeRTOS/queue.c ****             }
2551:Middlewares/FreeRTOS/queue.c ****             #else /* configUSE_QUEUE_SETS */
2552:Middlewares/FreeRTOS/queue.c ****             {
2553:Middlewares/FreeRTOS/queue.c ****                 /* Tasks that are removed from the event list will get added to
2554:Middlewares/FreeRTOS/queue.c ****                  * the pending ready list as the scheduler is still suspended. */
2555:Middlewares/FreeRTOS/queue.c ****                 if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToReceive ) ) == pdFALSE )
 2737              		.loc 1 2555 21
 2738 0016 7B68     		ldr	r3, [r7, #4]
 2739 0018 5B6A     		ldr	r3, [r3, #36]
 2740              		.loc 1 2555 19
 2741 001a 002B     		cmp	r3, #0
 2742 001c 12D0     		beq	.L157
2556:Middlewares/FreeRTOS/queue.c ****                 {
2557:Middlewares/FreeRTOS/queue.c ****                     if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToReceive ) ) != pdFALSE
 2743              		.loc 1 2557 51
 2744 001e 7B68     		ldr	r3, [r7, #4]
 2745 0020 2433     		adds	r3, r3, #36
 2746              		.loc 1 2557 25
 2747 0022 1846     		mov	r0, r3
 2748 0024 FFF7FEFF 		bl	xTaskRemoveFromEventList
 2749 0028 0346     		mov	r3, r0
 2750              		.loc 1 2557 23 discriminator 1
 2751 002a 002B     		cmp	r3, #0
 2752 002c 01D0     		beq	.L149
2558:Middlewares/FreeRTOS/queue.c ****                     {
2559:Middlewares/FreeRTOS/queue.c ****                         /* The task waiting has a higher priority so record that
ARM GAS  /tmp/cczksE0f.s 			page 98


2560:Middlewares/FreeRTOS/queue.c ****                          * a context switch is required. */
2561:Middlewares/FreeRTOS/queue.c ****                         vTaskMissedYield();
 2753              		.loc 1 2561 25
 2754 002e FFF7FEFF 		bl	vTaskMissedYield
 2755              	.L149:
2562:Middlewares/FreeRTOS/queue.c ****                     }
2563:Middlewares/FreeRTOS/queue.c ****                     else
2564:Middlewares/FreeRTOS/queue.c ****                     {
2565:Middlewares/FreeRTOS/queue.c ****                         mtCOVERAGE_TEST_MARKER();
2566:Middlewares/FreeRTOS/queue.c ****                     }
2567:Middlewares/FreeRTOS/queue.c ****                 }
2568:Middlewares/FreeRTOS/queue.c ****                 else
2569:Middlewares/FreeRTOS/queue.c ****                 {
2570:Middlewares/FreeRTOS/queue.c ****                     break;
2571:Middlewares/FreeRTOS/queue.c ****                 }
2572:Middlewares/FreeRTOS/queue.c ****             }
2573:Middlewares/FreeRTOS/queue.c ****             #endif /* configUSE_QUEUE_SETS */
2574:Middlewares/FreeRTOS/queue.c **** 
2575:Middlewares/FreeRTOS/queue.c ****             --cTxLock;
 2756              		.loc 1 2575 13
 2757 0032 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2758 0034 013B     		subs	r3, r3, #1
 2759 0036 DBB2     		uxtb	r3, r3
 2760 0038 FB73     		strb	r3, [r7, #15]
 2761              	.L147:
2507:Middlewares/FreeRTOS/queue.c ****         {
 2762              		.loc 1 2507 24
 2763 003a 97F90F30 		ldrsb	r3, [r7, #15]
 2764 003e 002B     		cmp	r3, #0
 2765 0040 E9DC     		bgt	.L151
 2766 0042 00E0     		b	.L150
 2767              	.L157:
2570:Middlewares/FreeRTOS/queue.c ****                 }
 2768              		.loc 1 2570 21
 2769 0044 00BF     		nop
 2770              	.L150:
2576:Middlewares/FreeRTOS/queue.c ****         }
2577:Middlewares/FreeRTOS/queue.c **** 
2578:Middlewares/FreeRTOS/queue.c ****         pxQueue->cTxLock = queueUNLOCKED;
 2771              		.loc 1 2578 26
 2772 0046 7B68     		ldr	r3, [r7, #4]
 2773 0048 FF22     		movs	r2, #255
 2774 004a 83F84520 		strb	r2, [r3, #69]
 2775              	.LBE54:
2579:Middlewares/FreeRTOS/queue.c ****     }
2580:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL();
 2776              		.loc 1 2580 5
 2777 004e FFF7FEFF 		bl	vPortExitCritical
2581:Middlewares/FreeRTOS/queue.c **** 
2582:Middlewares/FreeRTOS/queue.c ****     /* Do the same for the Rx lock. */
2583:Middlewares/FreeRTOS/queue.c ****     taskENTER_CRITICAL();
 2778              		.loc 1 2583 5
 2779 0052 FFF7FEFF 		bl	vPortEnterCritical
 2780              	.LBB55:
2584:Middlewares/FreeRTOS/queue.c ****     {
2585:Middlewares/FreeRTOS/queue.c ****         int8_t cRxLock = pxQueue->cRxLock;
 2781              		.loc 1 2585 16
ARM GAS  /tmp/cczksE0f.s 			page 99


 2782 0056 7B68     		ldr	r3, [r7, #4]
 2783 0058 93F84430 		ldrb	r3, [r3, #68]
 2784 005c BB73     		strb	r3, [r7, #14]
2586:Middlewares/FreeRTOS/queue.c **** 
2587:Middlewares/FreeRTOS/queue.c ****         while( cRxLock > queueLOCKED_UNMODIFIED )
 2785              		.loc 1 2587 14
 2786 005e 11E0     		b	.L152
 2787              	.L156:
2588:Middlewares/FreeRTOS/queue.c ****         {
2589:Middlewares/FreeRTOS/queue.c ****             if( listLIST_IS_EMPTY( &( pxQueue->xTasksWaitingToSend ) ) == pdFALSE )
 2788              		.loc 1 2589 17
 2789 0060 7B68     		ldr	r3, [r7, #4]
 2790 0062 1B69     		ldr	r3, [r3, #16]
 2791              		.loc 1 2589 15
 2792 0064 002B     		cmp	r3, #0
 2793 0066 12D0     		beq	.L158
2590:Middlewares/FreeRTOS/queue.c ****             {
2591:Middlewares/FreeRTOS/queue.c ****                 if( xTaskRemoveFromEventList( &( pxQueue->xTasksWaitingToSend ) ) != pdFALSE )
 2794              		.loc 1 2591 47
 2795 0068 7B68     		ldr	r3, [r7, #4]
 2796 006a 1033     		adds	r3, r3, #16
 2797              		.loc 1 2591 21
 2798 006c 1846     		mov	r0, r3
 2799 006e FFF7FEFF 		bl	xTaskRemoveFromEventList
 2800 0072 0346     		mov	r3, r0
 2801              		.loc 1 2591 19 discriminator 1
 2802 0074 002B     		cmp	r3, #0
 2803 0076 01D0     		beq	.L154
2592:Middlewares/FreeRTOS/queue.c ****                 {
2593:Middlewares/FreeRTOS/queue.c ****                     vTaskMissedYield();
 2804              		.loc 1 2593 21
 2805 0078 FFF7FEFF 		bl	vTaskMissedYield
 2806              	.L154:
2594:Middlewares/FreeRTOS/queue.c ****                 }
2595:Middlewares/FreeRTOS/queue.c ****                 else
2596:Middlewares/FreeRTOS/queue.c ****                 {
2597:Middlewares/FreeRTOS/queue.c ****                     mtCOVERAGE_TEST_MARKER();
2598:Middlewares/FreeRTOS/queue.c ****                 }
2599:Middlewares/FreeRTOS/queue.c **** 
2600:Middlewares/FreeRTOS/queue.c ****                 --cRxLock;
 2807              		.loc 1 2600 17
 2808 007c BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 2809 007e 013B     		subs	r3, r3, #1
 2810 0080 DBB2     		uxtb	r3, r3
 2811 0082 BB73     		strb	r3, [r7, #14]
 2812              	.L152:
2587:Middlewares/FreeRTOS/queue.c ****         {
 2813              		.loc 1 2587 24
 2814 0084 97F90E30 		ldrsb	r3, [r7, #14]
 2815 0088 002B     		cmp	r3, #0
 2816 008a E9DC     		bgt	.L156
 2817 008c 00E0     		b	.L155
 2818              	.L158:
2601:Middlewares/FreeRTOS/queue.c ****             }
2602:Middlewares/FreeRTOS/queue.c ****             else
2603:Middlewares/FreeRTOS/queue.c ****             {
2604:Middlewares/FreeRTOS/queue.c ****                 break;
ARM GAS  /tmp/cczksE0f.s 			page 100


 2819              		.loc 1 2604 17
 2820 008e 00BF     		nop
 2821              	.L155:
2605:Middlewares/FreeRTOS/queue.c ****             }
2606:Middlewares/FreeRTOS/queue.c ****         }
2607:Middlewares/FreeRTOS/queue.c **** 
2608:Middlewares/FreeRTOS/queue.c ****         pxQueue->cRxLock = queueUNLOCKED;
 2822              		.loc 1 2608 26
 2823 0090 7B68     		ldr	r3, [r7, #4]
 2824 0092 FF22     		movs	r2, #255
 2825 0094 83F84420 		strb	r2, [r3, #68]
 2826              	.LBE55:
2609:Middlewares/FreeRTOS/queue.c ****     }
2610:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL();
 2827              		.loc 1 2610 5
 2828 0098 FFF7FEFF 		bl	vPortExitCritical
2611:Middlewares/FreeRTOS/queue.c **** }
 2829              		.loc 1 2611 1
 2830 009c 00BF     		nop
 2831 009e 1037     		adds	r7, r7, #16
 2832              		.cfi_def_cfa_offset 8
 2833 00a0 BD46     		mov	sp, r7
 2834              		.cfi_def_cfa_register 13
 2835              		@ sp needed
 2836 00a2 80BD     		pop	{r7, pc}
 2837              		.cfi_endproc
 2838              	.LFE29:
 2840              		.section	.text.prvIsQueueEmpty,"ax",%progbits
 2841              		.align	1
 2842              		.syntax unified
 2843              		.thumb
 2844              		.thumb_func
 2846              	prvIsQueueEmpty:
 2847              	.LFB30:
2612:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2613:Middlewares/FreeRTOS/queue.c **** 
2614:Middlewares/FreeRTOS/queue.c **** static BaseType_t prvIsQueueEmpty( const Queue_t * pxQueue )
2615:Middlewares/FreeRTOS/queue.c **** {
 2848              		.loc 1 2615 1
 2849              		.cfi_startproc
 2850              		@ args = 0, pretend = 0, frame = 16
 2851              		@ frame_needed = 1, uses_anonymous_args = 0
 2852 0000 80B5     		push	{r7, lr}
 2853              		.cfi_def_cfa_offset 8
 2854              		.cfi_offset 7, -8
 2855              		.cfi_offset 14, -4
 2856 0002 84B0     		sub	sp, sp, #16
 2857              		.cfi_def_cfa_offset 24
 2858 0004 00AF     		add	r7, sp, #0
 2859              		.cfi_def_cfa_register 7
 2860 0006 7860     		str	r0, [r7, #4]
2616:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn;
2617:Middlewares/FreeRTOS/queue.c **** 
2618:Middlewares/FreeRTOS/queue.c ****     taskENTER_CRITICAL();
 2861              		.loc 1 2618 5
 2862 0008 FFF7FEFF 		bl	vPortEnterCritical
2619:Middlewares/FreeRTOS/queue.c ****     {
ARM GAS  /tmp/cczksE0f.s 			page 101


2620:Middlewares/FreeRTOS/queue.c ****         if( pxQueue->uxMessagesWaiting == ( UBaseType_t ) 0 )
 2863              		.loc 1 2620 20
 2864 000c 7B68     		ldr	r3, [r7, #4]
 2865 000e 9B6B     		ldr	r3, [r3, #56]
 2866              		.loc 1 2620 11
 2867 0010 002B     		cmp	r3, #0
 2868 0012 02D1     		bne	.L160
2621:Middlewares/FreeRTOS/queue.c ****         {
2622:Middlewares/FreeRTOS/queue.c ****             xReturn = pdTRUE;
 2869              		.loc 1 2622 21
 2870 0014 0123     		movs	r3, #1
 2871 0016 FB60     		str	r3, [r7, #12]
 2872 0018 01E0     		b	.L161
 2873              	.L160:
2623:Middlewares/FreeRTOS/queue.c ****         }
2624:Middlewares/FreeRTOS/queue.c ****         else
2625:Middlewares/FreeRTOS/queue.c ****         {
2626:Middlewares/FreeRTOS/queue.c ****             xReturn = pdFALSE;
 2874              		.loc 1 2626 21
 2875 001a 0023     		movs	r3, #0
 2876 001c FB60     		str	r3, [r7, #12]
 2877              	.L161:
2627:Middlewares/FreeRTOS/queue.c ****         }
2628:Middlewares/FreeRTOS/queue.c ****     }
2629:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL();
 2878              		.loc 1 2629 5
 2879 001e FFF7FEFF 		bl	vPortExitCritical
2630:Middlewares/FreeRTOS/queue.c **** 
2631:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 2880              		.loc 1 2631 12
 2881 0022 FB68     		ldr	r3, [r7, #12]
2632:Middlewares/FreeRTOS/queue.c **** }
 2882              		.loc 1 2632 1
 2883 0024 1846     		mov	r0, r3
 2884 0026 1037     		adds	r7, r7, #16
 2885              		.cfi_def_cfa_offset 8
 2886 0028 BD46     		mov	sp, r7
 2887              		.cfi_def_cfa_register 13
 2888              		@ sp needed
 2889 002a 80BD     		pop	{r7, pc}
 2890              		.cfi_endproc
 2891              	.LFE30:
 2893              		.section	.text.xQueueIsQueueEmptyFromISR,"ax",%progbits
 2894              		.align	1
 2895              		.global	xQueueIsQueueEmptyFromISR
 2896              		.syntax unified
 2897              		.thumb
 2898              		.thumb_func
 2900              	xQueueIsQueueEmptyFromISR:
 2901              	.LFB31:
2633:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2634:Middlewares/FreeRTOS/queue.c **** 
2635:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueueIsQueueEmptyFromISR( const QueueHandle_t xQueue )
2636:Middlewares/FreeRTOS/queue.c **** {
 2902              		.loc 1 2636 1
 2903              		.cfi_startproc
 2904              		@ args = 0, pretend = 0, frame = 16
ARM GAS  /tmp/cczksE0f.s 			page 102


 2905              		@ frame_needed = 1, uses_anonymous_args = 0
 2906              		@ link register save eliminated.
 2907 0000 80B4     		push	{r7}
 2908              		.cfi_def_cfa_offset 4
 2909              		.cfi_offset 7, -4
 2910 0002 85B0     		sub	sp, sp, #20
 2911              		.cfi_def_cfa_offset 24
 2912 0004 00AF     		add	r7, sp, #0
 2913              		.cfi_def_cfa_register 7
 2914 0006 7860     		str	r0, [r7, #4]
2637:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn;
2638:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 2915              		.loc 1 2638 21
 2916 0008 7B68     		ldr	r3, [r7, #4]
 2917 000a BB60     		str	r3, [r7, #8]
2639:Middlewares/FreeRTOS/queue.c **** 
2640:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueueIsQueueEmptyFromISR( xQueue );
2641:Middlewares/FreeRTOS/queue.c **** 
2642:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
2643:Middlewares/FreeRTOS/queue.c **** 
2644:Middlewares/FreeRTOS/queue.c ****     if( pxQueue->uxMessagesWaiting == ( UBaseType_t ) 0 )
 2918              		.loc 1 2644 16
 2919 000c BB68     		ldr	r3, [r7, #8]
 2920 000e 9B6B     		ldr	r3, [r3, #56]
 2921              		.loc 1 2644 7
 2922 0010 002B     		cmp	r3, #0
 2923 0012 02D1     		bne	.L164
2645:Middlewares/FreeRTOS/queue.c ****     {
2646:Middlewares/FreeRTOS/queue.c ****         xReturn = pdTRUE;
 2924              		.loc 1 2646 17
 2925 0014 0123     		movs	r3, #1
 2926 0016 FB60     		str	r3, [r7, #12]
 2927 0018 01E0     		b	.L165
 2928              	.L164:
2647:Middlewares/FreeRTOS/queue.c ****     }
2648:Middlewares/FreeRTOS/queue.c ****     else
2649:Middlewares/FreeRTOS/queue.c ****     {
2650:Middlewares/FreeRTOS/queue.c ****         xReturn = pdFALSE;
 2929              		.loc 1 2650 17
 2930 001a 0023     		movs	r3, #0
 2931 001c FB60     		str	r3, [r7, #12]
 2932              	.L165:
2651:Middlewares/FreeRTOS/queue.c ****     }
2652:Middlewares/FreeRTOS/queue.c **** 
2653:Middlewares/FreeRTOS/queue.c ****     traceRETURN_xQueueIsQueueEmptyFromISR( xReturn );
2654:Middlewares/FreeRTOS/queue.c **** 
2655:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 2933              		.loc 1 2655 12
 2934 001e FB68     		ldr	r3, [r7, #12]
2656:Middlewares/FreeRTOS/queue.c **** }
 2935              		.loc 1 2656 1
 2936 0020 1846     		mov	r0, r3
 2937 0022 1437     		adds	r7, r7, #20
 2938              		.cfi_def_cfa_offset 4
 2939 0024 BD46     		mov	sp, r7
 2940              		.cfi_def_cfa_register 13
 2941              		@ sp needed
ARM GAS  /tmp/cczksE0f.s 			page 103


 2942 0026 5DF8047B 		ldr	r7, [sp], #4
 2943              		.cfi_restore 7
 2944              		.cfi_def_cfa_offset 0
 2945 002a 7047     		bx	lr
 2946              		.cfi_endproc
 2947              	.LFE31:
 2949              		.section	.text.prvIsQueueFull,"ax",%progbits
 2950              		.align	1
 2951              		.syntax unified
 2952              		.thumb
 2953              		.thumb_func
 2955              	prvIsQueueFull:
 2956              	.LFB32:
2657:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2658:Middlewares/FreeRTOS/queue.c **** 
2659:Middlewares/FreeRTOS/queue.c **** static BaseType_t prvIsQueueFull( const Queue_t * pxQueue )
2660:Middlewares/FreeRTOS/queue.c **** {
 2957              		.loc 1 2660 1
 2958              		.cfi_startproc
 2959              		@ args = 0, pretend = 0, frame = 16
 2960              		@ frame_needed = 1, uses_anonymous_args = 0
 2961 0000 80B5     		push	{r7, lr}
 2962              		.cfi_def_cfa_offset 8
 2963              		.cfi_offset 7, -8
 2964              		.cfi_offset 14, -4
 2965 0002 84B0     		sub	sp, sp, #16
 2966              		.cfi_def_cfa_offset 24
 2967 0004 00AF     		add	r7, sp, #0
 2968              		.cfi_def_cfa_register 7
 2969 0006 7860     		str	r0, [r7, #4]
2661:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn;
2662:Middlewares/FreeRTOS/queue.c **** 
2663:Middlewares/FreeRTOS/queue.c ****     taskENTER_CRITICAL();
 2970              		.loc 1 2663 5
 2971 0008 FFF7FEFF 		bl	vPortEnterCritical
2664:Middlewares/FreeRTOS/queue.c ****     {
2665:Middlewares/FreeRTOS/queue.c ****         if( pxQueue->uxMessagesWaiting == pxQueue->uxLength )
 2972              		.loc 1 2665 20
 2973 000c 7B68     		ldr	r3, [r7, #4]
 2974 000e 9A6B     		ldr	r2, [r3, #56]
 2975              		.loc 1 2665 50
 2976 0010 7B68     		ldr	r3, [r7, #4]
 2977 0012 DB6B     		ldr	r3, [r3, #60]
 2978              		.loc 1 2665 11
 2979 0014 9A42     		cmp	r2, r3
 2980 0016 02D1     		bne	.L168
2666:Middlewares/FreeRTOS/queue.c ****         {
2667:Middlewares/FreeRTOS/queue.c ****             xReturn = pdTRUE;
 2981              		.loc 1 2667 21
 2982 0018 0123     		movs	r3, #1
 2983 001a FB60     		str	r3, [r7, #12]
 2984 001c 01E0     		b	.L169
 2985              	.L168:
2668:Middlewares/FreeRTOS/queue.c ****         }
2669:Middlewares/FreeRTOS/queue.c ****         else
2670:Middlewares/FreeRTOS/queue.c ****         {
2671:Middlewares/FreeRTOS/queue.c ****             xReturn = pdFALSE;
ARM GAS  /tmp/cczksE0f.s 			page 104


 2986              		.loc 1 2671 21
 2987 001e 0023     		movs	r3, #0
 2988 0020 FB60     		str	r3, [r7, #12]
 2989              	.L169:
2672:Middlewares/FreeRTOS/queue.c ****         }
2673:Middlewares/FreeRTOS/queue.c ****     }
2674:Middlewares/FreeRTOS/queue.c ****     taskEXIT_CRITICAL();
 2990              		.loc 1 2674 5
 2991 0022 FFF7FEFF 		bl	vPortExitCritical
2675:Middlewares/FreeRTOS/queue.c **** 
2676:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 2992              		.loc 1 2676 12
 2993 0026 FB68     		ldr	r3, [r7, #12]
2677:Middlewares/FreeRTOS/queue.c **** }
 2994              		.loc 1 2677 1
 2995 0028 1846     		mov	r0, r3
 2996 002a 1037     		adds	r7, r7, #16
 2997              		.cfi_def_cfa_offset 8
 2998 002c BD46     		mov	sp, r7
 2999              		.cfi_def_cfa_register 13
 3000              		@ sp needed
 3001 002e 80BD     		pop	{r7, pc}
 3002              		.cfi_endproc
 3003              	.LFE32:
 3005              		.section	.text.xQueueIsQueueFullFromISR,"ax",%progbits
 3006              		.align	1
 3007              		.global	xQueueIsQueueFullFromISR
 3008              		.syntax unified
 3009              		.thumb
 3010              		.thumb_func
 3012              	xQueueIsQueueFullFromISR:
 3013              	.LFB33:
2678:Middlewares/FreeRTOS/queue.c **** /*-----------------------------------------------------------*/
2679:Middlewares/FreeRTOS/queue.c **** 
2680:Middlewares/FreeRTOS/queue.c **** BaseType_t xQueueIsQueueFullFromISR( const QueueHandle_t xQueue )
2681:Middlewares/FreeRTOS/queue.c **** {
 3014              		.loc 1 2681 1
 3015              		.cfi_startproc
 3016              		@ args = 0, pretend = 0, frame = 16
 3017              		@ frame_needed = 1, uses_anonymous_args = 0
 3018              		@ link register save eliminated.
 3019 0000 80B4     		push	{r7}
 3020              		.cfi_def_cfa_offset 4
 3021              		.cfi_offset 7, -4
 3022 0002 85B0     		sub	sp, sp, #20
 3023              		.cfi_def_cfa_offset 24
 3024 0004 00AF     		add	r7, sp, #0
 3025              		.cfi_def_cfa_register 7
 3026 0006 7860     		str	r0, [r7, #4]
2682:Middlewares/FreeRTOS/queue.c ****     BaseType_t xReturn;
2683:Middlewares/FreeRTOS/queue.c ****     Queue_t * const pxQueue = xQueue;
 3027              		.loc 1 2683 21
 3028 0008 7B68     		ldr	r3, [r7, #4]
 3029 000a BB60     		str	r3, [r7, #8]
2684:Middlewares/FreeRTOS/queue.c **** 
2685:Middlewares/FreeRTOS/queue.c ****     traceENTER_xQueueIsQueueFullFromISR( xQueue );
2686:Middlewares/FreeRTOS/queue.c **** 
ARM GAS  /tmp/cczksE0f.s 			page 105


2687:Middlewares/FreeRTOS/queue.c ****     configASSERT( pxQueue );
2688:Middlewares/FreeRTOS/queue.c **** 
2689:Middlewares/FreeRTOS/queue.c ****     if( pxQueue->uxMessagesWaiting == pxQueue->uxLength )
 3030              		.loc 1 2689 16
 3031 000c BB68     		ldr	r3, [r7, #8]
 3032 000e 9A6B     		ldr	r2, [r3, #56]
 3033              		.loc 1 2689 46
 3034 0010 BB68     		ldr	r3, [r7, #8]
 3035 0012 DB6B     		ldr	r3, [r3, #60]
 3036              		.loc 1 2689 7
 3037 0014 9A42     		cmp	r2, r3
 3038 0016 02D1     		bne	.L172
2690:Middlewares/FreeRTOS/queue.c ****     {
2691:Middlewares/FreeRTOS/queue.c ****         xReturn = pdTRUE;
 3039              		.loc 1 2691 17
 3040 0018 0123     		movs	r3, #1
 3041 001a FB60     		str	r3, [r7, #12]
 3042 001c 01E0     		b	.L173
 3043              	.L172:
2692:Middlewares/FreeRTOS/queue.c ****     }
2693:Middlewares/FreeRTOS/queue.c ****     else
2694:Middlewares/FreeRTOS/queue.c ****     {
2695:Middlewares/FreeRTOS/queue.c ****         xReturn = pdFALSE;
 3044              		.loc 1 2695 17
 3045 001e 0023     		movs	r3, #0
 3046 0020 FB60     		str	r3, [r7, #12]
 3047              	.L173:
2696:Middlewares/FreeRTOS/queue.c ****     }
2697:Middlewares/FreeRTOS/queue.c **** 
2698:Middlewares/FreeRTOS/queue.c ****     traceRETURN_xQueueIsQueueFullFromISR( xReturn );
2699:Middlewares/FreeRTOS/queue.c **** 
2700:Middlewares/FreeRTOS/queue.c ****     return xReturn;
 3048              		.loc 1 2700 12
 3049 0022 FB68     		ldr	r3, [r7, #12]
2701:Middlewares/FreeRTOS/queue.c **** }
 3050              		.loc 1 2701 1
 3051 0024 1846     		mov	r0, r3
 3052 0026 1437     		adds	r7, r7, #20
 3053              		.cfi_def_cfa_offset 4
 3054 0028 BD46     		mov	sp, r7
 3055              		.cfi_def_cfa_register 13
 3056              		@ sp needed
 3057 002a 5DF8047B 		ldr	r7, [sp], #4
 3058              		.cfi_restore 7
 3059              		.cfi_def_cfa_offset 0
 3060 002e 7047     		bx	lr
 3061              		.cfi_endproc
 3062              	.LFE33:
 3064              		.text
 3065              	.Letext0:
 3066              		.file 3 "/usr/lib/gcc/arm-none-eabi/13.2.1/include/stddef.h"
 3067              		.file 4 "/usr/lib/gcc/arm-none-eabi/13.2.1/include/stdint.h"
 3068              		.file 5 "Middlewares/FreeRTOS/include/list.h"
 3069              		.file 6 "Middlewares/FreeRTOS/include/task.h"
 3070              		.file 7 "Middlewares/FreeRTOS/include/queue.h"
 3071              		.file 8 "/usr/include/newlib/string.h"
 3072              		.file 9 "Middlewares/FreeRTOS/include/portable.h"
ARM GAS  /tmp/cczksE0f.s 			page 106


ARM GAS  /tmp/cczksE0f.s 			page 107


DEFINED SYMBOLS
                            *ABS*:00000000 queue.c
     /tmp/cczksE0f.s:21     .text.xQueueGenericReset:00000000 $t
     /tmp/cczksE0f.s:27     .text.xQueueGenericReset:00000000 xQueueGenericReset
     /tmp/cczksE0f.s:198    .text.xQueueGenericReset:000000e4 $d
     /tmp/cczksE0f.s:203    .text.xQueueGenericCreate:00000000 $t
     /tmp/cczksE0f.s:209    .text.xQueueGenericCreate:00000000 xQueueGenericCreate
     /tmp/cczksE0f.s:306    .text.prvInitialiseNewQueue:00000000 prvInitialiseNewQueue
     /tmp/cczksE0f.s:301    .text.prvInitialiseNewQueue:00000000 $t
     /tmp/cczksE0f.s:367    .text.prvInitialiseMutex:00000000 $t
     /tmp/cczksE0f.s:372    .text.prvInitialiseMutex:00000000 prvInitialiseMutex
     /tmp/cczksE0f.s:480    .text.xQueueGenericSend:00000000 xQueueGenericSend
     /tmp/cczksE0f.s:422    .text.xQueueCreateMutex:00000000 $t
     /tmp/cczksE0f.s:428    .text.xQueueCreateMutex:00000000 xQueueCreateMutex
     /tmp/cczksE0f.s:474    .text.xQueueGenericSend:00000000 $t
     /tmp/cczksE0f.s:2466   .text.prvCopyDataToQueue:00000000 prvCopyDataToQueue
     /tmp/cczksE0f.s:2955   .text.prvIsQueueFull:00000000 prvIsQueueFull
     /tmp/cczksE0f.s:2712   .text.prvUnlockQueue:00000000 prvUnlockQueue
     /tmp/cczksE0f.s:708    .text.xQueueGenericSend:00000150 $d
     /tmp/cczksE0f.s:713    .text.xQueueGenericSendFromISR:00000000 $t
     /tmp/cczksE0f.s:719    .text.xQueueGenericSendFromISR:00000000 xQueueGenericSendFromISR
     /tmp/cczksE0f.s:879    .text.xQueueGiveFromISR:00000000 $t
     /tmp/cczksE0f.s:885    .text.xQueueGiveFromISR:00000000 xQueueGiveFromISR
     /tmp/cczksE0f.s:1037   .text.xQueueReceive:00000000 $t
     /tmp/cczksE0f.s:1043   .text.xQueueReceive:00000000 xQueueReceive
     /tmp/cczksE0f.s:2636   .text.prvCopyDataFromQueue:00000000 prvCopyDataFromQueue
     /tmp/cczksE0f.s:2846   .text.prvIsQueueEmpty:00000000 prvIsQueueEmpty
     /tmp/cczksE0f.s:1258   .text.xQueueReceive:00000140 $d
     /tmp/cczksE0f.s:1263   .text.xQueueSemaphoreTake:00000000 $t
     /tmp/cczksE0f.s:1269   .text.xQueueSemaphoreTake:00000000 xQueueSemaphoreTake
     /tmp/cczksE0f.s:2410   .text.prvGetDisinheritPriorityAfterTimeout:00000000 prvGetDisinheritPriorityAfterTimeout
     /tmp/cczksE0f.s:1533   .text.xQueueSemaphoreTake:0000018c $d
     /tmp/cczksE0f.s:1538   .text.xQueuePeek:00000000 $t
     /tmp/cczksE0f.s:1544   .text.xQueuePeek:00000000 xQueuePeek
     /tmp/cczksE0f.s:1761   .text.xQueuePeek:00000144 $d
     /tmp/cczksE0f.s:1766   .text.xQueueReceiveFromISR:00000000 $t
     /tmp/cczksE0f.s:1772   .text.xQueueReceiveFromISR:00000000 xQueueReceiveFromISR
     /tmp/cczksE0f.s:1926   .text.xQueuePeekFromISR:00000000 $t
     /tmp/cczksE0f.s:1932   .text.xQueuePeekFromISR:00000000 xQueuePeekFromISR
     /tmp/cczksE0f.s:2030   .text.uxQueueMessagesWaiting:00000000 $t
     /tmp/cczksE0f.s:2036   .text.uxQueueMessagesWaiting:00000000 uxQueueMessagesWaiting
     /tmp/cczksE0f.s:2073   .text.uxQueueSpacesAvailable:00000000 $t
     /tmp/cczksE0f.s:2079   .text.uxQueueSpacesAvailable:00000000 uxQueueSpacesAvailable
     /tmp/cczksE0f.s:2124   .text.uxQueueMessagesWaitingFromISR:00000000 $t
     /tmp/cczksE0f.s:2130   .text.uxQueueMessagesWaitingFromISR:00000000 uxQueueMessagesWaitingFromISR
     /tmp/cczksE0f.s:2169   .text.vQueueDelete:00000000 $t
     /tmp/cczksE0f.s:2175   .text.vQueueDelete:00000000 vQueueDelete
     /tmp/cczksE0f.s:2208   .text.uxQueueGetQueueNumber:00000000 $t
     /tmp/cczksE0f.s:2214   .text.uxQueueGetQueueNumber:00000000 uxQueueGetQueueNumber
     /tmp/cczksE0f.s:2247   .text.vQueueSetQueueNumber:00000000 $t
     /tmp/cczksE0f.s:2253   .text.vQueueSetQueueNumber:00000000 vQueueSetQueueNumber
     /tmp/cczksE0f.s:2288   .text.ucQueueGetQueueType:00000000 $t
     /tmp/cczksE0f.s:2294   .text.ucQueueGetQueueType:00000000 ucQueueGetQueueType
     /tmp/cczksE0f.s:2327   .text.uxQueueGetQueueItemSize:00000000 $t
     /tmp/cczksE0f.s:2333   .text.uxQueueGetQueueItemSize:00000000 uxQueueGetQueueItemSize
     /tmp/cczksE0f.s:2366   .text.uxQueueGetQueueLength:00000000 $t
     /tmp/cczksE0f.s:2372   .text.uxQueueGetQueueLength:00000000 uxQueueGetQueueLength
ARM GAS  /tmp/cczksE0f.s 			page 108


     /tmp/cczksE0f.s:2405   .text.prvGetDisinheritPriorityAfterTimeout:00000000 $t
     /tmp/cczksE0f.s:2461   .text.prvCopyDataToQueue:00000000 $t
     /tmp/cczksE0f.s:2631   .text.prvCopyDataFromQueue:00000000 $t
     /tmp/cczksE0f.s:2707   .text.prvUnlockQueue:00000000 $t
     /tmp/cczksE0f.s:2841   .text.prvIsQueueEmpty:00000000 $t
     /tmp/cczksE0f.s:2894   .text.xQueueIsQueueEmptyFromISR:00000000 $t
     /tmp/cczksE0f.s:2900   .text.xQueueIsQueueEmptyFromISR:00000000 xQueueIsQueueEmptyFromISR
     /tmp/cczksE0f.s:2950   .text.prvIsQueueFull:00000000 $t
     /tmp/cczksE0f.s:3006   .text.xQueueIsQueueFullFromISR:00000000 $t
     /tmp/cczksE0f.s:3012   .text.xQueueIsQueueFullFromISR:00000000 xQueueIsQueueFullFromISR
                           .group:00000000 wm4.0.e7b64c2c371cf922f2c8028878d5c18e
                           .group:00000000 wm4.ieeefp.h.77.5ad60f72ea25fc152400b550ac118212
                           .group:00000000 wm4._newlib_version.h.4.411db44ea2338a62eca2f0777f81481b
                           .group:00000000 wm4.newlib.h.27.07bf1b8b16da454ae07478107717878b
                           .group:00000000 wm4.features.h.22.4e5514d51694f64cae235f84d9e565a5
                           .group:00000000 wm4.config.h.224.10ee1ad185d877c6e334e6581faab44d
                           .group:00000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:00000000 wm4.stdlib.h.13.4ed386f5c1a80d71e72172885d946ef2
                           .group:00000000 wm4.stddef.h.185.882514a1a6169ceba9142f401cbe27c6
                           .group:00000000 wm4.stddef.h.39.794fa375de48dda278c4aebb5c74aa5b
                           .group:00000000 wm4._default_types.h.6.959254cf5f09734ea7516c89e8bb21bd
                           .group:00000000 wm4.cdefs.h.49.70fc7af612f78ddcace70fdd90b5623b
                           .group:00000000 wm4._types.h.20.dd0d04dca3800a0d2a6129b87f3adbb2
                           .group:00000000 wm4.stddef.h.158.6f8e08a347b1cff664332fa350bfceb3
                           .group:00000000 wm4._types.h.127.3bdfe3ff8ea2d0985b03d9cbe93480e3
                           .group:00000000 wm4.reent.h.18.25503cdc8b7e55dd0d6ea7b3e5af7a03
                           .group:00000000 wm4.lock.h.2.c0958401bd0ce484d507ee19aacab817
                           .group:00000000 wm4.reent.h.78.7f0775353a33c852a1479c008f68cd03
                           .group:00000000 wm4.alloca.h.8.dfc0c703c47ec3e69746825b17d9e66d
                           .group:00000000 wm4.stdlib.h.56.f4862cfbf4363a1db01842d5bdf72c18
                           .group:00000000 wm4.string.h.8.c4b8571ce60dff2817f43fec8b86aecd
                           .group:00000000 wm4.stddef.h.158.eec8bf00b5213f43d095cb984c5f22e3
                           .group:00000000 wm4.stdint.h.29.6d480f4ba0f60596e88234283d42444f
                           .group:00000000 wm4.FreeRTOS.h.59.647b1b0da38e4e98108aae13c8abe9ee
                           .group:00000000 wm4.FreeRTOSConfig.h.3.1bc113985a1c518a5550f81e20536102
                           .group:00000000 wm4.FreeRTOS.h.80.9a03152afd9cd416d9ab2abfdad37c9b
                           .group:00000000 wm4.projdefs.h.30.aa35d7b594916c060d2a891e32dea137
                           .group:00000000 wm4.portmacro.h.31.e33b7e559875bcc469c70605da17b58f
                           .group:00000000 wm4.portable.h.61.05b23d6f46f623c8ade29ce5eacb329c
                           .group:00000000 wm4.mpu_wrappers.h.30.5ad41bb447b8a1fc377f3ff5365e3b43
                           .group:00000000 wm4.portable.h.193.36e79dfed0030429d07d873c91c7277e
                           .group:00000000 wm4.FreeRTOS.h.111.6daad733ba046b297d537354d32aec60
                           .group:00000000 wm4.list.h.59.51b351582e53f1c2c45529a43c6ffaaf
                           .group:00000000 wm4.task.h.56.6d40654270ebd8aede87d7ae52c162f1
                           .group:00000000 wm4.queue.h.68.790bcd6ddfd18d11f6bee0515f399741

UNDEFINED SYMBOLS
vPortEnterCritical
xTaskRemoveFromEventList
vListInitialise
vPortExitCritical
pvPortMalloc
vTaskInternalSetTimeOutState
vTaskSuspendAll
xTaskCheckForTimeOut
vTaskPlaceOnEventList
xTaskResumeAll
ARM GAS  /tmp/cczksE0f.s 			page 109


uxTaskGetNumberOfTasks
pvTaskIncrementMutexHeldCount
xTaskPriorityInherit
vTaskPriorityDisinheritAfterTimeout
vPortFree
xTaskPriorityDisinherit
memcpy
vTaskMissedYield
