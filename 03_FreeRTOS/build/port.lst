ARM GAS  /tmp/cc7Fx2aC.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"port.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Middlewares/FreeRTOS/portable/port.c"
  20              		.section	.data.uxCriticalNesting,"aw"
  21              		.align	2
  24              	uxCriticalNesting:
  25 0000 AAAAAAAA 		.word	-1431655766
  26              		.section	.text.pxPortInitialiseStack,"ax",%progbits
  27              		.align	1
  28              		.global	pxPortInitialiseStack
  29              		.syntax unified
  30              		.thumb
  31              		.thumb_func
  33              	pxPortInitialiseStack:
  34              	.LFB4:
   1:Middlewares/FreeRTOS/portable/port.c **** /*
   2:Middlewares/FreeRTOS/portable/port.c ****  * FreeRTOS Kernel V11.1.0
   3:Middlewares/FreeRTOS/portable/port.c ****  * Copyright (C) 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.
   4:Middlewares/FreeRTOS/portable/port.c ****  *
   5:Middlewares/FreeRTOS/portable/port.c ****  * SPDX-License-Identifier: MIT
   6:Middlewares/FreeRTOS/portable/port.c ****  *
   7:Middlewares/FreeRTOS/portable/port.c ****  * Permission is hereby granted, free of charge, to any person obtaining a copy of
   8:Middlewares/FreeRTOS/portable/port.c ****  * this software and associated documentation files (the "Software"), to deal in
   9:Middlewares/FreeRTOS/portable/port.c ****  * the Software without restriction, including without limitation the rights to
  10:Middlewares/FreeRTOS/portable/port.c ****  * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
  11:Middlewares/FreeRTOS/portable/port.c ****  * the Software, and to permit persons to whom the Software is furnished to do so,
  12:Middlewares/FreeRTOS/portable/port.c ****  * subject to the following conditions:
  13:Middlewares/FreeRTOS/portable/port.c ****  *
  14:Middlewares/FreeRTOS/portable/port.c ****  * The above copyright notice and this permission notice shall be included in all
  15:Middlewares/FreeRTOS/portable/port.c ****  * copies or substantial portions of the Software.
  16:Middlewares/FreeRTOS/portable/port.c ****  *
  17:Middlewares/FreeRTOS/portable/port.c ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  18:Middlewares/FreeRTOS/portable/port.c ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
  19:Middlewares/FreeRTOS/portable/port.c ****  * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
  20:Middlewares/FreeRTOS/portable/port.c ****  * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
  21:Middlewares/FreeRTOS/portable/port.c ****  * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
  22:Middlewares/FreeRTOS/portable/port.c ****  * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  23:Middlewares/FreeRTOS/portable/port.c ****  *
  24:Middlewares/FreeRTOS/portable/port.c ****  * https://www.FreeRTOS.org
  25:Middlewares/FreeRTOS/portable/port.c ****  * https://github.com/FreeRTOS
  26:Middlewares/FreeRTOS/portable/port.c ****  *
ARM GAS  /tmp/cc7Fx2aC.s 			page 2


  27:Middlewares/FreeRTOS/portable/port.c ****  */
  28:Middlewares/FreeRTOS/portable/port.c **** 
  29:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------
  30:Middlewares/FreeRTOS/portable/port.c **** * Implementation of functions defined in portable.h for the ARM CM4F port.
  31:Middlewares/FreeRTOS/portable/port.c **** *----------------------------------------------------------*/
  32:Middlewares/FreeRTOS/portable/port.c **** 
  33:Middlewares/FreeRTOS/portable/port.c **** /* Scheduler includes. */
  34:Middlewares/FreeRTOS/portable/port.c **** #include "FreeRTOS.h"
  35:Middlewares/FreeRTOS/portable/port.c **** #include "task.h"
  36:Middlewares/FreeRTOS/portable/port.c **** 
  37:Middlewares/FreeRTOS/portable/port.c **** #ifndef __VFP_FP__
  38:Middlewares/FreeRTOS/portable/port.c ****     #error This port can only be used when the project options are configured to enable hardware fl
  39:Middlewares/FreeRTOS/portable/port.c **** #endif
  40:Middlewares/FreeRTOS/portable/port.c **** 
  41:Middlewares/FreeRTOS/portable/port.c **** /* Prototype of all Interrupt Service Routines (ISRs). */
  42:Middlewares/FreeRTOS/portable/port.c **** typedef void ( * portISR_t )( void );
  43:Middlewares/FreeRTOS/portable/port.c **** 
  44:Middlewares/FreeRTOS/portable/port.c **** /* Constants required to manipulate the core.  Registers first... */
  45:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SYSTICK_CTRL_REG             ( *( ( volatile uint32_t * ) 0xe000e010 ) )
  46:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SYSTICK_LOAD_REG             ( *( ( volatile uint32_t * ) 0xe000e014 ) )
  47:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SYSTICK_CURRENT_VALUE_REG    ( *( ( volatile uint32_t * ) 0xe000e018 ) )
  48:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SHPR2_REG                    ( *( ( volatile uint32_t * ) 0xe000ed1c ) )
  49:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SHPR3_REG                    ( *( ( volatile uint32_t * ) 0xe000ed20 ) )
  50:Middlewares/FreeRTOS/portable/port.c **** /* ...then bits in the registers. */
  51:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SYSTICK_CLK_BIT              ( 1UL << 2UL )
  52:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SYSTICK_INT_BIT              ( 1UL << 1UL )
  53:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SYSTICK_ENABLE_BIT           ( 1UL << 0UL )
  54:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SYSTICK_COUNT_FLAG_BIT       ( 1UL << 16UL )
  55:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_PENDSVCLEAR_BIT              ( 1UL << 27UL )
  56:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_PEND_SYSTICK_SET_BIT         ( 1UL << 26UL )
  57:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_PEND_SYSTICK_CLEAR_BIT       ( 1UL << 25UL )
  58:Middlewares/FreeRTOS/portable/port.c **** 
  59:Middlewares/FreeRTOS/portable/port.c **** /* Constants used to detect a Cortex-M7 r0p1 core, which should use the ARM_CM7
  60:Middlewares/FreeRTOS/portable/port.c ****  * r0p1 port. */
  61:Middlewares/FreeRTOS/portable/port.c **** #define portCPUID                             ( *( ( volatile uint32_t * ) 0xE000ed00 ) )
  62:Middlewares/FreeRTOS/portable/port.c **** #define portCORTEX_M7_r0p1_ID                 ( 0x410FC271UL )
  63:Middlewares/FreeRTOS/portable/port.c **** #define portCORTEX_M7_r0p0_ID                 ( 0x410FC270UL )
  64:Middlewares/FreeRTOS/portable/port.c **** 
  65:Middlewares/FreeRTOS/portable/port.c **** #define portMIN_INTERRUPT_PRIORITY            ( 255UL )
  66:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_PENDSV_PRI                   ( ( ( uint32_t ) portMIN_INTERRUPT_PRIORITY ) << 16UL
  67:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_SYSTICK_PRI                  ( ( ( uint32_t ) portMIN_INTERRUPT_PRIORITY ) << 24UL
  68:Middlewares/FreeRTOS/portable/port.c **** 
  69:Middlewares/FreeRTOS/portable/port.c **** /* Constants used to check the installation of the FreeRTOS interrupt handlers. */
  70:Middlewares/FreeRTOS/portable/port.c **** #define portSCB_VTOR_REG                      ( *( ( portISR_t ** ) 0xE000ED08 ) )
  71:Middlewares/FreeRTOS/portable/port.c **** #define portVECTOR_INDEX_SVC                  ( 11 )
  72:Middlewares/FreeRTOS/portable/port.c **** #define portVECTOR_INDEX_PENDSV               ( 14 )
  73:Middlewares/FreeRTOS/portable/port.c **** 
  74:Middlewares/FreeRTOS/portable/port.c **** /* Constants required to check the validity of an interrupt priority. */
  75:Middlewares/FreeRTOS/portable/port.c **** #define portFIRST_USER_INTERRUPT_NUMBER       ( 16 )
  76:Middlewares/FreeRTOS/portable/port.c **** #define portNVIC_IP_REGISTERS_OFFSET_16       ( 0xE000E3F0 )
  77:Middlewares/FreeRTOS/portable/port.c **** #define portAIRCR_REG                         ( *( ( volatile uint32_t * ) 0xE000ED0C ) )
  78:Middlewares/FreeRTOS/portable/port.c **** #define portMAX_8_BIT_VALUE                   ( ( uint8_t ) 0xff )
  79:Middlewares/FreeRTOS/portable/port.c **** #define portTOP_BIT_OF_BYTE                   ( ( uint8_t ) 0x80 )
  80:Middlewares/FreeRTOS/portable/port.c **** #define portMAX_PRIGROUP_BITS                 ( ( uint8_t ) 7 )
  81:Middlewares/FreeRTOS/portable/port.c **** #define portPRIORITY_GROUP_MASK               ( 0x07UL << 8UL )
  82:Middlewares/FreeRTOS/portable/port.c **** #define portPRIGROUP_SHIFT                    ( 8UL )
  83:Middlewares/FreeRTOS/portable/port.c **** 
ARM GAS  /tmp/cc7Fx2aC.s 			page 3


  84:Middlewares/FreeRTOS/portable/port.c **** /* Masks off all bits but the VECTACTIVE bits in the ICSR register. */
  85:Middlewares/FreeRTOS/portable/port.c **** #define portVECTACTIVE_MASK                   ( 0xFFUL )
  86:Middlewares/FreeRTOS/portable/port.c **** 
  87:Middlewares/FreeRTOS/portable/port.c **** /* Constants required to manipulate the VFP. */
  88:Middlewares/FreeRTOS/portable/port.c **** #define portFPCCR                             ( ( volatile uint32_t * ) 0xe000ef34 ) /* Floating po
  89:Middlewares/FreeRTOS/portable/port.c **** #define portASPEN_AND_LSPEN_BITS              ( 0x3UL << 30UL )
  90:Middlewares/FreeRTOS/portable/port.c **** 
  91:Middlewares/FreeRTOS/portable/port.c **** /* Constants required to set up the initial stack. */
  92:Middlewares/FreeRTOS/portable/port.c **** #define portINITIAL_XPSR                      ( 0x01000000 )
  93:Middlewares/FreeRTOS/portable/port.c **** #define portINITIAL_EXC_RETURN                ( 0xfffffffd )
  94:Middlewares/FreeRTOS/portable/port.c **** 
  95:Middlewares/FreeRTOS/portable/port.c **** /* The systick is a 24-bit counter. */
  96:Middlewares/FreeRTOS/portable/port.c **** #define portMAX_24_BIT_NUMBER                 ( 0xffffffUL )
  97:Middlewares/FreeRTOS/portable/port.c **** 
  98:Middlewares/FreeRTOS/portable/port.c **** /* For strict compliance with the Cortex-M spec the task start address should
  99:Middlewares/FreeRTOS/portable/port.c ****  * have bit-0 clear, as it is loaded into the PC on exit from an ISR. */
 100:Middlewares/FreeRTOS/portable/port.c **** #define portSTART_ADDRESS_MASK                ( ( StackType_t ) 0xfffffffeUL )
 101:Middlewares/FreeRTOS/portable/port.c **** 
 102:Middlewares/FreeRTOS/portable/port.c **** /* A fiddle factor to estimate the number of SysTick counts that would have
 103:Middlewares/FreeRTOS/portable/port.c ****  * occurred while the SysTick counter is stopped during tickless idle
 104:Middlewares/FreeRTOS/portable/port.c ****  * calculations. */
 105:Middlewares/FreeRTOS/portable/port.c **** #define portMISSED_COUNTS_FACTOR              ( 94UL )
 106:Middlewares/FreeRTOS/portable/port.c **** 
 107:Middlewares/FreeRTOS/portable/port.c **** /* Let the user override the default SysTick clock rate.  If defined by the
 108:Middlewares/FreeRTOS/portable/port.c ****  * user, this symbol must equal the SysTick clock rate when the CLK bit is 0 in the
 109:Middlewares/FreeRTOS/portable/port.c ****  * configuration register. */
 110:Middlewares/FreeRTOS/portable/port.c **** #ifndef configSYSTICK_CLOCK_HZ
 111:Middlewares/FreeRTOS/portable/port.c ****     #define configSYSTICK_CLOCK_HZ             ( configCPU_CLOCK_HZ )
 112:Middlewares/FreeRTOS/portable/port.c ****     /* Ensure the SysTick is clocked at the same frequency as the core. */
 113:Middlewares/FreeRTOS/portable/port.c ****     #define portNVIC_SYSTICK_CLK_BIT_CONFIG    ( portNVIC_SYSTICK_CLK_BIT )
 114:Middlewares/FreeRTOS/portable/port.c **** #else
 115:Middlewares/FreeRTOS/portable/port.c ****     /* Select the option to clock SysTick not at the same frequency as the core. */
 116:Middlewares/FreeRTOS/portable/port.c ****     #define portNVIC_SYSTICK_CLK_BIT_CONFIG    ( 0 )
 117:Middlewares/FreeRTOS/portable/port.c **** #endif
 118:Middlewares/FreeRTOS/portable/port.c **** 
 119:Middlewares/FreeRTOS/portable/port.c **** /* Let the user override the pre-loading of the initial LR with the address of
 120:Middlewares/FreeRTOS/portable/port.c ****  * prvTaskExitError() in case it messes up unwinding of the stack in the
 121:Middlewares/FreeRTOS/portable/port.c ****  * debugger. */
 122:Middlewares/FreeRTOS/portable/port.c **** #ifdef configTASK_RETURN_ADDRESS
 123:Middlewares/FreeRTOS/portable/port.c ****     #define portTASK_RETURN_ADDRESS    configTASK_RETURN_ADDRESS
 124:Middlewares/FreeRTOS/portable/port.c **** #else
 125:Middlewares/FreeRTOS/portable/port.c ****     #define portTASK_RETURN_ADDRESS    prvTaskExitError
 126:Middlewares/FreeRTOS/portable/port.c **** #endif
 127:Middlewares/FreeRTOS/portable/port.c **** 
 128:Middlewares/FreeRTOS/portable/port.c **** /*
 129:Middlewares/FreeRTOS/portable/port.c ****  * Setup the timer to generate the tick interrupts.  The implementation in this
 130:Middlewares/FreeRTOS/portable/port.c ****  * file is weak to allow application writers to change the timer used to
 131:Middlewares/FreeRTOS/portable/port.c ****  * generate the tick interrupt.
 132:Middlewares/FreeRTOS/portable/port.c ****  */
 133:Middlewares/FreeRTOS/portable/port.c **** void vPortSetupTimerInterrupt( void );
 134:Middlewares/FreeRTOS/portable/port.c **** 
 135:Middlewares/FreeRTOS/portable/port.c **** /*
 136:Middlewares/FreeRTOS/portable/port.c ****  * Exception handlers.
 137:Middlewares/FreeRTOS/portable/port.c ****  */
 138:Middlewares/FreeRTOS/portable/port.c **** void xPortPendSVHandler( void ) __attribute__( ( naked ) );
 139:Middlewares/FreeRTOS/portable/port.c **** void xPortSysTickHandler( void );
 140:Middlewares/FreeRTOS/portable/port.c **** void vPortSVCHandler( void ) __attribute__( ( naked ) );
ARM GAS  /tmp/cc7Fx2aC.s 			page 4


 141:Middlewares/FreeRTOS/portable/port.c **** 
 142:Middlewares/FreeRTOS/portable/port.c **** /*
 143:Middlewares/FreeRTOS/portable/port.c ****  * Start first task is a separate function so it can be tested in isolation.
 144:Middlewares/FreeRTOS/portable/port.c ****  */
 145:Middlewares/FreeRTOS/portable/port.c **** static void prvPortStartFirstTask( void ) __attribute__( ( naked ) );
 146:Middlewares/FreeRTOS/portable/port.c **** 
 147:Middlewares/FreeRTOS/portable/port.c **** /*
 148:Middlewares/FreeRTOS/portable/port.c ****  * Function to enable the VFP.
 149:Middlewares/FreeRTOS/portable/port.c ****  */
 150:Middlewares/FreeRTOS/portable/port.c **** static void vPortEnableVFP( void ) __attribute__( ( naked ) );
 151:Middlewares/FreeRTOS/portable/port.c **** 
 152:Middlewares/FreeRTOS/portable/port.c **** /*
 153:Middlewares/FreeRTOS/portable/port.c ****  * Used to catch tasks that attempt to return from their implementing function.
 154:Middlewares/FreeRTOS/portable/port.c ****  */
 155:Middlewares/FreeRTOS/portable/port.c **** static void prvTaskExitError( void );
 156:Middlewares/FreeRTOS/portable/port.c **** 
 157:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 158:Middlewares/FreeRTOS/portable/port.c **** 
 159:Middlewares/FreeRTOS/portable/port.c **** /* Each task maintains its own interrupt status in the critical nesting
 160:Middlewares/FreeRTOS/portable/port.c ****  * variable. */
 161:Middlewares/FreeRTOS/portable/port.c **** static UBaseType_t uxCriticalNesting = 0xaaaaaaaa;
 162:Middlewares/FreeRTOS/portable/port.c **** 
 163:Middlewares/FreeRTOS/portable/port.c **** /*
 164:Middlewares/FreeRTOS/portable/port.c ****  * The number of SysTick increments that make up one tick period.
 165:Middlewares/FreeRTOS/portable/port.c ****  */
 166:Middlewares/FreeRTOS/portable/port.c **** #if ( configUSE_TICKLESS_IDLE == 1 )
 167:Middlewares/FreeRTOS/portable/port.c ****     static uint32_t ulTimerCountsForOneTick = 0;
 168:Middlewares/FreeRTOS/portable/port.c **** #endif /* configUSE_TICKLESS_IDLE */
 169:Middlewares/FreeRTOS/portable/port.c **** 
 170:Middlewares/FreeRTOS/portable/port.c **** /*
 171:Middlewares/FreeRTOS/portable/port.c ****  * The maximum number of tick periods that can be suppressed is limited by the
 172:Middlewares/FreeRTOS/portable/port.c ****  * 24 bit resolution of the SysTick timer.
 173:Middlewares/FreeRTOS/portable/port.c ****  */
 174:Middlewares/FreeRTOS/portable/port.c **** #if ( configUSE_TICKLESS_IDLE == 1 )
 175:Middlewares/FreeRTOS/portable/port.c ****     static uint32_t xMaximumPossibleSuppressedTicks = 0;
 176:Middlewares/FreeRTOS/portable/port.c **** #endif /* configUSE_TICKLESS_IDLE */
 177:Middlewares/FreeRTOS/portable/port.c **** 
 178:Middlewares/FreeRTOS/portable/port.c **** /*
 179:Middlewares/FreeRTOS/portable/port.c ****  * Compensate for the CPU cycles that pass while the SysTick is stopped (low
 180:Middlewares/FreeRTOS/portable/port.c ****  * power functionality only.
 181:Middlewares/FreeRTOS/portable/port.c ****  */
 182:Middlewares/FreeRTOS/portable/port.c **** #if ( configUSE_TICKLESS_IDLE == 1 )
 183:Middlewares/FreeRTOS/portable/port.c ****     static uint32_t ulStoppedTimerCompensation = 0;
 184:Middlewares/FreeRTOS/portable/port.c **** #endif /* configUSE_TICKLESS_IDLE */
 185:Middlewares/FreeRTOS/portable/port.c **** 
 186:Middlewares/FreeRTOS/portable/port.c **** /*
 187:Middlewares/FreeRTOS/portable/port.c ****  * Used by the portASSERT_IF_INTERRUPT_PRIORITY_INVALID() macro to ensure
 188:Middlewares/FreeRTOS/portable/port.c ****  * FreeRTOS API functions are not called from interrupts that have been assigned
 189:Middlewares/FreeRTOS/portable/port.c ****  * a priority above configMAX_SYSCALL_INTERRUPT_PRIORITY.
 190:Middlewares/FreeRTOS/portable/port.c ****  */
 191:Middlewares/FreeRTOS/portable/port.c **** #if ( configASSERT_DEFINED == 1 )
 192:Middlewares/FreeRTOS/portable/port.c ****     static uint8_t ucMaxSysCallPriority = 0;
 193:Middlewares/FreeRTOS/portable/port.c ****     static uint32_t ulMaxPRIGROUPValue = 0;
 194:Middlewares/FreeRTOS/portable/port.c ****     static const volatile uint8_t * const pcInterruptPriorityRegisters = ( const volatile uint8_t *
 195:Middlewares/FreeRTOS/portable/port.c **** #endif /* configASSERT_DEFINED */
 196:Middlewares/FreeRTOS/portable/port.c **** 
 197:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
ARM GAS  /tmp/cc7Fx2aC.s 			page 5


 198:Middlewares/FreeRTOS/portable/port.c **** 
 199:Middlewares/FreeRTOS/portable/port.c **** /*
 200:Middlewares/FreeRTOS/portable/port.c ****  * See header file for description.
 201:Middlewares/FreeRTOS/portable/port.c ****  */
 202:Middlewares/FreeRTOS/portable/port.c **** StackType_t * pxPortInitialiseStack( StackType_t * pxTopOfStack,
 203:Middlewares/FreeRTOS/portable/port.c ****                                      TaskFunction_t pxCode,
 204:Middlewares/FreeRTOS/portable/port.c ****                                      void * pvParameters )
 205:Middlewares/FreeRTOS/portable/port.c **** {
  35              		.loc 1 205 1
  36              		.cfi_startproc
  37              		@ args = 0, pretend = 0, frame = 16
  38              		@ frame_needed = 1, uses_anonymous_args = 0
  39              		@ link register save eliminated.
  40 0000 80B4     		push	{r7}
  41              		.cfi_def_cfa_offset 4
  42              		.cfi_offset 7, -4
  43 0002 85B0     		sub	sp, sp, #20
  44              		.cfi_def_cfa_offset 24
  45 0004 00AF     		add	r7, sp, #0
  46              		.cfi_def_cfa_register 7
  47 0006 F860     		str	r0, [r7, #12]
  48 0008 B960     		str	r1, [r7, #8]
  49 000a 7A60     		str	r2, [r7, #4]
 206:Middlewares/FreeRTOS/portable/port.c ****     /* Simulate the stack frame as it would be created by a context switch
 207:Middlewares/FreeRTOS/portable/port.c ****      * interrupt. */
 208:Middlewares/FreeRTOS/portable/port.c **** 
 209:Middlewares/FreeRTOS/portable/port.c ****     /* Offset added to account for the way the MCU uses the stack on entry/exit
 210:Middlewares/FreeRTOS/portable/port.c ****      * of interrupts, and to ensure alignment. */
 211:Middlewares/FreeRTOS/portable/port.c ****     pxTopOfStack--;
  50              		.loc 1 211 17
  51 000c FB68     		ldr	r3, [r7, #12]
  52 000e 043B     		subs	r3, r3, #4
  53 0010 FB60     		str	r3, [r7, #12]
 212:Middlewares/FreeRTOS/portable/port.c **** 
 213:Middlewares/FreeRTOS/portable/port.c ****     *pxTopOfStack = portINITIAL_XPSR;                                    /* xPSR */
  54              		.loc 1 213 19
  55 0012 FB68     		ldr	r3, [r7, #12]
  56 0014 4FF08072 		mov	r2, #16777216
  57 0018 1A60     		str	r2, [r3]
 214:Middlewares/FreeRTOS/portable/port.c ****     pxTopOfStack--;
  58              		.loc 1 214 17
  59 001a FB68     		ldr	r3, [r7, #12]
  60 001c 043B     		subs	r3, r3, #4
  61 001e FB60     		str	r3, [r7, #12]
 215:Middlewares/FreeRTOS/portable/port.c ****     *pxTopOfStack = ( ( StackType_t ) pxCode ) & portSTART_ADDRESS_MASK; /* PC */
  62              		.loc 1 215 23
  63 0020 BB68     		ldr	r3, [r7, #8]
  64              		.loc 1 215 48
  65 0022 23F00102 		bic	r2, r3, #1
  66              		.loc 1 215 19
  67 0026 FB68     		ldr	r3, [r7, #12]
  68 0028 1A60     		str	r2, [r3]
 216:Middlewares/FreeRTOS/portable/port.c ****     pxTopOfStack--;
  69              		.loc 1 216 17
  70 002a FB68     		ldr	r3, [r7, #12]
  71 002c 043B     		subs	r3, r3, #4
  72 002e FB60     		str	r3, [r7, #12]
ARM GAS  /tmp/cc7Fx2aC.s 			page 6


 217:Middlewares/FreeRTOS/portable/port.c ****     *pxTopOfStack = ( StackType_t ) portTASK_RETURN_ADDRESS;             /* LR */
  73              		.loc 1 217 21
  74 0030 0C4A     		ldr	r2, .L3
  75              		.loc 1 217 19
  76 0032 FB68     		ldr	r3, [r7, #12]
  77 0034 1A60     		str	r2, [r3]
 218:Middlewares/FreeRTOS/portable/port.c **** 
 219:Middlewares/FreeRTOS/portable/port.c ****     /* Save code space by skipping register initialisation. */
 220:Middlewares/FreeRTOS/portable/port.c ****     pxTopOfStack -= 5;                            /* R12, R3, R2 and R1. */
  78              		.loc 1 220 18
  79 0036 FB68     		ldr	r3, [r7, #12]
  80 0038 143B     		subs	r3, r3, #20
  81 003a FB60     		str	r3, [r7, #12]
 221:Middlewares/FreeRTOS/portable/port.c ****     *pxTopOfStack = ( StackType_t ) pvParameters; /* R0 */
  82              		.loc 1 221 21
  83 003c 7A68     		ldr	r2, [r7, #4]
  84              		.loc 1 221 19
  85 003e FB68     		ldr	r3, [r7, #12]
  86 0040 1A60     		str	r2, [r3]
 222:Middlewares/FreeRTOS/portable/port.c **** 
 223:Middlewares/FreeRTOS/portable/port.c ****     /* A save method is being used that requires each task to maintain its
 224:Middlewares/FreeRTOS/portable/port.c ****      * own exec return value. */
 225:Middlewares/FreeRTOS/portable/port.c ****     pxTopOfStack--;
  87              		.loc 1 225 17
  88 0042 FB68     		ldr	r3, [r7, #12]
  89 0044 043B     		subs	r3, r3, #4
  90 0046 FB60     		str	r3, [r7, #12]
 226:Middlewares/FreeRTOS/portable/port.c ****     *pxTopOfStack = portINITIAL_EXC_RETURN;
  91              		.loc 1 226 19
  92 0048 FB68     		ldr	r3, [r7, #12]
  93 004a 6FF00202 		mvn	r2, #2
  94 004e 1A60     		str	r2, [r3]
 227:Middlewares/FreeRTOS/portable/port.c **** 
 228:Middlewares/FreeRTOS/portable/port.c ****     pxTopOfStack -= 8; /* R11, R10, R9, R8, R7, R6, R5 and R4. */
  95              		.loc 1 228 18
  96 0050 FB68     		ldr	r3, [r7, #12]
  97 0052 203B     		subs	r3, r3, #32
  98 0054 FB60     		str	r3, [r7, #12]
 229:Middlewares/FreeRTOS/portable/port.c **** 
 230:Middlewares/FreeRTOS/portable/port.c ****     return pxTopOfStack;
  99              		.loc 1 230 12
 100 0056 FB68     		ldr	r3, [r7, #12]
 231:Middlewares/FreeRTOS/portable/port.c **** }
 101              		.loc 1 231 1
 102 0058 1846     		mov	r0, r3
 103 005a 1437     		adds	r7, r7, #20
 104              		.cfi_def_cfa_offset 4
 105 005c BD46     		mov	sp, r7
 106              		.cfi_def_cfa_register 13
 107              		@ sp needed
 108 005e 5DF8047B 		ldr	r7, [sp], #4
 109              		.cfi_restore 7
 110              		.cfi_def_cfa_offset 0
 111 0062 7047     		bx	lr
 112              	.L4:
 113              		.align	2
 114              	.L3:
ARM GAS  /tmp/cc7Fx2aC.s 			page 7


 115 0064 00000000 		.word	prvTaskExitError
 116              		.cfi_endproc
 117              	.LFE4:
 119              		.section	.text.prvTaskExitError,"ax",%progbits
 120              		.align	1
 121              		.syntax unified
 122              		.thumb
 123              		.thumb_func
 125              	prvTaskExitError:
 126              	.LFB5:
 232:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 233:Middlewares/FreeRTOS/portable/port.c **** 
 234:Middlewares/FreeRTOS/portable/port.c **** static void prvTaskExitError( void )
 235:Middlewares/FreeRTOS/portable/port.c **** {
 127              		.loc 1 235 1
 128              		.cfi_startproc
 129              		@ args = 0, pretend = 0, frame = 8
 130              		@ frame_needed = 1, uses_anonymous_args = 0
 131              		@ link register save eliminated.
 132 0000 80B4     		push	{r7}
 133              		.cfi_def_cfa_offset 4
 134              		.cfi_offset 7, -4
 135 0002 83B0     		sub	sp, sp, #12
 136              		.cfi_def_cfa_offset 16
 137 0004 00AF     		add	r7, sp, #0
 138              		.cfi_def_cfa_register 7
 236:Middlewares/FreeRTOS/portable/port.c ****     volatile uint32_t ulDummy = 0;
 139              		.loc 1 236 23
 140 0006 0023     		movs	r3, #0
 141 0008 3B60     		str	r3, [r7]
 142              	.LBB12:
 143              	.LBB13:
 144              		.file 2 "Middlewares/FreeRTOS/portable/portmacro.h"
   1:Middlewares/FreeRTOS/portable/portmacro.h **** /*
   2:Middlewares/FreeRTOS/portable/portmacro.h ****  * FreeRTOS Kernel V11.1.0
   3:Middlewares/FreeRTOS/portable/portmacro.h ****  * Copyright (C) 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.
   4:Middlewares/FreeRTOS/portable/portmacro.h ****  *
   5:Middlewares/FreeRTOS/portable/portmacro.h ****  * SPDX-License-Identifier: MIT
   6:Middlewares/FreeRTOS/portable/portmacro.h ****  *
   7:Middlewares/FreeRTOS/portable/portmacro.h ****  * Permission is hereby granted, free of charge, to any person obtaining a copy of
   8:Middlewares/FreeRTOS/portable/portmacro.h ****  * this software and associated documentation files (the "Software"), to deal in
   9:Middlewares/FreeRTOS/portable/portmacro.h ****  * the Software without restriction, including without limitation the rights to
  10:Middlewares/FreeRTOS/portable/portmacro.h ****  * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
  11:Middlewares/FreeRTOS/portable/portmacro.h ****  * the Software, and to permit persons to whom the Software is furnished to do so,
  12:Middlewares/FreeRTOS/portable/portmacro.h ****  * subject to the following conditions:
  13:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  14:Middlewares/FreeRTOS/portable/portmacro.h ****  * The above copyright notice and this permission notice shall be included in all
  15:Middlewares/FreeRTOS/portable/portmacro.h ****  * copies or substantial portions of the Software.
  16:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  17:Middlewares/FreeRTOS/portable/portmacro.h ****  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  18:Middlewares/FreeRTOS/portable/portmacro.h ****  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
  19:Middlewares/FreeRTOS/portable/portmacro.h ****  * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
  20:Middlewares/FreeRTOS/portable/portmacro.h ****  * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
  21:Middlewares/FreeRTOS/portable/portmacro.h ****  * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
  22:Middlewares/FreeRTOS/portable/portmacro.h ****  * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  23:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  24:Middlewares/FreeRTOS/portable/portmacro.h ****  * https://www.FreeRTOS.org
ARM GAS  /tmp/cc7Fx2aC.s 			page 8


  25:Middlewares/FreeRTOS/portable/portmacro.h ****  * https://github.com/FreeRTOS
  26:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  27:Middlewares/FreeRTOS/portable/portmacro.h ****  */
  28:Middlewares/FreeRTOS/portable/portmacro.h **** 
  29:Middlewares/FreeRTOS/portable/portmacro.h **** 
  30:Middlewares/FreeRTOS/portable/portmacro.h **** #ifndef PORTMACRO_H
  31:Middlewares/FreeRTOS/portable/portmacro.h **** #define PORTMACRO_H
  32:Middlewares/FreeRTOS/portable/portmacro.h **** 
  33:Middlewares/FreeRTOS/portable/portmacro.h **** /* *INDENT-OFF* */
  34:Middlewares/FreeRTOS/portable/portmacro.h **** #ifdef __cplusplus
  35:Middlewares/FreeRTOS/portable/portmacro.h ****     extern "C" {
  36:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
  37:Middlewares/FreeRTOS/portable/portmacro.h **** /* *INDENT-ON* */
  38:Middlewares/FreeRTOS/portable/portmacro.h **** 
  39:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------
  40:Middlewares/FreeRTOS/portable/portmacro.h ****  * Port specific definitions.
  41:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  42:Middlewares/FreeRTOS/portable/portmacro.h ****  * The settings in this file configure FreeRTOS correctly for the
  43:Middlewares/FreeRTOS/portable/portmacro.h ****  * given hardware and compiler.
  44:Middlewares/FreeRTOS/portable/portmacro.h ****  *
  45:Middlewares/FreeRTOS/portable/portmacro.h ****  * These settings should not be altered.
  46:Middlewares/FreeRTOS/portable/portmacro.h ****  *-----------------------------------------------------------
  47:Middlewares/FreeRTOS/portable/portmacro.h ****  */
  48:Middlewares/FreeRTOS/portable/portmacro.h **** 
  49:Middlewares/FreeRTOS/portable/portmacro.h **** /* Type definitions. */
  50:Middlewares/FreeRTOS/portable/portmacro.h **** #define portCHAR          char
  51:Middlewares/FreeRTOS/portable/portmacro.h **** #define portFLOAT         float
  52:Middlewares/FreeRTOS/portable/portmacro.h **** #define portDOUBLE        double
  53:Middlewares/FreeRTOS/portable/portmacro.h **** #define portLONG          long
  54:Middlewares/FreeRTOS/portable/portmacro.h **** #define portSHORT         short
  55:Middlewares/FreeRTOS/portable/portmacro.h **** #define portSTACK_TYPE    uint32_t
  56:Middlewares/FreeRTOS/portable/portmacro.h **** #define portBASE_TYPE     long
  57:Middlewares/FreeRTOS/portable/portmacro.h **** 
  58:Middlewares/FreeRTOS/portable/portmacro.h **** typedef portSTACK_TYPE   StackType_t;
  59:Middlewares/FreeRTOS/portable/portmacro.h **** typedef long             BaseType_t;
  60:Middlewares/FreeRTOS/portable/portmacro.h **** typedef unsigned long    UBaseType_t;
  61:Middlewares/FreeRTOS/portable/portmacro.h **** 
  62:Middlewares/FreeRTOS/portable/portmacro.h **** #if ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_16_BITS )
  63:Middlewares/FreeRTOS/portable/portmacro.h ****     typedef uint16_t     TickType_t;
  64:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portMAX_DELAY              ( TickType_t ) 0xffff
  65:Middlewares/FreeRTOS/portable/portmacro.h **** #elif ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_32_BITS )
  66:Middlewares/FreeRTOS/portable/portmacro.h ****     typedef uint32_t     TickType_t;
  67:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portMAX_DELAY              ( TickType_t ) 0xffffffffUL
  68:Middlewares/FreeRTOS/portable/portmacro.h **** 
  69:Middlewares/FreeRTOS/portable/portmacro.h **** /* 32-bit tick type on a 32-bit architecture, so reads of the tick count do
  70:Middlewares/FreeRTOS/portable/portmacro.h ****  * not need to be guarded with a critical section. */
  71:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portTICK_TYPE_IS_ATOMIC    1
  72:Middlewares/FreeRTOS/portable/portmacro.h **** #elif ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_64_BITS )
  73:Middlewares/FreeRTOS/portable/portmacro.h ****     typedef uint64_t TickType_t;
  74:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portMAX_DELAY              ( TickType_t ) 0xffffffffffffffffULL
  75:Middlewares/FreeRTOS/portable/portmacro.h **** #else /* if ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_16_BITS ) */
  76:Middlewares/FreeRTOS/portable/portmacro.h ****     #error configTICK_TYPE_WIDTH_IN_BITS set to unsupported tick type width.
  77:Middlewares/FreeRTOS/portable/portmacro.h **** #endif /* if ( configTICK_TYPE_WIDTH_IN_BITS == TICK_TYPE_WIDTH_16_BITS ) */
  78:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
  79:Middlewares/FreeRTOS/portable/portmacro.h **** 
  80:Middlewares/FreeRTOS/portable/portmacro.h **** /* Architecture specifics. */
  81:Middlewares/FreeRTOS/portable/portmacro.h **** #define portSTACK_GROWTH      ( -1 )
ARM GAS  /tmp/cc7Fx2aC.s 			page 9


  82:Middlewares/FreeRTOS/portable/portmacro.h **** #define portTICK_PERIOD_MS    ( ( TickType_t ) 1000 / configTICK_RATE_HZ )
  83:Middlewares/FreeRTOS/portable/portmacro.h **** #define portBYTE_ALIGNMENT    8
  84:Middlewares/FreeRTOS/portable/portmacro.h **** #define portDONT_DISCARD      __attribute__( ( used ) )
  85:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
  86:Middlewares/FreeRTOS/portable/portmacro.h **** 
  87:Middlewares/FreeRTOS/portable/portmacro.h **** /* Scheduler utilities. */
  88:Middlewares/FreeRTOS/portable/portmacro.h **** #define portYIELD()                                     \
  89:Middlewares/FreeRTOS/portable/portmacro.h ****     {                                                   \
  90:Middlewares/FreeRTOS/portable/portmacro.h ****         /* Set a PendSV to request a context switch. */ \
  91:Middlewares/FreeRTOS/portable/portmacro.h ****         portNVIC_INT_CTRL_REG = portNVIC_PENDSVSET_BIT; \
  92:Middlewares/FreeRTOS/portable/portmacro.h ****                                                         \
  93:Middlewares/FreeRTOS/portable/portmacro.h ****         /* Barriers are normally not required but do ensure the code is completely \
  94:Middlewares/FreeRTOS/portable/portmacro.h ****          * within the specified behaviour for the architecture. */ \
  95:Middlewares/FreeRTOS/portable/portmacro.h ****         __asm volatile ( "dsb" ::: "memory" );                     \
  96:Middlewares/FreeRTOS/portable/portmacro.h ****         __asm volatile ( "isb" );                                  \
  97:Middlewares/FreeRTOS/portable/portmacro.h ****     }
  98:Middlewares/FreeRTOS/portable/portmacro.h **** 
  99:Middlewares/FreeRTOS/portable/portmacro.h **** #define portNVIC_INT_CTRL_REG     ( *( ( volatile uint32_t * ) 0xe000ed04 ) )
 100:Middlewares/FreeRTOS/portable/portmacro.h **** #define portNVIC_PENDSVSET_BIT    ( 1UL << 28UL )
 101:Middlewares/FreeRTOS/portable/portmacro.h **** #define portEND_SWITCHING_ISR( xSwitchRequired ) \
 102:Middlewares/FreeRTOS/portable/portmacro.h ****     do                                           \
 103:Middlewares/FreeRTOS/portable/portmacro.h ****     {                                            \
 104:Middlewares/FreeRTOS/portable/portmacro.h ****         if( xSwitchRequired != pdFALSE )         \
 105:Middlewares/FreeRTOS/portable/portmacro.h ****         {                                        \
 106:Middlewares/FreeRTOS/portable/portmacro.h ****             traceISR_EXIT_TO_SCHEDULER();        \
 107:Middlewares/FreeRTOS/portable/portmacro.h ****             portYIELD();                         \
 108:Middlewares/FreeRTOS/portable/portmacro.h ****         }                                        \
 109:Middlewares/FreeRTOS/portable/portmacro.h ****         else                                     \
 110:Middlewares/FreeRTOS/portable/portmacro.h ****         {                                        \
 111:Middlewares/FreeRTOS/portable/portmacro.h ****             traceISR_EXIT();                     \
 112:Middlewares/FreeRTOS/portable/portmacro.h ****         }                                        \
 113:Middlewares/FreeRTOS/portable/portmacro.h ****     } while( 0 )
 114:Middlewares/FreeRTOS/portable/portmacro.h **** #define portYIELD_FROM_ISR( x )    portEND_SWITCHING_ISR( x )
 115:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 116:Middlewares/FreeRTOS/portable/portmacro.h **** 
 117:Middlewares/FreeRTOS/portable/portmacro.h **** /* Critical section management. */
 118:Middlewares/FreeRTOS/portable/portmacro.h **** extern void vPortEnterCritical( void );
 119:Middlewares/FreeRTOS/portable/portmacro.h **** extern void vPortExitCritical( void );
 120:Middlewares/FreeRTOS/portable/portmacro.h **** #define portSET_INTERRUPT_MASK_FROM_ISR()         ulPortRaiseBASEPRI()
 121:Middlewares/FreeRTOS/portable/portmacro.h **** #define portCLEAR_INTERRUPT_MASK_FROM_ISR( x )    vPortSetBASEPRI( x )
 122:Middlewares/FreeRTOS/portable/portmacro.h **** #define portDISABLE_INTERRUPTS()                  vPortRaiseBASEPRI()
 123:Middlewares/FreeRTOS/portable/portmacro.h **** #define portENABLE_INTERRUPTS()                   vPortSetBASEPRI( 0 )
 124:Middlewares/FreeRTOS/portable/portmacro.h **** #define portENTER_CRITICAL()                      vPortEnterCritical()
 125:Middlewares/FreeRTOS/portable/portmacro.h **** #define portEXIT_CRITICAL()                       vPortExitCritical()
 126:Middlewares/FreeRTOS/portable/portmacro.h **** 
 127:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 128:Middlewares/FreeRTOS/portable/portmacro.h **** 
 129:Middlewares/FreeRTOS/portable/portmacro.h **** /* Task function macros as described on the FreeRTOS.org WEB site.  These are
 130:Middlewares/FreeRTOS/portable/portmacro.h ****  * not necessary for to use this port.  They are defined so the common demo files
 131:Middlewares/FreeRTOS/portable/portmacro.h ****  * (which build with all the ports) will build. */
 132:Middlewares/FreeRTOS/portable/portmacro.h **** #define portTASK_FUNCTION_PROTO( vFunction, pvParameters )    void vFunction( void * pvParameters )
 133:Middlewares/FreeRTOS/portable/portmacro.h **** #define portTASK_FUNCTION( vFunction, pvParameters )          void vFunction( void * pvParameters )
 134:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 135:Middlewares/FreeRTOS/portable/portmacro.h **** 
 136:Middlewares/FreeRTOS/portable/portmacro.h **** /* Tickless idle/low power functionality. */
 137:Middlewares/FreeRTOS/portable/portmacro.h **** #ifndef portSUPPRESS_TICKS_AND_SLEEP
 138:Middlewares/FreeRTOS/portable/portmacro.h ****     extern void vPortSuppressTicksAndSleep( TickType_t xExpectedIdleTime );
ARM GAS  /tmp/cc7Fx2aC.s 			page 10


 139:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portSUPPRESS_TICKS_AND_SLEEP( xExpectedIdleTime )    vPortSuppressTicksAndSleep( xExpec
 140:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
 141:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 142:Middlewares/FreeRTOS/portable/portmacro.h **** 
 143:Middlewares/FreeRTOS/portable/portmacro.h **** /* Architecture specific optimisations. */
 144:Middlewares/FreeRTOS/portable/portmacro.h **** #ifndef configUSE_PORT_OPTIMISED_TASK_SELECTION
 145:Middlewares/FreeRTOS/portable/portmacro.h ****     #define configUSE_PORT_OPTIMISED_TASK_SELECTION    1
 146:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
 147:Middlewares/FreeRTOS/portable/portmacro.h **** 
 148:Middlewares/FreeRTOS/portable/portmacro.h **** #if configUSE_PORT_OPTIMISED_TASK_SELECTION == 1
 149:Middlewares/FreeRTOS/portable/portmacro.h **** 
 150:Middlewares/FreeRTOS/portable/portmacro.h **** /* Generic helper function. */
 151:Middlewares/FreeRTOS/portable/portmacro.h ****     __attribute__( ( always_inline ) ) static inline uint8_t ucPortCountLeadingZeros( uint32_t ulBi
 152:Middlewares/FreeRTOS/portable/portmacro.h ****     {
 153:Middlewares/FreeRTOS/portable/portmacro.h ****         uint8_t ucReturn;
 154:Middlewares/FreeRTOS/portable/portmacro.h **** 
 155:Middlewares/FreeRTOS/portable/portmacro.h ****         __asm volatile ( "clz %0, %1" : "=r" ( ucReturn ) : "r" ( ulBitmap ) : "memory" );
 156:Middlewares/FreeRTOS/portable/portmacro.h **** 
 157:Middlewares/FreeRTOS/portable/portmacro.h ****         return ucReturn;
 158:Middlewares/FreeRTOS/portable/portmacro.h ****     }
 159:Middlewares/FreeRTOS/portable/portmacro.h **** 
 160:Middlewares/FreeRTOS/portable/portmacro.h **** /* Check the configuration. */
 161:Middlewares/FreeRTOS/portable/portmacro.h ****     #if ( configMAX_PRIORITIES > 32 )
 162:Middlewares/FreeRTOS/portable/portmacro.h ****         #error configUSE_PORT_OPTIMISED_TASK_SELECTION can only be set to 1 when configMAX_PRIORITI
 163:Middlewares/FreeRTOS/portable/portmacro.h ****     #endif
 164:Middlewares/FreeRTOS/portable/portmacro.h **** 
 165:Middlewares/FreeRTOS/portable/portmacro.h **** /* Store/clear the ready priorities in a bit map. */
 166:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portRECORD_READY_PRIORITY( uxPriority, uxReadyPriorities )    ( uxReadyPriorities ) |= 
 167:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portRESET_READY_PRIORITY( uxPriority, uxReadyPriorities )     ( uxReadyPriorities ) &= 
 168:Middlewares/FreeRTOS/portable/portmacro.h **** 
 169:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 170:Middlewares/FreeRTOS/portable/portmacro.h **** 
 171:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portGET_HIGHEST_PRIORITY( uxTopPriority, uxReadyPriorities )    uxTopPriority = ( 31UL 
 172:Middlewares/FreeRTOS/portable/portmacro.h **** 
 173:Middlewares/FreeRTOS/portable/portmacro.h **** #endif /* configUSE_PORT_OPTIMISED_TASK_SELECTION */
 174:Middlewares/FreeRTOS/portable/portmacro.h **** 
 175:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 176:Middlewares/FreeRTOS/portable/portmacro.h **** 
 177:Middlewares/FreeRTOS/portable/portmacro.h **** #ifdef configASSERT
 178:Middlewares/FreeRTOS/portable/portmacro.h ****     void vPortValidateInterruptPriority( void );
 179:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portASSERT_IF_INTERRUPT_PRIORITY_INVALID()    vPortValidateInterruptPriority()
 180:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
 181:Middlewares/FreeRTOS/portable/portmacro.h **** 
 182:Middlewares/FreeRTOS/portable/portmacro.h **** /* portNOP() is not required by this port. */
 183:Middlewares/FreeRTOS/portable/portmacro.h **** #define portNOP()
 184:Middlewares/FreeRTOS/portable/portmacro.h **** 
 185:Middlewares/FreeRTOS/portable/portmacro.h **** #define portINLINE              __inline
 186:Middlewares/FreeRTOS/portable/portmacro.h **** 
 187:Middlewares/FreeRTOS/portable/portmacro.h **** #ifndef portFORCE_INLINE
 188:Middlewares/FreeRTOS/portable/portmacro.h ****     #define portFORCE_INLINE    inline __attribute__( ( always_inline ) )
 189:Middlewares/FreeRTOS/portable/portmacro.h **** #endif
 190:Middlewares/FreeRTOS/portable/portmacro.h **** 
 191:Middlewares/FreeRTOS/portable/portmacro.h **** portFORCE_INLINE static BaseType_t xPortIsInsideInterrupt( void )
 192:Middlewares/FreeRTOS/portable/portmacro.h **** {
 193:Middlewares/FreeRTOS/portable/portmacro.h ****     uint32_t ulCurrentInterrupt;
 194:Middlewares/FreeRTOS/portable/portmacro.h ****     BaseType_t xReturn;
 195:Middlewares/FreeRTOS/portable/portmacro.h **** 
ARM GAS  /tmp/cc7Fx2aC.s 			page 11


 196:Middlewares/FreeRTOS/portable/portmacro.h ****     /* Obtain the number of the currently executing interrupt. */
 197:Middlewares/FreeRTOS/portable/portmacro.h ****     __asm volatile ( "mrs %0, ipsr" : "=r" ( ulCurrentInterrupt )::"memory" );
 198:Middlewares/FreeRTOS/portable/portmacro.h **** 
 199:Middlewares/FreeRTOS/portable/portmacro.h ****     if( ulCurrentInterrupt == 0 )
 200:Middlewares/FreeRTOS/portable/portmacro.h ****     {
 201:Middlewares/FreeRTOS/portable/portmacro.h ****         xReturn = pdFALSE;
 202:Middlewares/FreeRTOS/portable/portmacro.h ****     }
 203:Middlewares/FreeRTOS/portable/portmacro.h ****     else
 204:Middlewares/FreeRTOS/portable/portmacro.h ****     {
 205:Middlewares/FreeRTOS/portable/portmacro.h ****         xReturn = pdTRUE;
 206:Middlewares/FreeRTOS/portable/portmacro.h ****     }
 207:Middlewares/FreeRTOS/portable/portmacro.h **** 
 208:Middlewares/FreeRTOS/portable/portmacro.h ****     return xReturn;
 209:Middlewares/FreeRTOS/portable/portmacro.h **** }
 210:Middlewares/FreeRTOS/portable/portmacro.h **** 
 211:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 212:Middlewares/FreeRTOS/portable/portmacro.h **** 
 213:Middlewares/FreeRTOS/portable/portmacro.h **** portFORCE_INLINE static void vPortRaiseBASEPRI( void )
 214:Middlewares/FreeRTOS/portable/portmacro.h **** {
 215:Middlewares/FreeRTOS/portable/portmacro.h ****     uint32_t ulNewBASEPRI;
 216:Middlewares/FreeRTOS/portable/portmacro.h **** 
 217:Middlewares/FreeRTOS/portable/portmacro.h ****     __asm volatile
 145              		.loc 2 217 5
 146              		.syntax unified
 147              	@ 217 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 148 000a 4FF05003 		   mov r3, #80                                              
 149 000e 83F31188 	   msr basepri, r3                                         
 150 0012 BFF36F8F 	   isb                                                     
 151 0016 BFF34F8F 	   dsb                                                     
 152              	
 153              	@ 0 "" 2
 154              		.thumb
 155              		.syntax unified
 156 001a 7B60     		str	r3, [r7, #4]
 218:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 219:Middlewares/FreeRTOS/portable/portmacro.h ****         "   mov %0, %1                                              \n" \
 220:Middlewares/FreeRTOS/portable/portmacro.h ****         "   msr basepri, %0                                         \n" \
 221:Middlewares/FreeRTOS/portable/portmacro.h ****         "   isb                                                     \n" \
 222:Middlewares/FreeRTOS/portable/portmacro.h ****         "   dsb                                                     \n" \
 223:Middlewares/FreeRTOS/portable/portmacro.h ****         : "=r" ( ulNewBASEPRI ) : "i" ( configMAX_SYSCALL_INTERRUPT_PRIORITY ) : "memory"
 224:Middlewares/FreeRTOS/portable/portmacro.h ****     );
 225:Middlewares/FreeRTOS/portable/portmacro.h **** }
 157              		.loc 2 225 1
 158 001c 00BF     		nop
 159              	.LBE13:
 160              	.LBE12:
 237:Middlewares/FreeRTOS/portable/port.c **** 
 238:Middlewares/FreeRTOS/portable/port.c ****     /* A function that implements a task must not exit or attempt to return to
 239:Middlewares/FreeRTOS/portable/port.c ****      * its caller as there is nothing to return to.  If a task wants to exit it
 240:Middlewares/FreeRTOS/portable/port.c ****      * should instead call vTaskDelete( NULL ).
 241:Middlewares/FreeRTOS/portable/port.c ****      *
 242:Middlewares/FreeRTOS/portable/port.c ****      * Artificially force an assert() to be triggered if configASSERT() is
 243:Middlewares/FreeRTOS/portable/port.c ****      * defined, then stop here so application writers can catch the error. */
 244:Middlewares/FreeRTOS/portable/port.c ****     configASSERT( uxCriticalNesting == ~0UL );
 245:Middlewares/FreeRTOS/portable/port.c ****     portDISABLE_INTERRUPTS();
 246:Middlewares/FreeRTOS/portable/port.c **** 
 247:Middlewares/FreeRTOS/portable/port.c ****     while( ulDummy == 0 )
ARM GAS  /tmp/cc7Fx2aC.s 			page 12


 161              		.loc 1 247 10
 162 001e 00BF     		nop
 163              	.L6:
 164              		.loc 1 247 20 discriminator 1
 165 0020 3B68     		ldr	r3, [r7]
 166 0022 002B     		cmp	r3, #0
 167 0024 FCD0     		beq	.L6
 248:Middlewares/FreeRTOS/portable/port.c ****     {
 249:Middlewares/FreeRTOS/portable/port.c ****         /* This file calls prvTaskExitError() after the scheduler has been
 250:Middlewares/FreeRTOS/portable/port.c ****          * started to remove a compiler warning about the function being defined
 251:Middlewares/FreeRTOS/portable/port.c ****          * but never called.  ulDummy is used purely to quieten other warnings
 252:Middlewares/FreeRTOS/portable/port.c ****          * about code appearing after this function is called - making ulDummy
 253:Middlewares/FreeRTOS/portable/port.c ****          * volatile makes the compiler think the function could return and
 254:Middlewares/FreeRTOS/portable/port.c ****          * therefore not output an 'unreachable code' warning for code that appears
 255:Middlewares/FreeRTOS/portable/port.c ****          * after it. */
 256:Middlewares/FreeRTOS/portable/port.c ****     }
 257:Middlewares/FreeRTOS/portable/port.c **** }
 168              		.loc 1 257 1
 169 0026 00BF     		nop
 170 0028 00BF     		nop
 171 002a 0C37     		adds	r7, r7, #12
 172              		.cfi_def_cfa_offset 4
 173 002c BD46     		mov	sp, r7
 174              		.cfi_def_cfa_register 13
 175              		@ sp needed
 176 002e 5DF8047B 		ldr	r7, [sp], #4
 177              		.cfi_restore 7
 178              		.cfi_def_cfa_offset 0
 179 0032 7047     		bx	lr
 180              		.cfi_endproc
 181              	.LFE5:
 183              		.section	.text.SVC_Handler,"ax",%progbits
 184              		.align	1
 185              		.global	SVC_Handler
 186              		.syntax unified
 187              		.thumb
 188              		.thumb_func
 190              	SVC_Handler:
 191              	.LFB6:
 258:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 259:Middlewares/FreeRTOS/portable/port.c **** 
 260:Middlewares/FreeRTOS/portable/port.c **** void vPortSVCHandler( void )
 261:Middlewares/FreeRTOS/portable/port.c **** {
 192              		.loc 1 261 1
 193              		.cfi_startproc
 194              		@ Naked Function: prologue and epilogue provided by programmer.
 195              		@ args = 0, pretend = 0, frame = 0
 196              		@ frame_needed = 1, uses_anonymous_args = 0
 262:Middlewares/FreeRTOS/portable/port.c ****     __asm volatile (
 197              		.loc 1 262 5
 198              		.syntax unified
 199              	@ 262 "Middlewares/FreeRTOS/portable/port.c" 1
 200 0000 074B     		   ldr r3, pxCurrentTCBConst2      
 201 0002 1968     	   ldr r1, [r3]                    
 202 0004 0868     	   ldr r0, [r1]                    
 203 0006 B0E8F04F 	   ldmia r0!, {r4-r11, r14}        
 204 000a 80F30988 	   msr psp, r0                     
ARM GAS  /tmp/cc7Fx2aC.s 			page 13


 205 000e BFF36F8F 	   isb                             
 206 0012 4FF00000 	   mov r0, #0                      
 207 0016 80F31188 	   msr basepri, r0                 
 208 001a 7047     	   bx r14                          
 209              	                                   
 210 001c AFF30080 	   .align 4                        
 211 0020 00000000 	pxCurrentTCBConst2: .word pxCurrentTCB             
 212              	
 213              	@ 0 "" 2
 263:Middlewares/FreeRTOS/portable/port.c ****         "   ldr r3, pxCurrentTCBConst2      \n" /* Restore the context. */
 264:Middlewares/FreeRTOS/portable/port.c ****         "   ldr r1, [r3]                    \n" /* Use pxCurrentTCBConst to get the pxCurrentTCB ad
 265:Middlewares/FreeRTOS/portable/port.c ****         "   ldr r0, [r1]                    \n" /* The first item in pxCurrentTCB is the task top o
 266:Middlewares/FreeRTOS/portable/port.c ****         "   ldmia r0!, {r4-r11, r14}        \n" /* Pop the registers that are not automatically sav
 267:Middlewares/FreeRTOS/portable/port.c ****         "   msr psp, r0                     \n" /* Restore the task stack pointer. */
 268:Middlewares/FreeRTOS/portable/port.c ****         "   isb                             \n"
 269:Middlewares/FreeRTOS/portable/port.c ****         "   mov r0, #0                      \n"
 270:Middlewares/FreeRTOS/portable/port.c ****         "   msr basepri, r0                 \n"
 271:Middlewares/FreeRTOS/portable/port.c ****         "   bx r14                          \n"
 272:Middlewares/FreeRTOS/portable/port.c ****         "                                   \n"
 273:Middlewares/FreeRTOS/portable/port.c ****         "   .align 4                        \n"
 274:Middlewares/FreeRTOS/portable/port.c ****         "pxCurrentTCBConst2: .word pxCurrentTCB             \n"
 275:Middlewares/FreeRTOS/portable/port.c ****         );
 276:Middlewares/FreeRTOS/portable/port.c **** }
 214              		.loc 1 276 1
 215              		.thumb
 216              		.syntax unified
 217 0024 00BF     		nop
 218              		.cfi_endproc
 219              	.LFE6:
 221 0026 00BF     		.section	.text.prvPortStartFirstTask,"ax",%progbits
 222              		.align	1
 223              		.syntax unified
 224              		.thumb
 225              		.thumb_func
 227              	prvPortStartFirstTask:
 228              	.LFB7:
 277:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 278:Middlewares/FreeRTOS/portable/port.c **** 
 279:Middlewares/FreeRTOS/portable/port.c **** static void prvPortStartFirstTask( void )
 280:Middlewares/FreeRTOS/portable/port.c **** {
 229              		.loc 1 280 1
 230              		.cfi_startproc
 231              		@ Naked Function: prologue and epilogue provided by programmer.
 232              		@ args = 0, pretend = 0, frame = 0
 233              		@ frame_needed = 1, uses_anonymous_args = 0
 281:Middlewares/FreeRTOS/portable/port.c ****     /* Start the first task.  This also clears the bit that indicates the FPU is
 282:Middlewares/FreeRTOS/portable/port.c ****      * in use in case the FPU was used before the scheduler was started - which
 283:Middlewares/FreeRTOS/portable/port.c ****      * would otherwise result in the unnecessary leaving of space in the SVC stack
 284:Middlewares/FreeRTOS/portable/port.c ****      * for lazy saving of FPU registers. */
 285:Middlewares/FreeRTOS/portable/port.c ****     __asm volatile (
 234              		.loc 1 285 5
 235              		.syntax unified
 236              	@ 285 "Middlewares/FreeRTOS/portable/port.c" 1
 237 0000 0848     		 ldr r0, =0xE000ED08   
 238 0002 0068     	 ldr r0, [r0]          
 239 0004 0068     	 ldr r0, [r0]          
 240 0006 80F30888 	 msr msp, r0           
ARM GAS  /tmp/cc7Fx2aC.s 			page 14


 241 000a 4FF00000 	 mov r0, #0            
 242 000e 80F31488 	 msr control, r0       
 243 0012 62B6     	 cpsie i               
 244 0014 61B6     	 cpsie f               
 245 0016 BFF34F8F 	 dsb                   
 246 001a BFF36F8F 	 isb                   
 247 001e 00DF     	 svc 0                 
 248 0020 00BF     	 nop                   
 249 0022 000008ED 	 .ltorg                
 249      00E0
 250              	
 251              	@ 0 "" 2
 286:Middlewares/FreeRTOS/portable/port.c ****         " ldr r0, =0xE000ED08   \n" /* Use the NVIC offset register to locate the stack. */
 287:Middlewares/FreeRTOS/portable/port.c ****         " ldr r0, [r0]          \n"
 288:Middlewares/FreeRTOS/portable/port.c ****         " ldr r0, [r0]          \n"
 289:Middlewares/FreeRTOS/portable/port.c ****         " msr msp, r0           \n" /* Set the msp back to the start of the stack. */
 290:Middlewares/FreeRTOS/portable/port.c ****         " mov r0, #0            \n" /* Clear the bit that indicates the FPU is in use, see comment 
 291:Middlewares/FreeRTOS/portable/port.c ****         " msr control, r0       \n"
 292:Middlewares/FreeRTOS/portable/port.c ****         " cpsie i               \n" /* Globally enable interrupts. */
 293:Middlewares/FreeRTOS/portable/port.c ****         " cpsie f               \n"
 294:Middlewares/FreeRTOS/portable/port.c ****         " dsb                   \n"
 295:Middlewares/FreeRTOS/portable/port.c ****         " isb                   \n"
 296:Middlewares/FreeRTOS/portable/port.c ****         " svc 0                 \n" /* System call to start first task. */
 297:Middlewares/FreeRTOS/portable/port.c ****         " nop                   \n"
 298:Middlewares/FreeRTOS/portable/port.c ****         " .ltorg                \n"
 299:Middlewares/FreeRTOS/portable/port.c ****         );
 300:Middlewares/FreeRTOS/portable/port.c **** }
 252              		.loc 1 300 1
 253              		.thumb
 254              		.syntax unified
 255 0028 00BF     		nop
 256              		.cfi_endproc
 257              	.LFE7:
 259 002a 00BF     		.section	.text.xPortStartScheduler,"ax",%progbits
 260              		.align	1
 261              		.global	xPortStartScheduler
 262              		.syntax unified
 263              		.thumb
 264              		.thumb_func
 266              	xPortStartScheduler:
 267              	.LFB8:
 301:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 302:Middlewares/FreeRTOS/portable/port.c **** 
 303:Middlewares/FreeRTOS/portable/port.c **** /*
 304:Middlewares/FreeRTOS/portable/port.c ****  * See header file for description.
 305:Middlewares/FreeRTOS/portable/port.c ****  */
 306:Middlewares/FreeRTOS/portable/port.c **** BaseType_t xPortStartScheduler( void )
 307:Middlewares/FreeRTOS/portable/port.c **** {
 268              		.loc 1 307 1
 269              		.cfi_startproc
 270              		@ args = 0, pretend = 0, frame = 8
 271              		@ frame_needed = 1, uses_anonymous_args = 0
 272 0000 80B5     		push	{r7, lr}
 273              		.cfi_def_cfa_offset 8
 274              		.cfi_offset 7, -8
 275              		.cfi_offset 14, -4
 276 0002 82B0     		sub	sp, sp, #8
ARM GAS  /tmp/cc7Fx2aC.s 			page 15


 277              		.cfi_def_cfa_offset 16
 278 0004 00AF     		add	r7, sp, #0
 279              		.cfi_def_cfa_register 7
 280              	.LBB14:
 308:Middlewares/FreeRTOS/portable/port.c ****     /* This port can be used on all revisions of the Cortex-M7 core other than
 309:Middlewares/FreeRTOS/portable/port.c ****      * the r0p1 parts.  r0p1 parts should use the port from the
 310:Middlewares/FreeRTOS/portable/port.c ****      * /source/portable/GCC/ARM_CM7/r0p1 directory. */
 311:Middlewares/FreeRTOS/portable/port.c ****     configASSERT( portCPUID != portCORTEX_M7_r0p1_ID );
 312:Middlewares/FreeRTOS/portable/port.c ****     configASSERT( portCPUID != portCORTEX_M7_r0p0_ID );
 313:Middlewares/FreeRTOS/portable/port.c **** 
 314:Middlewares/FreeRTOS/portable/port.c ****     /* An application can install FreeRTOS interrupt handlers in one of the
 315:Middlewares/FreeRTOS/portable/port.c ****      * following ways:
 316:Middlewares/FreeRTOS/portable/port.c ****      * 1. Direct Routing - Install the functions vPortSVCHandler and
 317:Middlewares/FreeRTOS/portable/port.c ****      *    xPortPendSVHandler for SVCall and PendSV interrupts respectively.
 318:Middlewares/FreeRTOS/portable/port.c ****      * 2. Indirect Routing - Install separate handlers for SVCall and PendSV
 319:Middlewares/FreeRTOS/portable/port.c ****      *    interrupts and route program control from those handlers to
 320:Middlewares/FreeRTOS/portable/port.c ****      *    vPortSVCHandler and xPortPendSVHandler functions.
 321:Middlewares/FreeRTOS/portable/port.c ****      *
 322:Middlewares/FreeRTOS/portable/port.c ****      * Applications that use Indirect Routing must set
 323:Middlewares/FreeRTOS/portable/port.c ****      * configCHECK_HANDLER_INSTALLATION to 0 in their FreeRTOSConfig.h. Direct
 324:Middlewares/FreeRTOS/portable/port.c ****      * routing, which is validated here when configCHECK_HANDLER_INSTALLATION
 325:Middlewares/FreeRTOS/portable/port.c ****      * is 1, should be preferred when possible. */
 326:Middlewares/FreeRTOS/portable/port.c ****     #if ( configCHECK_HANDLER_INSTALLATION == 1 )
 327:Middlewares/FreeRTOS/portable/port.c ****     {
 328:Middlewares/FreeRTOS/portable/port.c ****         const portISR_t * const pxVectorTable = portSCB_VTOR_REG;
 281              		.loc 1 328 49
 282 0006 154B     		ldr	r3, .L11
 283              		.loc 1 328 33
 284 0008 1B68     		ldr	r3, [r3]
 285 000a 7B60     		str	r3, [r7, #4]
 286              	.LBE14:
 329:Middlewares/FreeRTOS/portable/port.c **** 
 330:Middlewares/FreeRTOS/portable/port.c ****         /* Validate that the application has correctly installed the FreeRTOS
 331:Middlewares/FreeRTOS/portable/port.c ****          * handlers for SVCall and PendSV interrupts. We do not check the
 332:Middlewares/FreeRTOS/portable/port.c ****          * installation of the SysTick handler because the application may
 333:Middlewares/FreeRTOS/portable/port.c ****          * choose to drive the RTOS tick using a timer other than the SysTick
 334:Middlewares/FreeRTOS/portable/port.c ****          * timer by overriding the weak function vPortSetupTimerInterrupt().
 335:Middlewares/FreeRTOS/portable/port.c ****          *
 336:Middlewares/FreeRTOS/portable/port.c ****          * Assertion failures here indicate incorrect installation of the
 337:Middlewares/FreeRTOS/portable/port.c ****          * FreeRTOS handlers. For help installing the FreeRTOS handlers, see
 338:Middlewares/FreeRTOS/portable/port.c ****          * https://www.FreeRTOS.org/FAQHelp.html.
 339:Middlewares/FreeRTOS/portable/port.c ****          *
 340:Middlewares/FreeRTOS/portable/port.c ****          * Systems with a configurable address for the interrupt vector table
 341:Middlewares/FreeRTOS/portable/port.c ****          * can also encounter assertion failures or even system faults here if
 342:Middlewares/FreeRTOS/portable/port.c ****          * VTOR is not set correctly to point to the application's vector table. */
 343:Middlewares/FreeRTOS/portable/port.c ****         configASSERT( pxVectorTable[ portVECTOR_INDEX_SVC ] == vPortSVCHandler );
 344:Middlewares/FreeRTOS/portable/port.c ****         configASSERT( pxVectorTable[ portVECTOR_INDEX_PENDSV ] == xPortPendSVHandler );
 345:Middlewares/FreeRTOS/portable/port.c ****     }
 346:Middlewares/FreeRTOS/portable/port.c ****     #endif /* configCHECK_HANDLER_INSTALLATION */
 347:Middlewares/FreeRTOS/portable/port.c **** 
 348:Middlewares/FreeRTOS/portable/port.c ****     #if ( configASSERT_DEFINED == 1 )
 349:Middlewares/FreeRTOS/portable/port.c ****     {
 350:Middlewares/FreeRTOS/portable/port.c ****         volatile uint8_t ucOriginalPriority;
 351:Middlewares/FreeRTOS/portable/port.c ****         volatile uint32_t ulImplementedPrioBits = 0;
 352:Middlewares/FreeRTOS/portable/port.c ****         volatile uint8_t * const pucFirstUserPriorityRegister = ( volatile uint8_t * const ) ( port
 353:Middlewares/FreeRTOS/portable/port.c ****         volatile uint8_t ucMaxPriorityValue;
 354:Middlewares/FreeRTOS/portable/port.c **** 
ARM GAS  /tmp/cc7Fx2aC.s 			page 16


 355:Middlewares/FreeRTOS/portable/port.c ****         /* Determine the maximum priority from which ISR safe FreeRTOS API
 356:Middlewares/FreeRTOS/portable/port.c ****          * functions can be called.  ISR safe functions are those that end in
 357:Middlewares/FreeRTOS/portable/port.c ****          * "FromISR".  FreeRTOS maintains separate thread and ISR API functions to
 358:Middlewares/FreeRTOS/portable/port.c ****          * ensure interrupt entry is as fast and simple as possible.
 359:Middlewares/FreeRTOS/portable/port.c ****          *
 360:Middlewares/FreeRTOS/portable/port.c ****          * Save the interrupt priority value that is about to be clobbered. */
 361:Middlewares/FreeRTOS/portable/port.c ****         ucOriginalPriority = *pucFirstUserPriorityRegister;
 362:Middlewares/FreeRTOS/portable/port.c **** 
 363:Middlewares/FreeRTOS/portable/port.c ****         /* Determine the number of priority bits available.  First write to all
 364:Middlewares/FreeRTOS/portable/port.c ****          * possible bits. */
 365:Middlewares/FreeRTOS/portable/port.c ****         *pucFirstUserPriorityRegister = portMAX_8_BIT_VALUE;
 366:Middlewares/FreeRTOS/portable/port.c **** 
 367:Middlewares/FreeRTOS/portable/port.c ****         /* Read the value back to see how many bits stuck. */
 368:Middlewares/FreeRTOS/portable/port.c ****         ucMaxPriorityValue = *pucFirstUserPriorityRegister;
 369:Middlewares/FreeRTOS/portable/port.c **** 
 370:Middlewares/FreeRTOS/portable/port.c ****         /* Use the same mask on the maximum system call priority. */
 371:Middlewares/FreeRTOS/portable/port.c ****         ucMaxSysCallPriority = configMAX_SYSCALL_INTERRUPT_PRIORITY & ucMaxPriorityValue;
 372:Middlewares/FreeRTOS/portable/port.c **** 
 373:Middlewares/FreeRTOS/portable/port.c ****         /* Check that the maximum system call priority is nonzero after
 374:Middlewares/FreeRTOS/portable/port.c ****          * accounting for the number of priority bits supported by the
 375:Middlewares/FreeRTOS/portable/port.c ****          * hardware. A priority of 0 is invalid because setting the BASEPRI
 376:Middlewares/FreeRTOS/portable/port.c ****          * register to 0 unmasks all interrupts, and interrupts with priority 0
 377:Middlewares/FreeRTOS/portable/port.c ****          * cannot be masked using BASEPRI.
 378:Middlewares/FreeRTOS/portable/port.c ****          * See https://www.FreeRTOS.org/RTOS-Cortex-M3-M4.html */
 379:Middlewares/FreeRTOS/portable/port.c ****         configASSERT( ucMaxSysCallPriority );
 380:Middlewares/FreeRTOS/portable/port.c **** 
 381:Middlewares/FreeRTOS/portable/port.c ****         /* Check that the bits not implemented in hardware are zero in
 382:Middlewares/FreeRTOS/portable/port.c ****          * configMAX_SYSCALL_INTERRUPT_PRIORITY. */
 383:Middlewares/FreeRTOS/portable/port.c ****         configASSERT( ( configMAX_SYSCALL_INTERRUPT_PRIORITY & ( ~ucMaxPriorityValue ) ) == 0U );
 384:Middlewares/FreeRTOS/portable/port.c **** 
 385:Middlewares/FreeRTOS/portable/port.c ****         /* Calculate the maximum acceptable priority group value for the number
 386:Middlewares/FreeRTOS/portable/port.c ****          * of bits read back. */
 387:Middlewares/FreeRTOS/portable/port.c **** 
 388:Middlewares/FreeRTOS/portable/port.c ****         while( ( ucMaxPriorityValue & portTOP_BIT_OF_BYTE ) == portTOP_BIT_OF_BYTE )
 389:Middlewares/FreeRTOS/portable/port.c ****         {
 390:Middlewares/FreeRTOS/portable/port.c ****             ulImplementedPrioBits++;
 391:Middlewares/FreeRTOS/portable/port.c ****             ucMaxPriorityValue <<= ( uint8_t ) 0x01;
 392:Middlewares/FreeRTOS/portable/port.c ****         }
 393:Middlewares/FreeRTOS/portable/port.c **** 
 394:Middlewares/FreeRTOS/portable/port.c ****         if( ulImplementedPrioBits == 8 )
 395:Middlewares/FreeRTOS/portable/port.c ****         {
 396:Middlewares/FreeRTOS/portable/port.c ****             /* When the hardware implements 8 priority bits, there is no way for
 397:Middlewares/FreeRTOS/portable/port.c ****              * the software to configure PRIGROUP to not have sub-priorities. As
 398:Middlewares/FreeRTOS/portable/port.c ****              * a result, the least significant bit is always used for sub-priority
 399:Middlewares/FreeRTOS/portable/port.c ****              * and there are 128 preemption priorities and 2 sub-priorities.
 400:Middlewares/FreeRTOS/portable/port.c ****              *
 401:Middlewares/FreeRTOS/portable/port.c ****              * This may cause some confusion in some cases - for example, if
 402:Middlewares/FreeRTOS/portable/port.c ****              * configMAX_SYSCALL_INTERRUPT_PRIORITY is set to 5, both 5 and 4
 403:Middlewares/FreeRTOS/portable/port.c ****              * priority interrupts will be masked in Critical Sections as those
 404:Middlewares/FreeRTOS/portable/port.c ****              * are at the same preemption priority. This may appear confusing as
 405:Middlewares/FreeRTOS/portable/port.c ****              * 4 is higher (numerically lower) priority than
 406:Middlewares/FreeRTOS/portable/port.c ****              * configMAX_SYSCALL_INTERRUPT_PRIORITY and therefore, should not
 407:Middlewares/FreeRTOS/portable/port.c ****              * have been masked. Instead, if we set configMAX_SYSCALL_INTERRUPT_PRIORITY
 408:Middlewares/FreeRTOS/portable/port.c ****              * to 4, this confusion does not happen and the behaviour remains the same.
 409:Middlewares/FreeRTOS/portable/port.c ****              *
 410:Middlewares/FreeRTOS/portable/port.c ****              * The following assert ensures that the sub-priority bit in the
 411:Middlewares/FreeRTOS/portable/port.c ****              * configMAX_SYSCALL_INTERRUPT_PRIORITY is clear to avoid the above mentioned
ARM GAS  /tmp/cc7Fx2aC.s 			page 17


 412:Middlewares/FreeRTOS/portable/port.c ****              * confusion. */
 413:Middlewares/FreeRTOS/portable/port.c ****             configASSERT( ( configMAX_SYSCALL_INTERRUPT_PRIORITY & 0x1U ) == 0U );
 414:Middlewares/FreeRTOS/portable/port.c ****             ulMaxPRIGROUPValue = 0;
 415:Middlewares/FreeRTOS/portable/port.c ****         }
 416:Middlewares/FreeRTOS/portable/port.c ****         else
 417:Middlewares/FreeRTOS/portable/port.c ****         {
 418:Middlewares/FreeRTOS/portable/port.c ****             ulMaxPRIGROUPValue = portMAX_PRIGROUP_BITS - ulImplementedPrioBits;
 419:Middlewares/FreeRTOS/portable/port.c ****         }
 420:Middlewares/FreeRTOS/portable/port.c **** 
 421:Middlewares/FreeRTOS/portable/port.c ****         /* Shift the priority group value back to its position within the AIRCR
 422:Middlewares/FreeRTOS/portable/port.c ****          * register. */
 423:Middlewares/FreeRTOS/portable/port.c ****         ulMaxPRIGROUPValue <<= portPRIGROUP_SHIFT;
 424:Middlewares/FreeRTOS/portable/port.c ****         ulMaxPRIGROUPValue &= portPRIORITY_GROUP_MASK;
 425:Middlewares/FreeRTOS/portable/port.c **** 
 426:Middlewares/FreeRTOS/portable/port.c ****         /* Restore the clobbered interrupt priority register to its original
 427:Middlewares/FreeRTOS/portable/port.c ****          * value. */
 428:Middlewares/FreeRTOS/portable/port.c ****         *pucFirstUserPriorityRegister = ucOriginalPriority;
 429:Middlewares/FreeRTOS/portable/port.c ****     }
 430:Middlewares/FreeRTOS/portable/port.c ****     #endif /* configASSERT_DEFINED */
 431:Middlewares/FreeRTOS/portable/port.c **** 
 432:Middlewares/FreeRTOS/portable/port.c ****     /* Make PendSV and SysTick the lowest priority interrupts, and make SVCall
 433:Middlewares/FreeRTOS/portable/port.c ****      * the highest priority. */
 434:Middlewares/FreeRTOS/portable/port.c ****     portNVIC_SHPR3_REG |= portNVIC_PENDSV_PRI;
 287              		.loc 1 434 5
 288 000c 144B     		ldr	r3, .L11+4
 289 000e 1B68     		ldr	r3, [r3]
 290 0010 134A     		ldr	r2, .L11+4
 291              		.loc 1 434 24
 292 0012 43F47F03 		orr	r3, r3, #16711680
 293 0016 1360     		str	r3, [r2]
 435:Middlewares/FreeRTOS/portable/port.c ****     portNVIC_SHPR3_REG |= portNVIC_SYSTICK_PRI;
 294              		.loc 1 435 5
 295 0018 114B     		ldr	r3, .L11+4
 296 001a 1B68     		ldr	r3, [r3]
 297 001c 104A     		ldr	r2, .L11+4
 298              		.loc 1 435 24
 299 001e 43F07F43 		orr	r3, r3, #-16777216
 300 0022 1360     		str	r3, [r2]
 436:Middlewares/FreeRTOS/portable/port.c ****     portNVIC_SHPR2_REG = 0;
 301              		.loc 1 436 5
 302 0024 0F4B     		ldr	r3, .L11+8
 303              		.loc 1 436 24
 304 0026 0022     		movs	r2, #0
 305 0028 1A60     		str	r2, [r3]
 437:Middlewares/FreeRTOS/portable/port.c **** 
 438:Middlewares/FreeRTOS/portable/port.c ****     /* Start the timer that generates the tick ISR.  Interrupts are disabled
 439:Middlewares/FreeRTOS/portable/port.c ****      * here already. */
 440:Middlewares/FreeRTOS/portable/port.c ****     vPortSetupTimerInterrupt();
 306              		.loc 1 440 5
 307 002a FFF7FEFF 		bl	vPortSetupTimerInterrupt
 441:Middlewares/FreeRTOS/portable/port.c **** 
 442:Middlewares/FreeRTOS/portable/port.c ****     /* Initialise the critical nesting count ready for the first task. */
 443:Middlewares/FreeRTOS/portable/port.c ****     uxCriticalNesting = 0;
 308              		.loc 1 443 23
 309 002e 0E4B     		ldr	r3, .L11+12
 310 0030 0022     		movs	r2, #0
 311 0032 1A60     		str	r2, [r3]
ARM GAS  /tmp/cc7Fx2aC.s 			page 18


 444:Middlewares/FreeRTOS/portable/port.c **** 
 445:Middlewares/FreeRTOS/portable/port.c ****     /* Ensure the VFP is enabled - it should be anyway. */
 446:Middlewares/FreeRTOS/portable/port.c ****     vPortEnableVFP();
 312              		.loc 1 446 5
 313 0034 FFF7FEFF 		bl	vPortEnableVFP
 447:Middlewares/FreeRTOS/portable/port.c **** 
 448:Middlewares/FreeRTOS/portable/port.c ****     /* Lazy save always. */
 449:Middlewares/FreeRTOS/portable/port.c ****     *( portFPCCR ) |= portASPEN_AND_LSPEN_BITS;
 314              		.loc 1 449 5
 315 0038 0C4B     		ldr	r3, .L11+16
 316 003a 1B68     		ldr	r3, [r3]
 317 003c 0B4A     		ldr	r2, .L11+16
 318              		.loc 1 449 20
 319 003e 43F04043 		orr	r3, r3, #-1073741824
 320 0042 1360     		str	r3, [r2]
 450:Middlewares/FreeRTOS/portable/port.c **** 
 451:Middlewares/FreeRTOS/portable/port.c ****     /* Start the first task. */
 452:Middlewares/FreeRTOS/portable/port.c ****     prvPortStartFirstTask();
 321              		.loc 1 452 5
 322 0044 FFF7FEFF 		bl	prvPortStartFirstTask
 453:Middlewares/FreeRTOS/portable/port.c **** 
 454:Middlewares/FreeRTOS/portable/port.c ****     /* Should never get here as the tasks will now be executing!  Call the task
 455:Middlewares/FreeRTOS/portable/port.c ****      * exit error function to prevent compiler warnings about a static function
 456:Middlewares/FreeRTOS/portable/port.c ****      * not being called in the case that the application writer overrides this
 457:Middlewares/FreeRTOS/portable/port.c ****      * functionality by defining configTASK_RETURN_ADDRESS.  Call
 458:Middlewares/FreeRTOS/portable/port.c ****      * vTaskSwitchContext() so link time optimisation does not remove the
 459:Middlewares/FreeRTOS/portable/port.c ****      * symbol. */
 460:Middlewares/FreeRTOS/portable/port.c ****     vTaskSwitchContext();
 323              		.loc 1 460 5
 324 0048 FFF7FEFF 		bl	vTaskSwitchContext
 461:Middlewares/FreeRTOS/portable/port.c ****     prvTaskExitError();
 325              		.loc 1 461 5
 326 004c FFF7FEFF 		bl	prvTaskExitError
 462:Middlewares/FreeRTOS/portable/port.c **** 
 463:Middlewares/FreeRTOS/portable/port.c ****     /* Should not get here! */
 464:Middlewares/FreeRTOS/portable/port.c ****     return 0;
 327              		.loc 1 464 12
 328 0050 0023     		movs	r3, #0
 465:Middlewares/FreeRTOS/portable/port.c **** }
 329              		.loc 1 465 1
 330 0052 1846     		mov	r0, r3
 331 0054 0837     		adds	r7, r7, #8
 332              		.cfi_def_cfa_offset 8
 333 0056 BD46     		mov	sp, r7
 334              		.cfi_def_cfa_register 13
 335              		@ sp needed
 336 0058 80BD     		pop	{r7, pc}
 337              	.L12:
 338 005a 00BF     		.align	2
 339              	.L11:
 340 005c 08ED00E0 		.word	-536810232
 341 0060 20ED00E0 		.word	-536810208
 342 0064 1CED00E0 		.word	-536810212
 343 0068 00000000 		.word	uxCriticalNesting
 344 006c 34EF00E0 		.word	-536809676
 345              		.cfi_endproc
 346              	.LFE8:
ARM GAS  /tmp/cc7Fx2aC.s 			page 19


 348              		.section	.text.vPortEndScheduler,"ax",%progbits
 349              		.align	1
 350              		.global	vPortEndScheduler
 351              		.syntax unified
 352              		.thumb
 353              		.thumb_func
 355              	vPortEndScheduler:
 356              	.LFB9:
 466:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 467:Middlewares/FreeRTOS/portable/port.c **** 
 468:Middlewares/FreeRTOS/portable/port.c **** void vPortEndScheduler( void )
 469:Middlewares/FreeRTOS/portable/port.c **** {
 357              		.loc 1 469 1
 358              		.cfi_startproc
 359              		@ args = 0, pretend = 0, frame = 0
 360              		@ frame_needed = 1, uses_anonymous_args = 0
 361              		@ link register save eliminated.
 362 0000 80B4     		push	{r7}
 363              		.cfi_def_cfa_offset 4
 364              		.cfi_offset 7, -4
 365 0002 00AF     		add	r7, sp, #0
 366              		.cfi_def_cfa_register 7
 470:Middlewares/FreeRTOS/portable/port.c ****     /* Not implemented in ports where there is nothing to return to.
 471:Middlewares/FreeRTOS/portable/port.c ****      * Artificially force an assert. */
 472:Middlewares/FreeRTOS/portable/port.c ****     configASSERT( uxCriticalNesting == 1000UL );
 473:Middlewares/FreeRTOS/portable/port.c **** }
 367              		.loc 1 473 1
 368 0004 00BF     		nop
 369 0006 BD46     		mov	sp, r7
 370              		.cfi_def_cfa_register 13
 371              		@ sp needed
 372 0008 5DF8047B 		ldr	r7, [sp], #4
 373              		.cfi_restore 7
 374              		.cfi_def_cfa_offset 0
 375 000c 7047     		bx	lr
 376              		.cfi_endproc
 377              	.LFE9:
 379              		.section	.text.vPortEnterCritical,"ax",%progbits
 380              		.align	1
 381              		.global	vPortEnterCritical
 382              		.syntax unified
 383              		.thumb
 384              		.thumb_func
 386              	vPortEnterCritical:
 387              	.LFB10:
 474:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 475:Middlewares/FreeRTOS/portable/port.c **** 
 476:Middlewares/FreeRTOS/portable/port.c **** void vPortEnterCritical( void )
 477:Middlewares/FreeRTOS/portable/port.c **** {
 388              		.loc 1 477 1
 389              		.cfi_startproc
 390              		@ args = 0, pretend = 0, frame = 8
 391              		@ frame_needed = 1, uses_anonymous_args = 0
 392              		@ link register save eliminated.
 393 0000 80B4     		push	{r7}
 394              		.cfi_def_cfa_offset 4
 395              		.cfi_offset 7, -4
ARM GAS  /tmp/cc7Fx2aC.s 			page 20


 396 0002 83B0     		sub	sp, sp, #12
 397              		.cfi_def_cfa_offset 16
 398 0004 00AF     		add	r7, sp, #0
 399              		.cfi_def_cfa_register 7
 400              	.LBB15:
 401              	.LBB16:
 217:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 402              		.loc 2 217 5
 403              		.syntax unified
 404              	@ 217 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 405 0006 4FF05003 		   mov r3, #80                                              
 406 000a 83F31188 	   msr basepri, r3                                         
 407 000e BFF36F8F 	   isb                                                     
 408 0012 BFF34F8F 	   dsb                                                     
 409              	
 410              	@ 0 "" 2
 411              		.thumb
 412              		.syntax unified
 413 0016 7B60     		str	r3, [r7, #4]
 414              		.loc 2 225 1
 415 0018 00BF     		nop
 416              	.LBE16:
 417              	.LBE15:
 478:Middlewares/FreeRTOS/portable/port.c ****     portDISABLE_INTERRUPTS();
 479:Middlewares/FreeRTOS/portable/port.c ****     uxCriticalNesting++;
 418              		.loc 1 479 22
 419 001a 054B     		ldr	r3, .L15
 420 001c 1B68     		ldr	r3, [r3]
 421 001e 0133     		adds	r3, r3, #1
 422 0020 034A     		ldr	r2, .L15
 423 0022 1360     		str	r3, [r2]
 480:Middlewares/FreeRTOS/portable/port.c **** 
 481:Middlewares/FreeRTOS/portable/port.c ****     /* This is not the interrupt safe version of the enter critical function so
 482:Middlewares/FreeRTOS/portable/port.c ****      * assert() if it is being called from an interrupt context.  Only API
 483:Middlewares/FreeRTOS/portable/port.c ****      * functions that end in "FromISR" can be used in an interrupt.  Only assert if
 484:Middlewares/FreeRTOS/portable/port.c ****      * the critical nesting count is 1 to protect against recursive calls if the
 485:Middlewares/FreeRTOS/portable/port.c ****      * assert function also uses a critical section. */
 486:Middlewares/FreeRTOS/portable/port.c ****     if( uxCriticalNesting == 1 )
 487:Middlewares/FreeRTOS/portable/port.c ****     {
 488:Middlewares/FreeRTOS/portable/port.c ****         configASSERT( ( portNVIC_INT_CTRL_REG & portVECTACTIVE_MASK ) == 0 );
 489:Middlewares/FreeRTOS/portable/port.c ****     }
 490:Middlewares/FreeRTOS/portable/port.c **** }
 424              		.loc 1 490 1
 425 0024 00BF     		nop
 426 0026 0C37     		adds	r7, r7, #12
 427              		.cfi_def_cfa_offset 4
 428 0028 BD46     		mov	sp, r7
 429              		.cfi_def_cfa_register 13
 430              		@ sp needed
 431 002a 5DF8047B 		ldr	r7, [sp], #4
 432              		.cfi_restore 7
 433              		.cfi_def_cfa_offset 0
 434 002e 7047     		bx	lr
 435              	.L16:
 436              		.align	2
 437              	.L15:
 438 0030 00000000 		.word	uxCriticalNesting
ARM GAS  /tmp/cc7Fx2aC.s 			page 21


 439              		.cfi_endproc
 440              	.LFE10:
 442              		.section	.text.vPortExitCritical,"ax",%progbits
 443              		.align	1
 444              		.global	vPortExitCritical
 445              		.syntax unified
 446              		.thumb
 447              		.thumb_func
 449              	vPortExitCritical:
 450              	.LFB11:
 491:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 492:Middlewares/FreeRTOS/portable/port.c **** 
 493:Middlewares/FreeRTOS/portable/port.c **** void vPortExitCritical( void )
 494:Middlewares/FreeRTOS/portable/port.c **** {
 451              		.loc 1 494 1
 452              		.cfi_startproc
 453              		@ args = 0, pretend = 0, frame = 8
 454              		@ frame_needed = 1, uses_anonymous_args = 0
 455              		@ link register save eliminated.
 456 0000 80B4     		push	{r7}
 457              		.cfi_def_cfa_offset 4
 458              		.cfi_offset 7, -4
 459 0002 83B0     		sub	sp, sp, #12
 460              		.cfi_def_cfa_offset 16
 461 0004 00AF     		add	r7, sp, #0
 462              		.cfi_def_cfa_register 7
 495:Middlewares/FreeRTOS/portable/port.c ****     configASSERT( uxCriticalNesting );
 496:Middlewares/FreeRTOS/portable/port.c ****     uxCriticalNesting--;
 463              		.loc 1 496 22
 464 0006 0A4B     		ldr	r3, .L20
 465 0008 1B68     		ldr	r3, [r3]
 466 000a 013B     		subs	r3, r3, #1
 467 000c 084A     		ldr	r2, .L20
 468 000e 1360     		str	r3, [r2]
 497:Middlewares/FreeRTOS/portable/port.c **** 
 498:Middlewares/FreeRTOS/portable/port.c ****     if( uxCriticalNesting == 0 )
 469              		.loc 1 498 27
 470 0010 074B     		ldr	r3, .L20
 471 0012 1B68     		ldr	r3, [r3]
 472              		.loc 1 498 7
 473 0014 002B     		cmp	r3, #0
 474 0016 05D1     		bne	.L19
 475 0018 0023     		movs	r3, #0
 476 001a 7B60     		str	r3, [r7, #4]
 477              	.LBB17:
 478              	.LBB18:
 226:Middlewares/FreeRTOS/portable/portmacro.h **** 
 227:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 228:Middlewares/FreeRTOS/portable/portmacro.h **** 
 229:Middlewares/FreeRTOS/portable/portmacro.h **** portFORCE_INLINE static uint32_t ulPortRaiseBASEPRI( void )
 230:Middlewares/FreeRTOS/portable/portmacro.h **** {
 231:Middlewares/FreeRTOS/portable/portmacro.h ****     uint32_t ulOriginalBASEPRI, ulNewBASEPRI;
 232:Middlewares/FreeRTOS/portable/portmacro.h **** 
 233:Middlewares/FreeRTOS/portable/portmacro.h ****     __asm volatile
 234:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 235:Middlewares/FreeRTOS/portable/portmacro.h ****         "   mrs %0, basepri                                         \n" \
 236:Middlewares/FreeRTOS/portable/portmacro.h ****         "   mov %1, %2                                              \n" \
ARM GAS  /tmp/cc7Fx2aC.s 			page 22


 237:Middlewares/FreeRTOS/portable/portmacro.h ****         "   msr basepri, %1                                         \n" \
 238:Middlewares/FreeRTOS/portable/portmacro.h ****         "   isb                                                     \n" \
 239:Middlewares/FreeRTOS/portable/portmacro.h ****         "   dsb                                                     \n" \
 240:Middlewares/FreeRTOS/portable/portmacro.h ****         : "=r" ( ulOriginalBASEPRI ), "=r" ( ulNewBASEPRI ) : "i" ( configMAX_SYSCALL_INTERRUPT_PRI
 241:Middlewares/FreeRTOS/portable/portmacro.h ****     );
 242:Middlewares/FreeRTOS/portable/portmacro.h **** 
 243:Middlewares/FreeRTOS/portable/portmacro.h ****     /* This return will not be reached but is necessary to prevent compiler
 244:Middlewares/FreeRTOS/portable/portmacro.h ****      * warnings. */
 245:Middlewares/FreeRTOS/portable/portmacro.h ****     return ulOriginalBASEPRI;
 246:Middlewares/FreeRTOS/portable/portmacro.h **** }
 247:Middlewares/FreeRTOS/portable/portmacro.h **** /*-----------------------------------------------------------*/
 248:Middlewares/FreeRTOS/portable/portmacro.h **** 
 249:Middlewares/FreeRTOS/portable/portmacro.h **** portFORCE_INLINE static void vPortSetBASEPRI( uint32_t ulNewMaskValue )
 250:Middlewares/FreeRTOS/portable/portmacro.h **** {
 251:Middlewares/FreeRTOS/portable/portmacro.h ****     __asm volatile
 479              		.loc 2 251 5
 480 001c 7B68     		ldr	r3, [r7, #4]
 481              		.syntax unified
 482              	@ 251 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 483 001e 83F31188 		   msr basepri, r3 
 484              	@ 0 "" 2
 252:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 253:Middlewares/FreeRTOS/portable/portmacro.h ****         "   msr basepri, %0 " ::"r" ( ulNewMaskValue ) : "memory"
 254:Middlewares/FreeRTOS/portable/portmacro.h ****     );
 255:Middlewares/FreeRTOS/portable/portmacro.h **** }
 485              		.loc 2 255 1
 486              		.thumb
 487              		.syntax unified
 488 0022 00BF     		nop
 489              	.L19:
 490              	.LBE18:
 491              	.LBE17:
 499:Middlewares/FreeRTOS/portable/port.c ****     {
 500:Middlewares/FreeRTOS/portable/port.c ****         portENABLE_INTERRUPTS();
 501:Middlewares/FreeRTOS/portable/port.c ****     }
 502:Middlewares/FreeRTOS/portable/port.c **** }
 492              		.loc 1 502 1
 493 0024 00BF     		nop
 494 0026 0C37     		adds	r7, r7, #12
 495              		.cfi_def_cfa_offset 4
 496 0028 BD46     		mov	sp, r7
 497              		.cfi_def_cfa_register 13
 498              		@ sp needed
 499 002a 5DF8047B 		ldr	r7, [sp], #4
 500              		.cfi_restore 7
 501              		.cfi_def_cfa_offset 0
 502 002e 7047     		bx	lr
 503              	.L21:
 504              		.align	2
 505              	.L20:
 506 0030 00000000 		.word	uxCriticalNesting
 507              		.cfi_endproc
 508              	.LFE11:
 510              		.section	.text.PendSV_Handler,"ax",%progbits
 511              		.align	1
 512              		.global	PendSV_Handler
 513              		.syntax unified
ARM GAS  /tmp/cc7Fx2aC.s 			page 23


 514              		.thumb
 515              		.thumb_func
 517              	PendSV_Handler:
 518              	.LFB12:
 503:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 504:Middlewares/FreeRTOS/portable/port.c **** 
 505:Middlewares/FreeRTOS/portable/port.c **** void xPortPendSVHandler( void )
 506:Middlewares/FreeRTOS/portable/port.c **** {
 519              		.loc 1 506 1
 520              		.cfi_startproc
 521              		@ Naked Function: prologue and epilogue provided by programmer.
 522              		@ args = 0, pretend = 0, frame = 0
 523              		@ frame_needed = 1, uses_anonymous_args = 0
 507:Middlewares/FreeRTOS/portable/port.c ****     /* This is a naked function. */
 508:Middlewares/FreeRTOS/portable/port.c **** 
 509:Middlewares/FreeRTOS/portable/port.c ****     __asm volatile
 524              		.loc 1 509 5
 525              		.syntax unified
 526              	@ 509 "Middlewares/FreeRTOS/portable/port.c" 1
 527 0000 EFF30980 		   mrs r0, psp                         
 528 0004 BFF36F8F 	   isb                                 
 529              	                                       
 530 0008 154B     	   ldr r3, pxCurrentTCBConst           
 531 000a 1A68     	   ldr r2, [r3]                        
 532              	                                       
 533 000c 1EF0100F 	   tst r14, #0x10                      
 534 0010 08BF     	   it eq                               
 535 0012 20ED108A 	   vstmdbeq r0!, {s16-s31}             
 536              	                                       
 537 0016 20E9F04F 	   stmdb r0!, {r4-r11, r14}            
 538 001a 1060     	   str r0, [r2]                        
 539              	                                       
 540 001c 2DE90900 	   stmdb sp!, {r0, r3}                 
 541 0020 4FF05000 	   mov r0, #80                          
 542 0024 80F31188 	   msr basepri, r0                     
 543 0028 BFF34F8F 	   dsb                                 
 544 002c BFF36F8F 	   isb                                 
 545 0030 FFF7FEFF 	   bl vTaskSwitchContext               
 546 0034 4FF00000 	   mov r0, #0                          
 547 0038 80F31188 	   msr basepri, r0                     
 548 003c 09BC     	   ldmia sp!, {r0, r3}                 
 549              	                                       
 550 003e 1968     	   ldr r1, [r3]                        
 551 0040 0868     	   ldr r0, [r1]                        
 552              	                                       
 553 0042 B0E8F04F 	   ldmia r0!, {r4-r11, r14}            
 554              	                                       
 555 0046 1EF0100F 	   tst r14, #0x10                      
 556 004a 08BF     	   it eq                               
 557 004c B0EC108A 	   vldmiaeq r0!, {s16-s31}             
 558              	                                       
 559 0050 80F30988 	   msr psp, r0                         
 560 0054 BFF36F8F 	   isb                                 
 561              	                                       
 562              	                                       
 563 0058 7047     	   bx r14                              
 564              	                                       
ARM GAS  /tmp/cc7Fx2aC.s 			page 24


 565 005a 00BFAFF3 	   .align 4                            
 565      0080
 566 0060 00000000 	pxCurrentTCBConst: .word pxCurrentTCB  
 567              	
 568              	@ 0 "" 2
 510:Middlewares/FreeRTOS/portable/port.c ****     (
 511:Middlewares/FreeRTOS/portable/port.c ****         "   mrs r0, psp                         \n"
 512:Middlewares/FreeRTOS/portable/port.c ****         "   isb                                 \n"
 513:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 514:Middlewares/FreeRTOS/portable/port.c ****         "   ldr r3, pxCurrentTCBConst           \n" /* Get the location of the current TCB. */
 515:Middlewares/FreeRTOS/portable/port.c ****         "   ldr r2, [r3]                        \n"
 516:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 517:Middlewares/FreeRTOS/portable/port.c ****         "   tst r14, #0x10                      \n" /* Is the task using the FPU context?  If so, p
 518:Middlewares/FreeRTOS/portable/port.c ****         "   it eq                               \n"
 519:Middlewares/FreeRTOS/portable/port.c ****         "   vstmdbeq r0!, {s16-s31}             \n"
 520:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 521:Middlewares/FreeRTOS/portable/port.c ****         "   stmdb r0!, {r4-r11, r14}            \n" /* Save the core registers. */
 522:Middlewares/FreeRTOS/portable/port.c ****         "   str r0, [r2]                        \n" /* Save the new top of stack into the first mem
 523:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 524:Middlewares/FreeRTOS/portable/port.c ****         "   stmdb sp!, {r0, r3}                 \n"
 525:Middlewares/FreeRTOS/portable/port.c ****         "   mov r0, %0                          \n"
 526:Middlewares/FreeRTOS/portable/port.c ****         "   msr basepri, r0                     \n"
 527:Middlewares/FreeRTOS/portable/port.c ****         "   dsb                                 \n"
 528:Middlewares/FreeRTOS/portable/port.c ****         "   isb                                 \n"
 529:Middlewares/FreeRTOS/portable/port.c ****         "   bl vTaskSwitchContext               \n"
 530:Middlewares/FreeRTOS/portable/port.c ****         "   mov r0, #0                          \n"
 531:Middlewares/FreeRTOS/portable/port.c ****         "   msr basepri, r0                     \n"
 532:Middlewares/FreeRTOS/portable/port.c ****         "   ldmia sp!, {r0, r3}                 \n"
 533:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 534:Middlewares/FreeRTOS/portable/port.c ****         "   ldr r1, [r3]                        \n" /* The first item in pxCurrentTCB is the task t
 535:Middlewares/FreeRTOS/portable/port.c ****         "   ldr r0, [r1]                        \n"
 536:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 537:Middlewares/FreeRTOS/portable/port.c ****         "   ldmia r0!, {r4-r11, r14}            \n" /* Pop the core registers. */
 538:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 539:Middlewares/FreeRTOS/portable/port.c ****         "   tst r14, #0x10                      \n" /* Is the task using the FPU context?  If so, p
 540:Middlewares/FreeRTOS/portable/port.c ****         "   it eq                               \n"
 541:Middlewares/FreeRTOS/portable/port.c ****         "   vldmiaeq r0!, {s16-s31}             \n"
 542:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 543:Middlewares/FreeRTOS/portable/port.c ****         "   msr psp, r0                         \n"
 544:Middlewares/FreeRTOS/portable/port.c ****         "   isb                                 \n"
 545:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 546:Middlewares/FreeRTOS/portable/port.c ****         #ifdef WORKAROUND_PMU_CM001 /* XMC4000 specific errata workaround. */
 547:Middlewares/FreeRTOS/portable/port.c ****             #if WORKAROUND_PMU_CM001 == 1
 548:Middlewares/FreeRTOS/portable/port.c ****                 "           push { r14 }                \n"
 549:Middlewares/FreeRTOS/portable/port.c ****                 "           pop { pc }                  \n"
 550:Middlewares/FreeRTOS/portable/port.c ****             #endif
 551:Middlewares/FreeRTOS/portable/port.c ****         #endif
 552:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 553:Middlewares/FreeRTOS/portable/port.c ****         "   bx r14                              \n"
 554:Middlewares/FreeRTOS/portable/port.c ****         "                                       \n"
 555:Middlewares/FreeRTOS/portable/port.c ****         "   .align 4                            \n"
 556:Middlewares/FreeRTOS/portable/port.c ****         "pxCurrentTCBConst: .word pxCurrentTCB  \n"
 557:Middlewares/FreeRTOS/portable/port.c ****         ::"i" ( configMAX_SYSCALL_INTERRUPT_PRIORITY )
 558:Middlewares/FreeRTOS/portable/port.c ****     );
 559:Middlewares/FreeRTOS/portable/port.c **** }
 569              		.loc 1 559 1
 570              		.thumb
ARM GAS  /tmp/cc7Fx2aC.s 			page 25


 571              		.syntax unified
 572 0064 00BF     		nop
 573              		.cfi_endproc
 574              	.LFE12:
 576 0066 00BF     		.section	.text.SysTick_Handler,"ax",%progbits
 577              		.align	1
 578              		.global	SysTick_Handler
 579              		.syntax unified
 580              		.thumb
 581              		.thumb_func
 583              	SysTick_Handler:
 584              	.LFB13:
 560:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 561:Middlewares/FreeRTOS/portable/port.c **** 
 562:Middlewares/FreeRTOS/portable/port.c **** void xPortSysTickHandler( void )
 563:Middlewares/FreeRTOS/portable/port.c **** {
 585              		.loc 1 563 1
 586              		.cfi_startproc
 587              		@ args = 0, pretend = 0, frame = 8
 588              		@ frame_needed = 1, uses_anonymous_args = 0
 589 0000 80B5     		push	{r7, lr}
 590              		.cfi_def_cfa_offset 8
 591              		.cfi_offset 7, -8
 592              		.cfi_offset 14, -4
 593 0002 82B0     		sub	sp, sp, #8
 594              		.cfi_def_cfa_offset 16
 595 0004 00AF     		add	r7, sp, #0
 596              		.cfi_def_cfa_register 7
 597              	.LBB19:
 598              	.LBB20:
 217:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 599              		.loc 2 217 5
 600              		.syntax unified
 601              	@ 217 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 602 0006 4FF05003 		   mov r3, #80                                              
 603 000a 83F31188 	   msr basepri, r3                                         
 604 000e BFF36F8F 	   isb                                                     
 605 0012 BFF34F8F 	   dsb                                                     
 606              	
 607              	@ 0 "" 2
 608              		.thumb
 609              		.syntax unified
 610 0016 7B60     		str	r3, [r7, #4]
 225:Middlewares/FreeRTOS/portable/portmacro.h **** 
 611              		.loc 2 225 1
 612 0018 00BF     		nop
 613              	.LBE20:
 614              	.LBE19:
 564:Middlewares/FreeRTOS/portable/port.c ****     /* The SysTick runs at the lowest interrupt priority, so when this interrupt
 565:Middlewares/FreeRTOS/portable/port.c ****      * executes all interrupts must be unmasked.  There is therefore no need to
 566:Middlewares/FreeRTOS/portable/port.c ****      * save and then restore the interrupt mask value as its value is already
 567:Middlewares/FreeRTOS/portable/port.c ****      * known. */
 568:Middlewares/FreeRTOS/portable/port.c ****     portDISABLE_INTERRUPTS();
 569:Middlewares/FreeRTOS/portable/port.c ****     traceISR_ENTER();
 570:Middlewares/FreeRTOS/portable/port.c ****     {
 571:Middlewares/FreeRTOS/portable/port.c ****         /* Increment the RTOS tick. */
 572:Middlewares/FreeRTOS/portable/port.c ****         if( xTaskIncrementTick() != pdFALSE )
ARM GAS  /tmp/cc7Fx2aC.s 			page 26


 615              		.loc 1 572 13
 616 001a FFF7FEFF 		bl	xTaskIncrementTick
 617 001e 0346     		mov	r3, r0
 618              		.loc 1 572 11 discriminator 1
 619 0020 002B     		cmp	r3, #0
 620 0022 03D0     		beq	.L24
 573:Middlewares/FreeRTOS/portable/port.c ****         {
 574:Middlewares/FreeRTOS/portable/port.c ****             traceISR_EXIT_TO_SCHEDULER();
 575:Middlewares/FreeRTOS/portable/port.c **** 
 576:Middlewares/FreeRTOS/portable/port.c ****             /* A context switch is required.  Context switching is performed in
 577:Middlewares/FreeRTOS/portable/port.c ****              * the PendSV interrupt.  Pend the PendSV interrupt. */
 578:Middlewares/FreeRTOS/portable/port.c ****             portNVIC_INT_CTRL_REG = portNVIC_PENDSVSET_BIT;
 621              		.loc 1 578 13
 622 0024 064B     		ldr	r3, .L25
 623              		.loc 1 578 35
 624 0026 4FF08052 		mov	r2, #268435456
 625 002a 1A60     		str	r2, [r3]
 626              	.L24:
 627 002c 0023     		movs	r3, #0
 628 002e 3B60     		str	r3, [r7]
 629              	.LBB21:
 630              	.LBB22:
 251:Middlewares/FreeRTOS/portable/portmacro.h ****     (
 631              		.loc 2 251 5
 632 0030 3B68     		ldr	r3, [r7]
 633              		.syntax unified
 634              	@ 251 "Middlewares/FreeRTOS/portable/portmacro.h" 1
 635 0032 83F31188 		   msr basepri, r3 
 636              	@ 0 "" 2
 637              		.loc 2 255 1
 638              		.thumb
 639              		.syntax unified
 640 0036 00BF     		nop
 641              	.LBE22:
 642              	.LBE21:
 579:Middlewares/FreeRTOS/portable/port.c ****         }
 580:Middlewares/FreeRTOS/portable/port.c ****         else
 581:Middlewares/FreeRTOS/portable/port.c ****         {
 582:Middlewares/FreeRTOS/portable/port.c ****             traceISR_EXIT();
 583:Middlewares/FreeRTOS/portable/port.c ****         }
 584:Middlewares/FreeRTOS/portable/port.c ****     }
 585:Middlewares/FreeRTOS/portable/port.c ****     portENABLE_INTERRUPTS();
 586:Middlewares/FreeRTOS/portable/port.c **** }
 643              		.loc 1 586 1
 644 0038 00BF     		nop
 645 003a 0837     		adds	r7, r7, #8
 646              		.cfi_def_cfa_offset 8
 647 003c BD46     		mov	sp, r7
 648              		.cfi_def_cfa_register 13
 649              		@ sp needed
 650 003e 80BD     		pop	{r7, pc}
 651              	.L26:
 652              		.align	2
 653              	.L25:
 654 0040 04ED00E0 		.word	-536810236
 655              		.cfi_endproc
 656              	.LFE13:
ARM GAS  /tmp/cc7Fx2aC.s 			page 27


 658              		.section	.text.vPortSetupTimerInterrupt,"ax",%progbits
 659              		.align	1
 660              		.weak	vPortSetupTimerInterrupt
 661              		.syntax unified
 662              		.thumb
 663              		.thumb_func
 665              	vPortSetupTimerInterrupt:
 666              	.LFB14:
 587:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 588:Middlewares/FreeRTOS/portable/port.c **** 
 589:Middlewares/FreeRTOS/portable/port.c **** #if ( configUSE_TICKLESS_IDLE == 1 )
 590:Middlewares/FreeRTOS/portable/port.c **** 
 591:Middlewares/FreeRTOS/portable/port.c ****     __attribute__( ( weak ) ) void vPortSuppressTicksAndSleep( TickType_t xExpectedIdleTime )
 592:Middlewares/FreeRTOS/portable/port.c ****     {
 593:Middlewares/FreeRTOS/portable/port.c ****         uint32_t ulReloadValue, ulCompleteTickPeriods, ulCompletedSysTickDecrements, ulSysTickDecre
 594:Middlewares/FreeRTOS/portable/port.c ****         TickType_t xModifiableIdleTime;
 595:Middlewares/FreeRTOS/portable/port.c **** 
 596:Middlewares/FreeRTOS/portable/port.c ****         /* Make sure the SysTick reload value does not overflow the counter. */
 597:Middlewares/FreeRTOS/portable/port.c ****         if( xExpectedIdleTime > xMaximumPossibleSuppressedTicks )
 598:Middlewares/FreeRTOS/portable/port.c ****         {
 599:Middlewares/FreeRTOS/portable/port.c ****             xExpectedIdleTime = xMaximumPossibleSuppressedTicks;
 600:Middlewares/FreeRTOS/portable/port.c ****         }
 601:Middlewares/FreeRTOS/portable/port.c **** 
 602:Middlewares/FreeRTOS/portable/port.c ****         /* Enter a critical section but don't use the taskENTER_CRITICAL()
 603:Middlewares/FreeRTOS/portable/port.c ****          * method as that will mask interrupts that should exit sleep mode. */
 604:Middlewares/FreeRTOS/portable/port.c ****         __asm volatile ( "cpsid i" ::: "memory" );
 605:Middlewares/FreeRTOS/portable/port.c ****         __asm volatile ( "dsb" );
 606:Middlewares/FreeRTOS/portable/port.c ****         __asm volatile ( "isb" );
 607:Middlewares/FreeRTOS/portable/port.c **** 
 608:Middlewares/FreeRTOS/portable/port.c ****         /* If a context switch is pending or a task is waiting for the scheduler
 609:Middlewares/FreeRTOS/portable/port.c ****          * to be unsuspended then abandon the low power entry. */
 610:Middlewares/FreeRTOS/portable/port.c ****         if( eTaskConfirmSleepModeStatus() == eAbortSleep )
 611:Middlewares/FreeRTOS/portable/port.c ****         {
 612:Middlewares/FreeRTOS/portable/port.c ****             /* Re-enable interrupts - see comments above the cpsid instruction
 613:Middlewares/FreeRTOS/portable/port.c ****              * above. */
 614:Middlewares/FreeRTOS/portable/port.c ****             __asm volatile ( "cpsie i" ::: "memory" );
 615:Middlewares/FreeRTOS/portable/port.c ****         }
 616:Middlewares/FreeRTOS/portable/port.c ****         else
 617:Middlewares/FreeRTOS/portable/port.c ****         {
 618:Middlewares/FreeRTOS/portable/port.c ****             /* Stop the SysTick momentarily.  The time the SysTick is stopped for
 619:Middlewares/FreeRTOS/portable/port.c ****              * is accounted for as best it can be, but using the tickless mode will
 620:Middlewares/FreeRTOS/portable/port.c ****              * inevitably result in some tiny drift of the time maintained by the
 621:Middlewares/FreeRTOS/portable/port.c ****              * kernel with respect to calendar time. */
 622:Middlewares/FreeRTOS/portable/port.c ****             portNVIC_SYSTICK_CTRL_REG = ( portNVIC_SYSTICK_CLK_BIT_CONFIG | portNVIC_SYSTICK_INT_BI
 623:Middlewares/FreeRTOS/portable/port.c **** 
 624:Middlewares/FreeRTOS/portable/port.c ****             /* Use the SysTick current-value register to determine the number of
 625:Middlewares/FreeRTOS/portable/port.c ****              * SysTick decrements remaining until the next tick interrupt.  If the
 626:Middlewares/FreeRTOS/portable/port.c ****              * current-value register is zero, then there are actually
 627:Middlewares/FreeRTOS/portable/port.c ****              * ulTimerCountsForOneTick decrements remaining, not zero, because the
 628:Middlewares/FreeRTOS/portable/port.c ****              * SysTick requests the interrupt when decrementing from 1 to 0. */
 629:Middlewares/FreeRTOS/portable/port.c ****             ulSysTickDecrementsLeft = portNVIC_SYSTICK_CURRENT_VALUE_REG;
 630:Middlewares/FreeRTOS/portable/port.c **** 
 631:Middlewares/FreeRTOS/portable/port.c ****             if( ulSysTickDecrementsLeft == 0 )
 632:Middlewares/FreeRTOS/portable/port.c ****             {
 633:Middlewares/FreeRTOS/portable/port.c ****                 ulSysTickDecrementsLeft = ulTimerCountsForOneTick;
 634:Middlewares/FreeRTOS/portable/port.c ****             }
 635:Middlewares/FreeRTOS/portable/port.c **** 
ARM GAS  /tmp/cc7Fx2aC.s 			page 28


 636:Middlewares/FreeRTOS/portable/port.c ****             /* Calculate the reload value required to wait xExpectedIdleTime
 637:Middlewares/FreeRTOS/portable/port.c ****              * tick periods.  -1 is used because this code normally executes part
 638:Middlewares/FreeRTOS/portable/port.c ****              * way through the first tick period.  But if the SysTick IRQ is now
 639:Middlewares/FreeRTOS/portable/port.c ****              * pending, then clear the IRQ, suppressing the first tick, and correct
 640:Middlewares/FreeRTOS/portable/port.c ****              * the reload value to reflect that the second tick period is already
 641:Middlewares/FreeRTOS/portable/port.c ****              * underway.  The expected idle time is always at least two ticks. */
 642:Middlewares/FreeRTOS/portable/port.c ****             ulReloadValue = ulSysTickDecrementsLeft + ( ulTimerCountsForOneTick * ( xExpectedIdleTi
 643:Middlewares/FreeRTOS/portable/port.c **** 
 644:Middlewares/FreeRTOS/portable/port.c ****             if( ( portNVIC_INT_CTRL_REG & portNVIC_PEND_SYSTICK_SET_BIT ) != 0 )
 645:Middlewares/FreeRTOS/portable/port.c ****             {
 646:Middlewares/FreeRTOS/portable/port.c ****                 portNVIC_INT_CTRL_REG = portNVIC_PEND_SYSTICK_CLEAR_BIT;
 647:Middlewares/FreeRTOS/portable/port.c ****                 ulReloadValue -= ulTimerCountsForOneTick;
 648:Middlewares/FreeRTOS/portable/port.c ****             }
 649:Middlewares/FreeRTOS/portable/port.c **** 
 650:Middlewares/FreeRTOS/portable/port.c ****             if( ulReloadValue > ulStoppedTimerCompensation )
 651:Middlewares/FreeRTOS/portable/port.c ****             {
 652:Middlewares/FreeRTOS/portable/port.c ****                 ulReloadValue -= ulStoppedTimerCompensation;
 653:Middlewares/FreeRTOS/portable/port.c ****             }
 654:Middlewares/FreeRTOS/portable/port.c **** 
 655:Middlewares/FreeRTOS/portable/port.c ****             /* Set the new reload value. */
 656:Middlewares/FreeRTOS/portable/port.c ****             portNVIC_SYSTICK_LOAD_REG = ulReloadValue;
 657:Middlewares/FreeRTOS/portable/port.c **** 
 658:Middlewares/FreeRTOS/portable/port.c ****             /* Clear the SysTick count flag and set the count value back to
 659:Middlewares/FreeRTOS/portable/port.c ****              * zero. */
 660:Middlewares/FreeRTOS/portable/port.c ****             portNVIC_SYSTICK_CURRENT_VALUE_REG = 0UL;
 661:Middlewares/FreeRTOS/portable/port.c **** 
 662:Middlewares/FreeRTOS/portable/port.c ****             /* Restart SysTick. */
 663:Middlewares/FreeRTOS/portable/port.c ****             portNVIC_SYSTICK_CTRL_REG |= portNVIC_SYSTICK_ENABLE_BIT;
 664:Middlewares/FreeRTOS/portable/port.c **** 
 665:Middlewares/FreeRTOS/portable/port.c ****             /* Sleep until something happens.  configPRE_SLEEP_PROCESSING() can
 666:Middlewares/FreeRTOS/portable/port.c ****              * set its parameter to 0 to indicate that its implementation contains
 667:Middlewares/FreeRTOS/portable/port.c ****              * its own wait for interrupt or wait for event instruction, and so wfi
 668:Middlewares/FreeRTOS/portable/port.c ****              * should not be executed again.  However, the original expected idle
 669:Middlewares/FreeRTOS/portable/port.c ****              * time variable must remain unmodified, so a copy is taken. */
 670:Middlewares/FreeRTOS/portable/port.c ****             xModifiableIdleTime = xExpectedIdleTime;
 671:Middlewares/FreeRTOS/portable/port.c ****             configPRE_SLEEP_PROCESSING( xModifiableIdleTime );
 672:Middlewares/FreeRTOS/portable/port.c **** 
 673:Middlewares/FreeRTOS/portable/port.c ****             if( xModifiableIdleTime > 0 )
 674:Middlewares/FreeRTOS/portable/port.c ****             {
 675:Middlewares/FreeRTOS/portable/port.c ****                 __asm volatile ( "dsb" ::: "memory" );
 676:Middlewares/FreeRTOS/portable/port.c ****                 __asm volatile ( "wfi" );
 677:Middlewares/FreeRTOS/portable/port.c ****                 __asm volatile ( "isb" );
 678:Middlewares/FreeRTOS/portable/port.c ****             }
 679:Middlewares/FreeRTOS/portable/port.c **** 
 680:Middlewares/FreeRTOS/portable/port.c ****             configPOST_SLEEP_PROCESSING( xExpectedIdleTime );
 681:Middlewares/FreeRTOS/portable/port.c **** 
 682:Middlewares/FreeRTOS/portable/port.c ****             /* Re-enable interrupts to allow the interrupt that brought the MCU
 683:Middlewares/FreeRTOS/portable/port.c ****              * out of sleep mode to execute immediately.  See comments above
 684:Middlewares/FreeRTOS/portable/port.c ****              * the cpsid instruction above. */
 685:Middlewares/FreeRTOS/portable/port.c ****             __asm volatile ( "cpsie i" ::: "memory" );
 686:Middlewares/FreeRTOS/portable/port.c ****             __asm volatile ( "dsb" );
 687:Middlewares/FreeRTOS/portable/port.c ****             __asm volatile ( "isb" );
 688:Middlewares/FreeRTOS/portable/port.c **** 
 689:Middlewares/FreeRTOS/portable/port.c ****             /* Disable interrupts again because the clock is about to be stopped
 690:Middlewares/FreeRTOS/portable/port.c ****              * and interrupts that execute while the clock is stopped will increase
 691:Middlewares/FreeRTOS/portable/port.c ****              * any slippage between the time maintained by the RTOS and calendar
 692:Middlewares/FreeRTOS/portable/port.c ****              * time. */
ARM GAS  /tmp/cc7Fx2aC.s 			page 29


 693:Middlewares/FreeRTOS/portable/port.c ****             __asm volatile ( "cpsid i" ::: "memory" );
 694:Middlewares/FreeRTOS/portable/port.c ****             __asm volatile ( "dsb" );
 695:Middlewares/FreeRTOS/portable/port.c ****             __asm volatile ( "isb" );
 696:Middlewares/FreeRTOS/portable/port.c **** 
 697:Middlewares/FreeRTOS/portable/port.c ****             /* Disable the SysTick clock without reading the
 698:Middlewares/FreeRTOS/portable/port.c ****              * portNVIC_SYSTICK_CTRL_REG register to ensure the
 699:Middlewares/FreeRTOS/portable/port.c ****              * portNVIC_SYSTICK_COUNT_FLAG_BIT is not cleared if it is set.  Again,
 700:Middlewares/FreeRTOS/portable/port.c ****              * the time the SysTick is stopped for is accounted for as best it can
 701:Middlewares/FreeRTOS/portable/port.c ****              * be, but using the tickless mode will inevitably result in some tiny
 702:Middlewares/FreeRTOS/portable/port.c ****              * drift of the time maintained by the kernel with respect to calendar
 703:Middlewares/FreeRTOS/portable/port.c ****              * time*/
 704:Middlewares/FreeRTOS/portable/port.c ****             portNVIC_SYSTICK_CTRL_REG = ( portNVIC_SYSTICK_CLK_BIT_CONFIG | portNVIC_SYSTICK_INT_BI
 705:Middlewares/FreeRTOS/portable/port.c **** 
 706:Middlewares/FreeRTOS/portable/port.c ****             /* Determine whether the SysTick has already counted to zero. */
 707:Middlewares/FreeRTOS/portable/port.c ****             if( ( portNVIC_SYSTICK_CTRL_REG & portNVIC_SYSTICK_COUNT_FLAG_BIT ) != 0 )
 708:Middlewares/FreeRTOS/portable/port.c ****             {
 709:Middlewares/FreeRTOS/portable/port.c ****                 uint32_t ulCalculatedLoadValue;
 710:Middlewares/FreeRTOS/portable/port.c **** 
 711:Middlewares/FreeRTOS/portable/port.c ****                 /* The tick interrupt ended the sleep (or is now pending), and
 712:Middlewares/FreeRTOS/portable/port.c ****                  * a new tick period has started.  Reset portNVIC_SYSTICK_LOAD_REG
 713:Middlewares/FreeRTOS/portable/port.c ****                  * with whatever remains of the new tick period. */
 714:Middlewares/FreeRTOS/portable/port.c ****                 ulCalculatedLoadValue = ( ulTimerCountsForOneTick - 1UL ) - ( ulReloadValue - portN
 715:Middlewares/FreeRTOS/portable/port.c **** 
 716:Middlewares/FreeRTOS/portable/port.c ****                 /* Don't allow a tiny value, or values that have somehow
 717:Middlewares/FreeRTOS/portable/port.c ****                  * underflowed because the post sleep hook did something
 718:Middlewares/FreeRTOS/portable/port.c ****                  * that took too long or because the SysTick current-value register
 719:Middlewares/FreeRTOS/portable/port.c ****                  * is zero. */
 720:Middlewares/FreeRTOS/portable/port.c ****                 if( ( ulCalculatedLoadValue <= ulStoppedTimerCompensation ) || ( ulCalculatedLoadVa
 721:Middlewares/FreeRTOS/portable/port.c ****                 {
 722:Middlewares/FreeRTOS/portable/port.c ****                     ulCalculatedLoadValue = ( ulTimerCountsForOneTick - 1UL );
 723:Middlewares/FreeRTOS/portable/port.c ****                 }
 724:Middlewares/FreeRTOS/portable/port.c **** 
 725:Middlewares/FreeRTOS/portable/port.c ****                 portNVIC_SYSTICK_LOAD_REG = ulCalculatedLoadValue;
 726:Middlewares/FreeRTOS/portable/port.c **** 
 727:Middlewares/FreeRTOS/portable/port.c ****                 /* As the pending tick will be processed as soon as this
 728:Middlewares/FreeRTOS/portable/port.c ****                  * function exits, the tick value maintained by the tick is stepped
 729:Middlewares/FreeRTOS/portable/port.c ****                  * forward by one less than the time spent waiting. */
 730:Middlewares/FreeRTOS/portable/port.c ****                 ulCompleteTickPeriods = xExpectedIdleTime - 1UL;
 731:Middlewares/FreeRTOS/portable/port.c ****             }
 732:Middlewares/FreeRTOS/portable/port.c ****             else
 733:Middlewares/FreeRTOS/portable/port.c ****             {
 734:Middlewares/FreeRTOS/portable/port.c ****                 /* Something other than the tick interrupt ended the sleep. */
 735:Middlewares/FreeRTOS/portable/port.c **** 
 736:Middlewares/FreeRTOS/portable/port.c ****                 /* Use the SysTick current-value register to determine the
 737:Middlewares/FreeRTOS/portable/port.c ****                  * number of SysTick decrements remaining until the expected idle
 738:Middlewares/FreeRTOS/portable/port.c ****                  * time would have ended. */
 739:Middlewares/FreeRTOS/portable/port.c ****                 ulSysTickDecrementsLeft = portNVIC_SYSTICK_CURRENT_VALUE_REG;
 740:Middlewares/FreeRTOS/portable/port.c ****                 #if ( portNVIC_SYSTICK_CLK_BIT_CONFIG != portNVIC_SYSTICK_CLK_BIT )
 741:Middlewares/FreeRTOS/portable/port.c ****                 {
 742:Middlewares/FreeRTOS/portable/port.c ****                     /* If the SysTick is not using the core clock, the current-
 743:Middlewares/FreeRTOS/portable/port.c ****                      * value register might still be zero here.  In that case, the
 744:Middlewares/FreeRTOS/portable/port.c ****                      * SysTick didn't load from the reload register, and there are
 745:Middlewares/FreeRTOS/portable/port.c ****                      * ulReloadValue decrements remaining in the expected idle
 746:Middlewares/FreeRTOS/portable/port.c ****                      * time, not zero. */
 747:Middlewares/FreeRTOS/portable/port.c ****                     if( ulSysTickDecrementsLeft == 0 )
 748:Middlewares/FreeRTOS/portable/port.c ****                     {
 749:Middlewares/FreeRTOS/portable/port.c ****                         ulSysTickDecrementsLeft = ulReloadValue;
ARM GAS  /tmp/cc7Fx2aC.s 			page 30


 750:Middlewares/FreeRTOS/portable/port.c ****                     }
 751:Middlewares/FreeRTOS/portable/port.c ****                 }
 752:Middlewares/FreeRTOS/portable/port.c ****                 #endif /* portNVIC_SYSTICK_CLK_BIT_CONFIG */
 753:Middlewares/FreeRTOS/portable/port.c **** 
 754:Middlewares/FreeRTOS/portable/port.c ****                 /* Work out how long the sleep lasted rounded to complete tick
 755:Middlewares/FreeRTOS/portable/port.c ****                  * periods (not the ulReload value which accounted for part
 756:Middlewares/FreeRTOS/portable/port.c ****                  * ticks). */
 757:Middlewares/FreeRTOS/portable/port.c ****                 ulCompletedSysTickDecrements = ( xExpectedIdleTime * ulTimerCountsForOneTick ) - ul
 758:Middlewares/FreeRTOS/portable/port.c **** 
 759:Middlewares/FreeRTOS/portable/port.c ****                 /* How many complete tick periods passed while the processor
 760:Middlewares/FreeRTOS/portable/port.c ****                  * was waiting? */
 761:Middlewares/FreeRTOS/portable/port.c ****                 ulCompleteTickPeriods = ulCompletedSysTickDecrements / ulTimerCountsForOneTick;
 762:Middlewares/FreeRTOS/portable/port.c **** 
 763:Middlewares/FreeRTOS/portable/port.c ****                 /* The reload value is set to whatever fraction of a single tick
 764:Middlewares/FreeRTOS/portable/port.c ****                  * period remains. */
 765:Middlewares/FreeRTOS/portable/port.c ****                 portNVIC_SYSTICK_LOAD_REG = ( ( ulCompleteTickPeriods + 1UL ) * ulTimerCountsForOne
 766:Middlewares/FreeRTOS/portable/port.c ****             }
 767:Middlewares/FreeRTOS/portable/port.c **** 
 768:Middlewares/FreeRTOS/portable/port.c ****             /* Restart SysTick so it runs from portNVIC_SYSTICK_LOAD_REG again,
 769:Middlewares/FreeRTOS/portable/port.c ****              * then set portNVIC_SYSTICK_LOAD_REG back to its standard value.  If
 770:Middlewares/FreeRTOS/portable/port.c ****              * the SysTick is not using the core clock, temporarily configure it to
 771:Middlewares/FreeRTOS/portable/port.c ****              * use the core clock.  This configuration forces the SysTick to load
 772:Middlewares/FreeRTOS/portable/port.c ****              * from portNVIC_SYSTICK_LOAD_REG immediately instead of at the next
 773:Middlewares/FreeRTOS/portable/port.c ****              * cycle of the other clock.  Then portNVIC_SYSTICK_LOAD_REG is ready
 774:Middlewares/FreeRTOS/portable/port.c ****              * to receive the standard value immediately. */
 775:Middlewares/FreeRTOS/portable/port.c ****             portNVIC_SYSTICK_CURRENT_VALUE_REG = 0UL;
 776:Middlewares/FreeRTOS/portable/port.c ****             portNVIC_SYSTICK_CTRL_REG = portNVIC_SYSTICK_CLK_BIT | portNVIC_SYSTICK_INT_BIT | portN
 777:Middlewares/FreeRTOS/portable/port.c ****             #if ( portNVIC_SYSTICK_CLK_BIT_CONFIG == portNVIC_SYSTICK_CLK_BIT )
 778:Middlewares/FreeRTOS/portable/port.c ****             {
 779:Middlewares/FreeRTOS/portable/port.c ****                 portNVIC_SYSTICK_LOAD_REG = ulTimerCountsForOneTick - 1UL;
 780:Middlewares/FreeRTOS/portable/port.c ****             }
 781:Middlewares/FreeRTOS/portable/port.c ****             #else
 782:Middlewares/FreeRTOS/portable/port.c ****             {
 783:Middlewares/FreeRTOS/portable/port.c ****                 /* The temporary usage of the core clock has served its purpose,
 784:Middlewares/FreeRTOS/portable/port.c ****                  * as described above.  Resume usage of the other clock. */
 785:Middlewares/FreeRTOS/portable/port.c ****                 portNVIC_SYSTICK_CTRL_REG = portNVIC_SYSTICK_CLK_BIT | portNVIC_SYSTICK_INT_BIT;
 786:Middlewares/FreeRTOS/portable/port.c **** 
 787:Middlewares/FreeRTOS/portable/port.c ****                 if( ( portNVIC_SYSTICK_CTRL_REG & portNVIC_SYSTICK_COUNT_FLAG_BIT ) != 0 )
 788:Middlewares/FreeRTOS/portable/port.c ****                 {
 789:Middlewares/FreeRTOS/portable/port.c ****                     /* The partial tick period already ended.  Be sure the SysTick
 790:Middlewares/FreeRTOS/portable/port.c ****                      * counts it only once. */
 791:Middlewares/FreeRTOS/portable/port.c ****                     portNVIC_SYSTICK_CURRENT_VALUE_REG = 0;
 792:Middlewares/FreeRTOS/portable/port.c ****                 }
 793:Middlewares/FreeRTOS/portable/port.c **** 
 794:Middlewares/FreeRTOS/portable/port.c ****                 portNVIC_SYSTICK_LOAD_REG = ulTimerCountsForOneTick - 1UL;
 795:Middlewares/FreeRTOS/portable/port.c ****                 portNVIC_SYSTICK_CTRL_REG = portNVIC_SYSTICK_CLK_BIT_CONFIG | portNVIC_SYSTICK_INT_
 796:Middlewares/FreeRTOS/portable/port.c ****             }
 797:Middlewares/FreeRTOS/portable/port.c ****             #endif /* portNVIC_SYSTICK_CLK_BIT_CONFIG */
 798:Middlewares/FreeRTOS/portable/port.c **** 
 799:Middlewares/FreeRTOS/portable/port.c ****             /* Step the tick to account for any tick periods that elapsed. */
 800:Middlewares/FreeRTOS/portable/port.c ****             vTaskStepTick( ulCompleteTickPeriods );
 801:Middlewares/FreeRTOS/portable/port.c **** 
 802:Middlewares/FreeRTOS/portable/port.c ****             /* Exit with interrupts enabled. */
 803:Middlewares/FreeRTOS/portable/port.c ****             __asm volatile ( "cpsie i" ::: "memory" );
 804:Middlewares/FreeRTOS/portable/port.c ****         }
 805:Middlewares/FreeRTOS/portable/port.c ****     }
 806:Middlewares/FreeRTOS/portable/port.c **** 
ARM GAS  /tmp/cc7Fx2aC.s 			page 31


 807:Middlewares/FreeRTOS/portable/port.c **** #endif /* #if configUSE_TICKLESS_IDLE */
 808:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 809:Middlewares/FreeRTOS/portable/port.c **** 
 810:Middlewares/FreeRTOS/portable/port.c **** /*
 811:Middlewares/FreeRTOS/portable/port.c ****  * Setup the systick timer to generate the tick interrupts at the required
 812:Middlewares/FreeRTOS/portable/port.c ****  * frequency.
 813:Middlewares/FreeRTOS/portable/port.c ****  */
 814:Middlewares/FreeRTOS/portable/port.c **** __attribute__( ( weak ) ) void vPortSetupTimerInterrupt( void )
 815:Middlewares/FreeRTOS/portable/port.c **** {
 667              		.loc 1 815 1
 668              		.cfi_startproc
 669              		@ args = 0, pretend = 0, frame = 0
 670              		@ frame_needed = 1, uses_anonymous_args = 0
 671              		@ link register save eliminated.
 672 0000 80B4     		push	{r7}
 673              		.cfi_def_cfa_offset 4
 674              		.cfi_offset 7, -4
 675 0002 00AF     		add	r7, sp, #0
 676              		.cfi_def_cfa_register 7
 816:Middlewares/FreeRTOS/portable/port.c ****     /* Calculate the constants required to configure the tick interrupt. */
 817:Middlewares/FreeRTOS/portable/port.c ****     #if ( configUSE_TICKLESS_IDLE == 1 )
 818:Middlewares/FreeRTOS/portable/port.c ****     {
 819:Middlewares/FreeRTOS/portable/port.c ****         ulTimerCountsForOneTick = ( configSYSTICK_CLOCK_HZ / configTICK_RATE_HZ );
 820:Middlewares/FreeRTOS/portable/port.c ****         xMaximumPossibleSuppressedTicks = portMAX_24_BIT_NUMBER / ulTimerCountsForOneTick;
 821:Middlewares/FreeRTOS/portable/port.c ****         ulStoppedTimerCompensation = portMISSED_COUNTS_FACTOR / ( configCPU_CLOCK_HZ / configSYSTIC
 822:Middlewares/FreeRTOS/portable/port.c ****     }
 823:Middlewares/FreeRTOS/portable/port.c ****     #endif /* configUSE_TICKLESS_IDLE */
 824:Middlewares/FreeRTOS/portable/port.c **** 
 825:Middlewares/FreeRTOS/portable/port.c ****     /* Stop and clear the SysTick. */
 826:Middlewares/FreeRTOS/portable/port.c ****     portNVIC_SYSTICK_CTRL_REG = 0UL;
 677              		.loc 1 826 5
 678 0004 0B4B     		ldr	r3, .L28
 679              		.loc 1 826 31
 680 0006 0022     		movs	r2, #0
 681 0008 1A60     		str	r2, [r3]
 827:Middlewares/FreeRTOS/portable/port.c ****     portNVIC_SYSTICK_CURRENT_VALUE_REG = 0UL;
 682              		.loc 1 827 5
 683 000a 0B4B     		ldr	r3, .L28+4
 684              		.loc 1 827 40
 685 000c 0022     		movs	r2, #0
 686 000e 1A60     		str	r2, [r3]
 828:Middlewares/FreeRTOS/portable/port.c **** 
 829:Middlewares/FreeRTOS/portable/port.c ****     /* Configure SysTick to interrupt at the requested rate. */
 830:Middlewares/FreeRTOS/portable/port.c ****     portNVIC_SYSTICK_LOAD_REG = ( configSYSTICK_CLOCK_HZ / configTICK_RATE_HZ ) - 1UL;
 687              		.loc 1 830 58
 688 0010 0A4B     		ldr	r3, .L28+8
 689 0012 1B68     		ldr	r3, [r3]
 690 0014 0A4A     		ldr	r2, .L28+12
 691 0016 A2FB0323 		umull	r2, r3, r2, r3
 692 001a 9B09     		lsrs	r3, r3, #6
 693              		.loc 1 830 5
 694 001c 094A     		ldr	r2, .L28+16
 695              		.loc 1 830 81
 696 001e 013B     		subs	r3, r3, #1
 697              		.loc 1 830 31
 698 0020 1360     		str	r3, [r2]
 831:Middlewares/FreeRTOS/portable/port.c ****     portNVIC_SYSTICK_CTRL_REG = ( portNVIC_SYSTICK_CLK_BIT_CONFIG | portNVIC_SYSTICK_INT_BIT | port
ARM GAS  /tmp/cc7Fx2aC.s 			page 32


 699              		.loc 1 831 5
 700 0022 044B     		ldr	r3, .L28
 701              		.loc 1 831 31
 702 0024 0722     		movs	r2, #7
 703 0026 1A60     		str	r2, [r3]
 832:Middlewares/FreeRTOS/portable/port.c **** }
 704              		.loc 1 832 1
 705 0028 00BF     		nop
 706 002a BD46     		mov	sp, r7
 707              		.cfi_def_cfa_register 13
 708              		@ sp needed
 709 002c 5DF8047B 		ldr	r7, [sp], #4
 710              		.cfi_restore 7
 711              		.cfi_def_cfa_offset 0
 712 0030 7047     		bx	lr
 713              	.L29:
 714 0032 00BF     		.align	2
 715              	.L28:
 716 0034 10E000E0 		.word	-536813552
 717 0038 18E000E0 		.word	-536813544
 718 003c 00000000 		.word	SystemCoreClock
 719 0040 D34D6210 		.word	274877907
 720 0044 14E000E0 		.word	-536813548
 721              		.cfi_endproc
 722              	.LFE14:
 724              		.section	.text.vPortEnableVFP,"ax",%progbits
 725              		.align	1
 726              		.syntax unified
 727              		.thumb
 728              		.thumb_func
 730              	vPortEnableVFP:
 731              	.LFB15:
 833:Middlewares/FreeRTOS/portable/port.c **** /*-----------------------------------------------------------*/
 834:Middlewares/FreeRTOS/portable/port.c **** 
 835:Middlewares/FreeRTOS/portable/port.c **** /* This is a naked function. */
 836:Middlewares/FreeRTOS/portable/port.c **** static void vPortEnableVFP( void )
 837:Middlewares/FreeRTOS/portable/port.c **** {
 732              		.loc 1 837 1
 733              		.cfi_startproc
 734              		@ Naked Function: prologue and epilogue provided by programmer.
 735              		@ args = 0, pretend = 0, frame = 0
 736              		@ frame_needed = 1, uses_anonymous_args = 0
 838:Middlewares/FreeRTOS/portable/port.c ****     __asm volatile
 737              		.loc 1 838 5
 738              		.syntax unified
 739              	@ 838 "Middlewares/FreeRTOS/portable/port.c" 1
 740 0000 DFF80C00 		   ldr.w r0, =0xE000ED88       
 741 0004 0168     	   ldr r1, [r0]                
 742              	                               
 743 0006 41F47001 	   orr r1, r1, #( 0xf << 20 )  
 744 000a 0160     	   str r1, [r0]                
 745 000c 7047     	   bx r14                      
 746 000e 000088ED 	   .ltorg                      
 746      00E0
 747              	
 748              	@ 0 "" 2
 839:Middlewares/FreeRTOS/portable/port.c ****     (
ARM GAS  /tmp/cc7Fx2aC.s 			page 33


 840:Middlewares/FreeRTOS/portable/port.c ****         "   ldr.w r0, =0xE000ED88       \n" /* The FPU enable bits are in the CPACR. */
 841:Middlewares/FreeRTOS/portable/port.c ****         "   ldr r1, [r0]                \n"
 842:Middlewares/FreeRTOS/portable/port.c ****         "                               \n"
 843:Middlewares/FreeRTOS/portable/port.c ****         "   orr r1, r1, #( 0xf << 20 )  \n" /* Enable CP10 and CP11 coprocessors, then save back. *
 844:Middlewares/FreeRTOS/portable/port.c ****         "   str r1, [r0]                \n"
 845:Middlewares/FreeRTOS/portable/port.c ****         "   bx r14                      \n"
 846:Middlewares/FreeRTOS/portable/port.c ****         "   .ltorg                      \n"
 847:Middlewares/FreeRTOS/portable/port.c ****     );
 848:Middlewares/FreeRTOS/portable/port.c **** }
 749              		.loc 1 848 1
 750              		.thumb
 751              		.syntax unified
 752 0014 00BF     		nop
 753              		.cfi_endproc
 754              	.LFE15:
 756 0016 00BF     		.text
 757              	.Letext0:
 758              		.file 3 "/usr/lib/gcc/arm-none-eabi/13.2.1/include/stdint.h"
 759              		.file 4 "Middlewares/FreeRTOS/include/projdefs.h"
 760              		.file 5 "Middlewares/FreeRTOS/FreeRTOSConfig.h"
 761              		.file 6 "Middlewares/FreeRTOS/include/task.h"
ARM GAS  /tmp/cc7Fx2aC.s 			page 34


DEFINED SYMBOLS
                            *ABS*:00000000 port.c
     /tmp/cc7Fx2aC.s:21     .data.uxCriticalNesting:00000000 $d
     /tmp/cc7Fx2aC.s:24     .data.uxCriticalNesting:00000000 uxCriticalNesting
     /tmp/cc7Fx2aC.s:27     .text.pxPortInitialiseStack:00000000 $t
     /tmp/cc7Fx2aC.s:33     .text.pxPortInitialiseStack:00000000 pxPortInitialiseStack
     /tmp/cc7Fx2aC.s:115    .text.pxPortInitialiseStack:00000064 $d
     /tmp/cc7Fx2aC.s:125    .text.prvTaskExitError:00000000 prvTaskExitError
     /tmp/cc7Fx2aC.s:120    .text.prvTaskExitError:00000000 $t
     /tmp/cc7Fx2aC.s:184    .text.SVC_Handler:00000000 $t
     /tmp/cc7Fx2aC.s:190    .text.SVC_Handler:00000000 SVC_Handler
     /tmp/cc7Fx2aC.s:211    .text.SVC_Handler:00000020 pxCurrentTCBConst2
     /tmp/cc7Fx2aC.s:211    .text.SVC_Handler:00000020 $d
     /tmp/cc7Fx2aC.s:217    .text.SVC_Handler:00000024 $t
     /tmp/cc7Fx2aC.s:222    .text.prvPortStartFirstTask:00000000 $t
     /tmp/cc7Fx2aC.s:227    .text.prvPortStartFirstTask:00000000 prvPortStartFirstTask
     /tmp/cc7Fx2aC.s:249    .text.prvPortStartFirstTask:00000022 $d
     /tmp/cc7Fx2aC.s:249    .text.prvPortStartFirstTask:00000024 $d
     /tmp/cc7Fx2aC.s:255    .text.prvPortStartFirstTask:00000028 $t
     /tmp/cc7Fx2aC.s:260    .text.xPortStartScheduler:00000000 $t
     /tmp/cc7Fx2aC.s:266    .text.xPortStartScheduler:00000000 xPortStartScheduler
     /tmp/cc7Fx2aC.s:665    .text.vPortSetupTimerInterrupt:00000000 vPortSetupTimerInterrupt
     /tmp/cc7Fx2aC.s:730    .text.vPortEnableVFP:00000000 vPortEnableVFP
     /tmp/cc7Fx2aC.s:340    .text.xPortStartScheduler:0000005c $d
     /tmp/cc7Fx2aC.s:349    .text.vPortEndScheduler:00000000 $t
     /tmp/cc7Fx2aC.s:355    .text.vPortEndScheduler:00000000 vPortEndScheduler
     /tmp/cc7Fx2aC.s:380    .text.vPortEnterCritical:00000000 $t
     /tmp/cc7Fx2aC.s:386    .text.vPortEnterCritical:00000000 vPortEnterCritical
     /tmp/cc7Fx2aC.s:438    .text.vPortEnterCritical:00000030 $d
     /tmp/cc7Fx2aC.s:443    .text.vPortExitCritical:00000000 $t
     /tmp/cc7Fx2aC.s:449    .text.vPortExitCritical:00000000 vPortExitCritical
     /tmp/cc7Fx2aC.s:506    .text.vPortExitCritical:00000030 $d
     /tmp/cc7Fx2aC.s:511    .text.PendSV_Handler:00000000 $t
     /tmp/cc7Fx2aC.s:517    .text.PendSV_Handler:00000000 PendSV_Handler
     /tmp/cc7Fx2aC.s:566    .text.PendSV_Handler:00000060 pxCurrentTCBConst
     /tmp/cc7Fx2aC.s:566    .text.PendSV_Handler:00000060 $d
     /tmp/cc7Fx2aC.s:572    .text.PendSV_Handler:00000064 $t
     /tmp/cc7Fx2aC.s:577    .text.SysTick_Handler:00000000 $t
     /tmp/cc7Fx2aC.s:583    .text.SysTick_Handler:00000000 SysTick_Handler
     /tmp/cc7Fx2aC.s:654    .text.SysTick_Handler:00000040 $d
     /tmp/cc7Fx2aC.s:659    .text.vPortSetupTimerInterrupt:00000000 $t
     /tmp/cc7Fx2aC.s:716    .text.vPortSetupTimerInterrupt:00000034 $d
     /tmp/cc7Fx2aC.s:725    .text.vPortEnableVFP:00000000 $t
     /tmp/cc7Fx2aC.s:746    .text.vPortEnableVFP:0000000e $d
     /tmp/cc7Fx2aC.s:746    .text.vPortEnableVFP:00000010 $d
     /tmp/cc7Fx2aC.s:752    .text.vPortEnableVFP:00000014 $t
                           .group:00000000 wm4.0.e7b64c2c371cf922f2c8028878d5c18e
                           .group:00000000 wm4.stddef.h.39.0dc9006b34572d4d9cae4c8b422c4971
                           .group:00000000 wm4.stdint.h.29.6d480f4ba0f60596e88234283d42444f
                           .group:00000000 wm4.FreeRTOS.h.59.647b1b0da38e4e98108aae13c8abe9ee
                           .group:00000000 wm4.FreeRTOSConfig.h.3.1bc113985a1c518a5550f81e20536102
                           .group:00000000 wm4.FreeRTOS.h.80.9a03152afd9cd416d9ab2abfdad37c9b
                           .group:00000000 wm4.projdefs.h.30.aa35d7b594916c060d2a891e32dea137
                           .group:00000000 wm4.portmacro.h.31.e33b7e559875bcc469c70605da17b58f
                           .group:00000000 wm4.portable.h.61.05b23d6f46f623c8ade29ce5eacb329c
                           .group:00000000 wm4.mpu_wrappers.h.30.5ad41bb447b8a1fc377f3ff5365e3b43
                           .group:00000000 wm4.portable.h.193.36e79dfed0030429d07d873c91c7277e
ARM GAS  /tmp/cc7Fx2aC.s 			page 35


                           .group:00000000 wm4.FreeRTOS.h.111.6daad733ba046b297d537354d32aec60
                           .group:00000000 wm4.list.h.59.51b351582e53f1c2c45529a43c6ffaaf
                           .group:00000000 wm4.task.h.56.6d40654270ebd8aede87d7ae52c162f1

UNDEFINED SYMBOLS
pxCurrentTCB
vTaskSwitchContext
xTaskIncrementTick
SystemCoreClock
